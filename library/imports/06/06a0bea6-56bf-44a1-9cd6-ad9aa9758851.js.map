{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIChouJiangLog.js"],"names":["app","require","cc","Class","extends","properties","layoutNode","Node","scrollView","ScrollView","prefab","Prefab","OnCreateInit","OnShow","serverPack","ShowLog","luckDraws","stopAutoScroll","scrollToTop","DestroyAllChildren","i","length","logNode","instantiate","name","id","toString","luckData","timeStr","ComTool","GetDateYearMonthDayHourMinuteString","timestamp","prizeStr","prizeType","rewardNum","getChildByName","getComponent","Label","string","active","addChild","OnEvent_ConnectSuccess","event","Event_LingQuNtf","OnLingQuClick","OnClick","btnName","eventData","CloseForm","ErrLog"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,oBAAWJ,GAAGK,IADN;AAERC,oBAAWN,GAAGO,UAFN;AAGRC,gBAAOR,GAAGS;AAHF,KAHP;;AASL;AACAC,kBAAa,wBAAU;AACnB;AACA;AACH,KAbI;;AAeL;;AAEAC,YAAO,gBAASC,UAAT,EAAoB;AACxB,aAAKC,OAAL,CAAaD,UAAb;AACF,KAnBI;AAoBLC,aAAQ,iBAASC,SAAT,EAAmB;AACvB,aAAKR,UAAL,CAAgBS,cAAhB;AACA,aAAKT,UAAL,CAAgBU,WAAhB;AACA;AACA,aAAKC,kBAAL,CAAwB,KAAKb,UAA7B;AACA,aAAI,IAAIc,IAAE,CAAV,EAAYA,IAAEJ,UAAUK,MAAxB,EAA+BD,GAA/B,EAAmC;AAC/B,gBAAIE,UAAUpB,GAAGqB,WAAH,CAAe,KAAKb,MAApB,CAAd;AACAY,oBAAQE,IAAR,GAAeR,UAAUI,CAAV,EAAaK,EAAb,CAAgBC,QAAhB,EAAf;AACAJ,oBAAQK,QAAR,GAAmBX,UAAUI,CAAV,CAAnB;AACA,gBAAIQ,UAAU5B,IAAI6B,OAAJ,GAAcC,mCAAd,CAAkDd,UAAUI,CAAV,EAAaW,SAA/D,CAAd;AACA,gBAAIC,WAAW,EAAf;AACA,gBAAIhB,UAAUI,CAAV,EAAaa,SAAb,IAA0B,CAA9B,EAAiC;AAC7BD,2BAAWhB,UAAUI,CAAV,EAAac,SAAb,GAAyB,KAApC;AACH,aAFD,MAEM,IAAIlB,UAAUI,CAAV,EAAaa,SAAb,IAA0B,CAA9B,EAAiC;AACnCD,2BAAWhB,UAAUI,CAAV,EAAac,SAAb,GAAyB,KAApC;AACH,aAFK,MAEA,IAAIlB,UAAUI,CAAV,EAAaa,SAAb,IAA0B,CAA9B,EAAiC;AACnCD,2BAAWhB,UAAUI,CAAV,EAAac,SAAb,GAAyB,KAApC;AACH;AACDZ,oBAAQa,cAAR,CAAuB,QAAvB,EAAiCC,YAAjC,CAA8ClC,GAAGmC,KAAjD,EAAwDC,MAAxD,GAAiEN,QAAjE;AACAV,oBAAQa,cAAR,CAAuB,SAAvB,EAAkCC,YAAlC,CAA+ClC,GAAGmC,KAAlD,EAAyDC,MAAzD,GAAkEV,OAAlE;AACA;AACA;AACA;AACA;AACA;AACA;AACAN,oBAAQiB,MAAR,GAAe,IAAf;AACA,iBAAKjC,UAAL,CAAgBkC,QAAhB,CAAyBlB,OAAzB;AACH;AACD,aAAKd,UAAL,CAAgBU,WAAhB;AACH,KAlDI;AAmDLuB,4BAAuB,gCAASC,KAAT,EAAe;AAClC;AACA;AACA;AACA;AACA;AACH,KAzDI;AA0DLC,qBAAgB,yBAASD,KAAT,EAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KArEI;AAsEL;AACAE,mBAAc,uBAASF,KAAT,EAAe;AACzB;AACA;AACA;AACA;AACH,KA5EI;AA6ERG,aAAQ,iBAASC,OAAT,EAAkBC,SAAlB,EAA4B;AACnC,YAAGD,WAAW,WAAd,EAA0B;AAChB,iBAAKE,SAAL;AACT,SAFD,MAGI;AACH,iBAAKC,MAAL,CAAY,qBAAZ,EAAmCH,OAAnC;AACA;AACD;AApFO,CAAT","file":"UIChouJiangLog.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        layoutNode:cc.Node,\n        scrollView:cc.ScrollView,\n        prefab:cc.Prefab,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        // this.RegEvent(\"OnChouJiangLingQu\", this.Event_LingQuNtf);\n        // this.RegEvent(\"ConnectSuccess\", this.OnEvent_ConnectSuccess);\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(serverPack){\n       this.ShowLog(serverPack);\n    },\n    ShowLog:function(luckDraws){\n        this.scrollView.stopAutoScroll();\n        this.scrollView.scrollToTop();\n        //this.layoutNode.removeAllChildren();\n        this.DestroyAllChildren(this.layoutNode);\n        for(let i=0;i<luckDraws.length;i++){\n            let logNode = cc.instantiate(this.prefab);\n            logNode.name = luckDraws[i].id.toString();\n            logNode.luckData = luckDraws[i];\n            let timeStr = app.ComTool().GetDateYearMonthDayHourMinuteString(luckDraws[i].timestamp);\n            let prizeStr = \"\";\n            if (luckDraws[i].prizeType == 1) {\n                prizeStr = luckDraws[i].rewardNum + \"个乐豆\";\n            }else if (luckDraws[i].prizeType == 2) {\n                prizeStr = luckDraws[i].rewardNum + \"个钻石\";\n            }else if (luckDraws[i].prizeType == 8) {\n                prizeStr = luckDraws[i].rewardNum + \"元红包\";\n            }\n            logNode.getChildByName('lb_num').getComponent(cc.Label).string = prizeStr;\n            logNode.getChildByName('lb_time').getComponent(cc.Label).string = timeStr;\n            // let btn_lingqu = logNode.getChildByName('btn_lingqu');\n            // if(1 == luckDraws[i].state)\n            //     btn_lingqu.active = true;\n            // else\n            //     btn_lingqu.active = false;\n            // btn_lingqu.on('click',this.OnLingQuClick,this);\n            logNode.active=true;\n            this.layoutNode.addChild(logNode);\n        }\n        this.scrollView.scrollToTop();\n    },\n    OnEvent_ConnectSuccess:function(event){\n        // let that = this;\n        // app.NetManager().SendPack(\"game.CPlayerLuckDraw\",{\"type\":3}, function(event){\n        //     let luckDraws=event.luckDraws;\n        //     that.ShowLog(luckDraws);\n        // }, function(){});\n    },\n    Event_LingQuNtf:function(event){\n        // let lqList = event.detail.recordIdList;\n        // let childs = this.layoutNode.children;\n        // for(let i=0;i<lqList.length;i++){\n        //     for(let j=0;j<childs.length;j++){\n        //         if(lqList[i] == parseInt(childs[j].name)){\n        //             childs[j].getChildByName('btn_lingqu').active = false;\n        //             break;\n        //         }\n        //     }\n        // }\n    },\n    //---------点击函数---------------------\n    OnLingQuClick:function(event){\n        // let id = parseInt(event.target.parent.name);\n        // app.NetManager().SendPack(\"game.CPlayerLuckDraw\",{\"type\":8,\"recordId\":id});\n        //event.target.active = false;\n        // this.FormManager.ShowForm('UIChouJiangResult',event.target.parent.luckData,true);\n    },\n\tOnClick:function(btnName, eventData){\n\t\tif(btnName == \"btn_close\"){\n            this.CloseForm();\n\t\t}\n\t\telse{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}