{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club/assets\\script\\ui\\club\\UIPromoterXIaShuAdd.js"],"names":["app","require","cc","Class","extends","properties","editbox","EditBox","OnCreateInit","WeChatManager","NetManager","OnShow","clubId","isShowSelectUser","node","getChildByName","active","string","ShowUser","data","usernode","heroID","player","headImageUrl","getComponent","Label","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","InitHeroHeadImage","OnLoad","ShowHeroHead","type","SysNotifyManager","ShowSysMsg","click_btn_search","shuru","GetBeiZhuID","isNaN","parseInt","StrIsNumInt","self","SendPack","serverPack","error","click_btn_add","Toggle","isChecked","sendPack","that","success","OnClick","btnName","btnNode","CloseForm","OnClose"],"mappings":"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","file":"UIPromoterXIaShuAdd.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n       editbox:cc.EditBox,\n    },\n\n    OnCreateInit: function () {\n        this.WeChatManager=app.WeChatManager();\n        this.NetManager=app.NetManager();\n    },\n    //--------------显示函数-----------------\n    OnShow: function (clubId,isShowSelectUser) {\n        this.clubId=clubId;\n        this.isShowSelectUser=isShowSelectUser;\n        if(isShowSelectUser){\n            this.node.getChildByName(\"ToggleContainer\").active=true;\n        }else{\n            this.node.getChildByName(\"ToggleContainer\").active=false;\n        }\n        this.node.getChildByName('user').active=false;\n        this.node.getChildByName('btn_yaoqing').active=false;\n        this.editbox.string = \"\";\n    },\n    ShowUser:function(data){\n        let usernode=this.node.getChildByName('user');\n        usernode.active=true;\n        let heroID = data.player[\"pid\"];\n        usernode.heroID=heroID;\n        let headImageUrl = data.player[\"iconUrl\"];\n        usernode.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(heroID,data.player.name);\n        usernode.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        let WeChatHeadImage = usernode.getChildByName('head').getComponent(\"WeChatHeadImage\");\n         //用户头像创建\n        if(heroID && headImageUrl){\n            this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n        }\n        WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n\n        if(data.type==0){\n            this.node.getChildByName('btn_yaoqing').active=true;\n        }else{\n            this.node.getChildByName('btn_yaoqing').active=false;\n            if (data.type == 1) {\n                app.SysNotifyManager().ShowSysMsg(\"该玩家已经加入该亲友圈\", [], 3);\n            }else if (data.type == 2) {\n                app.SysNotifyManager().ShowSysMsg(\"该玩家已经绑定了推广员\", [], 3);\n            }\n        }\n    },\n    click_btn_search:function(){\n        let shuru=this.ComTool.GetBeiZhuID(this.editbox.string);\n        if(isNaN(parseInt(shuru)) || !app.ComTool().StrIsNumInt(shuru)){\n            app.SysNotifyManager().ShowSysMsg(\"请输入纯数字的玩家id\", [], 3);\n            return;\n        }\n        let self=this;\n        app.NetManager().SendPack('club.CClubSubordinateLevelPidInfo',{'clubId':this.clubId,\"pid\":shuru},function(serverPack){\n            self.ShowUser(serverPack);\n        },function(error){\n            \n        });\n    },\n    click_btn_add:function(){\n        let type=0;\n        if(this.isShowSelectUser){\n            if(this.node.getChildByName(\"ToggleContainer\").getChildByName(\"toggle2\").getComponent(cc.Toggle).isChecked==true){\n                type=1;\n            }\n        }\n        let sendPack={\n            \"clubId\":this.clubId,\n            \"pid\":this.node.getChildByName('user').heroID,\n            \"type\":type,\n        };\n        let that=this;\n        this.NetManager.SendPack(\"club.CClubSubordinateLevelPidAdd\", sendPack,function(success){\n            that.ShowSysMsg(\"操作成功\");\n        },function(error){\n            that.ShowSysMsg(\"已邀请或未找已邀请或未找到该玩家或同赛事不同亲友圈不能重复拉人到该玩家或距离退出该亲友圈不到10分钟\");\n        });\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n           this.CloseForm();\n        }else if('btn_search'==btnName){\n            this.click_btn_search();\n        }else if('btn_yaoqing'==btnName){\n            this.click_btn_add();\n        }\n    },\n    \n    OnClose:function(){\n        \n    },\n});"]}