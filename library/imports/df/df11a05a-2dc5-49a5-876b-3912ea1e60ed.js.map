{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\lib/assets\\script\\lib\\TestManager.js"],"names":["app","require","TestManager","BaseClass","extend","Init","JS_Name","ShareDefine","ComTool","IsRelease","IsDevelopment","gm","cmdString","NetManager","SendGMPack","setstart","serverPack","LYMJRoomMgr","OnPack_SetStart","setend","RoomMgr","room","GetEnterRoom","ErrLog","roomPosMgr","GetRoomPosMgr","allPlayerInfo","GetRoomAllPlayerInfo","posHuList","pos","playerInfo","pid","HuType","push","RandInt","setEnd","OnPack_SetEnd","roomend","HZRoomMgr","posInfo","roomEnd","OnPack_RoomEnd","StartVoteDissolve","startPos","endSec","Math","floor","Date","now","OnPack_StartVoteDissolve","PosDealVote","agreeDissolve","OnPack_PosDealVote","g_TestManager","exports","GetModel"],"mappings":"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","file":"TestManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\lib","sourcesContent":["/*\n * \tTestManager.js\n * \t测试\n *\n *\tauthor:cyh\n *\tdate:2017-01-09\n *\tversion:1.0\n *\n * 修改时间 修改人 修改内容:\n *\n *\n */\nvar app = require('app');\n\n\n/*\n * 类方法定义\n */\nvar TestManager = app.BaseClass.extend({\n\n\t/**\n\t *  初始化\n\t */\n\tInit: function () {\n\t\tthis.JS_Name = \"TestManager\";\n\t\tthis.ShareDefine = app.ShareDefine();\n\t\tthis.ComTool = app.ComTool();\n\t},\n\n\t//是否发布模式\n\tIsRelease:function(){\n\t\tif(this.ShareDefine.IsDevelopment){\n\t\t\treturn false\n\t\t}\n\t\treturn true\n\t},\n\n\n\t//发送GM命令\n\tgm:function(cmdString){\n\t\tapp.NetManager().SendGMPack(cmdString);\n\t},\n\n\tsetstart:function(){\n\n\t\tlet serverPack = {\n\t\t\t\"roomID\":151676,\n\t\t\t\"setInfo\":{\n\t\t\t\t\"dPos\":0,\n\t\t\t\t\"gangMoCnt\":0,\n\t\t\t\t\"leftMa\":2,\n\t\t\t\t\"normalMoCnt\":52,\n\t\t\t\t\"saizi\":[6,1],\n\t\t\t\t\"setEnd\":{\"maCardList\":[],\"posHuList\":[],\"zhongMa\":0},\n\t\t\t\t\"setID\":1,\n\t\t\t\t\"setPosList\":[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"handCard\":-1,\n\t\t\t\t\t\t\t\t\t\"huCard\":[],\n\t\t\t\t\t\t\t\t\t\"outCard\":[],\n\t\t\t\t\t\t\t\t\t\"posID\":0,\n\t\t\t\t\t\t\t\t\t\"publicCardList\":[],\n\t\t\t\t\t\t\t\t\t\"shouCard\":[1501,1702,1901,2302,2502,2504,2901,2902,3101,3104,3304,3803,3903]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"handCard\":-1,\n\t\t\t\t\t\t\t\t\t\"huCard\":[],\n\t\t\t\t\t\t\t\t\t\"outCard\":[],\n\t\t\t\t\t\t\t\t\t\"posID\":0,\n\t\t\t\t\t\t\t\t\t\"publicCardList\":[],\n\t\t\t\t\t\t\t\t\t\"shouCard\":[4502,1102,1302,1303,1404,1601,1701,2204,2404,3404,3604,3901,3904]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"handCard\":-1,\n\t\t\t\t\t\t\t\t\t\"huCard\":[],\n\t\t\t\t\t\t\t\t\t\"outCard\":[],\n\t\t\t\t\t\t\t\t\t\"posID\":0,\n\t\t\t\t\t\t\t\t\t\"publicCardList\":[],\n\t\t\t\t\t\t\t\t\t\"shouCard\":[1403,1703,1801,1803,1804,2304,2402,2604,2703,2801,2803,2903,3201]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"handCard\":-1,\n\t\t\t\t\t\t\t\t\t\"huCard\":[],\n\t\t\t\t\t\t\t\t\t\"outCard\":[],\n\t\t\t\t\t\t\t\t\t\"posID\":0,\n\t\t\t\t\t\t\t\t\t\"publicCardList\":[],\n\t\t\t\t\t\t\t\t\t\"shouCard\":[4504,1203,1301,1504,1704,1902,2202,2503,2702,3401,3501,3502,3703]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\"setRound\":{\n\t\t\t\t\t\"opPosList\":[{\"opCard\":0,\"opList\":[\"Out\"],\"opType\":8,\"waitOpPos\":0}],\n\t\t\t\t\t\"startWaitSec\":1489644417,\n\t\t\t\t\t\"waitID\":1,\n\t\t\t\t},\n\t\t\t\t\"startPaiDun\":1,\n\t\t\t\t\"startPaiPos\":2,\n\t\t\t\t\"state\":\"Init\",\n\t\t\t\t\"waitReciveCard\":0,\n\t\t\t}\n\t\t};\n\t\tapp.LYMJRoomMgr().OnPack_SetStart(serverPack);\n\t},\n\n\t//牌局结束\n\tsetend:function(){\n\n\t\tlet RoomMgr = app.LYMJRoomMgr();\n\t\tlet room = RoomMgr.GetEnterRoom();\n\t\tif(!room){\n\t\t\tthis.ErrLog(\"setend 没有进入房间\");\n\t\t\treturn\n\t\t}\n\t\tlet roomPosMgr = room.GetRoomPosMgr();\n\t\tlet allPlayerInfo = roomPosMgr.GetRoomAllPlayerInfo();\n\n\n\n\t\tlet posHuList = [];\n\t\tfor(let pos in allPlayerInfo){\n\t\t\tlet playerInfo = allPlayerInfo[pos];\n\t\t\tlet pid = playerInfo[\"pid\"];\n\t\t\tif(!pid){\n\t\t\t\tthis.ErrLog(\"pos:%s not player\", pos);\n\t\t\t}\n            let HuType = \"NotHu\";\n\t\t\tif(pos == 1){\n                HuType = \"QGH\";\n            }\n            if(pos == 2){\n               HuType = \"QGH\";\n            }\n\t\t\tposHuList.push({\n\t\t\t\t\t\t\t\"pos\":pos,\n\t\t\t\t\t\t\t\"huType\":HuType,\n\t\t\t\t\t\t\t\"point\":this.ComTool.RandInt(-400,1000),\n\t\t\t\t\t\t\t\"flashCnt\":this.ComTool.RandInt(0,10),\n\t\t\t\t\t\t\t\"shouCard\":[],\n\t\t\t\t\t\t\t\"handCard\":0,\n\t\t\t\t\t\t\t\"zhongMa\":100,\n\t\t\t\t\t\t\t\"maCardList\":[2101,1101,2201,2501,2901],\n\t\t\t\t\t\t}) ;\n\t\t}\n\n\n\t\tlet setEnd = {\n\t\t\t\t\t\t\"posHuList\":posHuList,\n\t\t\t\t\t};\n\t\tapp.LYMJRoomMgr().OnPack_SetEnd({\"roomID\":0,\"setEnd\":setEnd});\n\t},\n\n\t//房间结束\n\troomend:function(){\n\n\t\tlet HZRoomMgr = app.HZRoomMgr();\n\t\tlet room = HZRoomMgr.GetEnterRoom();\n\t\tif(!room){\n\t\t\tthis.ErrLog(\"roomend 没有进入房间\");\n\t\t\treturn\n\t\t}\n\n\t\tlet roomPosMgr = room.GetRoomPosMgr();\n\t\tlet allPlayerInfo = roomPosMgr.GetRoomAllPlayerInfo();\n\n\t\tlet posInfo = {};\n\t\tfor(let pos in allPlayerInfo){\n\t\t\tlet playerInfo = allPlayerInfo[pos];\n\t\t\tlet pid = playerInfo[\"pid\"];\n\t\t\tif(!pid){\n\t\t\t\tthis.ErrLog(\"pos:%s not player\", pos);\n\t\t\t}\n\n\t\t\tposInfo[pos] = {\n\t\t\t\t\t\t\t\"name\":playerInfo[\"name\"],\n\t\t\t\t\t\t\t\"pid\":playerInfo[\"pid\"],\n\t\t\t\t\t\t\t\"headImageUrl\":playerInfo[\"headImageUrl\"],\n\t\t\t\t\t\t\t\"huCnt\":this.ComTool.RandInt(0,10),\n\t\t\t\t\t\t\t\"zhongMaCnt\":this.ComTool.RandInt(0,10),\n\t\t\t\t\t\t\t\"flashCnt\":this.ComTool.RandInt(0,50),\n\t\t\t\t\t\t\t\"point\":this.ComTool.RandInt(0,1000),\n\t\t\t\t\t\t};\n\t\t}\n\n\t\tlet roomEnd = {\n\t\t\t//房间胡的总次数\n\t\t\t\"record\":{\n\t\t\t\t\t\t\"endSec\":1490234194,\n\t\t\t\t\t\t\"fastCnt\":[0,0,0,0],\n\t\t\t\t\t\t\"players\":posInfo,\n\t\t\t\t\t\t\"point\":[0,1,2,3],\n\t\t\t\t\t\t\"huAllCnt\":[0,0,0,0]\n\t\t\t\t\t}\n\t\t};\n\t\tapp.HZRoomMgr().OnPack_RoomEnd(roomEnd);\n\t},\n\n\t//发起解散\n\tStartVoteDissolve:function(startPos){\n\t\t//默认0位置发起\n\t\tif(!startPos){\n\t\t\tstartPos = 0;\n\t\t}\n\n\t\tlet endSec = Math.floor(Date.now()/1000 + 90);\n\t\tlet serverPack = {\n\t\t\t\t\t\t\t\"roomID\":0,\n\t\t\t\t\t\t\t\"createPos\":startPos,\n\t\t\t\t\t\t\t\"endSec\":endSec,\n\t\t\t\t\t\t};\n\t\tapp.HZRoomMgr().OnPack_StartVoteDissolve(serverPack);\n\t},\n\n\t//位置更新是否同意解散\n\tPosDealVote:function(pos, agreeDissolve){\n\n\t\tif(!pos){\n\t\t\tpos = 0;\n\t\t}\n\t\tif(!agreeDissolve){\n\t\t\tagreeDissolve = 0;\n\t\t}\n\n\t\tlet serverPack = {\n\t\t\t\"roomID\":0,\n\t\t\t\"pos\":pos,\n\t\t\t\"agreeDissolve\":agreeDissolve,\n\t\t};\n\t\tapp.HZRoomMgr().OnPack_PosDealVote(serverPack);\n\t},\n})\n\nvar g_TestManager = null;\n\n\n/**\n * 绑定模块外部方法\n */\nexports.GetModel = function(){\n\tif(!g_TestManager){\n\t\tg_TestManager = new TestManager();\n\t}\n\treturn g_TestManager;\n}"]}