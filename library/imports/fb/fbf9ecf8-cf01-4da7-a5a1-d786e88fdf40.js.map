{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\hotupdate/assets\\script\\hotupdate\\ForceUpdateMgr.js"],"names":["app","require","ForceUpdateMgr","BaseClass","extend","Init","CONFIRM_SHOW_TIME","ShareDefine","console","log","Check","cc","sys","isNative","HotUpdateMgr","CheckUpdate","Update","msgID","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","Confirm","clickType","backArgList","game","end","g_ForceUpdateMgr","exports","GetModel"],"mappings":";;;;;;AAAA;AACA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACA,IAAIC,iBAAiBF,IAAIG,SAAJ,CAAcC,MAAd,CAAqB;AACtC;AACAC,UAAM,gBAAY;AACd,aAAKC,iBAAL,GAAyB,CAAzB;AACA,aAAKC,WAAL,GAAmBP,IAAIO,WAAJ,EAAnB;AACAC,gBAAQC,GAAR,CAAY,qBAAZ;AACH,KANqC;;AAQtC;AACAC,WAAM,iBAAU;AACZ,YAAIC,GAAGC,GAAH,CAAOC,QAAX,EAAoB;AAChBb,gBAAIc,YAAJ,GAAmBT,IAAnB;AACAL,gBAAIc,YAAJ,GAAmBC,WAAnB;AACH;AAEJ,KAfqC;;AAiBtCC,YAAO,kBAAU;AACbR,gBAAQC,GAAR,CAAY,cAAZ;AACA;AACA;AACA;AACA,YAAIQ,QAAQ,kBAAZ;AACA,YAAIC,iBAAiBlB,IAAIkB,cAAJ,EAArB;AACAA,uBAAeC,qBAAf,CAAqC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAArC,EAAgEJ,KAAhE,EAAuE,EAAvE;AACAC,uBAAeI,WAAf,CAA2BtB,IAAIO,WAAJ,GAAkBgB,OAA7C,EAAsDN,KAAtD,EAA6D,EAA7D;AACH,KA1BqC;;AA4BtC;;;;;AAKAG,eAAU,mBAASI,SAAT,EAAoBP,KAApB,EAA2BQ,WAA3B,EAAuC;AAC7C,YAAGD,aAAa,MAAhB,EAAuB;AACnB;AACH;AACD,YAAGP,SAAS,kBAAZ,EAA+B;AAC3BN,eAAGe,IAAH,CAAQC,GAAR;AACH;AACJ;;AAxCqC,CAArB,CAArB;;AA4CA,IAAIC,mBAAmB,IAAvB;;AAEAC,QAAQC,QAAR,GAAmB,YAAU;AACzB,QAAG,CAACF,gBAAJ,EACIA,mBAAmB,IAAI1B,cAAJ,EAAnB;AACJ,WAAO0B,gBAAP;AAEH,CALD","file":"ForceUpdateMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\hotupdate","sourcesContent":["//强制更新\nvar app = require('app');\nvar ForceUpdateMgr = app.BaseClass.extend({\n    // use this for initialization\n    Init: function () {\n        this.CONFIRM_SHOW_TIME = 5;\n        this.ShareDefine = app.ShareDefine();\n        console.log('ForceUpdateMgr Init');\n    },\n\n    //获取本地版本\n    Check:function(){\n        if (cc.sys.isNative){\n            app.HotUpdateMgr().Init();\n            app.HotUpdateMgr().CheckUpdate();\n        }\n        \n    },\n\n    Update:function(){\n        console.log(\"发现新版本，强制重启更新\");\n        // cc.audioEngine.stopAll();\n        // cc.game.restart();\n        // cc.game.end();\n        let msgID = \"MSG_FORCE_UPDATE\";\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, []);\n        ConfirmManager.ShowConfirm(app.ShareDefine().Confirm, msgID, []);\n    },\n\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n        if(msgID == \"MSG_FORCE_UPDATE\"){\n            cc.game.end();\n        }\n    },\n\n});\n\nvar g_ForceUpdateMgr = null;\n\nexports.GetModel = function(){\n    if(!g_ForceUpdateMgr)\n        g_ForceUpdateMgr = new ForceUpdateMgr();\n    return g_ForceUpdateMgr;\n\n}"]}