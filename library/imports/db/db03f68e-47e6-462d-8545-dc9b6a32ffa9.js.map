{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIReplayCode.js"],"names":["app","require","cc","Class","extends","properties","sp_shurukuang","Node","OnCreateInit","NetManager","FormManager","OnShow","ResetNumber","children","idx","length","sp_bg","getChildByName","getComponent","Label","string","active","labelString","OnClick","btnName","btnNode","ErrLog","Click_Btn_Clear","Click_btn_close","Click_btn_chakan","Click_BtnNumber","OnClick_Close","node","GetWndNode","pop","code","join","SendPack","OnPack_VideoData","bind","OnVideoFailed","num","Math","floor","substring","push","lb_num","data","toString","serverPack","Client","VideoCheckSubGame","Name","toLowerCase","SysNotifyManager","ShowSysMsg"],"mappings":"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","file":"UIReplayCode.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        sp_shurukuang:cc.Node,\n    },\n\n    OnCreateInit: function () {\n        this.NetManager = app.NetManager();\n        this.FormManager = app.FormManager();\n    },\n\n    OnShow: function () {\n\t\tthis.ResetNumber();\n    },\n    \n    ResetNumber:function(){\n        let children = this.sp_shurukuang.children;\n        for(let idx = 0; idx < children.length; idx++){\n            let sp_bg = children[idx];\n            sp_bg.getChildByName(\"lb_num\").getComponent(cc.Label).string = \"\";\n            sp_bg.getChildByName(\"lb_num\").active=false;\n        }\n        this.labelString = [];\n    },\n    //---------点击函数---------------------\n    OnClick:function(btnName, btnNode){\n        if(!btnName){\n            this.ErrLog(\"UIJoin Buttn OnClick(%s) not find btnName\", btnName);\n        }\n        if(btnName === \"btn_clear\"){\n            this.Click_Btn_Clear();\n        }\n        else if(btnName === \"btn_close\"){\n            this.Click_btn_close();\n        }\n        else if(btnName === \"btn_reset\"){\n            this.ResetNumber();\n        }\n         else if(btnName === \"btn_chakan\"){\n            this.Click_btn_chakan();\n        }\n        else{\n            this.Click_BtnNumber(btnName);\n        }\n    },\n    Click_btn_close:function () {\n        this.labelString = [];\n        this.OnClick_Close();\n    },\n\n    Click_Btn_Clear:function () {\n        if(this.labelString.length == 0){\n            return\n        }\n        let node = this.GetWndNode(\"sp_shuru/shurukuang/sp_bg\" + this.labelString.length + \"/lb_num\");\n        node.getComponent(cc.Label).string = \"\";\n        node.active=false;\n        this.labelString.pop();\n    },\n    Click_btn_chakan:function(){\n         if(this.labelString.length==0){\n            return;\n         }\n         let code = this.labelString.join(\"\");\n         this.NetManager.SendPack(\"game.CPlayerPlayBack\", {\"playBackCode\":code,\"chekcPlayBackCode\":true},this.OnPack_VideoData.bind(this), this.OnVideoFailed.bind(this));\n    },\n    Click_BtnNumber:function (btnName) {\n        if(this.labelString.length >= 11){\n            return;\n        }\n        let num = Math.floor(btnName.substring(btnName.length - 1));\n        this.labelString.push(num);\n\t    let code = this.labelString.join(\"\");\n\n        let children = this.sp_shurukuang.children;\n        for(let idx = 0; idx < children.length; idx++){\n            let sp_bg = children[idx];\n            let lb_num = sp_bg.getChildByName(\"lb_num\").getComponent(cc.Label);\n            if(lb_num.string == \"\"){\n                let data = this.labelString[this.labelString.length -1];\n                lb_num.string = data.toString();\n                lb_num.node.active=true;\n                break;\n            }\n        }\n        /*if(this.labelString.length == 7){\n            this.NetManager.SendPack(\"game.CPlayerPlayBack\", {\"playBackCode\":code,\"chekcPlayBackCode\":true},this.OnPack_VideoData.bind(this), this.OnVideoFailed.bind(this));\n        }*/\n    },\n    OnPack_VideoData:function(serverPack){\n        let code = this.labelString.join(\"\");\n        // let gameName = app.ShareDefine().GametTypeID2PinYin[gameType];\n        app.Client.VideoCheckSubGame(serverPack.Name.toLowerCase(), code);\n    },\n    OnVideoFailed:function(serverPack){\n        app.SysNotifyManager().ShowSysMsg(\"MSG_REPLAY_ERROR\");\n    },\n});\n"]}