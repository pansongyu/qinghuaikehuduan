{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIRoomCopy.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","RegEvent","OnEvt_CopyTextNtf","OnEvt_DDShare","OnEvt_XLShare","OnEvt_MWShare","SDKManager","OnShow","roomID","title","gamedesc","weChatAppShareUrl","event","detail","code","ShowSysMsg","msg","OnClick","btnName","btnNode","ShareWX","CloseForm","ShareDD","ShareXL","ShareMW","ErrLog","Share","CopyRoomKey","str","sys","isNative","argList","toString","promisefunc","resolve","reject","NativeManager","CallToNative","bluebird"],"mappings":"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","file":"UIRoomCopy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\t\t\n    },\n    OnCreateInit: function () {\n       this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf);\n       this.RegEvent(\"OnDDShare\", this.OnEvt_DDShare);\n       this.RegEvent(\"OnXLShare\", this.OnEvt_XLShare);\n       this.RegEvent(\"OnXLShare\", this.OnEvt_MWShare);\n       this.SDKManager=app.SDKManager();\n    },\n    OnShow: function (roomID,title,gamedesc,weChatAppShareUrl) {\n        this.roomID=roomID;\n    \tthis.title=title;\n    \tthis.gamedesc=gamedesc;\n    \tthis.weChatAppShareUrl=weChatAppShareUrl;\n    },\n    OnEvt_CopyTextNtf:function(event){\n        if(0 == event.detail.code)\n            this.ShowSysMsg(\"已复制：\"+event.detail.msg);\n        else\n            this.ShowSysMsg(\"复制房号失败\");\n    },\n    OnEvt_DDShare:function(event){\n        /*if(0 == event.detail.ErrCode){\n            this.ShowSysMsg(\"钉钉分享成功\");\n        }else if(2 == event.detail.ErrCode){\n            this.ShowSysMsg(\"取消钉钉分享\");\n        }else{\n            if(event.detail.ErrStr=='Canceled By User.'){\n                this.ShowSysMsg(\"取消钉钉分享\");\n            }else{\n                this.ShowSysMsg(\"钉钉分享失败：\"+event.detail.ErrStr);\n            }\n            \n        }*/\n    },\n    OnEvt_XLShare:function(event){\n        //\"ErrCode\": 0, //安卓返回值 0成功 -2取消  -4发送失败  -5没有安装 iOS返回值：0成功 1用户取消 3发送错误  4未知错误\n        /*if(0 == event.detail.ErrCode){\n            this.ShowSysMsg(\"闲聊分享成功\");\n        }else if(-2 == event.detail.ErrCode || 1 == event.detail.ErrCode){\n            this.ShowSysMsg(\"取消闲聊分享\");\n        }else if(-4 == event.detail.ErrCode || 3 == event.detail.ErrCode){\n            this.ShowSysMsg(\"闲聊分享发送错误\");\n        }else{\n            this.ShowSysMsg(\"闲聊分享失败\");\n        }*/\n    },\n    OnEvt_MWShare:function(event){\n        //\"ErrCode\": 0, //安卓返回值 0成功 -2取消  -4发送失败  -5没有安装 iOS返回值：0成功 1用户取消 3发送错误  4未知错误\n        /*if(0 == event.detail.ErrCode){\n            this.ShowSysMsg(\"默往分享成功\");\n        }else if(-2 == event.detail.ErrCode || 1 == event.detail.ErrCode){\n            this.ShowSysMsg(\"取消默往分享\");\n        }else if(-4 == event.detail.ErrCode || 3 == event.detail.ErrCode){\n            this.ShowSysMsg(\"默往分享发送错误\");\n        }else{\n            this.ShowSysMsg(\"默往分享失败\");\n        }*/\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_wx\"){\n            this.ShareWX();\n            this.CloseForm();\n        }else if(btnName == \"btn_dd\"){\n            this.ShareDD();\n            this.CloseForm();\n        }else if(btnName == \"btn_xl\"){\n            this.ShareXL();\n            this.CloseForm();\n        }else if(btnName == \"btn_mw\"){\n            this.ShareMW();\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n    ShareWX:function(){\n    \tthis.SDKManager.Share(this.title, this.gamedesc, this.weChatAppShareUrl, \"0\");\n    },\n    ShareDD:function(){\n        this.SDKManager.ShareDD(this.title, this.gamedesc, this.weChatAppShareUrl);\n    },\n    ShareXL:function(){\n        this.SDKManager.ShareXL(this.title, this.gamedesc, this.weChatAppShareUrl);\n    },\n    ShareMW:function(){\n        this.SDKManager.ShareMW(this.title, this.gamedesc, this.weChatAppShareUrl);\n    },\n    CopyRoomKey:function(){\n        let str = \"房号：\"+this.roomID;\n        if(cc.sys.isNative){\n            let argList = [{\"Name\":\"msg\",\"Value\":str.toString()}];\n            let promisefunc = function(resolve, reject){\n                app.NativeManager().CallToNative(\"copyText\", argList);\n            };\n            return new app.bluebird(promisefunc);\n        }\n    },\n});\n"]}