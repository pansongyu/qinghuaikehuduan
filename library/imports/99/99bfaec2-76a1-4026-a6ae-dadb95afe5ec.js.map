{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\hndzp/assets\\script\\ui\\uiGame\\hndzp\\hndzp_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","icon_identity","SpriteFrame","OnLoad","ComTool","ShareDefine","PokerCard","ShowPlayerJieSuan","ShowPlayerHuaCard","onPlusScore","s","UpdatePlayData","PlayerNode","HuList","PlayerInfo","jin1","jin2","maPaiLst","showLabelNum","ClearLabelShow","getChildByName","ShowPlayerRecord","ShowPlayerInfo","ShowPlayerDownCard","publicCardList","ShowPlayerShowCard","shouCard","handCard","huaList","ShowNode","huInfo","absNum","Math","abs","active","shortNum","toFixed","getComponent","string","sportsPoint","ShowPlayerData","setEnd","playerAll","index","console","log","dPos","posResultList","posHuArray","Array","posCount","length","i","posInfo","pos","posHuType","HuTypeStringDict","node","WeChatManager","InitHeroHeadImage","weChatHeadImage","ShowHeroHead","posEndList","playerType","playerCount","Sprite","spriteFrame","endType","finishOrder","Label","layout","children","paiXingJiangLiMap","key"],"mappings":"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","file":"hndzp_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\hndzp","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseMJ_winlost_child\"),\n\n    properties: {\n        icon_identity: [cc.SpriteFrame],\n    },\n\n    // use this for initialization\n    OnLoad: function () {\n        this.ComTool = app.ComTool();\n        this.ShareDefine = app.ShareDefine();\n        this.PokerCard = app.PokerCard();\n    },\n    ShowPlayerJieSuan() {\n\n    },\n    ShowPlayerHuaCard() {\n\n    },\n\n    onPlusScore(s) {\n        if (s > 0) {\n            return '+' + s;\n        }\n        return s;\n    },\n\n    UpdatePlayData: function (PlayerNode, HuList, PlayerInfo, jin1 = 0, jin2 = 0, maPaiLst = null) {\n        this.HuList = HuList;\n        this.showLabelNum = 1;\n        this.ClearLabelShow(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'));\n        this.ShowPlayerRecord(PlayerNode.getChildByName('record'), HuList);\n        this.ShowPlayerJieSuan(PlayerNode.getChildByName('jiesuan'), HuList);\n        this.ShowPlayerInfo(PlayerNode.getChildByName('user_info'), PlayerInfo, HuList);\n        this.ShowPlayerDownCard(PlayerNode.getChildByName('downcard'), HuList.publicCardList, jin1, jin2);\n        this.ShowPlayerShowCard(PlayerNode.getChildByName('showcard'), HuList.shouCard, HuList.handCard, jin1, jin2);\n        this.ShowPlayerHuaCard(PlayerNode.getChildByName('huacard'), HuList.huaList);\n    },\n    ShowPlayerRecord: function(ShowNode, huInfo) {\n        let absNum = Math.abs(huInfo[\"point\"]);\n        ShowNode.getChildByName('lb_record_win').active = false;\n        ShowNode.getChildByName('lb_record_lost').active = false;\n        if (absNum > 10000) {\n            let shortNum = (absNum / 10000).toFixed(2);\n            if (huInfo[\"point\"] > 0) {\n                ShowNode.getChildByName('lb_record_win').getComponent(\"cc.Label\").string = '+' + shortNum + \"万\";\n                ShowNode.getChildByName('lb_record_win').active = true;\n            } else {\n                ShowNode.getChildByName('lb_record_lost').getComponent(\"cc.Label\").string = '-' + shortNum + \"万\";\n                ShowNode.getChildByName('lb_record_lost').active = true;\n            }\n        } else {\n            if (huInfo[\"point\"] > 0) {\n                ShowNode.getChildByName('lb_record_win').getComponent(\"cc.Label\").string = '+' + huInfo[\"point\"];\n                ShowNode.getChildByName('lb_record_win').active = true;\n            } else {\n                ShowNode.getChildByName('lb_record_lost').getComponent(\"cc.Label\").string = huInfo[\"point\"];\n                ShowNode.getChildByName('lb_record_lost').active = true;\n            }\n        }\n        //显示比赛分\n        if (typeof(huInfo.sportsPoint) != \"undefined\") {\n            ShowNode.getChildByName('lb_sportspoint').active = true;\n            if (huInfo.sportsPoint > 0) {\n                ShowNode.getChildByName('lb_sportspoint').getComponent(\"cc.Label\").string = \"比赛分:+\" + huInfo.sportsPoint;\n            } else {\n                ShowNode.getChildByName('lb_sportspoint').getComponent(\"cc.Label\").string = \"比赛分:\" + huInfo.sportsPoint;\n            }\n        } else {\n            ShowNode.getChildByName('lb_sportspoint').active = false;;\n        }\n    },\n    ShowPlayerData: function (setEnd, playerAll, index) {\n        console.log('包王单局战绩数据', setEnd, playerAll, index);\n        let jin1 = setEnd.jin1;\n        let jin2 = setEnd.jin2;\n        let dPos = setEnd.dPos;\n        let posResultList = setEnd[\"posResultList\"];\n        let posHuArray = new Array();\n        let posCount = posResultList.length;\n        for (let i = 0; i < posCount; i++) {\n            let posInfo = posResultList[i];\n            let pos = posInfo[\"pos\"];\n            let posHuType = this.ShareDefine.HuTypeStringDict[posInfo[\"huType\"]];\n            posHuArray[pos] = posHuType;\n        }\n        let PlayerInfo = playerAll[index];\n        this.node.active = true;\n        this.UpdatePlayData(this.node, posResultList[index], PlayerInfo, jin1, jin2);\n\n        if (dPos === index) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        }\n        //显示头像，如果头像UI\n        if (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n            app.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n        }\n        let weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        weChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n\n        //\n        let posEndList = posResultList[index];\n        //显示身份\n        let playerType = posEndList.playerType; //身份  0为默认值\n        let playerCount = -1;\n        if (playerType == \"NOT\") {\n            playerCount = 0;\n        } else if (playerType == \"NongMin\") {\n            playerCount = 1;\n        } else if (playerType == \"DiZhu\") {\n            playerCount = 2;\n        } else if (playerType == \"DaDiZhu\") {\n            playerCount = 3;\n        } else {\n            playerCount = -1;\n        }\n        if (playerCount > -1) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"identity\").getComponent(cc.Sprite).spriteFrame = this.icon_identity[playerCount];\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"identity\").getComponent(cc.Sprite).spriteFrame = '';\n        }\n        //显示游数\n        let endType = posEndList.endType; //游数  0为默认值\n        let finishOrder = \"\";\n        if (endType == \"ONE\") {\n            finishOrder = \"头游\";\n        } else if (endType == \"TWO\") {\n            finishOrder = \"二游\";\n        } else if (endType == \"THREE\") {\n            finishOrder = \"三游\";\n        } else if (endType == \"FOUR\") {\n            finishOrder = \"末游\";\n        } else {\n            finishOrder = \"\";\n        }\n        this.node.getChildByName(\"user_info\").getChildByName(\"you\").getComponent(cc.Label).string = finishOrder;\n        \n\n        //牌型奖\n        let layout = this.node.getChildByName('jiesuan').getChildByName('layout')\n        for (let i = 0; i < layout.children.length; i++) {\n            layout.children[i].active = false;\n        }\n\n        //四条双鬼\n        let paiXingJiangLiMap = posEndList.paiXingJiangLiMap;\n        for(let key in paiXingJiangLiMap){\n            if(key == \"SiTiao\"){\n                layout.getChildByName(\"sitiao\").active = true;\n                layout.getChildByName(\"sitiao\").getComponent(cc.Label).string = \"四条x\" + paiXingJiangLiMap[key];\n            }else if(key == \"ShuangGui\"){\n                layout.getChildByName(\"shuanggui\").active = true;\n                layout.getChildByName(\"shuanggui\").getComponent(cc.Label).string = \"双鬼x\" + paiXingJiangLiMap[key];\n            }\n        }\n    }\n});\n"]}