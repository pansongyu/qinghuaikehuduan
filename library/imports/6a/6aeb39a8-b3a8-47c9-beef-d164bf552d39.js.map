{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIMessage.js"],"names":["app","require","cc","Class","extends","properties","LabelMessage","RichText","LabelCancel","Label","LabelSure","BtnCancel","Button","BtnSure","BtnClose","OnCreateInit","ShareDefine","msgInfoList","MaxMsgCount","confirmType","CancelPos","v2","SurePos","SingSurePos","SysNotifyManager","isShowingMsg","lbSure","lbCancle","OnShow","eventType","msgID","msgArgList","content","length","ErrLog","push","ShowMsgInfo","node","setPosition","Log","tempList","shift","params","msgContent","active","string","Confirm","i18n","t","ConfirmYN","ConfirmFamily","ConfirmBuyGoTo","ConfirmOK","ConfirmDIY","OnClose","OnClick","btnName","eventData","AfterOnClick","CloseForm","ConfirmManager","OnConFirmResult"],"mappings":"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","file":"UIMessage.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        LabelMessage:cc.RichText,\n        LabelCancel:cc.Label,\n        LabelSure:cc.Label,\n        BtnCancel: cc.Button,\n        BtnSure:cc.Button,\n        BtnClose:cc.Button,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.ShareDefine = app.ShareDefine();\n        \n        this.msgInfoList = [];\n        this.MaxMsgCount = 1;\n\n        this.confirmType = 0;\n\n        this.CancelPos = cc.v2(-131,-185);\n        this.SurePos = cc.v2(131,-185);\n\n        //单个确定按钮坐标\n        this.SingSurePos = cc.v2(0, -185);\n\n        this.SysNotifyManager = app.SysNotifyManager();\n\n        this.isShowingMsg = false;\n\n        this.lbSure = \"\";\n        this.lbCancle = \"\";\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(eventType, confirmType, msgID, msgArgList, content, lbSure=\"\", lbCancle=\"\"){\n        this.lbSure = lbSure;\n        this.lbCancle = lbCancle;\n\n        if(this.msgInfoList.length >= this.MaxMsgCount){\n            this.ErrLog(\"OnShow msgInfoListCount(%s) is max\", this.msgInfoList.length, msgID);\n        }\n        else{\n            this.msgInfoList.push([confirmType, msgID, msgArgList, content]);\n        }\n\n        //如果正在显示系统提示,则不调用更新接口\n        //if(!this.isShowingMsg){\n            this.ShowMsgInfo();\n        //}\n        this.node.setPosition(cc.v2(0,0));\n    },\n\n    ShowMsgInfo:function(){\n        if (!this.msgInfoList.length){\n            this.Log(\"msgInfoList is empty\");\n            return;\n        }\n\n        this.isShowingMsg = true;\n\n        let tempList = this.msgInfoList.shift();\n        this.confirmType = tempList[0];\n        let msgID = tempList[1];\n        let params = tempList[2];\n        let msgContent = tempList[3];\n\n        this.BtnClose.node.active = false;\n\n        this.LabelMessage.string = msgContent;\n\n        //以下根据不同类型改变窗体、控件位置\n        //有确定、取消按钮\n        if(this.confirmType == this.ShareDefine.Confirm){\n\n\t        if(this.LabelCancel){\n\t\t        this.LabelCancel.string = app.i18n.t(\"Cancel\");\n\t        }\n            this.BtnCancel.node.setPosition(this.CancelPos);\n            this.BtnCancel.node.active = true;\n\n\t        if(this.LabelSure){\n\t\t        this.LabelSure.string = app.i18n.t(\"Sure\");\n\t        }\n            this.BtnSure.node.setPosition(this.SurePos);\n            this.BtnSure.node.active = true;\n\n        }\n        //有是、否按钮\n        else if(this.confirmType == this.ShareDefine.ConfirmYN){//有确定按钮\n\t        if(this.LabelCancel){\n\t\t        this.LabelCancel.string = app.i18n.t(\"No\");\n\t        }\n            this.BtnCancel.node.setPosition(this.CancelPos);\n            this.BtnCancel.node.active = true;\n\n\t        if(this.LabelSure){\n\t\t        this.LabelSure.string = app.i18n.t(\"Yes\");\n\t        }\n            this.BtnSure.node.setPosition(this.SurePos);\n            this.BtnSure.node.active = true;\n\n        }else if(this.confirmType==this.ShareDefine.ConfirmFamily){\n            if(this.LabelCancel){\n                this.LabelCancel.string = app.i18n.t(\"Cancel\");\n            }\n            this.BtnCancel.node.setPosition(this.CancelPos);\n            this.BtnCancel.node.active = true;\n\n            if(this.LabelSure){\n                this.LabelSure.string = app.i18n.t(\"GoTo\");\n            }\n            this.BtnSure.node.setPosition(this.SurePos);\n            this.BtnSure.node.active = true;\n        }\n\n        //购买,前往\n        else if(this.confirmType == this.ShareDefine.ConfirmBuyGoTo){\n\t        if(this.LabelCancel){\n\t\t        this.LabelCancel.string = app.i18n.t(\"Cancel\");\n\t        }\n            this.BtnCancel.node.setPosition(this.CancelPos);\n            this.BtnCancel.node.active = true;\n\n\t        if(this.LabelSure){\n\t\t        this.LabelSure.string = app.i18n.t(\"GoTo\");\n\t        }\n            this.BtnSure.node.setPosition(this.SurePos);\n            this.BtnSure.node.active = true;\n\n        }\n        //就一个确定, 需要设置控件坐标\n        else if(this.confirmType == this.ShareDefine.ConfirmOK){\n            this.BtnCancel.node.active = false;\n\t        if(this.LabelSure){\n\t\t        this.LabelSure.string = app.i18n.t(\"Sure\");\n\t        }else{\n                this.LabelCancel.string=\"确定\";\n            }\n            this.BtnSure.node.setPosition(this.SingSurePos);\n            this.BtnSure.node.active = true;\n\n        }\n        //外部自己传按钮文字\n        else if(this.confirmType == this.ShareDefine.ConfirmDIY){\n            if(this.LabelCancel){\n                this.LabelCancel.string = this.lbCancle;\n            }\n            this.BtnCancel.node.setPosition(this.CancelPos);\n            this.BtnCancel.node.active = true;\n\n            if(this.LabelSure){\n                this.LabelSure.string = this.lbSure;\n            }\n            this.BtnSure.node.setPosition(this.SurePos);\n            this.BtnSure.node.active = true;\n\n            this.BtnClose.node.active = true;\n        }\n\n        else{\n            this.isShowingMsg = false;\n            this.ErrLog(\"OnShow msgType(%s) error\", this.confirmType);\n            return;\n        }\n\n    },\n\n    OnClose:function(){\n        this.isShowingMsg = false;\n    },\n\n    //---------点击函数---------------------\n\n\tOnClick:function(btnName, eventData){\n\n\t\tif(btnName == \"btnSure\"){\n\t\t\tthis.AfterOnClick(\"Sure\");\n\t\t}\n\t\telse if(btnName == \"btnCancel\"){\n\t\t\tthis.AfterOnClick(\"Cancel\");\n\t\t}else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }\n\t\telse{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n\n    /**\n     * 点击确定\n     */\n    AfterOnClick:function(eventType){\n\n        this.CloseForm();\n\n\t    this.ConfirmManager.OnConFirmResult(eventType);\n\n        // 如果还有消息则继续显示\n        if(this.msgInfoList.length){\n            this.ShowMsgInfo();\n        }\n    },\n\n});\n"]}