{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\sse/assets\\script\\ui\\uiGame\\sse\\UIRecordAllResult_sse.js"],"names":["app","require","cc","Class","extends","properties","roomID","Node","jushu","endTime","MJPlayers","page_search","EditBox","OnCreateInit","FormManager","ComTool","SDKManager","NetManager","WeChatManager","gametypeConfig","SysDataManager","GetTableDict","RegEvent","Event_GameRecord","lastChildName","lastRoomId","LoadAllImages","i","imageName","join","imageInfo","IntegrateImage","imagePath","that","ControlManager","CreateLoadPromise","SpriteFrame","then","spriteFrame","ErrLog","catch","error","stack","OnShow","roomId","playerAll","gameType","unionId","roomKey","defaultPage","page","ShareDefine","GametTypeID2PinYin","path","ShowForm","gameTypeID","active","Players","getWndNodePath","LoadPrefabByGameType","prefabPath","Prefab","prefab","InitNode","Player1Node","instantiate","nowChildName","name","DestroyAllChildren","addChild","ShowCardNode","GetWndNode","sp_in","getChildByName","toUpperCase","cardNode","StringAddNumSuffix","zIndex","DownCardNode","downNode01","downNode","InitPlayers","alldata","maxpage","SendPack","bind","AddNode","length","PlayerSon","ShowRoomInfo","roomEndResult","setID","time","getComponent","Label","string","GetDateYearMonthDayHourMinuteString","playBackCode","node","parent","find","actvie","dataJsonRes","JSON","parse","roomKeyStr","e","console","serverPack","pSetRoomRecords","playbackCode","ShowData","SetPageLabel","data","Str2Json","InitShowPlayerInfo","SetWndProperty","setEnd","PlayerNode","posResultList","count","pid","ShowPlayerData","ShowImage","btnNode","cardID","Math","floor","wndSprite","Sprite","OnClick","btnName","CloseForm","SysNotifyManager","ShowSysMsg","Click_btn_Share","OnPack_VideoData","OnVideoFailed","isNaN","parseInt","switchRecord","action","sys","localStorage","setItem","stringify","Client","VideoCheckSubGame","Name","toLowerCase","heroName","HeroManager","GetHeroProperty","gameId","GametTypeNameDict","gameName","GametTypeID2Name","title","desc","heroID","cityId","weChatAppShareUrl","GetClientConfigProperty","log","Share","jsondata","json"],"mappings":"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","file":"UIRecordAllResult_sse.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\sse","sourcesContent":["var app = require(\"app\");\ncc.Class({\n\textends: require(\"BaseForm\"),\n\n\tproperties: {\n\t\troomID: cc.Node,\n\t\tjushu: cc.Node,\n\t\tendTime: cc.Node,\n\n\t\tMJPlayers: cc.Node,\n\n\n\t\tpage_search: cc.EditBox,\n\t},\n\n\tOnCreateInit: function () {\n\t\tthis.FormManager = app.FormManager();\n\t\tthis.ComTool = app.ComTool();\n\t\tthis.SDKManager = app.SDKManager();\n\t\tthis.NetManager = app.NetManager();\n\t\tthis.WeChatManager = app.WeChatManager();\n\t\tthis.gametypeConfig = app.SysDataManager().GetTableDict(\"gametype\");\n\t\tthis.RegEvent(\"GameRecord\", this.Event_GameRecord, this);\n\t\tthis.lastChildName = null;\n\t\tthis.lastRoomId = 0;\n\t\t//加载麻将资源，防止异步坑爹的bug\n\t\tthis.LoadAllImages();\n\t},\n\tLoadAllImages: function () {\n\t\tlet i = 11;\n\t\tfor (; i <= 58; i++) {\n\t\t\tlet imageName = [\"EatCard_Self_\", i].join(\"\");\n\t\t\tlet imageInfo = this.IntegrateImage[imageName];\n\t\t\tif (!imageInfo) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (app['majiang_' + imageName]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet imagePath = imageInfo[\"FilePath\"];\n\t\t\tlet that = this;\n\t\t\tapp.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame).then(function (spriteFrame) {\n\t\t\t\tif (!spriteFrame) {\n\t\t\t\t\tthat.ErrLog(\"OpenMaJiang(%s) load spriteFrame fail\", imagePath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//记录精灵图片对象\n\t\t\t\tapp['majiang_' + imageName] = spriteFrame;\n\t\t\t}).catch(function (error) {\n\t\t\t\tthat.ErrLog(\"OpenMaJiang(%s) error:%s\", imagePath, error.stack);\n\t\t\t})\n\t\t}\n\t},\n\tOnShow: function (roomId, playerAll, gameType, unionId = 0, roomKey = null, defaultPage = 1) {\n\t\tthis.page = defaultPage;\n\t\tthis.gameType = this.ShareDefine.GametTypeID2PinYin[gameType];\n\t\tlet path = \"ui/uiGame/\" + this.gameType + \"/UIRecordAllResult_\" + this.gameType;\n\t\tthis.FormManager.ShowForm(\"UITop\", path);\n\t\tthis.gameTypeID = gameType;\n\t\tthis.gameType = app.ShareDefine().GametTypeID2PinYin[gameType];\n\t\tthis.playerAll = playerAll;\n\t\tthis.roomId = roomId;\n\t\tthis.unionId = unionId;\n\t\tthis.roomKey = roomKey;\n\t\tthis.MJPlayers.active = true;\n\t\tthis.Players = this.MJPlayers;\n\t\tthis.getWndNodePath = \"MJPlayers\";\n\n\t\t//动态生成节点\n\t\tthis.LoadPrefabByGameType();\n\t},\n\tLoadPrefabByGameType: function () {\n\t\tlet prefabPath = \"ui/uiGame/\" + this.gameType + \"/\" + this.gameType + \"_winlost_child\";\n\t\tlet that = this;\n\t\tapp.ControlManager().CreateLoadPromise(prefabPath, cc.Prefab)\n\t\t\t.then(function (prefab) {\n\t\t\t\tif (!prefab) {\n\t\t\t\t\tthat.ErrLog(\"LoadPrefabByGameType(%s) load spriteFrame fail\", prefabPath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthat.InitNode(prefab);\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\t\tthat.ErrLog(\"LoadPrefabByGameType(%s) error:%s\", prefabPath, error.stack);\n\t\t\t\t}\n\t\t\t);\n\t},\n\tInitNode: function (prefab) {\n\t\tlet Player1Node = cc.instantiate(prefab);\n\t\tthis.nowChildName = Player1Node.name;\n\t\tif (this.lastChildName != null && this.lastChildName == this.nowChildName\n\t\t\t&& this.lastRoomId == this.roomId) {\n\t\t\t//子节点跟之前一样，无需重新创建，直接return\n\t\t\t//由于未结束的战绩会时时改变，所以不能return\n\t\t\t// return;\n\t\t}\n\t\t//清空之前的节点,生成新的节点\n\t\tthis.lastChildName = this.nowChildName;\n\t\tthis.lastRoomId = this.roomId;\n\t\t//this.Players.removeAllChildren();\n\t\tthis.DestroyAllChildren(this.Players);\n\t\tPlayer1Node.name = 'player1';\n\t\tthis.Players.addChild(Player1Node);\n\n\n\t\tif (this.MJPlayers.active) {\n\t\t\t//添加手牌\n\t\t\tlet ShowCardNode = this.GetWndNode(this.getWndNodePath + '/player1/showcard');\n\t\t\tlet sp_in = ShowCardNode.getChildByName('sp_in');\n\t\t\tfor (let i = 1; i <= this.ShareDefine[this.gameType.toUpperCase() + 'RoomDealPerPosCardCount']; i++) {\n\t\t\t\tlet cardNode = cc.instantiate(sp_in);\n\t\t\t\tcardNode.name = this.ComTool.StringAddNumSuffix(\"card\", i/*Math.abs(i - (this.ShareDefine[this.gameType.toUpperCase() + 'RoomDealPerPosCardCount'] + 1))*/, 2);\n\t\t\t\tShowCardNode.addChild(cardNode);\n\t\t\t}\n\t\t\tShowCardNode.getChildByName(\"sp_in\").zIndex = 26;\n\t\t\tShowCardNode.getChildByName(\"empty\").zIndex = 25;\n\t\t\t//添加吃牌\n\t\t\tlet DownCardNode = this.GetWndNode(this.getWndNodePath + '/player1/downcard');\n\t\t\tlet downNode01 = DownCardNode.getChildByName('down01');\n\t\t\tfor (let i = 2; i <= 8; i++) {\n\t\t\t\tlet downNode = cc.instantiate(downNode01);\n\t\t\t\tdownNode.name = this.ComTool.StringAddNumSuffix(\"down\", i, 2);\n\t\t\t\tDownCardNode.addChild(downNode);\n\t\t\t}\n\t\t}\n\t\tthis.InitPlayers();\n\t\tthis.alldata = false;\n\t\tthis.maxpage = 0;\n\t\tthis.NetManager.SendPack(\"game.CPlayerSetRoomRecord\", {\"roomID\": this.roomId}, this.Event_GameRecord.bind(this));\n\t},\n\tInitPlayers: function () {\n\t\tlet AddNode = this.GetWndNode(this.getWndNodePath + '/player1');\n\t\tfor (let i = 2; i <= this.playerAll.length; i++) {\n\t\t\tlet PlayerSon = cc.instantiate(AddNode);\n\t\t\tPlayerSon.name = 'player' + i;\n\t\t\tPlayerSon.active = false;\n\t\t\tthis.Players.addChild(PlayerSon);\n\t\t}\n\t},\n\tShowRoomInfo: function (roomEndResult) {\n\t\tlet setID = roomEndResult[\"setID\"];\n\t\tlet time = roomEndResult[\"endTime\"];\n\t\tif (setID > 0) {\n\t\t\tthis.jushu.active = true;\n\t\t\tthis.jushu.getComponent(cc.Label).string = \"第\" + setID + \"局\";\n\t\t} else {\n\t\t\tthis.jushu.active = false;\n\t\t}\n\n\t\tthis.endTime.getComponent(cc.Label).string = this.ComTool.GetDateYearMonthDayHourMinuteString(time);\n\t\tif (this.playBackCode > 0) {\n\t\t\tthis.node.getChildByName('btn_replay').active = true;\n\t\t\tthis.node.getChildByName('btn_share').active = true;\n\t\t\tthis.endTime.parent.getChildByName(\"backCode\").getComponent(cc.Label).string = \"回放码:\" + this.playBackCode;\n\t\t\tcc.find('btn_replay', this.node).actvie = true;\n\t\t} else {\n\t\t\tthis.node.getChildByName('btn_replay').active = false;\n\t\t\tthis.node.getChildByName('btn_share').active = false;\n\t\t\tthis.endTime.parent.getChildByName(\"backCode\").getComponent(cc.Label).string = \"\";\n\t\t\tcc.find('btn_replay', this.node).actvie = false;\n\t\t}\n\t\t//第几局 第几轮\n\t\tlet {dataJsonRes, roomID} = roomEndResult;\n\t\ttry {\n\t\t\tdataJsonRes = JSON.parse(dataJsonRes);\n\t\t\t\n\t\t\tlet roomKeyStr = \"\";\n\t\t\tif (this.roomKey != null) {\n\t\t\t\troomKeyStr = \"房间号:\" + this.roomKey;\n\t\t\t}\n\t\t\tif (dataJsonRes['currentCirCle'] != null) {\n\t\t\t\tthis.jushu.getComponent(cc.Label).string = roomKeyStr + `第${dataJsonRes['setId']}局 第${dataJsonRes['currentCirCle']}手`;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t},\n\t\n\t\n\tEvent_GameRecord: function (serverPack) {\n\t\tthis.alldata = serverPack.pSetRoomRecords;\n\t\tthis.maxpage = serverPack.pSetRoomRecords.length;\n\t\tthis.playBackCode = serverPack.pSetRoomRecords[0].playbackCode;\n\t\tthis.ShowData(this.page);\n\t},\n\tShowData: function () {\n\t\tthis.SetPageLabel();\n\t\tlet data = this.Str2Json(this.alldata[this.page - 1].dataJsonRes);\n\t\tthis.playBackCode = this.alldata[this.page - 1].playbackCode;\n\t\tthis.InitShowPlayerInfo(data);\n\t\tthis.ShowRoomInfo(this.alldata[this.page - 1]);\n\t},\n\tSetPageLabel: function () {\n\t\tthis.SetWndProperty(\"page/editbox_page\", \"text\", this.page + \"/\" + this.maxpage);\n\t\tthis.SetWndProperty(\"page2/editbox_page\", \"text\", this.page);\n\t},\n\tInitShowPlayerInfo: function (setEnd) {\n\t\tfor (let i = 0; i < this.playerAll.length; i++) {\n\t\t\tlet PlayerNode = this.GetWndNode(this.getWndNodePath + '/player' + (i + 1));\n\t\t\tif (PlayerNode) {\n\t\t\t\tPlayerNode.active = false;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet posResultList = setEnd.posResultList;\n\t\tlet count = 0;\n\t\tfor (let i = 0; i < posResultList.length; i++) {\n\t\t\tif (!posResultList[i].pid) continue;\n\t\t\tlet PlayerNode = this.GetWndNode(this.getWndNodePath + '/player' + (count + 1));\n\t\t\tPlayerNode.active = true;\n\t\t\tPlayerNode.getComponent(this.nowChildName).ShowPlayerData(setEnd, this.playerAll, i);\n\t\t\tcount++;\n\t\t}\n\n\t},\n\tShowImage: function (btnNode, cardID) {\n\t\tlet imageName = [\"EatCard_Self_\", Math.floor(cardID / 100)].join(\"\");\n\t\tlet imageInfo = this.IntegrateImage[imageName];\n\t\tif (imageInfo) {\n\t\t\tlet imagePath = imageInfo[\"FilePath\"];\n\t\t\tlet that = this;\n\t\t\tapp.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame)\n\t\t\t\t.then(function (spriteFrame) {\n\t\t\t\t\tif (!spriteFrame) {\n\t\t\t\t\t\tconsole.error(\"ShowImage(%s) load spriteFrame fail\", imagePath);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet wndSprite = btnNode.getComponent(cc.Sprite);\n\t\t\t\t\twndSprite.spriteFrame = spriteFrame;\n\t\t\t\t})\n\t\t\t\t.catch(function (error) {\n\t\t\t\t\tconsole.error(\"ShowImage(%s) error:%s\", imagePath, error.stack);\n\t\t\t\t})\n\t\t}\n\t\telse {\n\t\t\tconsole.error('failed load imageName%s', imageName, cardID);\n\t\t\treturn;\n\t\t}\n\t},\n\t//---------点击函数---------------------\n\tOnClick: function (btnName, btnNode) {\n\t\tif (btnName == \"btn_close\") {\n\t\t\tthis.CloseForm();\n\t\t} else if (btnName == \"btn_last\") {\n\t\t\tif (this.page == 1) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"NowFirstPage\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.page -= 1;\n\t\t\tthis.ShowData();\n\t\t} else if (btnName == \"btn_next\") {\n\t\t\tif (this.page == this.maxpage) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"NowLastPage\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.page += 1;\n\t\t\tthis.ShowData();\n\t\t} else if (btnName == \"btn_share\") {\n\t\t\tthis.Click_btn_Share();\n\t\t} else if (btnName == \"btn_replay\") {\n\t\t\tthis.NetManager.SendPack(\"game.CPlayerPlayBack\", {\n\t\t\t\t\"playBackCode\": this.playBackCode,\n\t\t\t\t\"chekcPlayBackCode\": true\n\t\t\t}, this.OnPack_VideoData.bind(this), this.OnVideoFailed.bind(this));\n\t\t\treturn;\n\t\t} else if (btnName == \"btn_search\") {\n\t\t\tif (isNaN(this.page_search.string) == true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet page_search = parseInt(this.page_search.string);\n\t\t\tif (page_search < 1) {\n\t\t\t\tthis.page = 1;\n\t\t\t} else if (page_search >= this.maxpage) {\n\t\t\t\tthis.page = this.maxpage;\n\t\t\t} else {\n\t\t\t\tthis.page = page_search;\n\t\t\t}\n\t\t\tthis.ShowData();\n\t\t} else {\n\t\t\tthis.ErrLog(\"OnClick not find btnName\", btnName);\n\t\t}\n\t},\n\tOnPack_VideoData: function (serverPack) {\n\t\t//记录当前的switchData,退出的时候要调用\n\t\tlet switchRecord = {\n\t\t\taction: \"OpenUIRecordAllResult\",\n\t\t\tplayerAll: this.playerAll,\n\t\t\troomId: this.roomId,\n\t\t\tunionId: this.unionId,\n\t\t\troomKey: this.roomKey,\n\t\t\tgameType: this.gameTypeID,\n\t\t\tpage: this.page\n\t\t};\n\t\tcc.sys.localStorage.setItem(\"switchRecord\", JSON.stringify(switchRecord));\n\t\tapp.Client.VideoCheckSubGame(serverPack.Name.toLowerCase(), this.playBackCode);\n\t},\n\tOnVideoFailed: function (serverPack) {\n\t\tapp.SysNotifyManager().ShowSysMsg(\"MSG_REPLAY_ERROR\");\n\t},\n\tClick_btn_Share: function () {\n\t\tlet heroName = app.HeroManager().GetHeroProperty(\"name\");\n\t\tlet gameId = app.ShareDefine().GametTypeNameDict[this.gameType.toUpperCase()];\n\t\tlet gameName = app.ShareDefine().GametTypeID2Name[gameId];\n\t\tlet title = \"回放码为【\" + this.playBackCode + \"】\";\n\t\tlet desc = \"【\" + heroName + \"】邀请您观看【\" + gameName + \"】中牌局回放记录\";\n\t\tlet heroID = app.HeroManager().GetHeroProperty(\"pid\");\n\t\tlet cityId = app.HeroManager().GetHeroProperty(\"cityId\");\n\t\tlet weChatAppShareUrl = app.Client.GetClientConfigProperty(\"WeChatAppShareUrl\") + heroID + \"&cityid=\" + cityId;\n\t\tconsole.log(\"回放码==\" + this.playBackCode);\n\t\tthis.SDKManager.Share(title, desc, weChatAppShareUrl, \"0\");\n\t},\n\tStr2Json: function (jsondata) {\n\t\tif (jsondata === \"\") {\n\t\t\treturn false;\n\t\t}\n\t\tvar json = JSON.parse(jsondata);\n\t\treturn json;\n\t},\n});\n"]}