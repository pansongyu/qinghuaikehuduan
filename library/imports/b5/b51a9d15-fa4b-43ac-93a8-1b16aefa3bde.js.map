{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\zass/assets\\script\\ui\\uiGame\\zass\\zass_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","img_kuang","SpriteFrame","OnLoad","ComTool","ShareDefine","sp_in","node","getChildByName","filePath","downcard","downNode01","ChildCount","PaiChildCount","_i","downNode","instantiate","name","StringAddNumSuffix","addChild","ShowPlayerHuImg","huNode","huTypeName","huType","HuTypeStringDict","active","HuType_DianPao","HuType_JiePao","HuType_ZiMo","HuType_QGH","ShowPlayerShowCard","showNode","cardIDList","handCard","jin1","jin2","count","length","kuangList","HuList","index","cardID","childName","childNode","ErrLog","img_kuangSpr","i","lockListTemp","j","getComponent","Sprite","spriteFrame","ShowImage","cardIndex","UserData","ShowPlayerDownCard","publishcard","publicInfoList","slice","opType","OpType_AnGang","cardCount","paiChildName","childPath","join","find","cardSprite","childSprite","ResManager","SetMJSpriteFrameToNode","Math","floor","LabelName","LabelArray"],"mappings":"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","file":"zass_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\zass","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_winlost_child\"),\n\n\tproperties: {\n        img_kuang:[cc.SpriteFrame],\n    },\n\n\t// use this for initialization\n\tOnLoad: function () {\n\t\tthis.ComTool = app.ComTool();\n        this.ShareDefine=app.ShareDefine();\n        this.sp_in = this.node.getChildByName(\"showcard\").getChildByName(\"sp_in\");\n        this.filePath = \"texture/ssp/card_\";\n        //添加吃牌 四色牌吃牌比较多\n        let downcard = this.node.getChildByName(\"downcard\");\n        var downNode01 = downcard.getChildByName('down01');\n        this.ChildCount = 20;\n        this.PaiChildCount = 21;\n        for (var _i = 6; _i <= this.ChildCount; _i++) {\n            var downNode = cc.instantiate(downNode01);\n            downNode.name = this.ComTool.StringAddNumSuffix(\"down\", _i, 2);\n            downcard.addChild(downNode);\n        }\n\t},\n    ShowPlayerHuImg:function(huNode,huTypeName){\n        /*huLbIcon\n        *  0:单吊，1：点炮，2：单游，3：胡，4：六金，5：平胡，6:抢杠胡 7:抢金，8：三游，9：四金倒，10：三金倒，11：三金游，12：十三幺\n        *  13：双游，14：天胡，15：五金，16：自摸 17:接炮\n        */\n        let huType=this.ShareDefine.HuTypeStringDict[huTypeName];\n        if(typeof(huType)==\"undefined\"){\n            huNode.active = false;\n        }else if(huType == this.ShareDefine.HuType_DianPao){\n            huNode.active = true;\n        }else if(huType == this.ShareDefine.HuType_JiePao){\n            huNode.active = true;\n        }else if(huType == this.ShareDefine.HuType_ZiMo){\n            huNode.active = true;\n        }else if(huType == this.ShareDefine.HuType_QGH){\n            huNode.active = true;\n        }else {\n            huNode.active = false;\n        } \n    },\n    ShowPlayerShowCard: function (showNode, cardIDList, handCard, jin1, jin2) {\n        showNode.active = 1;\n        let count = 0;\n        if (typeof(cardIDList) != \"undefined\") {\n            count = cardIDList.length;\n        }\n        let kuangList = this.HuList.kuangList;\n        for (let index = 0; index < count; index++) {\n            let cardID = cardIDList[index];\n            let childName = this.ComTool.StringAddNumSuffix(\"card\", index + 1, 2);\n            let childNode = showNode.getChildByName(childName);\n            if (!childNode) {\n                this.ErrLog(\"ShowAllDownCard not find childName:%s\", childName);\n                continue\n            }\n            if (handCard == cardID) {\n                childNode.active = false;\n                continue;\n            }\n            //框住不能打的牌\n            let img_kuangSpr = null;\n            for (let i = 0; i < kuangList.length; i++) {\n                let lockListTemp = kuangList[i];\n                for (let j = 0; j < lockListTemp.length; j++) {\n                    if (lockListTemp[j] == cardID) {\n                        if (j==0) {\n                            img_kuangSpr = this.img_kuang[0];\n                        }else if (j==(lockListTemp.length - 1)) {\n                            img_kuangSpr = this.img_kuang[2];\n                        }else{\n                            img_kuangSpr = this.img_kuang[1];\n                        }\n                    }\n                }\n            }\n            childNode.getChildByName('img_kuang').getComponent(cc.Sprite).spriteFrame = img_kuangSpr;\n            childNode.active = 1;\n            this.ShowImage(childNode, cardID);\n        }\n        //设置多余的卡牌位置空\n        for (let cardIndex = count + 1; cardIndex <= this.ChildCount; cardIndex++) {\n            let childName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex, 2);\n            let childNode = showNode.getChildByName(childName);\n            if (!childNode) {\n                continue\n            }\n            childNode.active = 0;\n        }\n        //进卡不能控制显影只能设置空图片\n        if (handCard > 0 && handCard != 5000) {\n            this.sp_in.active = 1;\n            this.ShowImage(this.sp_in, handCard);\n        } else {\n            this.sp_in.getComponent(cc.Sprite).spriteFrame = \"\";\n            this.sp_in.UserData = null;\n        }\n    },\n    ShowPlayerDownCard: function (showNode, publishcard, jin1 = 0, jin2 = 0) {\n        showNode.active = 1;\n        let count=0;\n        if(typeof(publishcard)!=\"undefined\"){\n            count = publishcard.length;\n        }\n        for(let index=0; index<count; index++){\n            let publicInfoList = publishcard[index];\n            let cardIDList = publicInfoList.slice(3, publicInfoList.length);\n            //操作类型\n            let opType = publicInfoList[0];\n            //如果是暗杠,前面3个盖牌，最后一个显示牌\n            if(opType == this.ShareDefine.OpType_AnGang){\n                cardIDList = [0,0,0,cardIDList[0]];\n            }\n            let childName = this.ComTool.StringAddNumSuffix(\"down\", index + 1, 2);\n            let childNode = showNode.getChildByName(childName);\n            if(!childNode){\n                continue\n            }\n            childNode.active = true;\n            let cardCount = cardIDList.length;\n            for(let cardIndex=0; cardIndex<cardCount; cardIndex++){\n                let cardID = cardIDList[cardIndex];\n                let paiChildName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex + 1, 2);\n                let childPath = [childName, paiChildName].join(\"/\");\n                let childNode = cc.find(childPath, showNode);\n                if(!childNode){\n                    continue\n                }\n                childNode.active = true;\n                this.ShowImage(childNode, cardID);\n            }\n            //设置多余的卡牌位置空\n            for(let cardIndex=cardCount+1; cardIndex <= this.PaiChildCount; cardIndex++){\n                let paiChildName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex, 2);\n                let childPath = [childName, paiChildName].join(\"/\");\n                let childNode = cc.find(childPath, showNode);\n                if(!childNode){\n                    continue\n                }\n                childNode.active = false;\n                let cardSprite = childNode.getComponent(cc.Sprite);\n                cardSprite.spriteFrame = null;\n\n            }\n        }\n\n        //隐藏掉剩余的卡牌\n        for(let index=count+1; index <= this.ChildCount; index++){\n            let childName = this.ComTool.StringAddNumSuffix(\"down\", index, 2);\n            let childNode = showNode.getChildByName(childName);\n            if(!childNode){\n                continue\n            }\n            childNode.active = false;\n        }\n    },\n    ShowImage: function (childNode, cardID) {\n        //显示贴图\n        let childSprite = childNode.getComponent(cc.Sprite);\n        if (!childSprite) {\n            this.ErrLog(\"ShowOutCard(%s) not find cc.Sprite\", childNode.name);\n            return\n        }\n        app.ResManager().SetMJSpriteFrameToNode(this.filePath,Math.floor(cardID / 100), childNode, function(){});\n    },\n    LabelName:function(huType){\n        let LabelArray=[];\n        LabelArray['HuXiNum']=\"胡息\";\n        LabelArray['ChaHu']=\"插胡\";\n        LabelArray['ChaKan']=\"插坎\";\n        return LabelArray[huType];\n    },\n});\n"]}