{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIBangdingshouji.js"],"names":["app","require","cc","Class","extends","properties","oldPhoneEditBox","EditBox","newPhoneEditBox","codeEditBox","btnGetCode","Node","btnSure","btnSure1","lb_time","OnCreateInit","RegEvent","Event_CodeError","event","codeInfo","ShowSysMsg","OnShow","phoneOldNo","phoneNo","string","mustBangDing","self","NetManager","SendPack","serverPack","node","parent","active","error","console","OnClick","btnName","btnNode","CloseForm","click_btn_yanzhengma","click_phone_set","click_phone_reset","checkPhone","phone","test","sms_temple","substr","yanzhengUrl","SendHttpRequest","code","checkCodeUrl","phoneOld","serverUrl","argString","requestType","sendPack","NetRequest","OnReceiveHttpPack","bind","OnConnectHttpFail","ShowYanZhengMaTime","getComponent","Label","lb_times","unschedule","httpResText","JSON","parse","schedule","scheduleOnce","that","success","msg","readyState","status"],"mappings":"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","file":"UIBangdingshouji.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        oldPhoneEditBox:cc.EditBox,\n        newPhoneEditBox:cc.EditBox,\n        codeEditBox:cc.EditBox,\n        btnGetCode:cc.Node,\n        btnSure:cc.Node,\n        btnSure1:cc.Node,\n        lb_time:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.RegEvent(\"CodeError\", this.Event_CodeError);\n    },\n    Event_CodeError:function(event){\n        let codeInfo = event;\n        if(codeInfo[\"Code\"] == 5120){\n            this.ShowSysMsg(\"手机已被绑定\");\n            return;\n        }else if(codeInfo[\"Code\"] == 5116){\n            this.ShowSysMsg(\"手机号码错误\");\n            return;\n        }else if(codeInfo[\"Code\"] == 5117){\n            this.ShowSysMsg(\"原手机号码错误\");\n            return;\n        }else if(codeInfo[\"Code\"] == 5118){\n            this.ShowSysMsg(\"验证码错误\");\n            return;\n        }else if(codeInfo[\"Code\"] == 5119){\n            this.ShowSysMsg(\"不存在的手机号码\");\n            return;\n        }\n    },\n    //---------显示函数--------------------\n    OnShow:function () {\n        this.phoneOldNo = 0;\n        this.phoneNo = 0;\n        this.oldPhoneEditBox.string = \"\";\n        this.newPhoneEditBox.string = \"\";\n        this.codeEditBox.string = \"\";\n        this.mustBangDing=false;\n        //检验是否绑定手机\n        let self = this;\n        app.NetManager().SendPack(\"game.CPlayerCheckPhone\", {}, function(serverPack){\n            if (serverPack == \"0\") {\n                self.oldPhoneEditBox.node.parent.active = false;\n                self.btnSure.active = true;\n                self.btnSure1.active = false;\n            }else{\n                self.oldPhoneEditBox.node.parent.active = true;\n                self.btnSure.active = false;\n                self.btnSure1.active = true;\n            }\n        }, function(error){\n            console.error(error);\n        });\n        app.NetManager().SendPack(\"game.CPlayerForcePhone\", {}, function(serverPack){\n            self.mustBangDing=true;\n        }, function(error){\n        });\n    },\n\n    //---------点击函数---------------------\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btnClose\"){\n            if(this.mustBangDing==true){\n                this.ShowSysMsg('您是平台合作伙伴，请绑定手机！');\n                this.mustBangDing=false;\n                return;\n            }\n            this.CloseForm();\n        }\n        else if(btnName == \"btnGetCode\"){\n            this.click_btn_yanzhengma();\n        }\n        else if(btnName == \"btnSure\"){\n            this.click_phone_set();\n        }\n        else if(btnName == \"btnSure1\"){\n            this.click_phone_reset();\n        }\n    },\n    checkPhone:function(phone){\n        if(!(/^1[3456789]\\d{9}$/.test(phone))){ \n            //不是国内\n        }else{\n            return 1;\n        }\n        if(!(/^09\\d{8}$/.test(phone))){ \n            //不是台湾\n        }else{\n            return 2;\n        }\n        if(!(/^00886\\d{9}$/.test(phone))){ \n            //不是台湾\n        }else{\n            return 3;\n        }\n        return false;\n    },\n   \n    click_btn_yanzhengma:function(){\n        let phone = this.newPhoneEditBox.string;\n        if(!phone){\n            this.ShowSysMsg('请填写手机号码');\n            return;\n        }\n        let checkPhone=this.checkPhone(phone);\n        if(checkPhone==false){\n            this.ShowSysMsg('电话号码有误');\n            return;\n        }\n        let sms_temple=\"SMS_154085055\";\n        if(checkPhone==2){\n            //台湾手机\n            sms_temple=\"SMS_194050862\";\n            //00886\n            phone=\"00886\"+phone.substr(1);\n        }\n        if(checkPhone==3){\n            //台湾手机\n            sms_temple=\"SMS_194050862\";\n        }\n        this.yanzhengUrl=\"http://code.qicaiqh.com/SendCode\";\n\n        this.SendHttpRequest(this.yanzhengUrl,\"?mobile=\"+phone+\"&sms_temple=\"+sms_temple,\"GET\",{});\n\n    },\n   \n    click_phone_set:function(){\n        let phone = this.newPhoneEditBox.string;\n        if(!phone){\n            this.ShowSysMsg('请填写手机号码');\n            return;\n        }\n        this.phoneNo=phone;\n        if(this.checkPhone(phone)==false){\n            this.ShowSysMsg('电话号码有误');\n            return;\n        }\n        let code = this.codeEditBox.string;\n        if(!code){\n            this.ShowSysMsg('请填写验证码');\n            return;\n        }\n        this.checkCodeUrl=\"http://code.qicaiqh.com/CheckCode\";\n        this.SendHttpRequest(this.checkCodeUrl,\"?mobile=\"+phone+\"&code=\"+code,\"GET\",{});\n    },\n\n    click_phone_reset:function(){\n        let phoneOld = this.oldPhoneEditBox.string;\n        if(!phoneOld){\n            this.ShowSysMsg('请填写旧手机号码');\n            return;\n        }\n        this.phoneOldNo = phoneOld;\n        if(this.checkPhone(phoneOld)==false){\n            this.ShowSysMsg('旧电话号码有误');\n            return;\n        }\n\n        let phone = this.newPhoneEditBox.string;\n        if(!phone){\n            this.ShowSysMsg('请填写新手机号码');\n            return;\n        }\n        this.phoneNo = phone;\n        if(this.checkPhone(phone)==false){\n            this.ShowSysMsg('新电话号码有误');\n            return;\n        }\n        let code = this.codeEditBox.string;\n        if(!code){\n            this.ShowSysMsg('请填写验证码');\n            return;\n        }\n        this.checkCodeUrl=\"http://code.qicaiqh.com/CheckCode\";\n        this.SendHttpRequest(this.checkCodeUrl,\"?mobile=\"+phone+\"&code=\"+code,\"GET\",{});\n    },\n\n    SendHttpRequest:function(serverUrl, argString, requestType, sendPack){\n        app.NetRequest().SendHttpRequest(serverUrl, argString, requestType, sendPack, 2000, \n            this.OnReceiveHttpPack.bind(this), \n            this.OnConnectHttpFail.bind(this),\n            null,\n            this.OnConnectHttpFail.bind(this),\n\t\t);\n        // var url = [serverUrl, argString].join(\"\")\n\n        // var dataStr = JSON.stringify(sendPack);\n\n        // //每次都实例化一个，否则会引起请求结束，实例被释放了\n        // var httpRequest = new XMLHttpRequest();\n\n        // httpRequest.timeout = 2000;\n\n\n        // httpRequest.open(requestType, url, true);\n        // //服务器json解码\n        // //httpRequest.setRequestHeader(\"Content-Type\", \"application/json\");\n        // var that = this;\n        // httpRequest.onerror = function(){\n        //     that.ErrLog(\"httpRequest.error:%s\", url);\n        //     that.OnConnectHttpFail(serverUrl, httpRequest.readyState, httpRequest.status);\n        // };\n        // httpRequest.ontimeout = function(){\n            \n        // };\n        // httpRequest.onreadystatechange = function(){\n        //     //执行成功\n        //     if (httpRequest.status == 200){\n        //         if(httpRequest.readyState == 4){\n        //             that.OnReceiveHttpPack(serverUrl, httpRequest.responseText);\n        //         }\n        //     }\n        //     else{\n        //         that.OnConnectHttpFail(serverUrl, httpRequest.readyState, httpRequest.status);\n        //         that.ErrLog(\"onreadystatechange(%s,%s)\", httpRequest.readyState, httpRequest.status);\n        //     }\n        // };\n        // httpRequest.send(dataStr);\n\n    },\n    ShowYanZhengMaTime:function(){\n        let lb_time = this.lb_time.getComponent(cc.Label);\n        this.lb_times = this.lb_times-1;\n        if(this.lb_times<=0){\n            this.unschedule(this.ShowYanZhengMaTime);\n            lb_time.string=\"\";\n            return;\n        }\n        lb_time.string=this.lb_times+\"秒\";\n        this.lb_time.active = true;\n    },\n    OnReceiveHttpPack:function(serverUrl, httpResText){\n        try{\n            let serverPack = JSON.parse(httpResText);\n            if(serverPack[\"code\"] == 0){\n                if(this.yanzhengUrl==serverUrl){\n                    // let btn_yanzhengma=this.btnGetCode.getComponent(cc.Button);\n                    // btn_yanzhengma.interactable = 0;\n                    // btn_yanzhengma.enableAutoGrayEffect = 1;\n                    this.btnGetCode.active = false;\n                    this.lb_times=60;\n                    this.schedule(this.ShowYanZhengMaTime,1);\n                    this.scheduleOnce(function(){\n                        // btn_yanzhengma.interactable = 1;\n                        // btn_yanzhengma.enableAutoGrayEffect = 0;\n                        this.btnGetCode.active = true;\n                        this.lb_times=0;\n                        this.lb_time.active = false;\n                    },60);\n                }else if(this.checkCodeUrl==serverUrl){\n                    let that=this;\n                    //提交手机号码给服务端\n                    app.NetManager().SendPack(\"game.CPlayerPhone\",{\"oldPhone\":this.phoneOldNo,\"phone\":this.phoneNo},function(success){\n                        if (that.phoneOldNo == 0) {\n                            that.ShowSysMsg('第一次成功绑定手机号码获得10个钻石');\n                        }else{\n                            that.ShowSysMsg('重新绑定手机号码成功');\n                        }\n                        that.mustBangDing=false;\n                        that.btnGetCode.active = true;\n                        that.lb_times=0;\n                        that.unschedule(this.ShowYanZhengMaTime);\n                        that.lb_time.string = \"\";\n                        that.lb_time.active = false;\n                        that.CloseForm();\n                    },function(error){\n                        // that.ShowSysMsg('绑定手机失败');\n                    });\n                    \n                }\n            }else{\n                this.ShowSysMsg(serverPack.msg);\n            }\n        }\n        catch (error){\n            \n        }\n    },\n    OnConnectHttpFail:function(serverUrl, readyState, status){\n        \n    },\n});\n"]}