{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\xymj/assets\\script\\ui\\uiGame\\xymj\\xymjChildCreateRoom.js"],"names":["app","require","xymjChildCreateRoom","cc","Class","extends","properties","CreateSendPack","renshu","setCount","isSpiltRoomCard","sendPack","xianShi","GetIdxByKey","wanfa","jiesan","gaoji","i","Toggles","length","getChildByName","active","push","kexuanwanfa","module","exports"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEA,IAAIC,sBAAsBC,GAAGC,KAAH,CAAS;AAClCC,aAASJ,QAAQ,qBAAR,CADyB;;AAGlCK,gBAAY,EAHsB;AAIlC;AACAC,oBAAgB,wBAAUC,MAAV,EAAkBC,QAAlB,EAA4BC,eAA5B,EAA6C;AACtD,YAAIC,WAAW,EAAf;AACN,YAAIC,UAAU,KAAKC,WAAL,CAAiB,SAAjB,CAAd;AACA,YAAIC,QAAQ,KAAKD,WAAL,CAAiB,OAAjB,CAAZ;AACA,YAAIE,SAAS,KAAKF,WAAL,CAAiB,QAAjB,CAAb;AACA,YAAIG,QAAQ,EAAZ;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKC,OAAL,CAAa,OAAb,EAAsBC,MAA1C,EAAkDF,GAAlD,EAAuD;AACtD,gBAAI,KAAKC,OAAL,CAAa,OAAb,EAAsBD,CAAtB,EAAyBG,cAAzB,CAAwC,WAAxC,EAAqDC,MAAzD,EAAiE;AAChEL,sBAAMM,IAAN,CAAWL,CAAX;AACA;AACD;AACD,YAAIM,cAAc,EAAlB;AACA,aAAK,IAAIN,KAAI,CAAb,EAAgBA,KAAI,KAAKC,OAAL,CAAa,aAAb,EAA4BC,MAAhD,EAAwDF,IAAxD,EAA6D;AAC5D,gBAAI,KAAKC,OAAL,CAAa,aAAb,EAA4BD,EAA5B,EAA+BG,cAA/B,CAA8C,WAA9C,EAA2DC,MAA/D,EAAuE;AACtEE,4BAAYD,IAAZ,CAAiBL,EAAjB;AACA;AACD;AACDN,mBAAW;AACV,uBAAWC,OADD;AAEV,qBAASE,KAFC;AAGV,sBAAUC,MAHA;AAIV,2BAAeQ,WAJL;AAKV,4BAAgBf,OAAO,CAAP,CALN;AAMV,yBAAaA,OAAO,CAAP,CANH;AAOV,wBAAYC,QAPF;AAQV,mCAAuBC,eARb;AASV,qBAASM;AATC,SAAX;AAWA,eAAOL,QAAP;AACA;AACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAnC+B,CAAT,CAA1B;;AA+LAa,OAAOC,OAAP,GAAiBvB,mBAAjB","file":"xymjChildCreateRoom.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\xymj","sourcesContent":["/*\n创建房间子界面\n */\nvar app = require(\"app\");\n\nvar xymjChildCreateRoom = cc.Class({\n\textends: require(\"BaseChildCreateRoom\"),\n\n\tproperties: {},\n\t//需要自己重写\n\tCreateSendPack: function (renshu, setCount, isSpiltRoomCard) {\n        let sendPack = {};\n\t\tlet xianShi = this.GetIdxByKey(\"xianShi\");\n\t\tlet wanfa = this.GetIdxByKey(\"wanfa\");\n\t\tlet jiesan = this.GetIdxByKey(\"jiesan\");\n\t\tlet gaoji = [];\n\t\tfor (let i = 0; i < this.Toggles[\"gaoji\"].length; i++) {\n\t\t\tif (this.Toggles[\"gaoji\"][i].getChildByName(\"checkmark\").active) {\n\t\t\t\tgaoji.push(i);\n\t\t\t}\n\t\t}\n\t\tlet kexuanwanfa = [];\n\t\tfor (let i = 0; i < this.Toggles[\"kexuanwanfa\"].length; i++) {\n\t\t\tif (this.Toggles[\"kexuanwanfa\"][i].getChildByName(\"checkmark\").active) {\n\t\t\t\tkexuanwanfa.push(i);\n\t\t\t}\n\t\t}\n\t\tsendPack = {\n\t\t\t\"xianShi\": xianShi,\n\t\t\t\"wanfa\": wanfa,\n\t\t\t\"jiesan\": jiesan,\n\t\t\t\"kexuanwanfa\": kexuanwanfa,\n\t\t\t\"playerMinNum\": renshu[0],\n\t\t\t\"playerNum\": renshu[1],\n\t\t\t\"setCount\": setCount,\n\t\t\t\"paymentRoomCardType\": isSpiltRoomCard,\n\t\t\t\"gaoji\": gaoji,\n\t\t};\n\t\treturn sendPack;\n\t},\n    /*UpdateTogglesLabel:function (TogglesNode, isResetPos=true) {\n        let curKey = TogglesNode.name.substring(('Toggles_').length,TogglesNode.name.length);\n        let reg = /\\/s/g;\n        for(let key in this.gameCreateConfig){\n            if(this.gameType == this.gameCreateConfig[key].GameName){\n                if(curKey == this.gameCreateConfig[key].Key){\n                    let AAfangfeiDatas = [];\n                    let WinfangfeiDatas = [];\n                    let FangZhufangfeiDatas = [];\n                    let clubGuanLiFangFeiDatas=[];\n                    let clubWinFangFeiDatas=[];\n                    let clubAAFangFeiDatas=[];\n                    let unionGuanliFangFeiDatas=[];\n                    let title = this.gameCreateConfig[key].Title.replace(reg, ' ');\n                    TogglesNode.getChildByName('title').getComponent(cc.Label).string = title;\n                    let descList = [];\n                    if('jushu' != curKey){//局数读roomcost\n                        descList = this.gameCreateConfig[key].ToggleDesc.split(',');\n                        if(this.clubData && 'fangfei' == curKey){\n                            descList = ['管理付'];\n                        }else if(this.unionData && 'fangfei' == curKey){\n                            descList = ['盟主付'];\n                        }\n                        if(descList.length != TogglesNode.children.length -2){//减去标题和帮助按钮\n                            this.ErrLog('gameCreate config ToggleDesc and Toggle count error');\n                            break;\n                        }\n                    }\n                    let jushuIndex = -1;\n                    let renshuIndex = -1;\n                    let renshu = [];//0表示读房主支付配置\n                    if('renshu' == curKey || 'fangfei' == curKey || 'jushu' == curKey){\n                        \n                        let publicCosts = this.getCostData(renshu);\n\n                        if(this.Toggles['renshu'])\n                            renshu = this.getCurSelectRenShu();\n\n                        let SpiltCosts = this.getCostData(renshu);\n                        let curCostData = null;\n                        if(0 == renshu.length){\n                            curCostData = publicCosts;\n                        }\n                        else{\n                            curCostData = SpiltCosts;\n                        }\n                        if(this.Toggles['jushu']){\n                            jushuIndex = 0;\n                            for(let i=0;i<this.Toggles['jushu'].length;i++){\n                                let mark = this.Toggles['jushu'][i].getChildByName('checkmark').active;\n                                if(mark){\n                                    jushuIndex = i;\n                                    break;\n                                }\n                                jushuIndex++;\n                            }\n                            for(let i=0; i<curCostData.length; i++){\n                                if(curCostData[i].SetCount==102){\n                                    this.Toggles['jushu'][i].getChildByName('label').getComponent(cc.Label).string = '2圈';\n                                }else{\n                                    this.Toggles['jushu'][i].getChildByName('label').getComponent(cc.Label).string = curCostData[i].SetCount + '局';\n                                }\n                                \n                            }\n                        }\n                        if(this.Toggles['fangfei'] && -1 != jushuIndex){\n                            if(jushuIndex < publicCosts.length){\n                                AAfangfeiDatas.push(publicCosts[jushuIndex].AaCostCount);\n                                WinfangfeiDatas.push(publicCosts[jushuIndex].WinCostCount);\n                                FangZhufangfeiDatas.push(publicCosts[jushuIndex].CostCount);\n\n                                clubGuanLiFangFeiDatas.push(publicCosts[jushuIndex].ClubCostCount);\n                                clubWinFangFeiDatas.push(publicCosts[jushuIndex].ClubWinCostCount);\n                                clubAAFangFeiDatas.push(publicCosts[jushuIndex].ClubAaCostCount);\n                                //赛事房费\n                                unionGuanliFangFeiDatas.push(publicCosts[jushuIndex].UnionCostCount);\n                            }\n                            if(jushuIndex < SpiltCosts.length){\n                                AAfangfeiDatas.push(SpiltCosts[jushuIndex].AaCostCount);\n                                WinfangfeiDatas.push(SpiltCosts[jushuIndex].WinCostCount);\n                                FangZhufangfeiDatas.push(SpiltCosts[jushuIndex].CostCount);\n\n                                clubGuanLiFangFeiDatas.push(SpiltCosts[jushuIndex].ClubCostCount);\n                                clubWinFangFeiDatas.push(SpiltCosts[jushuIndex].ClubWinCostCount);\n                                clubAAFangFeiDatas.push(SpiltCosts[jushuIndex].ClubAaCostCount);\n                                //赛事房费\n                                unionGuanliFangFeiDatas.push(SpiltCosts[jushuIndex].UnionCostCount);\n                            }\n                        }\n                    }\n                    if('jushu' != curKey){\n                        let descInde = 0;\n                        for(let i=0;i<TogglesNode.children.length;i++){\n                            if(TogglesNode.children[i].name.startsWith('Toggle')){\n                                TogglesNode.children[i].getChildByName('label').getComponent(cc.Label).string = descList[descInde];\n                                descInde++;\n                            }\n                        }\n                    }\n\n                    if(0 != AAfangfeiDatas.length){\n                        let needCount = AAfangfeiDatas[AAfangfeiDatas.length - 1];\n                        let ffNodes = this.Toggles['fangfei'];\n                        let hasHideNode = false;\n                        let spacing = this.gameCreateConfig[key].Spacing.toString().split(',');\n                        for(let s=0;s<ffNodes.length;s++){\n                            let needNode = ffNodes[s].getChildByName('fangfeiNode');\n                            needNode.active = true;\n                            if (hasHideNode && !needNode.parent.isFirstNode && isResetPos) {\n                                needNode.parent.x = needNode.parent.x - spacing[s] - 80;\n                                hasHideNode = false;\n                            }\n                            //如果房费配的是0，则隐藏\n                            if (needCount <= 0 && 1 == s) {\n                                needNode.parent.active = false;\n                                hasHideNode = true;\n                                continue;\n                            }\n                            if(this.clubData==null && this.unionData == null){\n                                if(0 == s)\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + FangZhufangfeiDatas[FangZhufangfeiDatas.length - 1];\n                                else if(1 == s)\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + AAfangfeiDatas[AAfangfeiDatas.length - 1];\n                                else{\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + WinfangfeiDatas[WinfangfeiDatas.length - 1];\n                                }\n                            }else if (this.clubData==null && this.unionData != null){\n                                if(0 == s)\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + unionGuanliFangFeiDatas[unionGuanliFangFeiDatas.length - 1];\n                            }else{\n                                if(0 == s)\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + clubGuanLiFangFeiDatas[clubGuanLiFangFeiDatas.length - 1];\n                                else if(1==s){\n                                    needNode.getChildByName('icon').active=false;\n                                    needNode.getChildByName('icon_qk').active=true;\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + clubAAFangFeiDatas[clubAAFangFeiDatas.length - 1];\n                                    needNode.getChildByName('needNum').clubWinnerPayConsume = clubAAFangFeiDatas[clubAAFangFeiDatas.length - 1];\n                                    ffNodes[s].getChildByName('editbox').active=false;\n                                }else{\n                                    needNode.getChildByName('icon').active=false;\n                                    needNode.getChildByName('icon_qk').active=true;\n                                    needNode.getChildByName('needNum').getComponent(cc.Label).string = 'x' + clubWinFangFeiDatas[clubWinFangFeiDatas.length - 1];\n                                    needNode.getChildByName('needNum').clubWinnerPayConsume = clubWinFangFeiDatas[clubWinFangFeiDatas.length - 1];\n                                    ffNodes[s].getChildByName('editbox').active=false;\n                                }\n                            } \n                        }\n                    }\n                }\n            }\n        }\n    },*/\n});\n\n\n\nmodule.exports = xymjChildCreateRoom;"]}