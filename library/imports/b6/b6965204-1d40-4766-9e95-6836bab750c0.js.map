{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2/assets\\script\\ui\\club_2\\UIClubChangePromotion_2.js"],"names":["app","require","cc","Class","extends","properties","chazhaoEditBox","EditBox","OnCreateInit","rankScrollView","node","getChildByName","getComponent","ScrollView","on","GetNextPage","OnShow","clubId","pid","opClubId","opPid","curPage","GetUnionDynamicItemList","GetPage","isRefresh","sendPack","query","string","pageNum","self","NetManager","SendPack","serverPack","UpdateScrollView","roomScrollView","content","scrollToTop","DestroyAllChildren","demo","active","i","length","child","instantiate","Sprite","enabled","shortPlayer","Label","name","GetMinisterStr","minister","upPlayerName","addChild","OnClick","btnName","btnNode","CloseForm","parent","upLevelId","Client","OnEvent","ErrLog"],"mappings":"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","file":"UIClubChangePromotion_2.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        chazhaoEditBox:cc.EditBox,\n    },\n\n    OnCreateInit: function () {\n        this.rankScrollView = this.node.getChildByName(\"rankScrollView\");\n        this.rankScrollView.getComponent(cc.ScrollView).node.on('scroll-to-bottom',this.GetNextPage,this);\n    },\n    OnShow: function (clubId,pid) {\n        this.opClubId = clubId;\n        this.opPid = pid;\n        this.curPage = 1;\n        this.GetUnionDynamicItemList(true);\n    },\n    GetPage:function(){\n        this.curPage++;\n        this.GetUnionDynamicItemList(false);\n    },\n    GetUnionDynamicItemList:function(isRefresh){\n        let sendPack = {};\n        sendPack.clubId = this.opClubId;\n        sendPack.pid = this.opPid;\n        sendPack.query = this.chazhaoEditBox.string;\n        sendPack.pageNum = this.curPage;\n        let self = this;\n        app.NetManager().SendPack(\"Club.CClubChangePromotionZhongZhi\",sendPack, function(serverPack){\n            self.UpdateScrollView(serverPack, isRefresh);\n        }, function(){\n\n        });\n    },\n    UpdateScrollView:function(serverPack, isRefresh){\n        let roomScrollView = this.node.getChildByName(\"mark\");\n        let content = this.rankScrollView.getChildByName(\"view\").getChildByName(\"content\");\n        if (isRefresh) {\n            this.rankScrollView.getComponent(cc.ScrollView).scrollToTop();\n            this.DestroyAllChildren(content);\n        }\n        let demo = this.node.getChildByName(\"demo\");\n        demo.active = false;\n        for (let i = 0; i < serverPack.length; i++) {\n            let child = cc.instantiate(demo);\n            if (i%2 == 0) {\n                child.getComponent(cc.Sprite).enabled = false;\n            }else{\n                child.getComponent(cc.Sprite).enabled = true;\n            }\n            child.shortPlayer = serverPack[i].shortPlayer;\n            child.getChildByName(\"lb_name\").getComponent(cc.Label).string = serverPack[i].shortPlayer.name;\n            child.getChildByName(\"lb_id\").getComponent(cc.Label).string = serverPack[i].shortPlayer.pid;\n            child.getChildByName(\"lb_minister\").getComponent(cc.Label).string = this.GetMinisterStr(serverPack[i].minister);\n            child.getChildByName(\"lb_upPlayerName\").getComponent(cc.Label).string = serverPack[i].upPlayerName;\n            child.active = true;\n            content.addChild(child);\n        }\n    },\n    // //**是否是管理,不是为null,是为1，2为创建者\n    GetMinisterStr:function(minister){\n        if (minister == 1) {\n            return \"管理员\";\n        }else if (minister == 2) {\n            return \"创建者\";\n        }else{\n            return \"成员\";\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else if (\"btn_search\" == btnName) {\n            this.curPage = 1;\n            this.GetUnionDynamicItemList(true);\n        }else if (\"btn_changeCaptain\" == btnName) {\n            this.curPage = 1;\n            let sendPack = {};\n            sendPack.clubId = this.opClubId;\n            sendPack.pid = btnNode.parent.shortPlayer.pid;\n            sendPack.upLevelId = this.opPid;\n            let self = this;\n            app.NetManager().SendPack(\"Club.CClubChangePromotionBelongDiaoRu\",sendPack, function(serverPack){\n                self.GetUnionDynamicItemList(true);\n                app.Client.OnEvent('UpdateZhanDuiDetailNodeData', {});\n            }, function(){\n\n            });\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}