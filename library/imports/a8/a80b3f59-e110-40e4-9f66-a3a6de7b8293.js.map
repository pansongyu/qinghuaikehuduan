{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\dnmj/assets\\script\\ui\\uiGame\\dnmj\\dnmj_detail_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ShowPlayerData","resultsList","playerAll","idx","console","log","data","userInfo","node","getChildByName","getComponent","ShowHeroHead","pid","Label","string","ComTool","GetPid","index","player","name","pointList","jufenLayout","jufenDemo","opacity","i","children","length","point","item","instantiate","addChild","x","jiesuan","show","showLabel","huTypesShow","active","sportsPoint","maxPoint","maxDianPao","dianPaoPoint","dissolveState","imagePath","that","loader","loadRes","SpriteFrame","error","spriteFrame","Sprite","huData","jiePaoPoint","ziMoPoint"],"mappings":"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","file":"dnmj_detail_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\dnmj","sourcesContent":["/*\n\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_detail_child\"),\n\n\tproperties: {},\n\n\t// use this for initialization\n\tOnLoad: function () {\n\n\t},\n\tShowPlayerData: function (resultsList, playerAll, idx) {\n\t\tconsole.log(\"总结算数据\", resultsList, playerAll, idx);\n\t\tlet data = resultsList[idx];\n\t\tlet userInfo = this.node.getChildByName(\"user_info\");\n\t\tif (userInfo) {\n\t\t\tuserInfo.getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\").ShowHeroHead(data.pid);\n\t\t\tuserInfo.getChildByName(\"label_id\").getComponent(cc.Label).string = \"ID:\" + app.ComTool().GetPid(data.pid);\n\t\t\tfor (let index in playerAll) {\n\t\t\t\tlet player = playerAll[index];\n\t\t\t\tif (player.pid == data.pid) {\n\t\t\t\t\tuserInfo.getChildByName(\"lable_name\").getComponent(cc.Label).string = player.name;\n\t\t\t\t\t// if(player.sex==app.ShareDefine().HeroSex_Boy){\n\t\t\t\t\t//     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteMale;\n\t\t\t\t\t// }else if(player.sex==app.ShareDefine().HeroSex_Girl){\n\t\t\t\t\t//     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteFeMale;\n\t\t\t\t\t// }\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet pointList = data[\"pointList\"];\n\t\tlet jufenLayout = this.node.getChildByName(\"jufenScrollView\").getChildByName(\"view\").getChildByName(\"content\");\n\t\tlet jufenDemo = this.node.getChildByName(\"demo_item\");\n\t\tjufenDemo.opacity = 0;\n\t\tfor (let i = 0; i < jufenLayout.children.length; i++) {\n\t\t\tjufenLayout.children[i].opacity = 0;\n\t\t}\n\t\tfor (let i = 0; i < pointList.length; i++) {\n\t\t\tlet point = pointList[i];\n\t\t\tlet item = jufenLayout.children[i];\n\t\t\tif (!item) {\n\t\t\t\titem = cc.instantiate(jufenDemo);\n\t\t\t\tjufenLayout.addChild(item);\n\t\t\t\titem.name = \"card\" + 0;\n\t\t\t}\n\t\t\titem.x = -73;\n\t\t\titem.opacity = 255;\n\t\t\titem.getComponent(cc.Label).string = \"第\" + (i + 1) + \"局\";\n\t\t\titem.getChildByName(\"num\").getComponent(cc.Label).string = point;\n\t\t}\n\n\t\tlet jiesuan = this.node.getChildByName(\"jiesuan\");\n\t\tlet show = 1;\n\t\tlet showLabel = false;\n\t\tif (jiesuan) {\n\t\t\tthis.huTypesShow(jiesuan, data);\n\t\t\tif (data.point >= 0) {\n\t\t\t\tjiesuan.getChildByName(\"lb_win\").active = true;\n\t\t\t\tjiesuan.getChildByName(\"lb_lost\").active = false;\n\t\t\t\tjiesuan.getChildByName(\"lb_win\").getComponent(cc.Label).string = '+' + data.point;\n\t\t\t} else {\n\t\t\t\tjiesuan.getChildByName(\"lb_win\").active = false;\n\t\t\t\tjiesuan.getChildByName(\"lb_lost\").active = true;\n\t\t\t\tjiesuan.getChildByName(\"lb_lost\").getComponent(cc.Label).string = data.point;\n\t\t\t}\n\t\t\t//比赛分\n\t\t\tif (typeof(data.sportsPoint) != \"undefined\") {\n\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").active = true;\n\t\t\t\tif (data.sportsPoint > 0) {\n\t\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：+\" + data.sportsPoint;\n\t\t\t\t} else {\n\t\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：\" + data.sportsPoint;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").active = false;\n\t\t\t}\n\t\t}\n\t\tlet maxPoint = 0;\n\t\tlet maxDianPao = 0;\n\t\tfor (let i = 0; i < resultsList.length; i++) {\n\t\t\tlet data = resultsList[i];\n\t\t\tif (data.point > maxPoint) {\n\t\t\t\tmaxPoint = data.point;\n\t\t\t}\n\t\t\tif (data.dianPaoPoint > maxDianPao) {\n\t\t\t\tmaxDianPao = data.dianPaoPoint;\n\t\t\t}\n\t\t}\n\t\t//显示大赢家图标\n\t\tif (data.dianPaoPoint >= maxDianPao && maxDianPao > 0) {\n\t\t\tthis.node.getChildByName('icon_paoshou').active = true;\n\t\t} else {\n\t\t\tthis.node.getChildByName('icon_paoshou').active = false;\n\t\t}\n\t\tif (data.point >= maxPoint) {\n\t\t\tthis.node.getChildByName('icon_win').active = true;\n\t\t\tthis.node.getChildByName('icon_paoshou').active = false;\n\t\t} else {\n\t\t\tthis.node.getChildByName('icon_win').active = false;\n\t\t}\n\n\t\tif (this.node.getChildByName('icon_dissolve') != null) {\n\t\t\t//显示是否解散（-1:正常结束,0:未操作,1:同意操作,2:拒绝操作,3:发起者）\n\t\t\tif (typeof(data.dissolveState) == \"undefined\" || data.dissolveState == -1) {\n\t\t\t\tthis.node.getChildByName('icon_dissolve').active = false;\n\t\t\t} else {\n\t\t\t\tlet imagePath = \"texture/record/img_dissolve\" + data.dissolveState;\n\t\t\t\tlet that = this;\n\t\t\t\t//加载图片精灵\n\t\t\t\tcc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tconsole.log(\"加载图片精灵失败  \" + imagePath);\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tthat.node.getChildByName('icon_dissolve').getComponent(cc.Sprite).spriteFrame = spriteFrame;\n\t\t\t\t\tthat.node.getChildByName('icon_dissolve').active = true;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"请检查 xxmj_detail_child预制体是否有 icon_dissolve图集节点\")\n\t\t}\n\t},\n\thuTypesShow: function (jiesuan, huData) {\n\t\tjiesuan.getChildByName('top').getChildByName('lb_dianpao').active = false;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_jiepao').active = false;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_zimo').active = false;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_dianpao').getComponent(cc.Label).string = huData.dianPaoPoint;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_jiepao').getComponent(cc.Label).string = huData.jiePaoPoint;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_zimo').getComponent(cc.Label).string = huData.ziMoPoint;\n\t},\n});\n"]}