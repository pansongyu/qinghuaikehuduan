{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\za13mj/assets\\script\\ui\\uiGame\\za13mj\\za13mj_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ComTool","ShareDefine","SysDataManager","IntegrateImage","GetTableDict","ShowPlayerData","setEnd","playerAll","index","console","log","jin1","jin","jin2","dPos","posResultList","posHuArray","Array","posCount","length","i","posInfo","pos","posHuType","HuTypeStringDict","PlayerInfo","node","active","ShowPlayerMaPai","getChildByName","maList","UpdatePlayData","zhuaNiaoList","huNode","ShowPlayerHuImg","WeChatManager","InitHeroHeadImage","weChatHeadImage","getComponent","ShowHeroHead","showNode","zhongList","children","childNode","childSprite","Sprite","ErrLog","name","imageInfo","indexOf","color","imagePath","spriteFrame","that","ControlManager","CreateLoadPromise","SpriteFrame","then","catch","error","stack","huTypeName","huType","Label","string","HuType_DianPao","HuType_JiePao","HuType_ZiMo","HuType_QGH","LabelName","LabelArray"],"mappings":"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","file":"za13mj_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\za13mj","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_winlost_child\"),\n\n\tproperties: {\n    },\n\n\t// use this for initialization\n\tOnLoad: function () {\n\t\tthis.ComTool = app.ComTool();\n        this.ShareDefine=app.ShareDefine();\n        this.SysDataManager = app.SysDataManager();\n        this.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\n\t},\n    ShowPlayerData: function (setEnd, playerAll, index) {\n        console.log(\"单局结算数据\", setEnd, playerAll, index);\n        let jin1 = setEnd.jin;\n        let jin2 = 0;\n        if (setEnd.jin2 > 0) {\n            jin2 = setEnd.jin2;\n        }\n        let dPos = setEnd.dPos;\n        let posResultList = setEnd[\"posResultList\"];\n        let posHuArray = new Array();\n        let posCount = posResultList.length;\n        for (let i = 0; i < posCount; i++) {\n            let posInfo = posResultList[i];\n            let pos = posInfo[\"pos\"];\n            let posHuType = this.ShareDefine.HuTypeStringDict[posInfo[\"huType\"]];\n            posHuArray[pos] = posHuType;\n        }\n        let PlayerInfo = playerAll[index];\n        this.node.active = true;\n        if (posResultList[index][\"huType\"] != \"DianPao\" && posResultList[index][\"huType\"] != \"NotHu\") {\n            this.ShowPlayerMaPai(this.node.getChildByName('maPai'), setEnd.maList, posResultList[index][\"zhongList\"]);\n        }else{\n            this.node.getChildByName('maPai').active = false;\n        }\n        this.UpdatePlayData(this.node, posResultList[index], PlayerInfo, jin1, jin2, setEnd.zhuaNiaoList);\n        let huNode = this.node.getChildByName('jiesuan').getChildByName('hutype');\n        this.ShowPlayerHuImg(huNode, posResultList[index]['huType']);\n\n        if (dPos === index) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        }\n        //显示头像，如果头像UI\n        if (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n            app.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n        }\n        let weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        weChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n    },\n    ShowPlayerMaPai: function (showNode, maList, zhongList) {\n        if (maList.length == 0) {\n            showNode.active = false;\n            return;\n        }\n        showNode.active = 1;\n        for (let i = 0; i < showNode.children.length; i++) {\n            showNode.children[i].active = false;\n        }\n        for (var i = 0; i < maList.length; i++) {\n            let childNode = showNode.getChildByName(\"card\"+(i+1));\n            let childSprite = childNode.getComponent(cc.Sprite);\n            if (!childSprite) {\n                this.ErrLog(\"ShowOutCard(%s) not find cc.Sprite\", childNode.name);\n                return\n            }\n            let imageInfo = this.IntegrateImage[\"EatCard_Self_\"+maList[i]];\n            if (!imageInfo) {\n                return\n            }\n            childNode.active = 1;\n            if(zhongList.indexOf(maList[i]) >= 0){\n                childNode.color=cc.color(255,255,0);\n            }else{\n                childNode.color=cc.color(255,255,255);\n            }\n            let imagePath = imageInfo[\"FilePath\"];\n            if (app['majiang_' + \"EatCard_Self_\"+maList[i]]) {\n                childSprite.spriteFrame = app['majiang_' + \"EatCard_Self_\"+maList[i]];\n            } else {\n                let that = this;\n                app.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame)\n                    .then(function (spriteFrame) {\n                        if (!spriteFrame) {\n                            that.ErrLog(\"OpenPoker(%s) load spriteFrame fail\", imagePath);\n                            return\n                        }\n                        childSprite.spriteFrame = spriteFrame;\n                    })\n                    .catch(function (error) {\n                        that.ErrLog(\"OpenPoker(%s) error:%s\", imagePath, error.stack);\n                    });\n            }\n        }\n    },\n    ShowPlayerHuImg:function(huNode,huTypeName){\n        /*huLbIcon\n        *  0:单吊，1：点炮，2：单游，3：胡，4：六金，5：平胡，6:抢杠胡 7:抢金，8：三游，9：四金倒，10：三金倒，11：三金游，12：十三幺\n        *  13：双游，14：天胡，15：五金，16：自摸 17:接炮\n        */\n        let huType=this.ShareDefine.HuTypeStringDict[huTypeName];\n        if(typeof(huType)==\"undefined\"){\n            huNode.getComponent(cc.Label).string = '';\n        }else if(huType == this.ShareDefine.HuType_DianPao){\n            huNode.getComponent(cc.Label).string = '点泡';\n        }else if(huType == this.ShareDefine.HuType_JiePao){\n            huNode.getComponent(cc.Label).string = '接炮';\n        }else if(huType == this.ShareDefine.HuType_ZiMo){\n            huNode.getComponent(cc.Label).string = '自摸';\n        }else if(huType == this.ShareDefine.HuType_QGH){\n            huNode.getComponent(cc.Label).string = '抢杠胡';\n        }else {\n            huNode.getComponent(cc.Label).string = '';\n        } \n  },\n  LabelName:function(huType){\n        let LabelArray=[];\n        LabelArray['PH']=\"平胡\";\n        LabelArray['AG']=\"暗杠\";\n        LabelArray['Hu']=\"胡\";\n        LabelArray['JMF']=\"中马分\";\n        LabelArray['MG']=\"明杠\";\n        LabelArray['JG']=\"接杠\";\n        LabelArray['DG']=\"点杠\";\n        LabelArray['DPF']=\"点炮分\";\n        LabelArray['DGF']=\"点杠分\";\n        LabelArray['JPF']=\"接炮分\";\n        LabelArray['JGF']=\"接杠分\";\n        LabelArray['ZMF']=\"自摸分\";\n        LabelArray['DF']=\"底分\";\n        LabelArray['QYS']=\"清一色\";\n        LabelArray['DDH']=\"对对胡\";\n        LabelArray['QXD']=\"七小对\";\n        LabelArray['HYS']=\"混一色\";\n        LabelArray['HHQXD']=\"豪华七小对\";\n        LabelArray['HYJ']=\"混幺九\";\n        LabelArray['QYJ']=\"清幺九\";\n        LabelArray['DSY']=\"大三元\";\n        LabelArray['ZYS']=\"字一色\";\n        LabelArray['DSX']=\"大四喜\";\n        LabelArray['SSY']=\"十三幺\";\n        LabelArray['TDH']=\"天地胡\";\n        LabelArray['XSY']=\"小三元\";\n        LabelArray['XSX']=\"小四喜\";\n        LabelArray['SHH']=\"双豪华\";\n        LabelArray['HYSDDH']=\"混一色对对胡\";\n        return LabelArray[huType];\n  },\n});\n"]}