{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club/assets\\script\\ui\\club\\UICaseSprots.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","OnShow","data","clubId","node","getChildByName","getComponent","Label","string","sportsPoint","caseSportsPoint","EditBox","OnClick","btnName","btnNode","percentStr","percentFloat","parseFloat","sendPack","packName","type","value","SetWaitForConfirm","ShareDefine","ConfirmYN","SysNotifyManager","ShowSysMsg","CloseForm","ErrLog","SendPointPack","self","NetManager","SendPack","serverPack","msgID","msgArg","cbArg","content","lbSure","lbCancle","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","cbArgs"],"mappings":"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","file":"UICaseSprots.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    OnCreateInit: function () {\n\n    },\n    OnShow: function (data, clubId) {\n        this.data = data;\n        this.clubId = clubId;\n        this.node.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = this.data.sportsPoint;\n        this.node.getChildByName(\"lb_CaseSports\").getComponent(cc.Label).string = this.data.caseSportsPoint;\n        //初始化比赛分输入框\n        this.node.getChildByName(\"PLEditBox\").getComponent(cc.EditBox).string = \"\";\n    },\n    OnClick:function(btnName, btnNode){\n        let percentStr = this.node.getChildByName(\"PLEditBox\").getComponent(cc.EditBox).string;\n        let percentFloat = parseFloat(percentStr);\n        if(btnName == \"btn_Add\"){\n            if (percentFloat > 0 && percentFloat <= this.data.sportsPoint) {\n                let sendPack = {};\n                let packName = \"club.CClubGetCaseSprotsChange\";\n                sendPack.clubId = this.clubId;\n                sendPack.type = 0;\n                sendPack.value = parseFloat(percentStr);\n                this.SetWaitForConfirm(\"CaseSprotsChange_Add\",app.ShareDefine().ConfirmYN,[],[packName,sendPack], \"确认转入\"+parseFloat(percentStr)+\"比赛分到保险箱\");\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入小于自己所拥有比赛分的纯数字\",[],3);\n            }\n        }else if(btnName == \"btn_Del\"){\n            if (percentFloat > 0 && percentFloat <= this.data.caseSportsPoint) {\n                let sendPack = {};\n                let packName = \"club.CClubGetCaseSprotsChange\";\n                sendPack.clubId = this.clubId;\n                sendPack.type = 1;\n                sendPack.value = parseFloat(percentStr);\n                this.SetWaitForConfirm(\"CaseSprotsChange_Del\",app.ShareDefine().ConfirmYN,[],[packName,sendPack], \"确认从保险箱转出\"+parseFloat(percentStr)+\"比赛分\");\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入小于该玩家所拥有保险箱内比赛分的纯数字\",[],3);\n            }\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n    SendPointPack:function(packName, sendPack){\n        let self = this;\n        app.NetManager().SendPack(packName,sendPack, function(serverPack){\n            app.SysNotifyManager().ShowSysMsg(\"成功操作保险箱\",[],3);\n            self.CloseForm();\n        }, function(){\n            // app.SysNotifyManager().ShowSysMsg(\"设置比赛分失败\",[],3);\n        });\n    },\n\n\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[],content = \"\", lbSure =\"\", lbCancle=\"\"){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg,content,lbSure,lbCancle);\n    },\n    OnConFirm:function(clickType, msgID, cbArgs){\n        if(clickType != \"Sure\"){\n            return\n        }\n        if(msgID == \"CaseSprotsChange_Add\"){\n            this.SendPointPack(cbArgs[0],cbArgs[1]);\n        }else if (msgID == \"CaseSprotsChange_Del\"){\n            this.SendPointPack(cbArgs[0],cbArgs[1]);\n        }\n    },\n});\n"]}