{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club/assets\\script\\ui\\club\\UIClubInRoom.js"],"names":["app","require","cc","Class","extends","properties","data","Node","table","table_bg","SpriteFrame","OnCreateInit","NetManager","WeChatManager","RegEvent","Event_RoomStatusChange","Event_RoomPlayerChange","Event_RoomSetChange","serverPack","roomData","roomInfoItem","isClose","roomKey","CloseForm","roomInfo","posList","pos","InitHead","InitUserName","ShowPlayHead","ShowUserName","playerNum","setId","ShowRoomData","OnShow","realWidth","winSize","width","baseX","Math","floor","x","ShowTableBg","gameId","getChildByName","getComponent","Label","string","roomName","ShareDefine","GametTypeID2Name","tagId","jushuStr","setCount","total","left","GameType_JXFZGP","GameType_GD","GameType_WHMJ","GameType_MASMJ","GametTypeID2PinYin","userNameNode","i","node","active","usernode","length","heroID","name","headImageUrl","substr","touxiang","InitHeroHeadImage","WeChatHeadImage","ShowHeroHead","LuoZuo","userlistNode","LuoZuoString","Sprite","spriteFrame","ShowMore","y","action","sequence","moveTo","v2","callFunc","runAction","OnClose","OnClick","btnName","btnNode","SysNotifyManager","ShowSysMsg","clientPos","HeroManager","GetHeroID","gamePY","self","SendPack","roomId","success","Client","OnEvent","error","curGameTypeStr","SetGameType","FormManager","ShowForm","ErrLog"],"mappings":"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","file":"UIClubInRoom.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        data: cc.Node,\n        table: cc.Node,\n        table_bg: [cc.SpriteFrame],\n    },\n\n    //初始化\n    OnCreateInit: function() {\n        this.NetManager = app.NetManager();\n        this.WeChatManager = app.WeChatManager();\n        this.RegEvent(\"OnRoomStateChange\", this.Event_RoomStatusChange, this);\n        this.RegEvent(\"OnRoomPlayerChange\", this.Event_RoomPlayerChange, this);\n        this.RegEvent(\"OnRoomSetChange\", this.Event_RoomSetChange, this);\n\n    },\n    Event_RoomStatusChange: function(serverPack) {\n        let roomData = serverPack.roomInfoItem;\n        let isClose = roomData.isClose;\n        if (roomData.roomKey == this.roomKey) {\n            if (isClose == true) {\n                this.CloseForm(); //房间已经结束\n            }\n        }\n    },\n    Event_RoomPlayerChange: function(serverPack) {\n        if (serverPack.roomKey == this.roomKey) {\n            this.roomInfo.posList[serverPack['pos'].pos] = serverPack['pos'];\n            this.InitHead();\n            this.InitUserName();\n            let posList = this.roomInfo.posList;\n            this.ShowPlayHead(posList);\n            this.ShowUserName(posList, this.roomInfo.playerNum);\n        }\n    },\n    Event_RoomSetChange: function(serverPack) {\n        if (serverPack.roomKey == this.roomKey) {\n            this.roomInfo.setId = serverPack.setId;\n            this.ShowRoomData(this.roomInfo);\n        }\n    },\n    //---------显示函数--------------------\n\n    OnShow: function(roomInfo) {\n        this.roomInfo = roomInfo;\n        this.roomKey = roomInfo.roomKey;\n        this.ShowRoomData(roomInfo);\n        let realWidth = cc.winSize.width;\n        if (realWidth > 1360) {\n            this.baseX = 1100 + Math.floor((realWidth - 1360) / 2);\n        } else {\n            this.baseX = 1100;\n        }\n        this.data.x = this.baseX;\n        this.ShowTableBg(roomInfo.playerNum);\n        let posList = roomInfo.posList;\n        this.InitHead();\n        this.InitUserName();\n        this.ShowPlayHead(posList);\n        this.ShowUserName(posList, roomInfo.playerNum);\n    },\n    ShowRoomData: function(roomData) {\n        this.gameId = roomData.gameId;\n        this.table.getChildByName(\"lb_roomName\").getComponent(cc.Label).string = roomData.roomName;\n        this.table.getChildByName('game_name').getComponent(cc.Label).string = this.ShareDefine.GametTypeID2Name[roomData.gameId];\n        this.table.getChildByName('bg_key').getChildByName('key').getComponent(cc.Label).string = roomData.tagId;\n        let jushuStr = \"\";\n        if (roomData.setCount > 100 && roomData.setCount < 200) {\n            let total = roomData.playerNum * (roomData.setCount % 100);\n            let left = total - roomData.setId;\n            jushuStr = \"剩:\" + left + \"庄\";\n        } else if (roomData.setCount == 201) {\n            jushuStr = \"1拷\";\n        } else if (roomData.setCount == 310) {\n            jushuStr = \"1课:10分\";\n        } else if (roomData.setCount == 311) {\n            jushuStr = \"1课:100分\";\n        } else if (roomData.setCount == 312) {\n            jushuStr = \"局麻\";\n        } else if (roomData.setCount == 401 && roomData.gameId == this.ShareDefine.GameType_JXFZGP) {\n            jushuStr = \"1次\";\n        } else if (roomData.setCount >= 400 && roomData.gameId == this.ShareDefine.GameType_GD) {\n            let setCount = roomData.setCount % 400;\n            if (setCount == 14) {\n                jushuStr = \"过A\";\n            } else {\n                jushuStr = \"过\" + setCount;\n            }\n        } else if (roomData.setCount >= 400 && roomData.gameId == this.ShareDefine.GameType_WHMJ) {\n            jushuStr = roomData.setCount % 400 + \"底\";\n        } else if (roomData.setCount >= 600 && roomData.gameId == this.ShareDefine.GameType_MASMJ) {\n            jushuStr = \"第\" + roomData.setId + \"/\" + roomData.setCount % 600 + \"倒\";\n        } else {\n            jushuStr = \"第\" + roomData.setId + \"/\" + roomData.setCount + \"局\";\n        }\n        if (this.ShareDefine.GametTypeID2PinYin[roomData.gameId] == \"chmj\") {\n            jushuStr = roomData.setCount >= 30 ? roomData.setCount + \"锅\" : \"第\" + roomData.setId + \"/\" + roomData.setCount + \"局\";\n        }\n        if (this.ShareDefine.GametTypeID2PinYin[roomData.gameId] == \"zznsb\") {\n            jushuStr = roomData.setCount == 501 ? \"第\" + roomData.setId + \"/\" + \"千分局\" : \"第\" + roomData.setId + \"/\" + roomData.setCount + \"局\";\n        }\n        if (this.ShareDefine.GametTypeID2PinYin[roomData.gameId] == \"glwsk\") {\n           jushuStr = \"第\" + roomData.setId + \"局\";\n        }\n        jushuStr += \"  \" + roomData.playerNum + \"人\";\n        this.table.getChildByName('jushu').getComponent(cc.Label).string = jushuStr;\n    },\n    InitUserName: function() {\n        let userNameNode = this.data.getChildByName(\"mask\").getChildByName(\"userlist\");\n        for (let i = 0; i < 8; i++) {\n            let node = userNameNode.getChildByName(\"user\" + (i + 1));\n            node.active = false;\n        }\n    },\n    InitHead: function() {\n        for (let i = 0; i < 4; i++) {\n            let usernode = this.table.getChildByName('head_layout').getChildByName('user' + (i + 1));\n            usernode.active = false;\n        }\n    },\n    ShowPlayHead: function(posList) {\n        for (let i = 0; i < posList.length; i++) {\n            if (i > 3) {\n                break;\n            }\n            let heroID = posList[i][\"pid\"];\n            if (heroID > 0) {\n                let name = posList[i][\"name\"];\n                let headImageUrl = posList[i][\"headImageUrl\"];\n                let usernode = this.table.getChildByName('head_layout').getChildByName('user' + (i + 1));\n                usernode.active = true;\n                usernode.getChildByName('name').getChildByName('lb').getComponent(cc.Label).string = name.substr(0, 4);\n                if (heroID > 0) {\n                    let touxiang = usernode.getChildByName('mask').getChildByName('head');\n                    this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n                    let WeChatHeadImage = touxiang.getComponent(\"WeChatHeadImage\");\n                    WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n                }\n            }\n        }\n    },\n    ShowUserName: function(posList, playerNum) {\n        let LuoZuo = 0;\n        let userlistNode = this.data.getChildByName(\"mask\").getChildByName(\"userlist\");\n        for (let i = 0; i < posList.length; i++) {\n            let heroID = posList[i][\"pid\"];\n            if (heroID > 0) {\n                LuoZuo++;\n                let usernode = userlistNode.getChildByName('user' + (i + 1));\n                usernode.active = true;\n                let name = posList[i][\"name\"];\n                usernode.getChildByName(\"lb_name\").getComponent(cc.Label).string = name;\n            }\n        }\n        let LuoZuoString = \"\";\n        if (LuoZuo == 1) {\n            LuoZuoString = \"一人落座\";\n        } else if (LuoZuo == 2) {\n            LuoZuoString = \"两人落座\";\n        } else if (LuoZuo == 3) {\n            LuoZuoString = \"三人落座\";\n        } else if (LuoZuo == 4) {\n            LuoZuoString = \"四人落座\";\n        } else if (LuoZuo == 5) {\n            LuoZuoString = \"五人落座\";\n        } else if (LuoZuo == 6) {\n            LuoZuoString = \"六人落座\";\n        } else if (LuoZuo == 7) {\n            LuoZuoString = \"七人落座\";\n        } else if (LuoZuo == 8) {\n            LuoZuoString = \"八人落座\";\n        }\n        if (LuoZuo == playerNum) {\n            this.data.getChildByName(\"btn_showmore\").getChildByName(\"lb_num\").getComponent(cc.Label).string = \"满座\";\n        } else {\n            this.data.getChildByName(\"btn_showmore\").getChildByName(\"lb_num\").getComponent(cc.Label).string = LuoZuoString;\n        }\n\n    },\n    ShowTableBg: function(playerNum) {\n        if (playerNum < 2 || typeof(playerNum) == \"undefined\") {\n            playerNum = 2;\n        }\n        if (playerNum > 4) {\n            playerNum = 4;\n        }\n\n        this.table.getComponent(cc.Sprite).spriteFrame = this.table_bg[playerNum - 2];\n    },\n    ShowMore: function() {\n        this.data.getChildByName(\"btn_showmore\").getChildByName(\"lb_num\").getComponent(cc.Label).string = \"点击隐藏\";\n        let x = this.baseX - 425;\n        let y = this.data.y;\n        let action = cc.sequence(cc.moveTo(0.2, cc.v2(x, y)), cc.callFunc(function() {}, this));\n        this.data.runAction(action);\n    },\n    OnClose: function() {\n\n    },\n    //---------点击函数---------------------\n    OnClick: function(btnName, btnNode) {\n        if ('btn_exitroom' == btnName) {\n            if (this.roomInfo.setId > 0) {\n                app.SysNotifyManager().ShowSysMsg('房间已经开始，请加入游戏发起解散');\n                return;\n            }\n            //退出房间\n            let posList = this.roomInfo.posList;\n            let clientPos = -1;\n            for (let i = 0; i < posList.length; i++) {\n                if (app.HeroManager().GetHeroID() == posList[i][\"pid\"]) {\n                    clientPos = posList[i][\"pos\"];\n                    break;\n                }\n            }\n            let gamePY = app.ShareDefine().GametTypeID2PinYin[this.gameId];\n            if (clientPos > -1) {\n                let self = this;\n                this.NetManager.SendPack(\"room.CBaseExitRoom\", {\n                    \"roomID\": this.roomInfo.roomId,\n                    \"posIndex\": clientPos\n                }, function(success) {\n                    //正常退出房间，通知大厅跟亲友圈首页\n                    app.Client.OnEvent(\"OutRoom\", {});\n                    self.CloseForm();\n                }, function(error) {\n                    app.SysNotifyManager().ShowSysMsg('退出房间失败,请进入房间操作：error02');\n                });\n            } else {\n                app.SysNotifyManager().ShowSysMsg('退出房间失败,请进入房间操作：error01');\n                return;\n            }\n        } else if ('btn_goroom' == btnName) {\n            let curGameTypeStr = app.ShareDefine().GametTypeID2PinYin[this.gameId];\n            app.Client.SetGameType(curGameTypeStr);\n            this.FormManager.ShowForm(\"UIDownLoadGame\", curGameTypeStr, 0, null, 0, 0, true);\n        } else if ('btn_showmore' == btnName) {\n            if (this.data.x == this.baseX) {\n                this.ShowMore();\n            } else {\n                this.ShowUserName(this.roomInfo.posList);\n                this.data.x = this.baseX;\n            }\n        } else {\n            this.ErrLog(\"OnClick:%s not find\", btnName);\n        }\n    },\n});"]}