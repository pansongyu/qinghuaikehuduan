{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\ysdz/assets\\script\\ui\\uiGame\\ysdz\\ysdz_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","prefab_zhadan","Prefab","prefab_card","lb1","Label","lbSportsPoint","OnLoad","ComTool","ShareDefine","PokerCard","ShowPlayerJieSuan","ShowPlayerHuaCard","ShowPlayerShowCard","onPlusScore","s","ShowPlayerData","setEnd","playerAll","index","jin1","jin2","dPos","posResultList","posHuArray","Array","posCount","length","i","posInfo","pos","posHuType","HuTypeStringDict","PlayerInfo","node","active","UpdatePlayData","getChildByName","ranksType","WeChatManager","InitHeroHeadImage","weChatHeadImage","getComponent","ShowHeroHead","posEndList","youShuDict","str","endPosType","prizePoint","finePoint","setPoint","scorePoint","point","string","sportsPoint","zhaDanLayOut","wasteKings","fineCardList","cardDemo","children","childName","startsWith","cardNode","instantiate","addChild","name","cardValue","ShowCard","console","log","prizeCardList","j","paiNode","zhashu","slice","pailist","num","createCardNode","k","Layout","updateLayout","width","cardType","isShowIcon1","realValue","GetYSDZPokeCard","layOutNode","removeAllChildren","card"],"mappings":"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","file":"ysdz_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\ysdz","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseMJ_winlost_child\"),\n\n    properties: {\n        prefab_zhadan: cc.Prefab,\n        prefab_card: cc.Prefab,\n        lb1: cc.Label,\n        lbSportsPoint: cc.Label,\n    },\n\n    // use this for initialization\n    OnLoad: function () {\n        this.ComTool = app.ComTool();\n        this.ShareDefine = app.ShareDefine();\n        this.PokerCard = app.PokerCard();\n    },\n    ShowPlayerJieSuan() {\n\n    },\n    ShowPlayerHuaCard() {\n\n    },\n    ShowPlayerShowCard() {\n\n    },\n\n    onPlusScore(s) {\n        if (s > 0) {\n            return '+' + s;\n        }\n        return s;\n    },\n\n    ShowPlayerData: function (setEnd, playerAll, index) {\n        let jin1 = setEnd.jin1;\n        let jin2 = setEnd.jin2;\n        let dPos = setEnd.dPos;\n        let posResultList = setEnd[\"posResultList\"];\n        let posHuArray = new Array();\n        let posCount = posResultList.length;\n        for (let i = 0; i < posCount; i++) {\n            let posInfo = posResultList[i];\n            let pos = posInfo[\"pos\"];\n            let posHuType = this.ShareDefine.HuTypeStringDict[posInfo[\"huType\"]];\n            posHuArray[pos] = posHuType;\n        }\n        let PlayerInfo = playerAll[index];\n        this.node.active = true;\n        this.UpdatePlayData(this.node, posResultList[index], PlayerInfo, jin1, jin2);\n\n        if (dPos === index) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        }\n        let ranksType = posResultList[index][\"ranksType\"];\n        this.node.getChildByName(\"user_info\").getChildByName(\"huo\").active = ranksType == 2;\n        //显示头像，如果头像UI\n        if (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n            app.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n        }\n        let weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        weChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n\n\n        //\n        let posEndList = posResultList[index];\n        let youShuDict = {\n            \"ONE\": \"头游\",\n            \"TWO\": \"二游\",\n            \"THREE\": \"三游\",\n            \"NOT\": \"\",\n        };\n\n        //显示头游\n        let str = '';\n        str += youShuDict[posEndList.endPosType] + '   ';\n        //输赢分\n        str += \"奖分:\";\n        str += this.onPlusScore(posEndList.prizePoint) + '  ';\n\n        //赏数\n        str += \"罚分:\";\n        str += this.onPlusScore(posEndList.finePoint) + '  ';\n\n        //赏分\n        str += \"输赢分:\";\n        str += this.onPlusScore(posEndList.setPoint) + '  ';\n        //得分\n        str += '得分:';\n        str += this.onPlusScore(posEndList.scorePoint) + '  ';\n        //总得分\n        str += '总得分:';\n        str += this.onPlusScore(posEndList.point) + '  ';\n        this.lb1.string = str;\n\n        if (posEndList.sportsPoint) {\n            this.lbSportsPoint.string = '比赛分:' + posEndList.sportsPoint;\n        } else {\n            this.lbSportsPoint.string = \"\";\n        }\n\n        //\n        // if (posEndList.totalPoint > 0) {\n        //     PlayerNode.getChildByName('lb_zdf').getComponent(cc.Label).string = \"+\" + posEndList.totalPoint;\n        // } else {\n        //     PlayerNode.getChildByName('lb_zdf').getComponent(cc.Label).string = posEndList.totalPoint;\n        // }\n\n\n        //显示牌\n        let zhaDanLayOut = this.node.getChildByName(\"zhadan\");\n        //显示废王\n        let wasteKings = posEndList.fineCardList;\n        let cardDemo = this.node.getChildByName(\"card1\");\n        for (let i = 0; i < zhaDanLayOut.children.length; i++) {\n            let childName = zhaDanLayOut.children[i][\"name\"];\n            if (childName.startsWith(\"card\")) {\n                zhaDanLayOut.children[i].active = false;\n            }\n        }\n        for (let i = 0; i < wasteKings.length; i++) {\n            let cardNode = zhaDanLayOut.getChildByName(\"card\" + (i + 1));\n            if (!cardNode) {\n                cardNode = cc.instantiate(cardDemo);\n                zhaDanLayOut.addChild(cardNode);\n                cardNode.name = \"card\" + (i + 1);\n            }\n            if (wasteKings[i]) {\n                let cardValue = wasteKings[i];\n                this.ShowCard(cardValue, cardNode, true);\n            } else {\n                cardNode.active = false;\n            }\n        }\n\n\n        for (let i = 0; i < zhaDanLayOut.children.length; i++) {\n            let childName = zhaDanLayOut.children[i][\"name\"];\n            if (childName.startsWith(\"zhadan\")) {\n                zhaDanLayOut.children[i].active = false;\n            }\n        }\n        console.log('当前显示的玩家是', posEndList);\n        let prizeCardList = posEndList.prizeCardList;//[cardList:{}]\n        for (let j = 0; j < prizeCardList.length; j++) {\n            let paiNode = zhaDanLayOut.getChildByName(\"zhadan\" + (j + 1));\n            if (!paiNode) {\n                paiNode = cc.instantiate(this.prefab_zhadan);\n                zhaDanLayOut.addChild(paiNode);\n                paiNode.name = \"zhadan\" + (j + 1);\n                paiNode.active = true;\n            }\n            if (prizeCardList[j]) {\n                // let zhashu = prizeCardList[j].length;\n                let zhashu = prizeCardList[j].slice(1, 2);\n                // let pailist = prizeCardList[j];\n                let pailist = prizeCardList[j].slice(3);\n                paiNode.getChildByName('lb_num').getComponent(cc.Label).string = 'x' + zhashu;\n                let num = pailist.length;\n                this.createCardNode(paiNode, num);\n                for (let k = 0; k < num; k++) {\n                    let cardNode = paiNode.getChildByName('layout').getChildByName('handCard' + (k + 1));\n                    let cardValue = pailist[k];\n                    if (cardValue) {\n                        if (k + 1 == pailist.length) {\n                            this.ShowCard(cardValue, cardNode, true);\n                        } else {\n                            this.ShowCard(cardValue, cardNode, false);\n                        }\n                        cardNode.active = true;\n                    } else {\n                        cardNode.active = false;\n                    }\n                }\n                paiNode.active = true;\n                paiNode.getChildByName(\"layout\").getComponent(cc.Layout).updateLayout();\n                paiNode.width = paiNode.getChildByName(\"layout\").width;\n            } else {\n                paiNode.active = false;\n            }\n        }\n    },\n\n    ShowCard: function (cardType, cardNode, isShowIcon1) {\n        cardNode.active = true;\n        let realValue = 0;\n        if (cardType > 500) {\n            realValue = cardType - 500;\n        } else {\n            realValue = cardType;\n        }\n        if (cardType == 0) {\n            cardNode.getChildByName(\"poker_back\").active = true;\n            return;\n        } else {\n            cardNode.getChildByName(\"poker_back\").active = false;\n        }\n        this.PokerCard.GetYSDZPokeCard(realValue, cardNode, {}, isShowIcon1);\n        // this.PokerCard.GetYSDZPokeCard(cardType, cardNode, {}, isShowIcon1);\n    },\n\n    createCardNode: function (paiNode, num) {\n        let layOutNode = paiNode.getChildByName('layout');\n        layOutNode.removeAllChildren();\n        for (let i = 1; i < num + 1; i++) {\n            let card = cc.instantiate(this.prefab_card);//this# two\n            card.name = \"handCard\" + i;\n            card.active = true;\n            layOutNode.addChild(card);\n        }\n        layOutNode.getComponent(cc.Layout).updateLayout();\n    },\n});\n"]}