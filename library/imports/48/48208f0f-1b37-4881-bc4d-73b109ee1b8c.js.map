{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2/assets\\script\\ui\\club_2\\UIChangeSportsPointWarning_2.js"],"names":["app","require","cc","Class","extends","properties","OnShow","data","lb_tip","node","getChildByName","getComponent","Label","lb_taotaifen","string","eliminatePoint","active","EditBox","isPersonal","pidList","length","name","pid","isChange","OnClick","btnName","btnNode","percentStr","SysNotifyManager","ShowSysMsg","ComTool","StrIsNum","sendPack","clubId","value","parseFloat","self","NetManager","SendPack","serverPack","Client","OnEvent","CloseForm","ErrLog","OnEditBoxEnd","event"],"mappings":"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","file":"UIChangeSportsPointWarning_2.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n    OnShow: function (data) {\n        this.data = data;\n        let lb_tip = this.node.getChildByName(\"lb_tip\").getComponent(cc.Label);\n        let lb_taotaifen = this.node.getChildByName(\"lb_taotaifen\").getComponent(cc.Label);\n        lb_taotaifen.string=this.data.eliminatePoint;\n        lb_taotaifen.node.active = true;\n        this.node.getChildByName(\"PercentEditBox\").getComponent(cc.EditBox).string =this.data.eliminatePoint;\n        if (typeof(data.isPersonal) != \"undefined\" && data.isPersonal) {\n            if (typeof(data.pidList) != \"undefined\") {\n                //批量修改\n                lb_taotaifen.node.active = false;\n                this.node.getChildByName(\"PercentEditBox\").getComponent(cc.EditBox).string = \"\";\n                lb_tip.string = \"确定修改【\"+data.pidList.length+\"个玩家\"+\"】的淘汰分吗？\\n（个人比赛分低于淘汰分时禁止游戏）\";\n            }else{\n                //个人的\n                lb_tip.string = \"确定修改【\"+data.name+\"(\"+data.pid+\")\"+\"】的淘汰分吗？\\n（个人比赛分低于淘汰分时禁止游戏）\";\n            }\n            \n        }else{\n            //赛事的\n            lb_tip.string = \"确定修改【\"+data.name+\"(\"+data.pid+\")\"+\"】的淘汰分吗？\\n（个人比赛分低于淘汰分时禁止游戏）\";\n        }\n        this.isChange=false;\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_sure\"){\n            //淘汰分\n            let percentStr =this.node.getChildByName(\"PercentEditBox\").getComponent(cc.EditBox).string;\n            if(percentStr>0){\n                app.SysNotifyManager().ShowSysMsg(\"只能输入小于等于0的数字\",[],3);\n                return;\n            }\n            if (app.ComTool().StrIsNum(percentStr)) {\n                let sendPack = {};\n                if (typeof(this.data.pidList) != \"undefined\") {\n                    sendPack.clubId = this.data.clubId;\n                    sendPack.pidList = this.data.pidList;\n                    sendPack.value = parseFloat(percentStr);\n                    let self = this;\n                    app.NetManager().SendPack(\"club.CClubEliminatePointChangeMulti\",sendPack, function(serverPack){\n                        app.SysNotifyManager().ShowSysMsg(\"成功设置淘汰分\",[],3);\n                        app.Client.OnEvent('UpdateChangeAliveNodeData', {});\n                        self.CloseForm();\n                    }, function(){\n                        app.SysNotifyManager().ShowSysMsg(\"设置淘汰分失败\",[],3);\n                    });\n                }else{\n                    sendPack.clubId = this.data.clubId;\n                    sendPack.pid = this.data.pid;\n                    sendPack.value = parseFloat(percentStr);\n                    let self = this;\n                    app.NetManager().SendPack(\"club.CClubEliminatePointChange\",sendPack, function(serverPack){\n                        app.SysNotifyManager().ShowSysMsg(\"成功设置淘汰分\",[],3);\n                        app.Client.OnEvent('UpdateChangeAliveNodeData', {});\n                        self.CloseForm();\n                    }, function(){\n                        app.SysNotifyManager().ShowSysMsg(\"设置淘汰分失败\",[],3);\n                    });\n                }\n                \n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入纯数字\",[],3);\n            }\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n    OnEditBoxEnd:function(event){\n        let percentStr =event.node.getComponent(cc.EditBox).string;\n        if (app.ComTool().StrIsNum(percentStr)) {\n            let value = parseFloat(percentStr);\n            if (value > 0) {\n                event.node.getComponent(cc.EditBox).string = \"-\"+event.node.getComponent(cc.EditBox).string;\n            }\n        }else{\n            event.node.getComponent(cc.EditBox).string = \"\";\n            app.SysNotifyManager().ShowSysMsg(\"请输入纯数字\",[],3);\n        }\n    },\n});\n"]}