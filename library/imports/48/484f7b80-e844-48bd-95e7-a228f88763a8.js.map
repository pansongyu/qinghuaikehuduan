{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2\\unionChild_2/assets\\script\\ui\\club_2\\unionChild_2\\zhanduiNode.js"],"names":["app","require","cc","Class","extends","Component","properties","chazhaoEditBox","EditBox","onLoad","rankScrollView","node","getChildByName","getComponent","ScrollView","on","GetNextPage","Client","RegEvent","Event_UpdateZhanDuiNodeData","InitData","clubId","unionId","unionPostType","levelPromotion","curPage","curType","GetZhanDuiLevelList","sendPack","sendPackName","self","NetManager","SendPack","serverPack","competitionTimeList","type","UpdateStatusAndTime","GetClubTeamListZhongZhi","active","event","levelList","img_zddi","i","children","length","toggle","Toggle","isChecked","level","parseInt","name","replace","push","isRefresh","pageNum","query","string","levelQuery","UpdateScrollView","competitionTime","Label","ComTool","GetDateYearMonthDayString","beginTime","removeAllChildren","tempNode","child","instantiate","addChild","content","scrollToTop","demo","clubTeamListInfoList","matchItem","Sprite","enabled","pid","scorePoint","number","sportsPointConsume","consume","OnClick_BtnWnd","eventTouch","eventData","SoundManager","PlaySound","btnNode","currentTarget","btnName","OnClick","error","console","log","stack","FormManager","ShowForm","parent"],"mappings":"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","file":"zhanduiNode.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2\\unionChild_2","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        chazhaoEditBox:cc.EditBox,\n    },\n    onLoad:function(){\n    \tlet rankScrollView = this.node.getChildByName(\"rankScrollView\").getComponent(cc.ScrollView);\n        rankScrollView.node.on('scroll-to-bottom',this.GetNextPage,this);\n        app.Client.RegEvent(\"UpdateZhanDuiNodeData\", this.Event_UpdateZhanDuiNodeData, this);\n    },\n    InitData:function (clubId, unionId, unionPostType,levelPromotion) {\n        this.clubId = clubId;\n        this.unionId = unionId;\n        this.unionPostType = unionPostType;\n        this.levelPromotion = levelPromotion;\n        this.curPage = 1;\n        this.curType = 0;\n        this.GetZhanDuiLevelList();\n        let sendPack = {};\n        let sendPackName = \"club.CClubGetCompetitionTime\";\n        let self = this;\n        app.NetManager().SendPack(sendPackName,sendPack, function(serverPack){   \n            self.competitionTimeList = serverPack;\n            self.curType = self.competitionTimeList[0].type;\n            self.UpdateStatusAndTime(self.competitionTimeList[0]);\n            self.GetClubTeamListZhongZhi(true)\n        }, function(){\n\n        });\n        this.node.getChildByName(\"img_sjdi\").active = false;\n    },\n    Event_UpdateZhanDuiNodeData:function(event){\n        this.GetZhanDuiLevelList();\n        this.curPage = 1;\n        this.GetClubTeamListZhongZhi(true)\n    },\n    GetZhanDuiLevelList:function(){\n        this.levelList = [];\n        let img_zddi = this.node.getChildByName(\"selectzd\").getChildByName(\"img_zddi\");\n        for (let i = 0; i < img_zddi.children.length; i++) {\n            let toggle = img_zddi.children[i].getChildByName(\"toggle\").getComponent(cc.Toggle);\n            if (toggle.isChecked) {\n                let level = parseInt(img_zddi.children[i].name.replace(\"btn_zd_\",''));\n                this.levelList.push(level);\n            }\n        }\n    },\n    GetClubTeamListZhongZhi:function(isRefresh) {\n        let sendPack = {};\n        sendPack.clubId = this.clubId;\n        sendPack.type = this.curType;\n        sendPack.pageNum = this.curPage;\n        sendPack.query = this.chazhaoEditBox.string;\n        sendPack.levelQuery = this.levelList;\n        let sendPackName = \"club.CClubTeamListZhongZhi\";\n        let self = this;\n        app.NetManager().SendPack(sendPackName,sendPack, function(serverPack){\n            self.UpdateScrollView(serverPack, isRefresh);\n        }, function(){\n\n        });\n    },\n    UpdateStatusAndTime:function(competitionTime){\n        this.node.getChildByName(\"img_rqdi\").getChildByName(\"lb_time\").getComponent(cc.Label).string = app.ComTool().GetDateYearMonthDayString(competitionTime.beginTime);\n        this.node.getChildByName(\"img_sjdi\").removeAllChildren();\n        for (let i = 0; i < this.competitionTimeList.length; i++) {\n            let tempNode = this.node.getChildByName(\"btn_timeDemo\");\n            let child = cc.instantiate(tempNode);\n            child.getChildByName(\"lb_btnTime\").getComponent(cc.Label).string = app.ComTool().GetDateYearMonthDayString(this.competitionTimeList[i].beginTime);\n            child.competitionTime = this.competitionTimeList[i];\n            if (this.curType == this.competitionTimeList[i].type) {\n                child.getChildByName(\"img_sjxz\").active = true;\n            }else{\n                child.getChildByName(\"img_sjxz\").active = false;\n            }\n            child.active = true;\n            this.node.getChildByName(\"img_sjdi\").addChild(child);\n        }\n    },\n    GetNextPage:function(){\n    \tthis.curPage++;\n    \tthis.GetClubTeamListZhongZhi(false);\n    },\n    UpdateScrollView:function(serverPack, isRefresh){\n    \tlet rankScrollView = this.node.getChildByName(\"rankScrollView\");\n    \tlet content = rankScrollView.getChildByName(\"view\").getChildByName(\"content\");\n    \tif (isRefresh) {\n    \t\trankScrollView.getComponent(cc.ScrollView).scrollToTop();\n    \t\tcontent.removeAllChildren();\n    \t}\n        let demo = this.node.getChildByName(\"demo\");\n    \tdemo.active = false;\n    \tfor (let i = 0; i < serverPack.clubTeamListInfoList.length; i++) {\n            let matchItem = serverPack.clubTeamListInfoList[i];\n    \t\tlet child = cc.instantiate(demo);\n    \t\tif (i%2 == 0) {\n    \t\t\tchild.getComponent(cc.Sprite).enabled = true;\n    \t\t}else{\n    \t\t\tchild.getComponent(cc.Sprite).enabled = false;\n    \t\t}\n            child.pid = matchItem.pid;\n            child.level = matchItem.level;\n            child.getChildByName(\"lb_name\").getComponent(cc.Label).string =matchItem.name\n            child.getChildByName(\"lb_id\").getComponent(cc.Label).string = matchItem.pid;\n            child.getChildByName(\"lb_scorePoint\").getComponent(cc.Label).string = matchItem.scorePoint;\n            child.getChildByName(\"lb_level\").getComponent(cc.Label).string = matchItem.level;\n            child.getChildByName(\"lb_number\").getComponent(cc.Label).string = matchItem.number;\n            child.getChildByName(\"lb_sportsPointConsume\").getComponent(cc.Label).string = matchItem.sportsPointConsume;\n            child.getChildByName(\"lb_consume\").getComponent(cc.Label).string = matchItem.consume;\n    \t\tchild.active = true;\n    \t\tcontent.addChild(child);\n    \t}\n    },\n    //控件点击回调\n    OnClick_BtnWnd:function(eventTouch, eventData){\n        try{\n            app.SoundManager().PlaySound(\"BtnClick\");\n            let btnNode = eventTouch.currentTarget;\n            let btnName = btnNode.name;\n            this.OnClick(btnName, btnNode);\n        }\n        catch (error){\n            console.log(\"OnClick_BtnWnd:\"+error.stack);\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if (\"btn_timeDemo\" == btnName) {\n            this.curType = btnNode.competitionTime.type;\n            this.curPage = 1;\n            this.GetClubTeamListZhongZhi(true);\n            this.UpdateStatusAndTime(btnNode.competitionTime);\n            this.node.getChildByName(\"img_sjdi\").active = false;\n        }else if('img_rqdi'==btnName){\n            this.node.getChildByName(\"img_sjdi\").active = !this.node.getChildByName(\"img_sjdi\").active;\n        }else if('lb_4'==btnName){\n            this.node.getChildByName(\"selectzd\").active = true;\n        }else if (\"btn_search\" == btnName) {\n            this.curPage = 1;\n            this.GetClubTeamListZhongZhi(true);\n        }else if('btn_huizong'==btnName){\n            app.FormManager().ShowForm('ui/club_2/UIPromoterAllReport_2',this.clubId);\n        }else if('btn_addDuiZhang'==btnName){\n            app.FormManager().ShowForm('ui/club_2/UIClubAddCaptain_2',this.clubId);\n        }else if('btn_detail'==btnName){\n            this.node.parent.getChildByName(\"zhanduiDetailNode\").active = true;\n            this.node.parent.getChildByName(\"zhanduiDetailNode\").getComponent(\"zhanduiDetailNode\").InitData(this.clubId, this.unionId, btnNode.parent.pid, btnNode.parent.level, this.levelPromotion,this.unionPostType);\n        }else if('selectzd'==btnName){\n            this.GetZhanDuiLevelList();\n            this.GetClubTeamListZhongZhi(true);\n            btnNode.active = false;\n        }\n    },\n});"]}