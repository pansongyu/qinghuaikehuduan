{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIPaiHang.js"],"names":["app","require","cc","Class","extends","properties","content","Node","OnCreateInit","ComTool","WeChatManager","RegEvent","OnEvt_CopyTextNtf","OnShow","FormManager","ShowForm","LoadData","event","detail","code","ShowSysMsg","msg","type","InitBtn","that","NetManager","SendPack","ShowData","serverPack","dataNode","GetWndNode","DestroyAllChildren","height","MyheadID","HeroManager","GetHeroID","dataList","rankItems","length","paihangname","i","addNode","instantiate","name","active","addChild","heroID","headImageUrl","setCount","winCount","refererCount","getChildByName","getComponent","Label","string","substr","InitHeroHeadImage","WeChatHeadImage","OnLoad","ShowHeroHead","ShowType","SetWndProperty","OnClick","btnName","eventData","ErrLog"],"mappings":"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","file":"UIPaiHang.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        content:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.ComTool=app.ComTool();\n        this.WeChatManager = app.WeChatManager();\n        this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf);\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(){\n        app.FormManager().ShowForm('UITop', \"UIPaiHang\");\n        this.LoadData(3);\n    },\n    OnEvt_CopyTextNtf:function(event){\n        if(0 == event.detail.code)\n            this.ShowSysMsg(\"推广链接：\"+event.detail.msg);\n        else\n            this.ShowSysMsg(\"复制失败\");\n    },\n    LoadData:function(type){\n       this.InitBtn(type);\n       let that=this;\n       app.NetManager().SendPack(\"ranking.CRankingList\",{\"rankQueryType\":type},function(event){\n            that.ShowData(event);\n       },function(event){});\n    },\n    ShowData:function(serverPack){\n        let dataNode=this.GetWndNode('right/scorelist/content');\n        //dataNode.removeAllChildren();\n        this.DestroyAllChildren(dataNode);\n        dataNode.height=90;\n        let MyheadID=app.HeroManager().GetHeroID();\n        let dataList=serverPack.rankItems;\n        let length=dataList.length;\n        let paihangname=\"未上榜\";\n        for(let i=0;i<length;i++){\n            let addNode=cc.instantiate(this.GetWndNode('right/scorelist/logl_demo'));\n            addNode.name='data'+i;\n            addNode.active=true;\n            dataNode.addChild(addNode);\n            let heroID = dataList[i][\"pid\"];\n            let headImageUrl = dataList[i][\"iconUrl\"];\n            let name = dataList[i][\"name\"];\n            let setCount=dataList[i][\"setCount\"];\n            let winCount=dataList[i][\"winCount\"];\n            let refererCount=dataList[i][\"refererCount\"];\n            addNode.getChildByName('lb_name').getComponent(cc.Label).string=name.substr(0,5);\n            if(heroID && headImageUrl){\n                this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n                let WeChatHeadImage=addNode.getChildByName('head_img').getComponent(\"WeChatHeadImage\");\n                WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID);\n            }\n            if(MyheadID==heroID){\n                paihangname=i+1;\n            }\n            //显示推广数还是局数\n            if(this.ShowType==3){\n                addNode.getChildByName('lb_num').getComponent(cc.Label).string=refererCount;\n            }else if(this.ShowType==1){\n                addNode.getChildByName('lb_num').getComponent(cc.Label).string=setCount;\n            }else if(this.ShowType==2){\n                addNode.getChildByName('lb_num').getComponent(cc.Label).string=winCount;\n            }\n            //显示排行\n            if(i==0){\n                addNode.getChildByName('icon1').active=true;\n                addNode.getChildByName('icon2').active=false;\n                addNode.getChildByName('icon3').active=false;\n                addNode.getChildByName('lb_mingci').active=false;\n            }else if(i==1){\n                addNode.getChildByName('icon1').active=false;\n                addNode.getChildByName('icon2').active=true;\n                addNode.getChildByName('icon3').active=false;\n                addNode.getChildByName('lb_mingci').active=false;\n            }else if(i==2){\n                addNode.getChildByName('icon1').active=false;\n                addNode.getChildByName('icon2').active=false;\n                addNode.getChildByName('icon3').active=true;\n                addNode.getChildByName('lb_mingci').active=false;\n            }else{\n                addNode.getChildByName('icon1').active=false;\n                addNode.getChildByName('icon2').active=false;\n                addNode.getChildByName('icon3').active=false;\n                addNode.getChildByName('lb_mingci').getComponent(cc.Label).string=i+1;\n            }\n        }\n        this.SetWndProperty(\"right/lb_mingci\", \"text\",paihangname);\n    },\n    InitBtn:function(type){\n        this.ShowType=type;\n        if(type==3){\n            this.SetWndProperty(\"right/lb_typename\", \"text\",'推广数');\n            this.SetWndProperty(\"left/layout/btn_renmai\", \"active\",false);\n            this.SetWndProperty(\"left/layout/renmai\", \"active\",true);\n\n            this.SetWndProperty(\"left/layout/btn_jushu\", \"active\",true);\n            this.SetWndProperty(\"left/layout/jushu\", \"active\",false);\n\n            this.SetWndProperty(\"left/layout/btn_shengchang\", \"active\",true);\n            this.SetWndProperty(\"left/layout/shengchang\", \"active\",false);\n        }else if(type==1){\n            this.SetWndProperty(\"right/lb_typename\", \"text\",'局数');\n            this.SetWndProperty(\"left/layout/btn_renmai\", \"active\",true);\n            this.SetWndProperty(\"left/layout/renmai\", \"active\",false);\n\n            this.SetWndProperty(\"left/layout/btn_jushu\", \"active\",false);\n            this.SetWndProperty(\"left/layout/jushu\", \"active\",true);\n\n            this.SetWndProperty(\"left/layout/btn_shengchang\", \"active\",true);\n            this.SetWndProperty(\"left/layout/shengchang\", \"active\",false);\n        }else if(type==2){\n            this.SetWndProperty(\"right/lb_typename\", \"text\",'胜局数');\n            this.SetWndProperty(\"left/layout/btn_renmai\", \"active\",true);\n            this.SetWndProperty(\"left/layout/renmai\", \"active\",false);\n\n            this.SetWndProperty(\"left/layout/btn_jushu\", \"active\",true);\n            this.SetWndProperty(\"left/layout/jushu\", \"active\",false);\n\n            this.SetWndProperty(\"left/layout/btn_shengchang\", \"active\",false);\n            this.SetWndProperty(\"left/layout/shengchang\", \"active\",true);\n        }\n    },\n    //---------点击函数---------------------\n\n\tOnClick:function(btnName, eventData){\n\t\tif(btnName==\"btn_renmai\"){\n            this.LoadData(3);\n        }else if(btnName==\"btn_jushu\"){\n            this.LoadData(1);\n        }else if(btnName==\"btn_shengchang\"){\n            this.LoadData(2);\n        }\n\t\telse{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}