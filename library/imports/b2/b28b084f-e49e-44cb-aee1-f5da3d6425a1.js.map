{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIRecord.js"],"names":["app","require","cc","Class","extends","properties","layout_player","Node","bg","UIRecord_Child","Prefab","OnCreateInit","ComTool","loopScrollView","getComponent","ShowPlayerName","playerList","list","idx","push","sort","a","b","pos","length","player","path","parseInt","toString","node","GetWndNode","name","substring","Label","string","OnShow","i","children","RecordData","GetPlayerList","everyGameKeys","GetEveryGameKeys","InitScrollData","OnClick","btnName","btnNode","CloseForm","ErrLog"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,uBAAcJ,GAAGK,IADT;AAERC,YAAGN,GAAGK,IAFE;AAGRE,wBAAgBP,GAAGQ;AAHX,KAHP;;AASLC,kBAAc,wBAAY;;AAEtB,aAAKC,OAAL,GAAeZ,IAAIY,OAAJ,EAAf;;AAEA,aAAKC,cAAL,GAAsB,KAAKC,YAAL,CAAkB,gBAAlB,CAAtB;AACH,KAdI;;AAiBLC,oBAAe,wBAASC,UAAT,EAAoB;AAC/B,YAAIC,OAAO,EAAX;AACA,aAAI,IAAIC,GAAR,IAAeF,UAAf,EAA0B;AACtBC,iBAAKE,IAAL,CAAUH,WAAWE,GAAX,CAAV;AACH;;AAEDD,aAAKG,IAAL,CAAU,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACpB,mBAAOD,EAAEE,GAAF,GAAQD,EAAEC,GAAjB;AACH,SAFD;;AAIA,aAAI,IAAIL,OAAM,CAAd,EAAiBA,OAAMD,KAAKO,MAA5B,EAAoCN,MAApC,EAA0C;AACtC,gBAAIO,SAASR,KAAKC,IAAL,CAAb;AACA,gBAAIQ,OAAO,oCAAoC,CAACC,SAAST,IAAT,IAAc,CAAf,EAAkBU,QAAlB,EAA/C;AACA,gBAAIC,OAAO,KAAKC,UAAL,CAAgBJ,IAAhB,CAAX;AACA,gBAAIK,OAAO,EAAX;AACA,gBAAGN,OAAOM,IAAP,CAAYP,MAAZ,GAAqB,CAAxB,EAA0B;AACtBO,uBAAON,OAAOM,IAAd;AACAA,uBAAOA,KAAKC,SAAL,CAAe,CAAf,EAAkB,CAAlB,IAAuB,KAA9B;AACH,aAHD,MAII;AACAD,uBAAON,OAAOM,IAAd;AACH;AACDF,iBAAKf,YAAL,CAAkBZ,GAAG+B,KAArB,EAA4BC,MAA5B,GAAqCH,IAArC;AACH;AAEJ,KA1CI;;AA4CLI,YAAO,kBAAY;;AAEf;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,KAAK9B,aAAL,CAAmB+B,QAAnB,CAA4Bb,MAA/C,EAAuDY,GAAvD,EAA2D;AACvD,gBAAIP,OAAO,KAAKvB,aAAL,CAAmB+B,QAAnB,CAA4BD,CAA5B,CAAX;AACAP,iBAAKf,YAAL,CAAkBZ,GAAG+B,KAArB,EAA4BC,MAA5B,GAAqC,EAArC;AACH;;AAED,YAAIlB,aAAahB,IAAIsC,UAAJ,GAAiBC,aAAjB,EAAjB;AACA,YAAIC,gBAAgBxC,IAAIsC,UAAJ,GAAiBG,gBAAjB,EAApB;;AAEA,YAAGzB,UAAH,EAAc;AACV,iBAAKD,cAAL,CAAoBC,UAApB;AACH;;AAED,aAAKH,cAAL,CAAoB6B,cAApB,CAAmC,gBAAnC,EAAqD,KAAKjC,cAA1D,EAA0E+B,aAA1E;AACH,KA5DI;;AA8DL;;AAEA;AACAG,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAGD,WAAW,WAAd,EAA0B;AACtB,iBAAKE,SAAL;AACH,SAFD,MAGI;AACA,iBAAKC,MAAL,CAAY,8BAAZ,EAA2CH,OAA3C;AACH;AACJ;;AAxEI,CAAT","file":"UIRecord.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        layout_player:cc.Node,\n        bg:cc.Node,\n        UIRecord_Child: cc.Prefab,\n    },\n\n    OnCreateInit: function () {\n    \n        this.ComTool = app.ComTool();\n\n        this.loopScrollView = this.getComponent(\"LoopScrollView\");\n    },\n\n\n    ShowPlayerName:function(playerList){\n        let list = [];\n        for(let idx in playerList){\n            list.push(playerList[idx]);\n        }\n\n        list.sort(function(a, b){\n            return a.pos - b.pos;\n        });\n        \n        for(let idx = 0; idx < list.length; idx++){\n            let player = list[idx];\n            let path = 'UIInfo/bg/layout_player/lb_name' + (parseInt(idx)+1).toString();\n            let node = this.GetWndNode(path);\n            let name = \"\";\n            if(player.name.length > 4){\n                name = player.name;\n                name = name.substring(0, 4) + '...';\n            }\n            else{\n                name = player.name;\n            }\n            node.getComponent(cc.Label).string = name;\n        }\n        \n    },\n\n    OnShow:function () {\n\n        //清空名字\n        for(let i = 0; i < this.layout_player.children.length; i++){\n            let node = this.layout_player.children[i];\n            node.getComponent(cc.Label).string = '';\n        }\n\n        let playerList = app.RecordData().GetPlayerList();\n        let everyGameKeys = app.RecordData().GetEveryGameKeys();\n\n        if(playerList){\n            this.ShowPlayerName(playerList);\n        }\n\n        this.loopScrollView.InitScrollData(\"UIRecord_Child\", this.UIRecord_Child, everyGameKeys);\n    },\n\n    //-----------------回调函数------------------\n\n    //---------点击函数---------------------\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }\n        else{\n            this.ErrLog(\"OnClick(%s) not find btnName\",btnName);\n        }\n    },\n\n\n});"]}