{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\bsmj/assets\\script\\ui\\uiGame\\bsmj\\bsmj_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ComTool","ShareDefine","ShowOtherScore","huTypeMap","posResultInfo","scores","node","getChildByName","getComponent","Label","string","UpdatePlayData","PlayerNode","HuList","PlayerInfo","jin1","jin2","maPaiLst","showLabelNum","ClearLabelShow","sportsPointTemp","ShowLabelName","sportsPoint","ShowPlayerRecord","ShowPlayerJieSuan","ShowPlayerInfo","ShowPlayerDownCard","publicCardList","ShowPlayerShowCard","shouCard","handCard","ShowPlayerHuaCard","huaList","ShowHuBaoPosList","huBaoPosList","ShowNode","huInfoAll","huInfo","huType","huPoint","LabelName","console","log","RelativePosValue","referencePos","posId","playerCount","downPos","facePos","upPos","EnumType","EnumRelativePosType","EnumRelativePos_SELF","EnumRelativePos_XIA","EnumRelativePos_DUI","EnumRelativePos_SHANG","EnumRelativePos_NONE","LabelArray","GetHuTypeDict","huTypeDict"],"mappings":"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","file":"bsmj_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\bsmj","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseMJ_winlost_child\"),\n\n    properties: {\n    },\n\n    // use this for initialization\n    OnLoad: function () {\n        this.ComTool = app.ComTool();\n        this.ShareDefine = app.ShareDefine();\n    },\n\n    ShowOtherScore: function () {\n\t\tlet huTypeMap = this.posResultInfo[\"huTypeMap\"];\n\t\tif (typeof (huTypeMap) == \"undefined\") {\n\t\t\thuTypeMap = this.posResultInfo[\"endPoint\"][\"huTypeMap\"];\n\t\t}\n        this.scores = this.node.getChildByName(\"scores\");\n\t\tthis.scores.getChildByName(\"lb_MaiMa\").getComponent(cc.Label).string = \"马分\" + huTypeMap[\"MaiMa\"];\n\t\tthis.scores.getChildByName(\"lb_Gang\").getComponent(cc.Label).string = \"杠分\" + huTypeMap[\"Gang\"];\n\t\tthis.scores.getChildByName(\"lb_huPoint\").getComponent(cc.Label).string = \"胡分\" + huTypeMap[\"HuPoint\"];\n\t},\n\n    UpdatePlayData: function (PlayerNode, HuList, PlayerInfo, jin1 = 0, jin2 = 0, maPaiLst = null) {\n        this.HuList = HuList;\n        this.showLabelNum = 1;\n        this.ClearLabelShow(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'));\n        //显示比赛分\n        if (typeof (HuList.sportsPointTemp) != \"undefined\") {\n            if (HuList.sportsPointTemp > 0) {\n                this.ShowLabelName(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'), \"比赛分：+\" + HuList.sportsPointTemp);\n            } else {\n                this.ShowLabelName(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'), \"比赛分：\" + HuList.sportsPointTemp);\n            }\n        }else if (typeof (HuList.sportsPoint) != \"undefined\") {\n            if (HuList.sportsPoint > 0) {\n                this.ShowLabelName(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'), \"比赛分：+\" + HuList.sportsPoint);\n            } else {\n                this.ShowLabelName(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'), \"比赛分：\" + HuList.sportsPoint);\n            }\n        }\n        this.ShowPlayerRecord(PlayerNode.getChildByName('record'), HuList);\n        this.ShowPlayerJieSuan(PlayerNode.getChildByName('jiesuan'), HuList);\n        this.ShowPlayerInfo(PlayerNode.getChildByName('user_info'), PlayerInfo, HuList);\n        this.ShowPlayerDownCard(PlayerNode.getChildByName('downcard'), HuList.publicCardList, jin1, jin2);\n        this.ShowPlayerShowCard(PlayerNode.getChildByName('showcard'), HuList.shouCard, HuList.handCard, jin1, jin2);\n        this.ShowPlayerHuaCard(PlayerNode.getChildByName('huacard'), HuList.huaList);\n        this.posResultInfo = HuList;\n        this.ShowOtherScore();\n\t\tthis.ShowHuBaoPosList(this.posResultInfo[\"huBaoPosList\"]);\n    },\n    // 互包\n\tShowHuBaoPosList: function (huBaoPosList) {\n\t\t// let cfg = {};\n\t\t// cfg[EnumType.EnumRelativePosType.EnumRelativePos_SELF] = \"本\";\n\t\t// cfg[EnumType.EnumRelativePosType.EnumRelativePos_XIA] = \"下\";\n\t\t// cfg[EnumType.EnumRelativePosType.EnumRelativePos_DUI] = \"对\";\n\t\t// cfg[EnumType.EnumRelativePosType.EnumRelativePos_SHANG] = \"上\";\n\n\t\t// let huBaoList = this.node.getChildByName(\"huBaoList\");\n\t\t// huBaoList.removeAllChildren();\n\t\t// let lb_huBao = this.node.getChildByName(\"lb_huBao\");\n\n\t\t// this.playerCount = this.endInfo[\"posResultList\"].length;\n\t\t// let clientPos = this.RoomPosMgr.GetClientPos();\n\t\t// for (let i = 0; i < huBaoPosList.length; i++) {\n\t\t// \tlet posId = huBaoPosList[i];\n\t\t// \tlet relativePos = this.RelativePosValue(clientPos, posId, this.playerCount);\n\t\t// \tlet str = \"互包\" + cfg[relativePos] + \"家\";\n\t\t// \tlet node = cc.instantiate(lb_huBao);\n\t\t// \tnode.active = true;\n\t\t// \tnode.getComponent(cc.Label).string = str;\n\t\t// \thuBaoList.addChild(node);\n\t\t// }\n\t},\n\n    ShowPlayerJieSuan: function (ShowNode, huInfoAll) {\n        // let huInfo = huInfoAll['endPoint'].huTypeMap;\n        let huInfo = huInfoAll[\"huTypeMap\"];\n\t\tif (typeof (huInfo) == \"undefined\") {\n\t\t\thuInfo = huInfoAll[\"endPoint\"][\"huTypeMap\"];\n\t\t}\n        for (let huType in huInfo) {\n            if (huType == \"MaiMa\" || huType == \"Gang\" || huType == \"HuPoint\") {\n\t\t\t\tcontinue;\n\t\t\t}\n            let huPoint = huInfo[huType];\n            this.ShowLabelName(ShowNode.getChildByName('label_lists'), this.LabelName(huType) + \"： \" + huPoint);\n            console.log(\"ShowPlayerJieSuan\", huType, huPoint);\n        }\n    },\n\n\tRelativePosValue: function (referencePos, posId, playerCount) {\n\t\tlet downPos = -1;\t//下家\n\t\tlet facePos = -1;\t//对家\n\t\tlet upPos = -1;\t\t//上家\n\t\tif (playerCount == 2) {\n\t\t\tfacePos = referencePos == 0 ? 1 : 0;\n\t\t} else if (playerCount == 3) {\n\t\t\tupPos = (referencePos + playerCount - 1) % playerCount;\n\t\t\tdownPos = (referencePos + 1) % playerCount;\n\t\t} else {\n\t\t\tupPos = (referencePos + playerCount - 1) % playerCount;\n\t\t\tdownPos = (referencePos + 1) % playerCount;\n\t\t\tfacePos = (referencePos + 2) % playerCount;\n\t\t}\n\t\tif (posId == referencePos) return EnumType.EnumRelativePosType.EnumRelativePos_SELF;\n\t\tif (posId == downPos) return EnumType.EnumRelativePosType.EnumRelativePos_XIA;\n\t\tif (posId == facePos) return EnumType.EnumRelativePosType.EnumRelativePos_DUI;\n\t\tif (posId == upPos) return EnumType.EnumRelativePosType.EnumRelativePos_SHANG;\n\n\t\treturn EnumType.EnumRelativePosType.EnumRelativePos_NONE;\n\t},\n\n    LabelName: function (huType) {\n        let LabelArray = this.GetHuTypeDict();\n        return LabelArray[huType];\n    },\n\n    // GetHuTypeDict -start-\n    GetHuTypeDict: function () {\n        let huTypeDict = {};\n        huTypeDict[\"MenQing\"] = \"门清\";\n        huTypeDict[\"QDHu\"] = \"七小对\";\n        huTypeDict[\"HDDHu\"] = \"七大对\";\n        huTypeDict[\"CHDDHu\"] = \"豪华七大对\";\n        huTypeDict[\"CCHDDHu\"] = \"豪华七大对\";\n        huTypeDict[\"PPH\"] = \"碰碰胡\";\n        huTypeDict[\"GSKH\"] = \"杠开\";\n        huTypeDict[\"GSP\"] = \"杠后炮\";\n        huTypeDict[\"PingHu\"] = \"平胡\";\n        huTypeDict[\"QYS\"] = \"清一色\";\n        huTypeDict[\"QGH\"] = \"抢杠胡\";\n        huTypeDict[\"TianHu\"] = \"天胡\";\n        huTypeDict[\"DiHu\"] = \"地胡\";\n        huTypeDict[\"Long\"] = \"一条龙\";\n        huTypeDict[\"SSY\"] = \"十三幺\";\n        huTypeDict[\"QQR\"] = \"全求炮\";\n        huTypeDict[\"QuanQiuR\"] = \"全求人\";\n\t\thuTypeDict[\"JiePao\"] = \"炮胡\";\n        huTypeDict[\"ZiMo\"] = \"自摸\";\n        huTypeDict[\"Gang\"] = \"杠分\";\n        huTypeDict[\"ZhongNiao\"] = \"中马\";\n        huTypeDict[\"JieGang\"] = \"直杠\";\n        huTypeDict[\"AnGang\"] = \"暗杠\";\n        huTypeDict[\"MaiMa\"] = \"马分\";\n        huTypeDict[\"HuPoint\"] = \"胡分\";\n        huTypeDict[\"GangPao\"] = \"碰杠\";\n\n        return huTypeDict;\n    },\n    // GetHuTypeDict -end-\n\n});\n"]}