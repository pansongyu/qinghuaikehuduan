{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\dhd/assets\\script\\ui\\uiGame\\dhd\\dhd_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","GoCardPrefab","Prefab","cardPrefab","SpriteMale","SpriteFrame","SpriteFeMale","OnLoad","PokerCard","ComTool","ShareDefine","IntegrateImage","SysDataManager","GetTableDict","ShowPlayerData","setEnd","playerAll","index","console","log","dPos","posResultList","PlayerInfo","node","active","UpdatePlayData","getChildByName","WeChatManager","InitHeroHeadImage","weChatHeadImage","getComponent","ShowHeroHead","PlayerNode","HuList","ShowPlayerRecord","ShowPlayerInfo","ShowPlayerShowCard","ShowNode","huInfo","string","color","Label","GetBeiZhuName","GetPid","publicCardList","publicCardNode","removeAllChildren","length","width","Layout","updateLayout","i","goCardNode","instantiate","cardIDList","j","cardNode","value","ShowMiniCard","addChild","shouCardList","shouCardNode","cardType","isBlack","GetMiniPokeCard"],"mappings":"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","file":"dhd_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\dhd","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_winlost_child\"),\n\n\tproperties: {\n\t\tGoCardPrefab: cc.Prefab,\n\t\tcardPrefab: cc.Prefab,\n\t\tSpriteMale: cc.SpriteFrame,\n\t\tSpriteFeMale: cc.SpriteFrame,\n\t},\n\n\t// use this for initialization\n\tOnLoad: function () {\n\t\tthis.PokerCard = app.PokerCard();\n\t\tthis.ComTool = app.ComTool();\n\t\tthis.ShareDefine = app.ShareDefine();\n\t\tthis.IntegrateImage = app.SysDataManager().GetTableDict(\"IntegrateImage\");\n\t},\n\tShowPlayerData: function (setEnd, playerAll, index) {\n\t    console.log(\"单局结算数据\", setEnd, playerAll, index);\n        let dPos = setEnd.dPos;\n        let posResultList = setEnd[\"posResultList\"];\n        let PlayerInfo = playerAll[index];\n        this.node.active = true;\n        this.UpdatePlayData(this.node, posResultList[index], PlayerInfo);\n\n        if (dPos === index) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        }\n        //显示头像，如果头像UI\n        if (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n            app.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n        }\n        let weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        weChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n    },\n\tUpdatePlayData: function (PlayerNode, HuList, PlayerInfo) {\n\t\tthis.ShowPlayerRecord(PlayerNode.getChildByName(\"record\"), HuList);\n\t\tthis.ShowPlayerInfo(PlayerNode.getChildByName(\"user_info\"), PlayerInfo);\n\t\tthis.ShowPlayerShowCard(PlayerNode.getChildByName(\"showcard\"), HuList);\n\t},\n\tShowPlayerRecord: function (ShowNode, huInfo) {\n\t\tShowNode.active = true;\n\t\t//显示桌面分\n\t\tif(huInfo[\"tableScore\"] > 0){\n\t\t\tShowNode.getChildByName(\"lb_point\").getComponent(\"cc.Label\").string = \"桌面分:+\" + huInfo[\"tableScore\"];\n\t\t}else{\n\t\t\tShowNode.getChildByName(\"lb_point\").getComponent(\"cc.Label\").string = huInfo[\"tableScore\"];\n\t\t}\n\t\tif (huInfo[\"point\"] > 0) {\n\t\t\tShowNode.getChildByName(\"lb_point\").getComponent(\"cc.Label\").string = \"+\" + huInfo[\"point\"];\n\t\t\tShowNode.getChildByName(\"lb_point\").color = cc.color(19,111,20);\n\t\t} else {\n\t\t\tShowNode.getChildByName(\"lb_point\").getComponent(\"cc.Label\").string = huInfo[\"point\"];\n\t\t\tShowNode.getChildByName(\"lb_point\").color = cc.color(213,68,67);\n\t\t}\n\t\t//显示竞技点\n\t\tif (typeof(huInfo[\"sportsPoint\"]) != \"undefined\") {\n\t\t\tif (huInfo[\"sportsPoint\"] > 0) {\n\t\t\t\tShowNode.getChildByName(\"lb_SportsPoint\").getComponent(cc.Label).string = \"比赛分：+\" + huInfo[\"sportsPoint\"];\n\t\t\t} else {\n\t\t\t\tShowNode.getChildByName(\"lb_SportsPoint\").getComponent(cc.Label).string = \"比赛分：\" + huInfo[\"sportsPoint\"];\n\t\t\t}\n\t\t\tShowNode.getChildByName(\"lb_SportsPoint\").active = true;\n\t\t} else {\n\t\t\tShowNode.getChildByName(\"lb_SportsPoint\").getComponent(cc.Label).string = \"\";\n\t\t\tShowNode.getChildByName(\"lb_SportsPoint\").active = false;\n\t\t}\n\t},\n\tShowPlayerInfo: function (ShowNode, PlayerInfo) {\n\t\tShowNode.getChildByName(\"lable_name\").getComponent(\"cc.Label\").string = this.ComTool.GetBeiZhuName(PlayerInfo[\"pid\"],PlayerInfo[\"name\"]);\n\t\tShowNode.getChildByName(\"label_id\").getComponent(\"cc.Label\").string = \"ID:\"+ this.ComTool.GetPid(PlayerInfo[\"pid\"]);\n\n\t\t// if (PlayerInfo[\"sex\"] == this.ShareDefine.HeroSex_Boy) {\n\t\t// \tShowNode.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame = this.SpriteMale;\n\t\t// } else if (PlayerInfo[\"sex\"] == this.ShareDefine.HeroSex_Girl) {\n\t\t// \tShowNode.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame = this.SpriteFeMale;\n\t\t// }\n\t},\n\tShowPlayerShowCard: function (ShowNode, huInfo) {\n\t\tlet publicCardList = huInfo[\"publicCardList\"];\n\t\tlet publicCardNode = ShowNode.getChildByName(\"publicCardNode\");\n\t\tpublicCardNode.removeAllChildren();\n\t\tif(!publicCardList.length){\n\t\t\tpublicCardNode.width = 0;\n\t\t\tpublicCardNode.getComponent(cc.Layout).updateLayout();\n\t\t}\n\t\t\n\t\t//渲染扣到的牌\n\t\tfor (let i = 0; i < publicCardList.length; i++) {\n\t\t\tlet goCardNode = cc.instantiate(this.GoCardPrefab);\n\t\t\tlet cardIDList = publicCardList[i];\n\t\t\tfor (let j = 0; j < cardIDList.length; j++) {\n\t\t\t\tlet cardNode = cc.instantiate(this.cardPrefab);\n\t\t\t\tlet value = cardIDList[j];\n\t\t\t\tthis.ShowMiniCard(value, cardNode);\n\t\t\t\tcardNode.active = true;\n\t\t\t\tgoCardNode.getChildByName(\"layout\").addChild(cardNode);\n\t\t\t}\n\t\t\tpublicCardNode.addChild(goCardNode);\n\t\t}\n\n\t\t//渲染剩余手牌\n\t\tlet shouCardList = huInfo[\"shouCard\"];\n\t\tlet shouCardNode = ShowNode.getChildByName(\"shouCardNode\");\n\t\tshouCardNode.removeAllChildren();\n\t\tif(!shouCardNode.length){\n\t\t\tshouCardNode.width = 0;\n\t\t\tshouCardNode.getComponent(cc.Layout).updateLayout();\n\t\t}\n\t\tfor (let i = 0; i < shouCardList.length; i++) {\n\t\t\tlet cardNode = cc.instantiate(this.cardPrefab);\n\t\t\tlet value = shouCardList[i];\n\t\t\tthis.ShowMiniCard(value, cardNode, true);\n\t\t\tcardNode.active = true;\n\t\t\tshouCardNode.addChild(cardNode);\n\t\t}\n\t\tShowNode.getComponent(cc.Layout).updateLayout();\n\t},\n\t//显示poker牌\n\tShowMiniCard: function (cardType, cardNode, isBlack = false) {\n\t\tthis.PokerCard.GetMiniPokeCard(cardType, cardNode);\n\t\tcardNode.active = true;\n\t\tcardNode.getChildByName(\"bg_black\").active = isBlack;\n\t},\n});"]}