{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\zgdss/assets\\script\\ui\\uiGame\\zgdss\\zgdss_PokerCard.js"],"names":["app","require","ZGDSSPokerCard","BaseClass","extend","Init","JS_Name","gameName","pokerOutCardList","LOGIC_MASK_COLOR","LOGIC_MASK_VALUE","LoadAllPokerRes","GetPokeCardMini","poker","cardNode","isHu","type","num","isGuiBian","Math","abs","cardColor","GetCardColor","cardValue","GetCardValue","numNode","getChildByName","active","i","length","_name","getComponent","cc","Sprite","spriteFrame","self","loader","loadResDir","SpriteFrame","err","assets","error","push","GetCardType","color","GetSameValue","pokers","tagCard","sameValueList","tagCardValue","pokerValue","GetSameType","sameTypeList","tagCardType","pokerType","CheckPokerInListEx","list","bInList","item","tagValue","CheckPokerTypeInListEx","cardType","tagType","PushTipCard","samePoker","len","temp","reverse","g_ZGDSSPokerCard","exports","GetModel"],"mappings":"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","file":"zgdss_PokerCard.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\zgdss","sourcesContent":["var app = require(\"app\");\n\nvar ZGDSSPokerCard = app.BaseClass.extend({\n\n\t/**\n\t * 构造函数\n\t */\n\tInit: function () {\n\t\tthis.JS_Name = this.gameName + \"_PokerCard\";\n\t\tthis.pokerOutCardList=[];\n\t\tthis.LOGIC_MASK_COLOR = 0xF0;\n\t\tthis.LOGIC_MASK_VALUE = 0x0F;\n\t\tthis.LoadAllPokerRes();\n\t},\n\tGetPokeCardMini: function (poker, cardNode, isHu = false) {\n\t\tif (0 == poker) {\n\t\t\treturn;\n\t\t}\n\t\tlet type = \"\";\n\t\tlet num = \"\";\n\t\tlet isGuiBian=false;\n\t\tif(poker<0){\n\t\t\tisGuiBian=true;\n\t\t\tpoker=Math.abs(poker);\n\t\t}\n\t\tlet cardColor = this.GetCardColor(poker);\n\t\tlet cardValue = this.GetCardValue(poker);\n\t\tlet numNode = cardNode.getChildByName(\"num\");\n\t\tnumNode.active = true;\n\t\tif (cardColor == 0) {//方块\n\t\t\ttype = \"bg_diamond\";\n\t\t\tnum = \"red_\" + cardValue;\n\t\t} else if (cardColor == 16) {//桃花\n\t\t\ttype = \"bg_club\";\n\t\t\tnum = \"black_\" + cardValue;\n\t\t} else if (cardColor == 32) {//红心\n\t\t\ttype = \"bg_heart\";\n\t\t\tnum = \"red_\" + cardValue;\n\t\t} else if (cardColor == 48) {//桃心\n\t\t\ttype = \"bg_spade\";\n\t\t\tnum = \"black_\" + cardValue;\n\t\t} else if (cardColor == 64) {\n\t\t\tnumNode.active = false;\n\t\t\ttype=\"bg_lz\";\n\t\t}\n\t\tif(isGuiBian==true){\n\t\t\tnum = \"yellow_\" + cardValue;\n\t\t\ttype=\"bg_peng\";\n\t\t}\n\t\tfor(let i=0;i<this.pokerOutCardList.length;i++){\n\t\t\tif(this.pokerOutCardList[i]._name == type){\n\t\t\t\tcardNode.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = this.pokerOutCardList[i];\n\t\t\t}else if(this.pokerOutCardList[i]._name == num){\n\t\t\t\tcardNode.getChildByName(\"num\").getComponent(cc.Sprite).spriteFrame = this.pokerOutCardList[i];\n\t\t\t}\n\t\t}\n\t\tcardNode.getChildByName(\"img_hupai\").active = isHu;\n\t},\n\t\n\tLoadAllPokerRes: function () {\n\t\tlet self = this;\n        if(0 != this.pokerOutCardList.length)\n            return;\n       \n        cc.loader.loadResDir(\"ui/uiGame/zgdss/poker/selfout\",cc.SpriteFrame, function(err, assets){\n            if(err){\n                cc.error(err);\n                return;\n            }\n            for(let i=0;i<assets.length;i++){\n                self.pokerOutCardList.push(assets[i]);\n            }\n        });\n\n       \n\n        \n\t},\n\t//获取牌值\n\tGetCardValue: function (poker) {\n\t\treturn poker & this.LOGIC_MASK_VALUE;\n\t},\n\t//获取牌类型\n\tGetCardType: function (poker) {\n\t\treturn poker;\n\t},\n\n\t//获取花色\n\tGetCardColor: function (poker) {\n\t\twhile (poker >= 256) {\n\t\t\tpoker -= 256;\n\t\t}\n\t\tlet color = poker & this.LOGIC_MASK_COLOR;\n\t\treturn color;\n\t},\n\t//获取同一牌值\n\tGetSameValue: function (pokers, tagCard) {\n\t\tlet sameValueList = [];\n\t\tlet tagCardValue = this.GetCardValue(tagCard);\n\t\tfor (let i = 0; i < pokers.length; i++) {\n\t\t\tlet poker = pokers[i];\n\t\t\tlet pokerValue = this.GetCardValue(poker);\n\n\t\t\tif (tagCardValue == pokerValue) {\n\t\t\t\tsameValueList[sameValueList.length] = poker;\n\t\t\t}\n\t\t}\n\t\treturn sameValueList\n\t},\n\t//获取同一牌类型\n\tGetSameType: function (pokers, tagCard) {\n\t\tlet sameTypeList = [];\n\t\tlet tagCardType = this.GetCardType(tagCard);\n\t\tfor (let i = 0; i < pokers.length; i++) {\n\t\t\tlet poker = pokers[i];\n\t\t\tlet pokerType = this.GetCardType(poker);\n\t\t\tif (tagCardType == pokerType) {\n\t\t\t\tsameTypeList[sameTypeList.length] = poker;\n\t\t\t}\n\t\t}\n\t\treturn sameTypeList\n\t},\n\tCheckPokerInListEx: function (list, tagCard) {\n\t\tif (list.length == 0) {\n\t\t\treturn false;\n\t\t}\n\t\tlet bInList = false;\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\tlet item = list[i];\n\t\t\tlet cardValue = this.GetCardValue(item[0]);\n\t\t\tlet tagValue = this.GetCardValue(tagCard);\n\n\t\t\tif (cardValue == tagValue) {\n\t\t\t\tbInList = true;\n\t\t\t}\n\t\t}\n\t\treturn bInList;\n\t},\n\tCheckPokerTypeInListEx: function (list, tagCard) {\n\t\tif (list.length == 0) {\n\t\t\treturn false;\n\t\t}\n\t\tlet bInList = false;\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\tlet item = list[i];\n\t\t\tlet cardType = this.GetCardType(item[0]);\n\t\t\tlet tagType = this.GetCardType(tagCard);\n\t\t\tif (cardType == tagType) {\n\t\t\t\tbInList = true;\n\t\t\t}\n\t\t}\n\t\treturn bInList;\n\t},\n\tPushTipCard: function (pokers, samePoker, len) {\n\t\tlet temp = [];\n\t\tsamePoker.reverse();\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\ttemp.push(samePoker[i]);\n\t\t}\n\t\tpokers.push(temp);\n\t},\n});\n\nvar g_ZGDSSPokerCard = null;\n\n/**\n * 绑定模块外部方法\n */\nexports.GetModel = function () {\n\tif (!g_ZGDSSPokerCard) {\n\t\tg_ZGDSSPokerCard = new ZGDSSPokerCard();\n\t}\n\treturn g_ZGDSSPokerCard;\n};"]}