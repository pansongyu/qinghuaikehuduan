{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UITanChuang.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","FormManager","NetManager","RegEvent","Event_ShareSuccess","ShareType","OnShow","event","that","SendPack","success","SysNotifyManager","ShowSysMsg","CloseForm","error","OnClick","btnName","btnNode","title","Client","GetClientConfigProperty","desc","weChatAppShareUrl","heroID","HeroManager","GetHeroProperty","cityId","console","log","ShowForm"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;AAELI,gBAAY,EAFP;;AAKLC,kBAAc,wBAAY;AACvB,aAAKC,WAAL,GAAiBP,IAAIO,WAAJ,EAAjB;AACA,aAAKC,UAAL,GAAgBR,IAAIQ,UAAJ,EAAhB;AACA,aAAKC,QAAL,CAAc,cAAd,EAA8B,KAAKC,kBAAnC,EAAuD,IAAvD;AACA,aAAKC,SAAL,GAAe,CAAC,CAAhB;AACF,KAVI;AAWLC,YAAQ,kBAAY,CAEnB,CAbI;AAcLF,wBAAmB,4BAASG,KAAT,EAAe;AAC9B,YAAG,KAAKF,SAAL,IAAgB,CAAnB,EAAqB;AACjB,gBAAIG,OAAK,IAAT;AACA,iBAAKN,UAAL,CAAgBO,QAAhB,CAAyB,0BAAzB,EAAoD,EAApD,EAAuD,UAASC,OAAT,EAAiB;AACpEhB,oBAAIiB,gBAAJ,GAAuBC,UAAvB,CAAkC,YAAlC;AACAJ,qBAAKK,SAAL;AACH,aAHD,EAGE,UAASC,KAAT,EAAe;AACbpB,oBAAIiB,gBAAJ,GAAuBC,UAAvB,CAAkC,YAAlC;AACH,aALD;AAMH;AACJ,KAxBI;AAyBLG,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAG,eAAeD,OAAlB,EAA0B;AACtB,gBAAIE,QAAQxB,IAAIyB,MAAJ,CAAWC,uBAAX,CAAmC,kBAAnC,CAAZ;AACA,gBAAIC,OAAO3B,IAAIyB,MAAJ,CAAWC,uBAAX,CAAmC,iBAAnC,CAAX;AACA,gBAAIE,oBAAoB5B,IAAIyB,MAAJ,CAAWC,uBAAX,CAAmC,mBAAnC,CAAxB;AACA,gBAAIG,SAAS7B,IAAI8B,WAAJ,GAAkBC,eAAlB,CAAkC,KAAlC,CAAb;AACA,gBAAIC,SAAOhC,IAAI8B,WAAJ,GAAkBC,eAAlB,CAAkC,QAAlC,CAAX;AACAH,gCAAoBA,oBAAkBC,MAAlB,GAAyB,UAAzB,GAAoCG,MAAxD,CAA+D;AAC/DC,oBAAQC,GAAR,CAAY,mBAAZ,EAAgCV,KAAhC;AACAS,oBAAQC,GAAR,CAAY,mBAAZ,EAAgCP,IAAhC;AACAM,oBAAQC,GAAR,CAAY,mBAAZ,EAAgCN,iBAAhC;AACA,iBAAKjB,SAAL,GAAe,CAAf;AACAX,gBAAIO,WAAJ,GAAkB4B,QAAlB,CAA2B,YAA3B;AACH;AACJ;AAvCI,CAAT","file":"UITanChuang.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n    properties: {\n    },\n\n    OnCreateInit: function () {\n       this.FormManager=app.FormManager();\n       this.NetManager=app.NetManager();\n       this.RegEvent(\"ShareSuccess\", this.Event_ShareSuccess, this);\n       this.ShareType=-1;\n    },\n    OnShow: function () {\n       \n    },\n    Event_ShareSuccess:function(event){\n        if(this.ShareType==1){\n            let that=this;\n            this.NetManager.SendPack(\"game.CPlayerReceiveShare\",{},function(success){\n                app.SysNotifyManager().ShowSysMsg(\"分享成功获取2个钻石\");\n                that.CloseForm();\n            },function(error){\n                app.SysNotifyManager().ShowSysMsg(\"您今日已经领取过钻石\");\n            });\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_share' == btnName){\n            let title = app.Client.GetClientConfigProperty(\"WeChatShareTitle\");\n            let desc = app.Client.GetClientConfigProperty(\"WeChatShareDesc\");\n            let weChatAppShareUrl = app.Client.GetClientConfigProperty(\"WeChatAppShareUrl\");\n            let heroID = app.HeroManager().GetHeroProperty(\"pid\");\n            let cityId=app.HeroManager().GetHeroProperty(\"cityId\");\n            weChatAppShareUrl = weChatAppShareUrl+heroID+\"&cityid=\"+cityId;;\n            console.log(\"Click_btn_weixin:\",title);\n            console.log(\"Click_btn_weixin:\",desc);\n            console.log(\"Click_btn_weixin:\",weChatAppShareUrl);\n            this.ShareType=1;\n            app.FormManager().ShowForm(\"UIShareImg\");\n        }\n    },\n});\n"]}