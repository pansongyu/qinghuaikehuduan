{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIRoomInvitation.js"],"names":["app","require","cc","Class","extends","properties","LabelMessage","RichText","lb_wanfa","Label","lb_roomname","toggle_yaoqing","Node","OnCreateInit","commonColor","clubNameColor","playerNameColor","gameNameColor","allInvitation","invitationData","OnShow","Data","push","ShowMsgInfo","length","CloseForm","splice","gameName","ShareDefine","GametTypeID2Name","gameId","invitationStr","name","playerName","string","gameType","GametTypeID2PinYin","wanfaStr","RoomCfgManager","WanFa","baseCreateRoom","OnClose","click_toggle_jujue","check","getComponent","Toggle","isChecked","NetManager","SendPack","type","serverPack","error","console","OnClick","btnName","eventData","Client","JoinRoomCheckSubGame","roomKey","clubId","ErrLog","SetWaitForConfirm","msgID","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList","self"],"mappings":"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","file":"UIRoomInvitation.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        LabelMessage:cc.RichText,\n        lb_wanfa:cc.Label,\n        lb_roomname:cc.Label,\n        toggle_yaoqing:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.commonColor = \"<color=#705d52>\";\n        this.clubNameColor = \"<color=#daa235>\";\n        this.playerNameColor = \"<color=#f8772c>\";\n        this.gameNameColor = \"<color=#639349>\";\n        this.allInvitation = [];\n        this.invitationData = null;\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(Data){\n        this.allInvitation.push(Data);\n        this.ShowMsgInfo();\n    },\n\n    ShowMsgInfo:function(){\n        if (this.allInvitation.length <= 0) {\n            this.CloseForm();\n            return;\n        }\n        this.invitationData = this.allInvitation[0];\n        this.allInvitation.splice(0, 1);\n        if (this.invitationData == null) {\n            this.CloseForm();\n            return;\n        }\n        let gameName = app.ShareDefine().GametTypeID2Name[this.invitationData.gameId];\n        let invitationStr = \"\"+this.clubNameColor+this.invitationData.name+this.commonColor+\"的成员\"+this.playerNameColor+this.invitationData.playerName+this.commonColor+\"邀请您参与\"+this.gameNameColor+gameName;\n        this.LabelMessage.string = invitationStr;\n        let gameType = app.ShareDefine().GametTypeID2PinYin[this.invitationData.gameId];\n        let wanfaStr = app.RoomCfgManager().WanFa(gameType,this.invitationData.baseCreateRoom);\n        this.lb_wanfa.string = wanfaStr;\n        //显示房间名字\n        if(typeof(this.invitationData[\"baseCreateRoom\"]['roomName'])!=\"undefined\"){\n            this.lb_roomname.string=this.invitationData[\"baseCreateRoom\"]['roomName'];\n        }else{\n            this.lb_roomname.string=\"\";\n        }\n    },\n\n    OnClose:function(){\n\n    },\n    click_toggle_jujue:function(){\n            let check=this.toggle_yaoqing.getComponent(cc.Toggle).isChecked;\n            if(check==false){\n                //已经是不接受邀请\n                app.NetManager().SendPack('club.CClubChangePlayerInvite',{type:0},function(serverPack){\n                },function(error){\n                    console.error(error);\n                });\n            }else{\n                app.NetManager().SendPack('club.CClubChangePlayerInvite',{type:1},function(serverPack){\n                },function(error){\n                    console.error(error);\n                });\n                 /*this.SetWaitForConfirm(\n                    'MSG_CLUB_YaoQing',\n                    this.ShareDefine.Confirm,\n                    [],\n                    [],\n                );*/\n            }\n    },\n    //---------点击函数---------------------\n\tOnClick:function(btnName, eventData){\n\t\tif(btnName == \"btnSure\"){\n            let gameType = app.ShareDefine().GametTypeID2PinYin[this.invitationData.gameId];\n            app.Client.JoinRoomCheckSubGame(gameType, this.invitationData.roomKey, this.invitationData.clubId);\n            this.allInvitation = [];\n            this.invitationData = null;\n            this.CloseForm();\n\t\t}else if(btnName == \"btnCancel\"){\n            if (this.allInvitation.length > 0) {\n                this.ShowMsgInfo();\n                return;\n            }\n            this.invitationData = null;\n            this.CloseForm();\n\t\t}else if(btnName == \"btn_close\"){\n            if (this.allInvitation.length > 0) {\n                this.ShowMsgInfo();\n                return;\n            }\n            this.invitationData = null;\n            this.CloseForm();\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[]){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            this.toggle_yaoqing.getComponent(cc.Toggle).isChecked=false;\n            return\n        }\n        let self = this;\n        if('MSG_CLUB_YaoQing' == msgID){\n            app.NetManager().SendPack('club.CClubChangePlayerInvite',{type:1},function(serverPack){\n            },function(error){\n                 console.error(error);\n            });\n        }\n    },\n});\n"]}