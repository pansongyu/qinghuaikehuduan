{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\sdh/assets\\script\\ui\\uiGame\\sdh\\sdh_detail_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ShowPlayerData","resultsList","playerAll","idx","data","userInfo","node","getChildByName","getComponent","ShowHeroHead","pid","Label","string","ComTool","GetPid","index","player","name","jiesuan","show","showLabel","huTypesShow","point","active","sportsPoint","maxPoint","maxDianPao","i","length","dianPaoPoint","dissolveState","imagePath","that","loader","loadRes","SpriteFrame","error","spriteFrame","console","log","Sprite","huData","zhuangWinPoint","xianWinPoint","higtPoint"],"mappings":"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","file":"sdh_detail_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\sdh","sourcesContent":["/*\n\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseComponent\"),\n\n\tproperties: {\n    },\n\n\t// use this for initialization\n\tOnLoad: function () {\n\n\t},\n\tShowPlayerData:function(resultsList, playerAll,idx){\n        let data = resultsList[idx];\n        let userInfo = this.node.getChildByName(\"user_info\");\n        if(userInfo){\n            userInfo.getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\").ShowHeroHead(data.pid);\n            userInfo.getChildByName(\"label_id\").getComponent(cc.Label).string = \"ID:\" + app.ComTool().GetPid(data.pid);\n            for(let index in playerAll){\n                let player = playerAll[index];\n                if(player.pid == data.pid){\n                    userInfo.getChildByName(\"lable_name\").getComponent(cc.Label).string = player.name;\n                    // if(player.sex==app.ShareDefine().HeroSex_Boy){\n                    //     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteMale;\n                    // }else if(player.sex==app.ShareDefine().HeroSex_Girl){\n                    //     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteFeMale;\n                    // }\n                    break;\n                }\n            }\n        }\n\n        let jiesuan = this.node.getChildByName(\"jiesuan\");\n        let show=1;\n        let showLabel=false;\n        if(jiesuan){\n            this.huTypesShow(jiesuan,data);\n            if(data.point>=0){\n                jiesuan.getChildByName(\"lb_win\").active=true;\n                jiesuan.getChildByName(\"lb_lost\").active=false;\n                jiesuan.getChildByName(\"lb_win\").getComponent(cc.Label).string = '+'+data.point;\n            }else{\n                jiesuan.getChildByName(\"lb_win\").active=false;\n                jiesuan.getChildByName(\"lb_lost\").active=true;\n                jiesuan.getChildByName(\"lb_lost\").getComponent(cc.Label).string = data.point;\n            }\n            //比赛分\n            if (typeof(data.sportsPoint)!=\"undefined\") {\n                jiesuan.getChildByName(\"lb_sportsPoint\").active = true;\n                if (data.sportsPoint > 0) {\n                    jiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：+\" + data.sportsPoint;\n                }else{\n                    jiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：\" + data.sportsPoint;\n                }\n            }else{\n                jiesuan.getChildByName(\"lb_sportsPoint\").active = false;\n            }\n        }\n        let maxPoint=0;\n        let maxDianPao=0;\n        for(let i = 0; i < resultsList.length; i++){\n            let data = resultsList[i];\n            if(data.point>maxPoint){\n                maxPoint=data.point;\n            }\n            if(data.dianPaoPoint>maxDianPao){\n                maxDianPao=data.dianPaoPoint;\n            }\n        }\n        //显示大赢家图标\n        // if(data.dianPaoPoint>=maxDianPao && maxDianPao>0){\n        //     this.node.getChildByName('icon_paoshou').active=true;\n        // }else{\n        //     this.node.getChildByName('icon_paoshou').active=false;\n        // }\n        if(data.point>=maxPoint){\n            this.node.getChildByName('icon_win').active=true;\n            this.node.getChildByName('icon_paoshou').active=false;\n        }else{\n            this.node.getChildByName('icon_win').active=false;\n        }\n        if (this.node.getChildByName('icon_dissolve') != null) {\n            //显示是否解散（-1:正常结束,0:未操作,1:同意操作,2:拒绝操作,3:发起者）\n            if (typeof(data.dissolveState) == \"undefined\" || data.dissolveState == -1) {\n                this.node.getChildByName('icon_dissolve').active=false;\n            }else{\n                let imagePath = \"texture/record/img_dissolve\"+data.dissolveState;\n                let that = this;\n                //加载图片精灵\n                cc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\n                    if(error){\n                        console.log(\"加载图片精灵失败  \" + imagePath);\n                        return\n                    }\n                    that.node.getChildByName('icon_dissolve').getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                    that.node.getChildByName('icon_dissolve').active=true;\n                });\n            }\n        } else {\n            console.error(\"请检查 xxmj_detail_child预制体是否有 icon_dissolve图集节点\")\n        }\n\t},\n\n    huTypesShow:function(jiesuan,huData){\n        jiesuan.getChildByName('top').getChildByName('lb_maxPoint').getComponent(cc.Label).string=huData.zhuangWinPoint;\n        jiesuan.getChildByName('top').getChildByName('lb_winCount').getComponent(cc.Label).string=huData.xianWinPoint;\n        jiesuan.getChildByName('top').getChildByName('lb_lostCount').getComponent(cc.Label).string=huData.higtPoint;\n    },\n});\n"]}