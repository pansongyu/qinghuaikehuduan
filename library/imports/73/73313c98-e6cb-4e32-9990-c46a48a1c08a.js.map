{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club/assets\\script\\ui\\club\\UIForbidGameAddUser.js"],"names":["app","require","cc","Class","extends","properties","EditBoxID","EditBox","btn_add","Node","OnCreateInit","WeChatManager","NetManager","OnShow","unionId","clubId","string","active","node","getChildByName","ShowUser","player","usernode","heroID","headImageUrl","getComponent","Label","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","InitHeroHeadImage","OnLoad","ShowHeroHead","click_btn_search","shuru","GetBeiZhuID","isNaN","parseInt","StrIsNum","SysNotifyManager","ShowSysMsg","self","SendPack","serverPack","error","Click_btn_add","that","sendPack","success","Client","OnEvent","OnClick","btnName","btnNode","CloseForm","ErrLog"],"mappings":"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","file":"UIForbidGameAddUser.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n    \tEditBoxID:cc.EditBox,\n        btn_add:cc.Node,\n    },\n\n    OnCreateInit: function () {\n        this.WeChatManager=app.WeChatManager();\n        this.NetManager = app.NetManager();\n    },\n\n    OnShow: function (unionId, clubId) {\n        this.unionId = unionId;\n    \tthis.clubId=clubId;\n    \tthis.EditBoxID.string='';\n        this.btn_add.active = false;\n        this.node.getChildByName('user').active=false;\n    },\n    ShowUser:function(player){\n        let usernode=this.node.getChildByName('user');\n        usernode.active=true;\n        let heroID = player[\"pid\"];\n        usernode.heroID=heroID;\n        let headImageUrl = player[\"iconUrl\"];\n        usernode.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(heroID,player.name);\n        usernode.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        let WeChatHeadImage = usernode.getChildByName('head').getComponent(\"WeChatHeadImage\");\n         //用户头像创建\n        if(heroID && headImageUrl){\n            this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n        }\n        WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n        this.btn_add.active = true;\n    },\n    click_btn_search:function(){\n        let shuru =this.ComTool.GetBeiZhuID(this.EditBoxID.string);\n        if(isNaN(parseInt(shuru)) || !app.ComTool().StrIsNum(shuru)){\n            app.SysNotifyManager().ShowSysMsg(\"请输入纯数字的玩家id\", [], 3);\n            return;\n        }\n        let self=this;\n        app.NetManager().SendPack('union.CUnionFindPidInfo',{\"pid\":shuru},function(serverPack){\n            self.ShowUser(serverPack.player);\n        },function(error){\n            \n        });\n    },\n    Click_btn_add:function(){\n    \tif(this.EditBoxID.string==''){\n    \t\treturn;\n    \t}\n        let that=this;\n        let sendPack={\n            \"unionId\":this.unionId,\n            \"clubId\":this.clubId,\n            \"pid\":this.EditBoxID.string,\n        };\n        sendPack.unionId = this.unionId;\n        this.NetManager.SendPack(\"union.CUnionBanGamePlayerAdd\", sendPack,function(success){\n            that.btn_add.active = false;\n            that.ShowSysMsg(\"添加成功\");\n            app.Client.OnEvent('OnUnionForbidGameReShow', null);\n        },function(error){\n            \n        });\n        \n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_add\"){\n            this.Click_btn_add();\n        }else if(btnName == \"btn_search\"){\n            this.click_btn_search();\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}