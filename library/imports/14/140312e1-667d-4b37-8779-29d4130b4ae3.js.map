{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club/assets\\script\\ui\\club\\UIJoinUnion.js"],"names":["app","require","cc","Class","extends","properties","numLabels","Label","OnCreateInit","InitCommon","InitEvent","labelString","RegEvent","Event_ReqJoinNtf","event","state","joinStatus","notFind","ClubManager","Enum_JoinClub_NotFind","clubFull","Enum_JoinClub_ClubFull","numMax","Enum_JoinClub_NumMax","inList","Enum_JoinClub_InList","joinIng","Enum_JoinClub_JoinIng","existClub","Enum_JoinClub_ExistClub","ShowSysMsg","Click_btn_reset","OnShow","clubId","OnEventShow","argDict","detail","bReConnect","OnEventHide","SetWaitForConfirm","msgID","type","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList","OnClick","btnName","btnNode","Click_btn_Join","Click_btn_return","Click_btn_clear","startsWith","str","substring","length","Click_btn_Num","SysNotifyManager","join","unionSign","parseInt","sendPack","self","NetManager","SendPack","serverPack","FormManager","GetFormComponentByFormName","CloseForm","GetClubFormComponent","i","string","pop","push","OnClose"],"mappings":"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","file":"UIJoinUnion.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        numLabels:[cc.Label],\n    },\n\n    OnCreateInit: function () {\n        this.InitCommon();\n        this.InitEvent();\n    },\n    InitCommon:function(){\n        this.labelString = [];\n    },\n    InitEvent:function(){\n        //基础网络包\n        this.RegEvent(\"OnReqJoinNtf\", this.Event_ReqJoinNtf);\n    },\n    \n    Event_ReqJoinNtf:function(event){\n        let state = event.joinStatus;\n        let notFind = app.ClubManager().Enum_JoinClub_NotFind;\n        let clubFull = app.ClubManager().Enum_JoinClub_ClubFull;\n        let numMax = app.ClubManager().Enum_JoinClub_NumMax;\n        let inList = app.ClubManager().Enum_JoinClub_InList;\n        let joinIng = app.ClubManager().Enum_JoinClub_JoinIng;\n        let existClub = app.ClubManager().Enum_JoinClub_ExistClub;\n        if(state == notFind){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_NotFind\");\n        }\n        else if(state == clubFull){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_ClubFull\");\n        }\n        else if(state == numMax){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_NumMax\");\n        }\n        else if(state == inList){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_InList\");\n        }\n        else if(state == joinIng){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_JoinIng\");\n            this.Click_btn_reset();\n        }\n        else if(state == existClub){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_ExistClub\");\n            this.Click_btn_reset();\n        }\n    },\n    //--------------显示函数-----------------\n    OnShow: function (clubId) {\n        this.clubId = clubId;\n        this.Click_btn_reset();\n    },\n    \n    \n    OnEventShow:function(event){\n        let argDict = event.detail;\n        let bReConnect = argDict[\"bReConnect\"];\n\n    },\n    OnEventHide:function(event){\n\n    },\n    //---------点击函数---------------------\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, []);\n        ConfirmManager.ShowConfirm(type, msgID, []);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n       \n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_Join' == btnName){\n           this.Click_btn_Join();\n        }\n        else if('btn_return' == btnName){\n           this.Click_btn_return();\n        }\n        else if('btn_reset' == btnName){\n            this.Click_btn_reset();\n        }\n        else if('btn_clear' == btnName){\n            this.Click_btn_clear();\n        }\n        else if(btnName.startsWith('btn_num')){\n            let str = btnName.substring(btnName.length - 1);\n            this.Click_btn_Num(str);\n        }\n    },\n    Click_btn_Join:function(){\n        if(6 != this.labelString.length){\n            app.SysNotifyManager().ShowSysMsg('MSG_CLUB_JOIN_NotFind');\n            return;\n        }\n        let str = this.labelString.join('');\n        let unionSign = parseInt(str);\n        let sendPack = {};\n        sendPack.clubId = this.clubId;\n        sendPack.unionSign = unionSign;\n        let self = this;\n        app.NetManager().SendPack(\"union.CUnionJoin\",sendPack, function(serverPack){\n            if (serverPack == 1) {\n                app.SysNotifyManager().ShowSysMsg(\"申请加入成功\",[],3);\n            }else{\n                //直接加入不需要申请\n                app.SysNotifyManager().ShowSysMsg(\"加入成功\",[],3);\n                if (app.FormManager().GetFormComponentByFormName(\"ui/club/UIUnionNone\")) {\n                    app.FormManager().GetFormComponentByFormName(\"ui/club/UIUnionNone\").CloseForm();\n                }\n                if (app.ClubManager().GetClubFormComponent()) {\n                    app.ClubManager().GetClubFormComponent().OnShow();\n                }\n            }\n            self.CloseForm();\n        }, function(){\n            app.SysNotifyManager().ShowSysMsg(\"加入失败\",[],3);\n        });\n    },\n    Click_btn_return:function(){\n        this.CloseForm();\n    },\n    Click_btn_reset:function(){\n        for(let i=0;i<this.numLabels.length;i++)\n            this.numLabels[i].string = '';\n        \n        this.labelString = [];\n    },\n    Click_btn_clear:function(){\n        if(0 == this.labelString.length){\n            return\n        }\n        this.numLabels[this.labelString.length-1].string = '';\n        this.labelString.pop();\n    },\n    Click_btn_Num:function(str){\n        if(6 <= this.labelString.length)\n            return;\n\n        this.labelString.push(str);\n        this.numLabels[this.labelString.length-1].string = str;\n    },\n    \n    OnClose:function(){\n        \n    },\n});"]}