{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club\\unionChildren/assets\\script\\ui\\club\\unionChildren\\btn_SetSkinTypeNode.js"],"names":["app","require","cc","Class","extends","Component","properties","onLoad","InitData","clubId","unionId","sendPack","self","curSkinType","NetManager","SendPack","serverPack","ShowSkinInfoByType","skinType","SetUpLevelAndQuan","info","node","getChildByName","getComponent","Toggle","isChecked","showUplevelId","showClubSign","content","i","children","length","name","startsWith","parseInt","replace","active","OnClick_BtnWnd","eventTouch","eventData","SoundManager","PlaySound","btnNode","currentTarget","btnName","OnClick","error","console","log","stack","SetShangJiAndQuan","shangji","benquan","ClubManager","GetUnionSendPackHead","event","SetCurClubShowUplevelId","SetCurClubShowClubSign","SetWaitForConfirm","ShareDefine","Confirm","msgID","type","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList"],"mappings":"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","file":"btn_SetSkinTypeNode.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club\\unionChildren","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n    onLoad:function(){\n\n    },\n    InitData:function (clubId, unionId) {\n        let sendPack = {};\n        sendPack.clubId = clubId;\n        let self = this;\n        this.curSkinType = -1;\n        app.NetManager().SendPack(\"union.CUnionGetSkinInfo\",sendPack, function(serverPack){\n            self.ShowSkinInfoByType(serverPack.skinType);\n            self.SetUpLevelAndQuan(serverPack);\n        }, function(){\n\n        });\n    },\n    SetUpLevelAndQuan:function(info){\n        this.node.getChildByName(\"skinScrollView\").getChildByName(\"toggle_shangji\").getComponent(cc.Toggle).isChecked = info.showUplevelId==1;\n        this.node.getChildByName(\"skinScrollView\").getChildByName(\"toggle_benquan\").getComponent(cc.Toggle).isChecked = info.showClubSign==1;\n    },\n    ShowSkinInfoByType:function(skinType){\n        this.curSkinType = skinType;\n\n        let content = this.node.getChildByName(\"skinScrollView\").getChildByName(\"view\").getChildByName(\"content\");\n        for (let i = 0; i < content.children.length; i++) {\n            if (content.children[i].name.startsWith(\"btn_skin_\")) {\n                if (skinType == parseInt(content.children[i].name.replace('btn_skin_',''))) {\n                    content.children[i].getChildByName(\"imgSelect\").active = true;\n                }else{\n                    content.children[i].getChildByName(\"imgSelect\").active = false;\n                }\n            }\n        }\n    },\n    //控件点击回调\n    OnClick_BtnWnd:function(eventTouch, eventData){\n        try{\n            app.SoundManager().PlaySound(\"BtnClick\");\n            let btnNode = eventTouch.currentTarget;\n            let btnName = btnNode.name;\n            this.OnClick(btnName, btnNode);\n        }\n        catch (error){\n            console.log(\"OnClick_BtnWnd:\"+error.stack);\n        }\n    },\n    SetShangJiAndQuan:function(){\n            let shangji=this.node.getChildByName(\"skinScrollView\").getChildByName(\"toggle_shangji\").getComponent(cc.Toggle).isChecked;\n            let benquan=this.node.getChildByName(\"skinScrollView\").getChildByName(\"toggle_benquan\").getComponent(cc.Toggle).isChecked;\n            let sendPack = app.ClubManager().GetUnionSendPackHead();\n            if(shangji==true){\n                sendPack.showUplevelId = 1;\n            }else{\n                sendPack.showUplevelId = 0;\n            }\n            if(benquan==true){\n                sendPack.showClubSign = 1;\n            }else{\n                sendPack.showClubSign = 0;\n            }\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionChangeSkinShowInfo\",sendPack,function(event){\n                app.ClubManager().SetCurClubShowUplevelId(sendPack.showUplevelId);\n                app.ClubManager().SetCurClubShowClubSign(sendPack.showClubSign);\n            },function(error){\n\n            });\n    },\n    OnClick:function(btnName, btnNode){\n    \tif (btnName.startsWith(\"btn_skin_\")) {\n            if (this.curSkinType == -1) {\n                return;\n            }\n            let skinType=parseInt(btnName.replace('btn_skin_',''));\n            if (this.curSkinType != skinType) {\n                this.SetWaitForConfirm('MSG_SETSKINTYPE',app.ShareDefine().Confirm,[],[skinType],\"是否切换赛事皮肤\");\n            }\n        }\n\n    },\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[],content=\"\"){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg, content);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n        if('MSG_SETSKINTYPE' == msgID){\n            let skinType = backArgList[0];\n            let sendPack = app.ClubManager().GetUnionSendPackHead();\n            sendPack.skinType = skinType;\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionChangeSkin\",sendPack, function(serverPack){\n                self.ShowSkinInfoByType(serverPack.skinType);\n            }, function(){\n\n            });\n        }\n    },\n});"]}