{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\UIZengSong.js"],"names":["app","require","cc","Class","extends","properties","edit_num","default","type","EditBox","edit_id","lb_username","Label","OnCreateInit","NetManager","OnShow","familyID","PlayerFamilyManager","GetPlayerFamilyProperty","string","click_btn_song","id","parseInt","num","ShowSysMsg","that","SendPack","serverPack","error","GetUserName","length","pid","name","console","OnClick","btnName","btnNode","CloseForm"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,kBAAS;AACLC,qBAAQ,IADH;AAELC,kBAAKN,GAAGO;AAFH,SADD;AAKRC,iBAAQ;AACJH,qBAAQ,IADJ;AAEJC,kBAAKN,GAAGO;AAFJ,SALA;AASRE,qBAAYT,GAAGU;AATP,KAHP;;AAeLC,kBAAa,wBAAU;AACnB,aAAKC,UAAL,GAAkBd,IAAIc,UAAJ,EAAlB;AACH,KAjBI;;AAmBLC,YAAO,kBAAU;AACZ,aAAKC,QAAL,GAAchB,IAAIiB,mBAAJ,GAA0BC,uBAA1B,CAAkD,UAAlD,CAAd;AACA,aAAKP,WAAL,CAAiBQ,MAAjB,GAAwB,EAAxB;AACA,aAAKT,OAAL,CAAaS,MAAb,GAAoB,EAApB;AACA,aAAKb,QAAL,CAAca,MAAd,GAAqB,EAArB;AACJ,KAxBI;AAyBLC,oBAAe,0BAAU;AACrB,YAAIC,KAAGC,SAAS,KAAKZ,OAAL,CAAaS,MAAtB,CAAP;AACA,YAAII,MAAID,SAAS,KAAKhB,QAAL,CAAca,MAAvB,CAAR;AACA,YAAG,CAACE,EAAD,IAAOA,MAAI,CAAd,EAAgB;AACZ,iBAAKG,UAAL,CAAgB,SAAhB;AACA;AACH;AACD,YAAG,CAACD,GAAD,IAAQA,OAAK,CAAhB,EAAkB;AACd,iBAAKC,UAAL,CAAgB,SAAhB;AACA;AACH;AACD,YAAIC,OAAK,IAAT;AACAzB,YAAIc,UAAJ,GAAiBY,QAAjB,CAA0B,2BAA1B,EAAsD,EAAC,SAAQL,EAAT,EAAY,SAAQE,GAApB,EAAtD,EAA+E,UAASI,UAAT,EAAoB;AAC/FF,iBAAKD,UAAL,CAAgB,MAAhB;AACAC,iBAAKnB,QAAL,CAAca,MAAd,GAAqB,EAArB;AACH,SAHD,EAGE,UAASS,KAAT,EAAe,CAEhB,CALD;AAMH,KA3CI;AA4CLC,iBAAY,uBAAU;AAClB,YAAIJ,OAAK,IAAT;AACA,YAAIf,UAAQ,KAAKA,OAAL,CAAaS,MAAzB;AACA,YAAGT,QAAQoB,MAAR,IAAgB,CAAnB,EAAqB;AACjB9B,gBAAIc,UAAJ,GAAiBY,QAAjB,CAA0B,6BAA1B,EAAwD,EAACK,KAAIrB,OAAL,EAAxD,EAAsE,UAASiB,UAAT,EAAoB;AACtFF,qBAAKd,WAAL,CAAiBQ,MAAjB,GAAwBQ,WAAWK,IAAnC;AACH,aAFD,EAEE,UAASJ,KAAT,EAAe;AACbH,qBAAKd,WAAL,CAAiBQ,MAAjB,GAAwB,EAAxB;AACAc,wBAAQL,KAAR,CAAcA,KAAd;AACH,aALD;AAMH;AACJ,KAvDI;AAwDLM,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAGD,WAAS,UAAZ,EAAuB;AACnB,iBAAKf,cAAL;AACH,SAFD,MAEM,IAAGe,WAAS,WAAZ,EAAwB;AAC1B,iBAAKE,SAAL;AACH;AACJ;;AA9DI,CAAT","file":"UIZengSong.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        edit_num:{\n            default:null,\n            type:cc.EditBox\n        },\n        edit_id:{\n            default:null,\n            type:cc.EditBox\n        },\n        lb_username:cc.Label,\n    },\n\n    OnCreateInit:function(){\n        this.NetManager = app.NetManager();\n    },\n\n    OnShow:function(){\n         this.familyID=app.PlayerFamilyManager().GetPlayerFamilyProperty(\"familyID\");\n         this.lb_username.string=\"\";\n         this.edit_id.string=\"\";\n         this.edit_num.string=\"\";\n    },\n    click_btn_song:function(){\n        let id=parseInt(this.edit_id.string);\n        let num=parseInt(this.edit_num.string);\n        if(!id || id<=0){\n            this.ShowSysMsg('请输入赠送ID');\n            return;\n        }\n        if(!num || num<=0){\n            this.ShowSysMsg('请输入赠送数量');\n            return;\n        }\n        let that=this;\n        app.NetManager().SendPack('family.CAgentGiveRoomCard',{\"toPid\":id,\"value\":num},function(serverPack){\n            that.ShowSysMsg('赠送成功');\n            that.edit_num.string=\"\";\n        },function(error){\n            \n        });\n    },\n    GetUserName:function(){\n        let that=this;\n        let edit_id=this.edit_id.string;\n        if(edit_id.length>=6){\n            app.NetManager().SendPack('player.CPlayerGetPlayerInfo',{pid:edit_id},function(serverPack){\n                that.lb_username.string=serverPack.name;\n            },function(error){\n                that.lb_username.string=\"\";\n                console.error(error);\n            });\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName==\"btn_song\"){\n            this.click_btn_song();\n        }else if(btnName==\"btn_close\"){\n            this.CloseForm();\n        }\n    },\n    \n});\n"]}