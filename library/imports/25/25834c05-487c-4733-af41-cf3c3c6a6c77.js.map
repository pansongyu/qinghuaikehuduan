{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club\\unionChildren/assets\\script\\ui\\club\\unionChildren\\btn_RaceRankNode.js"],"names":["app","require","cc","Class","extends","Component","properties","imgRank","SpriteFrame","onLoad","ComTool","InitData","clubId","unionId","unionPostType","curType","btn_default","node","getChildByName","OnClick","name","ClickTopBtn","clickName","topBtnNode","allTopBtn","i","children","length","push","active","UpdateScrollView","serverPack","isRefresh","rankScrollView","content","getComponent","ScrollView","scrollToTop","removeAllChildren","lb_userRank","Label","curRankingId","string","demo","unionMatchItemList","matchItem","child","instantiate","rankingId","Sprite","spriteFrame","GetBeiZhuName","pid","clubSign","clubName","sportsPoint","addChild","OnClick_BtnWnd","eventTouch","eventData","SoundManager","PlaySound","btnNode","currentTarget","btnName","error","console","log","stack","sendPack","ClubManager","GetUnionSendPackHead","type","self","NetManager","SendPack","SysNotifyManager","ShowSysMsg"],"mappings":"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","file":"btn_RaceRankNode.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club\\unionChildren","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        imgRank:[cc.SpriteFrame],\n    },\n    onLoad:function(){\n        this.ComTool=app.ComTool();\n    \t// let rankScrollView = this.node.getChildByName(\"rankScrollView\").getComponent(cc.ScrollView);\n     //    rankScrollView.node.on('scroll-to-bottom',this.GetNextPage,this);\n    },\n    InitData:function (clubId, unionId, unionPostType) {\n        this.clubId = clubId;\n        this.unionId = unionId;\n        this.unionPostType = unionPostType;\n        // this.curPage = 1;\n        this.curType = 0;\n        let btn_default = this.node.getChildByName(\"topBtnNode\").getChildByName(\"btn_lastRank\");\n        this.OnClick(btn_default.name,btn_default);\n    },\n    ClickTopBtn:function(clickName){\n    \tlet topBtnNode = this.node.getChildByName(\"topBtnNode\");\n        let allTopBtn = [];\n        for (let i = 0; i < topBtnNode.children.length; i++) {\n            allTopBtn.push(topBtnNode.children[i]);\n        }\n        for (let i = 0; i < allTopBtn.length; i++) {\n            if (allTopBtn[i].name == clickName) {\n                allTopBtn[i].getChildByName(\"img_off\").active = false;\n                allTopBtn[i].getChildByName(\"lb_off\").active = false;\n                allTopBtn[i].getChildByName(\"img_on\").active = true;\n                allTopBtn[i].getChildByName(\"lb_on\").active = true;\n            }else{\n                allTopBtn[i].getChildByName(\"img_off\").active = true;\n                allTopBtn[i].getChildByName(\"lb_off\").active = true;\n                allTopBtn[i].getChildByName(\"img_on\").active = false;\n                allTopBtn[i].getChildByName(\"lb_on\").active = false;\n            }\n        }\n    },\n    // GetNextPage:function(){\n    // \tthis.curPage++;\n    // \tlet sendPack = app.ClubManager().GetUnionSendPackHead();\n    // \tsendPack.pageNum = this.curPage;\n    // \tsendPack.type = this.curType;\n    //     let self = this;\n    //     app.NetManager().SendPack(\"union.CUnionRankingList\",sendPack, function(serverPack){\n    //         self.UpdateScrollView(serverPack, false);\n    //     }, function(){\n    //         app.SysNotifyManager().ShowSysMsg(\"获取列表失败\",[],3);\n    //     });\n    // },\n    UpdateScrollView:function(serverPack, isRefresh){\n    \tlet rankScrollView = this.node.getChildByName(\"rankScrollView\");\n    \tlet content = rankScrollView.getChildByName(\"view\").getChildByName(\"content\");\n    \tif (isRefresh) {\n    \t\trankScrollView.getComponent(cc.ScrollView).scrollToTop();\n    \t\tcontent.removeAllChildren();\n    \t}\n\n        let lb_userRank = this.node.getChildByName(\"lb_userRank\").getComponent(cc.Label);\n    \tif (serverPack.curRankingId) {\n            lb_userRank.string = \"我的排名：\"+serverPack.curRankingId;\n        }else{\n            lb_userRank.string = \"我的排名：未上榜\";\n        }\n        let demo = this.node.getChildByName(\"demo\");\n    \tdemo.active = false;\n    \tfor (let i = 0; i < serverPack.unionMatchItemList.length; i++) {\n            let matchItem = serverPack.unionMatchItemList[i];\n    \t\tlet child = cc.instantiate(demo);\n    \t\tif (i%2 == 0) {\n    \t\t\tchild.getChildByName(\"img_tiaowen01\").active = true;\n    \t\t}else{\n    \t\t\tchild.getChildByName(\"img_tiaowen01\").active = false;\n    \t\t}\n            if (matchItem.rankingId > 3) {\n                child.getChildByName(\"img_rank\").active = false;\n                child.getChildByName(\"lb_rank\").getComponent(cc.Label).string = matchItem.rankingId;\n            }else{\n                child.getChildByName(\"img_rank\").getComponent(cc.Sprite).spriteFrame = this.imgRank[matchItem.rankingId - 1];\n                child.getChildByName(\"img_rank\").active = true;\n                child.getChildByName(\"lb_rank\").getComponent(cc.Label).string = \"\";\n            }\n            child.getChildByName(\"lb_userName\").getComponent(cc.Label).string =this.ComTool.GetBeiZhuName(matchItem.pid,matchItem.name);\n            child.getChildByName(\"lb_userPid\").getComponent(cc.Label).string = matchItem.pid;\n            child.getChildByName(\"lb_clubId\").getComponent(cc.Label).string = matchItem.clubSign;\n            child.getChildByName(\"lb_clubName\").getComponent(cc.Label).string = matchItem.clubName;\n            child.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = matchItem.sportsPoint;\n    \t\tchild.active = true;\n    \t\tcontent.addChild(child);\n    \t}\n    },\n    //控件点击回调\n    OnClick_BtnWnd:function(eventTouch, eventData){\n        try{\n            app.SoundManager().PlaySound(\"BtnClick\");\n            let btnNode = eventTouch.currentTarget;\n            let btnName = btnNode.name;\n            this.OnClick(btnName, btnNode);\n        }\n        catch (error){\n            console.log(\"OnClick_BtnWnd:\"+error.stack);\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_lastRank'==btnName){\n            this.ClickTopBtn(btnName);\n            this.curType = 1;\n            // this.curPage = 1;\n            let sendPack = app.ClubManager().GetUnionSendPackHead();\n\t    \t// sendPack.pageNum = this.curPage;\n\t    \tsendPack.type = this.curType;\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionRankingList\",sendPack, function(serverPack){\n                self.UpdateScrollView(serverPack, true);\n            }, function(){\n                app.SysNotifyManager().ShowSysMsg(\"获取列表失败\",[],3);\n            });\n        }else if('btn_curRank'==btnName){\n            this.ClickTopBtn(btnName);\n            this.curType = 0;\n            // this.curPage = 1;\n            let sendPack = app.ClubManager().GetUnionSendPackHead();\n\t    \t// sendPack.pageNum = this.curPage;\n\t    \tsendPack.type = this.curType;\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionRankingList\",sendPack, function(serverPack){\n                self.UpdateScrollView(serverPack, true);\n            }, function(){\n                app.SysNotifyManager().ShowSysMsg(\"获取列表失败\",[],3);\n            });\n        }\n    },\n});"]}