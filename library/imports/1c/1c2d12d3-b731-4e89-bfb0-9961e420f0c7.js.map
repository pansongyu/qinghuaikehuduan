{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\dbmanager\\PlayerRoom/assets\\script\\dbmanager\\PlayerRoom\\PlayerRoomManager.js"],"names":["app","require","PlayerRoomManager","DBBaseClass","extend","Init","JS_Name","NetManager","RegNetPack","OnPack_RoomInfo","Log","InitReload","dataInfo","OnInitData","roomInfo","Client","OnEvent","OnFailInitData","failInfo","ErrLog","serverPack","OnSuccessInitDBData","SetPlayerRoomProperty","property","value","hasOwnProperty","GetPlayerRoomProperty","AutoInitDataPack","LoadInitDB","g_PlayerRoomManager","exports","GetModel"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEA,IAAIC,oBAAoBF,IAAIG,WAAJ,CAAgBC,MAAhB,CAAuB;;AAE9CC,OAAK,gBAAU;AACd,OAAKC,OAAL,GAAe,mBAAf;;AAEA,OAAKC,UAAL,GAAkBP,IAAIO,UAAJ,EAAlB;AACA;AACA,OAAKA,UAAL,CAAgBC,UAAhB,CAA2B,gBAA3B,EAA6C,KAAKC,eAAlD,EAAmE,IAAnE;;AAEA,OAAKC,GAAL,CAAS,MAAT;AACA,EAV6C;;AAY9C;AACAC,aAAW,sBAAU;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAKC,QAAL,GAAgB;AACX,aAAS,CADE;AAEX,cAAU,CAFC;AAGX,cAAU,CAHC;AAIX,iBAAa,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,EAAW,CAAX,EAAa,CAAb,EAAe,CAAf,CAJF;AAKX,eAAW;AALA,GAAhB;AAQA,EAnC6C;;AAqC9C;AACA;AACAC,aAAW,oBAASC,QAAT,EAAkB;AAC5B,OAAKF,QAAL,GAAgBE,QAAhB;AACAd,MAAIe,MAAJ,CAAWC,OAAX,CAAmB,gBAAnB,EAAqC,EAArC;AACA,EA1C6C;;AA4C9C;AACAC,iBAAe,wBAASC,QAAT,EAAkB;AAChC,OAAKC,MAAL,CAAY,WAAZ,EAAyBD,QAAzB;AACA,EA/C6C;;AAiD9C;AACAT,kBAAgB,yBAASW,UAAT,EAAoB;AACnC,OAAKC,mBAAL,CAAyBD,UAAzB;AACA,EApD6C;;AAuD9C;AACAE,wBAAsB,+BAASC,QAAT,EAAmBC,KAAnB,EAAyB;AAC9C,MAAG,CAAC,KAAKZ,QAAL,CAAca,cAAd,CAA6BF,QAA7B,CAAJ,EAA2C;AAC1C,QAAKJ,MAAL,CAAY,mCAAZ,EAAgDI,QAAhD;AACA;AACA;AACD,OAAKX,QAAL,CAAcW,QAAd,IAA0BC,KAA1B;AACA,EA9D6C;AA+D9C;AACAE,wBAAsB,+BAASH,QAAT,EAAkB;;AAEvC,OAAKI,gBAAL;;AAEA,MAAG,CAAC,KAAKf,QAAL,CAAca,cAAd,CAA6BF,QAA7B,CAAJ,EAA2C;AAC1C,QAAKJ,MAAL,CAAY,mCAAZ,EAAgDI,QAAhD;AACA;AACA;AACD,SAAO,KAAKX,QAAL,CAAcW,QAAd,CAAP;AACA,EAzE6C;;AA2E9C;AACA;AACAI,mBAAiB,4BAAU;AAC1B;AACA,OAAKC,UAAL,CAAgB,oBAAhB,EAAsC,EAAtC;AACA;AAhF6C,CAAvB,CAAxB;;AAoFA,IAAIC,sBAAsB,IAA1B;;AAEA;;;AAGAC,QAAQC,QAAR,GAAmB,YAAU;AAC5B,KAAG,CAACF,mBAAJ,EAAwB;AACvBA,wBAAsB,IAAI3B,iBAAJ,EAAtB;AACA;AACD,QAAO2B,mBAAP;AACA,CALD","file":"PlayerRoomManager.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\dbmanager\\PlayerRoom","sourcesContent":["/*\n 玩家房间信息\n */\nvar app = require('app');\n\nvar PlayerRoomManager = app.DBBaseClass.extend({\n\n\tInit:function(){\n\t\tthis.JS_Name = \"PlayerRoomManager\";\n\n\t\tthis.NetManager = app.NetManager();\n\t\t//推送\n\t\tthis.NetManager.RegNetPack(\"S1106_RoomInfo\", this.OnPack_RoomInfo, this);\n\n\t\tthis.Log(\"Init\");\n\t},\n\n\t//切换账号\n\tInitReload:function(){\n\n\t\t//{\n\t\t//\t//收到牌品评价列表\n\t\t//\t\"koubeiList\":[1,1,1,1,1,1],\n\t\t//\t//好评\n\t\t//\t\"evaGood\":0,\n\t\t//\t//差评\n\t\t//\t\"evaBad\":0,\n\t\t//\t//快速出牌\n\t\t//\t\"fastOut\":0,\n\t\t//\t//中途离开\n\t\t//\t\"midLeave\":0,\n\t\t//}\n\t\tthis.dataInfo = {\n\t\t\t\t\t\t\t\"evaBad\":0,\n\t\t\t\t\t\t\t\"evaGood\":0,\n\t\t\t\t\t\t\t\"fastOut\":0,\n\t\t\t\t\t\t\t\"koubeiList\":[0,0,0,0,0,0,0,0],\n\t\t\t\t\t\t\t\"midLeave\":0,\n\t\t\t\t\t\t};\n\n\t},\n\n\t//------------封包函数------------------\n\t//初始化成功\n\tOnInitData:function(roomInfo){\n\t\tthis.dataInfo = roomInfo;\n\t\tapp.Client.OnEvent(\"InitPlayerRoom\", {});\n\t},\n\n\t//初始化失败\n\tOnFailInitData:function(failInfo){\n\t\tthis.ErrLog(\"failInfo:\", failInfo);\n\t},\n\n\t//服务器推送初始化\n\tOnPack_RoomInfo:function(serverPack){\n\t\tthis.OnSuccessInitDBData(serverPack);\n\t},\n\n\n\t//-------------设置接口---------------------\n\tSetPlayerRoomProperty:function(property, value){\n\t\tif(!this.dataInfo.hasOwnProperty(property)){\n\t\t\tthis.ErrLog(\"SetPlayerRoomProperty not find:%s\",property);\n\t\t\treturn\n\t\t}\n\t\tthis.dataInfo[property] = value;\n\t},\n\t//--------------获取接口------------------------\n\tGetPlayerRoomProperty:function(property){\n\n\t\tthis.AutoInitDataPack();\n\n\t\tif(!this.dataInfo.hasOwnProperty(property)){\n\t\t\tthis.ErrLog(\"GetPlayerRoomProperty not find:%s\",property);\n\t\t\treturn\n\t\t}\n\t\treturn this.dataInfo[property];\n\t},\n\n\t//---------------发包接口------------------------\n\t//自动初始化管理器数据封包\n\tAutoInitDataPack:function(){\n\t\t//发送初始化DB数据\n\t\tthis.LoadInitDB(\"game.C1106RoomInfo\", {});\n\t},\n});\n\n\nvar g_PlayerRoomManager = null;\n\n/**\n * 绑定模块外部方法\n */\nexports.GetModel = function(){\n\tif(!g_PlayerRoomManager){\n\t\tg_PlayerRoomManager = new PlayerRoomManager();\n\t}\n\treturn g_PlayerRoomManager;\n}"]}