{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club\\msgType/assets\\script\\ui\\club\\msgType\\msg_type_13.js"],"names":["app","require","cc","Class","extends","Component","properties","msgTypeSprite","SpriteFrame","curValueIconSprite","InitData","data","msgData","timeStr","ComTool","GetDateYearMonthDayHourMinuteString","execTime","img_di","node","getChildByName","getComponent","Label","string","roomKey","roomName","msgTypeNode","img_sheng","msgTypeStr","execType","Sprite","spriteFrame","color","Color","console","log","num","ClubManager","GetUnionTypeByLastClubData","active","curRemainder","OnClickBtnMsg","event","detailNode","sendPack","roomId","pid","getType","self","NetManager","SendPack","serverPack","length","UpdateScrollView","SysNotifyManager","ShowSysMsg","msgList","DestroyAllChildren","Layout","updateLayout","i","msgNode","instantiate","msgTextStr","type","reasonPidName","addChild","children","child","removeFromParent","destroy"],"mappings":"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","file":"msg_type_13.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club\\msgType","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        msgTypeSprite:[cc.SpriteFrame],\n        curValueIconSprite:[cc.SpriteFrame],\n    },\n    InitData:function (data) {\n        this.msgData = data;\n    \tlet timeStr = app.ComTool().GetDateYearMonthDayHourMinuteString(data.execTime);\n        let img_di = this.node.getChildByName(\"img_tiaowen01\");\n        img_di.getChildByName(\"lb_time\").getComponent(cc.Label).string = timeStr;\n        let roomKey = \"\";\n        if (typeof(data.roomKey)!=\"undefined\") {\n            roomKey = \"房间号：\"+data.roomKey+\" 房间名：\"+data.roomName;\n        }\n        img_di.getChildByName(\"lb_roomKey\").getComponent(cc.Label).string = roomKey;\n        let msgTypeNode = img_di.getChildByName(\"btn_lv\");\n        let img_sheng = img_di.getChildByName(\"img_sheng\");\n        let msgTypeStr = \"\";\n        if (data.execType == 1014) {\n            msgTypeStr = \"报名费\";\n            msgTypeNode.getComponent(cc.Sprite).spriteFrame = this.msgTypeSprite[1];\n            msgTypeNode.getChildByName(\"lb_msgType\").color = new cc.Color(26, 156, 12);\n            img_sheng.getComponent(cc.Sprite).spriteFrame = this.curValueIconSprite[0];\n        }else{\n            console.log(\"请确认是否是报名费消息：\"+data.execType);\n        }\n        msgTypeNode.getChildByName(\"lb_msgType\").getComponent(cc.Label).string = msgTypeStr;\n        img_di.getChildByName(\"lb_value\").getComponent(cc.Label).string = data.num;\n        if (data.num >= 0) {\n            img_di.getChildByName(\"lb_value\").color = new cc.Color(55, 155, 32);\n        }else{\n            img_di.getChildByName(\"lb_value\").color = new cc.Color(248, 57, 57);\n        }\n        if(app.ClubManager().GetUnionTypeByLastClubData()==1){\n            img_di.getChildByName(\"lb_curValue\").active = false;\n            img_di.getChildByName(\"img_sheng\").active = false;\n        }else{\n            img_di.getChildByName(\"lb_curValue\").active = true;\n            img_di.getChildByName(\"img_sheng\").active = true;\n            img_di.getChildByName(\"lb_curValue\").getComponent(cc.Label).string = data.curRemainder;\n        }\n    },\n    OnClickBtnMsg:function(event){\n        let detailNode = this.node.getChildByName(\"detailNode\");\n        if (detailNode.active) {\n            detailNode.active = false;\n            return;\n        }\n        let sendPack = {};\n        sendPack.roomId = this.msgData.roomId;\n        sendPack.pid = this.msgData.pid;\n        sendPack.getType = this.msgData.getType;\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubRoomPromotionPointDetail\",sendPack, function(serverPack){\n            if (serverPack.length > 0) {\n                self.UpdateScrollView(serverPack);\n            }\n        }, function(){\n            app.SysNotifyManager().ShowSysMsg(\"获取列表失败\",[],3);\n        });\n    },\n    UpdateScrollView:function(msgList){\n        let detailNode = this.node.getChildByName(\"detailNode\");\n        this.DestroyAllChildren(detailNode);\n        detailNode.getComponent(cc.Layout).updateLayout();\n        detailNode.active = true;\n        for (let i = 0; i < msgList.length; i++) {\n            let msgNode = cc.instantiate(this.node.getChildByName(\"demoDetail\"));\n            let msgData = msgList[i];\n            let msgTextStr = \"\";\n            let msgTypeNode = msgNode.getChildByName(\"btn_lv\");\n            if (msgData.type == 1) {\n                msgTextStr = \"上级分成 \"+msgData.reasonPidName;\n                msgTypeNode.getComponent(cc.Sprite).spriteFrame = this.msgTypeSprite[1];\n                msgTypeNode.getChildByName(\"lb_msgType\").color = new cc.Color(26, 156, 12);\n            }else if (msgData.type == 2) {\n                msgTextStr = \"分给下级 \"+msgData.reasonPidName;\n                msgTypeNode.getComponent(cc.Sprite).spriteFrame = this.msgTypeSprite[0];\n                msgTypeNode.getChildByName(\"lb_msgType\").color = new cc.Color(221, 126, 2);\n            }else if (msgData.type == 3) {\n                msgTextStr = \"玩家支付的房间报名费\";\n                msgTypeNode.getComponent(cc.Sprite).spriteFrame = this.msgTypeSprite[1];\n                msgTypeNode.getChildByName(\"lb_msgType\").color = new cc.Color(26, 156, 12);\n            }else{\n                console.log(\"请确认是否是报名费消息：\"+msgData.execType);\n                continue;\n            }\n            msgNode.getChildByName(\"lb_msgText\").getComponent(cc.Label).string = msgTextStr;\n            msgNode.getChildByName(\"lb_value\").getComponent(cc.Label).string = msgData.num;\n            if (msgData.num >= 0) {\n                msgNode.getChildByName(\"lb_value\").color = new cc.Color(55, 155, 32);\n            }else{\n                msgNode.getChildByName(\"lb_value\").color = new cc.Color(248, 57, 57);\n            }\n            msgNode.active = true;\n            detailNode.addChild(msgNode);\n        }\n    },\n    //手动释放内存\n    DestroyAllChildren:function(node){\n        let i=node.children.length-1;\n        for(;i>=0;i--) {\n            let child=node.children[i];\n            child.removeFromParent();\n            child.destroy();\n        }\n        /*node.destroyAllChildren();\n        node.removeAllChildren();*/\n    },\n});"]}