{"version":3,"sources":["UIActivity.js"],"names":["app","require","cc","Class","extends","properties","btnNodeGroup","Node","btnPrefab","bg_img","Sprite","btn_load","OnCreateInit","FormManager","NetManager","OnShow","event","clubDatas","ClubManager","GetClubData","dataInfo","infoCount","LoadTitleBtn","LoadImg","removeAllChildren","i","length","node","instantiate","active","name","getChildByName","getComponent","Label","string","addChild","ShowTitleBtn","index","self","sys","isNative","imgUrl","loader","load","err","texture","Texture2D","frame","SpriteFrame","spriteFrame","ErrLog","children","InitGameBtnList","serverPack","ShowForm","OnClick","btnName","btnNode","CloseForm","sceneName","ShowClubFrom","SendPack","bind","startsWith","replace"],"mappings":"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","file":"UIActivity.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        btnNodeGroup:cc.Node,\n        btnPrefab:cc.Node,\n        bg_img:cc.Sprite,\n        btn_load:cc.Node,\n    },\n\n    OnCreateInit:function(){\n        this.FormManager = app.FormManager();\n        this.NetManager=app.NetManager();\n    },\n    OnShow:function(event = ''){\n        this.clubDatas = app.ClubManager().GetClubData();\n        this.dataInfo = event;\n        this.infoCount = 0;\n        this.LoadTitleBtn(event);\n        this.LoadImg();\n    },\n    LoadTitleBtn:function(event){\n        this.btnNodeGroup.removeAllChildren();\n        for(let i = 0; i < event.length; i++){\n            let node = cc.instantiate(this.btnPrefab);\n            node.active = true;\n            node.name = 'btn_' + i;\n            node.getChildByName('icon_off').getComponent(cc.Label).string = event[i][\"title\"];\n            node.getChildByName('icon').getChildByName('icon_on').getComponent(cc.Label).string = event[i][\"title\"];\n            this.btnNodeGroup.addChild(node);\n        }\n        this.ShowTitleBtn();\n    },\n    LoadImg:function(index = 0){\n        let self = this;\n        \n        if(cc.sys.isNative){\n            this.imgUrl =\"http://fb.qicaiqh.com:88\" + this.dataInfo[index]['propaganda'];\n        }else{\n            this.imgUrl =\"http://tfb.qicaiqh.com:88\" + this.dataInfo[index]['propaganda'];\n        }\n        // let imgUrl = \"http://fb.qicaiqh.com/myimg.php?url=\" + url;\n\n        cc.loader.load(this.imgUrl,function (err, texture) {\n            if(texture instanceof cc.Texture2D){\n                var frame = new cc.SpriteFrame(texture);\n                self.bg_img.spriteFrame=frame;\n            }\n            else{\n                self.ErrLog(\"texture not Texture2D\");\n            }\n        });\n        if(this.dataInfo[index]['beizhu']){\n            this.btn_load.active = true;\n        }else{\n            this.btn_load.active = false;\n        }\n    },\n    ShowTitleBtn:function(index = 0){\n        for(let i=0;i<this.btnNodeGroup.children.length;i++){\n            this.btnNodeGroup.children[i].getChildByName('icon').active=false;\n        }\n        this.btnNodeGroup.getChildByName(\"btn_\"+index).getChildByName('icon').active=true;\n        this.LoadImg(index);\n    },\n    InitGameBtnList: function (serverPack) {\n        this.FormManager.ShowForm(\"UICreatRoom\", serverPack);\n    },\n    OnClick:function(btnName,btnNode){\n        if('btn_close' == btnName){\n            this.CloseForm();\n        }else if('btn_load' == btnName){\n            let sceneName = this.dataInfo[this.infoCount]['beizhu'];\n            if(sceneName == \"UIClubNone\"){\n                if(this.clubDatas.length==0){\n                    this.FormManager.ShowForm(\"ui/club/UIClubNone\");\n                }else{\n                    // this.FormManager.ShowForm(\"ui/club/UIClubMain\");\n                    app.ClubManager().ShowClubFrom();\n                }\n            }\n            else if(sceneName == \"UICreatRoom\"){\n                app.NetManager().SendPack('family.CPlayerGameList', {}, this.InitGameBtnList.bind(this), this.InitGameBtnList.bind(this));\n            }else{\n                this.FormManager.ShowForm(sceneName);\n            }\n            this.CloseForm();\n        }else if(btnName.startsWith(\"btn_\")){\n            let index=btnName.replace('btn_','');\n            this.ShowTitleBtn(index);\n            this.infoCount = index;\n        }\n    }\n});\n"]}