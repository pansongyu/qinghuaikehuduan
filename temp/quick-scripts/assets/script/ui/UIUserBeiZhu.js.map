{"version":3,"sources":["UIUserBeiZhu.js"],"names":["app","require","cc","Class","extends","properties","sp_head","Sprite","label_name","Label","label_id","editBox","EditBox","OnCreateInit","ComTool","OnShow","clubID","playerInfo","string","GetPid","WeChatHeadImage","getComponent","ShowHeroHead","remarkID","BeiZhu","GetBeiZhu","beiZhuName","i","length","id","name","OnClick","btnName","btnNode","CloseForm","SysNotifyManager","ShowSysMsg","self","NetManager","SendPack","success","Client","OnEvent","UpdateBeiZhu","error"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,iBAAQJ,GAAGK,MADH;AAERC,oBAAWN,GAAGO,KAFN;AAGRC,kBAASR,GAAGO,KAHJ;AAIRE,iBAAQT,GAAGU;AAJH,KAHP;;AAULC,kBAAc,wBAAY;AACtB,aAAKC,OAAL,GAAad,IAAIc,OAAJ,EAAb;AACH,KAZI;;AAcLC,YAAQ,gBAAUC,MAAV,EAAiBC,UAAjB,EAA6B;AACjC,aAAKD,MAAL,GAAYA,MAAZ;AACA,aAAKR,UAAL,CAAgBU,MAAhB,GAAyBD,WAAW,MAAX,CAAzB;AACA,aAAKP,QAAL,CAAcQ,MAAd,GAAuB,QAAM,KAAKJ,OAAL,CAAaK,MAAb,CAAoBF,WAAW,KAAX,CAApB,CAA7B;AACA,YAAIG,kBAAkB,KAAKd,OAAL,CAAae,YAAb,CAA0B,iBAA1B,CAAtB;AACAD,wBAAgBE,YAAhB,CAA6BL,WAAW,KAAX,CAA7B;AACA,aAAKM,QAAL,GAAcN,WAAW,KAAX,CAAd;AACA;AACA,YAAIO,SAAO,KAAKV,OAAL,CAAaW,SAAb,EAAX;AACA,YAAIC,aAAW,EAAf;AACA,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEH,OAAOI,MAArB,EAA4BD,GAA5B,EAAgC;AAC5B,gBAAGH,OAAOG,CAAP,EAAUE,EAAV,IAAcZ,WAAW,KAAX,CAAjB,EAAmC;AAC/BS,6BAAWF,OAAOG,CAAP,EAAUG,IAArB;AACA;AACH;AACJ;;AAED,YAAGJ,UAAH,EAAc;AACV,iBAAKf,OAAL,CAAaO,MAAb,GAAoBQ,UAApB;AACH,SAFD,MAEK;AACD,iBAAKf,OAAL,CAAaO,MAAb,GAAoB,EAApB;AACH;AACJ,KApCI;;AAsCLa,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAG,eAAeD,OAAlB,EAA0B;AACtB,iBAAKE,SAAL;AACH,SAFD,MAEM,IAAG,UAAH,EAAc;AAChB,gBAAIR,aAAW,KAAKf,OAAL,CAAaO,MAA5B;AACA,gBAAGQ,cAAY,EAAf,EAAkB;AACd1B,oBAAImC,gBAAJ,GAAuBC,UAAvB,CAAkC,SAAlC;AACH;AACD,gBAAIC,OAAK,IAAT;AACArC,gBAAIsC,UAAJ,GAAiBC,QAAjB,CAA0B,kCAA1B,EAA6D,EAAC,UAAS,KAAKvB,MAAf,EAAsB,YAAW,KAAKO,QAAtC,EAA+C,cAAaG,UAA5D,EAA7D,EAAqI,UAASc,OAAT,EAAiB;AAClJxC,oBAAIyC,MAAJ,CAAWC,OAAX,CAAmB,cAAnB,EAAkC,EAAC,OAAML,KAAKd,QAAZ,EAAqB,QAAOG,UAA5B,EAAlC;AACAW,qBAAKvB,OAAL,CAAa6B,YAAb,CAA0BN,KAAKd,QAA/B,EAAwCG,UAAxC;AACH,aAHD,EAGE,UAASkB,KAAT,EAAe;AACb5C,oBAAImC,gBAAJ,GAAuBC,UAAvB,CAAkC,YAAlC;AACH,aALD;AAMA,iBAAKF,SAAL;AACH;AACJ;AAvDI,CAAT","file":"UIUserBeiZhu.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        sp_head:cc.Sprite,\n        label_name:cc.Label,\n        label_id:cc.Label,\n        editBox:cc.EditBox,\n    },\n\n    OnCreateInit: function () {\n        this.ComTool=app.ComTool();\n    },\n    \n    OnShow: function (clubID,playerInfo) {\n        this.clubID=clubID;\n        this.label_name.string = playerInfo[\"name\"];\n        this.label_id.string = \"ID:\"+this.ComTool.GetPid(playerInfo[\"pid\"]);\n        let WeChatHeadImage = this.sp_head.getComponent(\"WeChatHeadImage\");\n        WeChatHeadImage.ShowHeroHead(playerInfo[\"pid\"]);\n        this.remarkID=playerInfo[\"pid\"];\n        //获取备注名字\n        let BeiZhu=this.ComTool.GetBeiZhu();\n        let beiZhuName=\"\";\n        for(let i=0;i<BeiZhu.length;i++){\n            if(BeiZhu[i].id==playerInfo[\"pid\"]){\n                beiZhuName=BeiZhu[i].name;\n                break;\n            }\n        }\n\n        if(beiZhuName){\n            this.editBox.string=beiZhuName;\n        }else{\n            this.editBox.string=\"\";\n        }\n    },\n   \n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n            this.CloseForm();\n        }else if(\"btn_save\"){\n            let beiZhuName=this.editBox.string;\n            if(beiZhuName==\"\"){\n                app.SysNotifyManager().ShowSysMsg('备注名不能为空');\n            }\n            let self=this;\n            app.NetManager().SendPack(\"club.CClubChangePlayerRemarkName\",{'clubId':this.clubID,\"remarkID\":this.remarkID,\"remarkName\":beiZhuName},function(success){\n                app.Client.OnEvent('ChangeBeiZhu',{\"pid\":self.remarkID,\"name\":beiZhuName});\n                self.ComTool.UpdateBeiZhu(self.remarkID,beiZhuName);\n            },function(error){\n                app.SysNotifyManager().ShowSysMsg('备注失败，请稍后重试');\n            });\n            this.CloseForm();\n        }\n    },\n});\n"]}