{"version":3,"sources":["UIDaiLiCopy.js"],"names":["app","require","cc","Class","extends","properties","step1","Node","step2","step3","edit_name","EditBox","edit_phone","edit_yzm","edit_jieshao","toggle","Toggle","hint","lb_time","Label","step2WeiXin","step2WeiXinRich","RichText","step3WeiXinRich","weixin","OnCreateInit","httpPath","Client","GetClientConfigProperty","length","substring","POSTURL","GETURL","HeroManager","GetHeroProperty","RegEvent","OnEvt_CopyTextNtf","OnShow","active","string","toString","SendHttpRequest","updateTime","Date","getTime","event","code","ShowSysMsg","msg","serverUrl","argString","requestType","sendPack","NetRequest","OnReceiveHttpPack","bind","OnConnectHttpFail","httpResText","serverPack","JSON","parse","console","log","yanzhengUrl","btn_yanzhengma","node","getChildByName","lb_times","schedule","ShowYanZhengMaTime","scheduleOnce","mictime","timeString","ServerTimeManager","GetMictimeStringBySec","ShareDefine","ShowHourMinSec","error","readyState","status","OnUpdate","time","EnterAdmin","btnName","btnNode","sys","openURL","CopyNumber","str","currentTarget","name","isNative","argList","NativeManager","CallToNative","OnClick","CloseForm","FormManager","ShowForm","isChecked","phone","jieshao","unicode","zijie","i","charCodeAt","SendPack","signString","GetHeroID","ComTool","GetNowDateDayStr","sign","MD5","hex_md5","para","encodeURI","promisefunc","resolve","reject","bluebird","click_btn_yzm","checkPhone","test","getComponent","unschedule"],"mappings":"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","file":"UIDaiLiCopy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        step1:cc.Node,\n        step2:cc.Node,\n        step3:cc.Node,\n        edit_name:cc.EditBox,\n        edit_phone:cc.EditBox,\n        edit_yzm:cc.EditBox,\n        edit_jieshao:cc.EditBox,\n        toggle:cc.Toggle,\n        hint:cc.Node,\n        lb_time:cc.Label,\n        step2WeiXin:cc.Label,\n        step2WeiXinRich:cc.RichText,\n        step3WeiXinRich:cc.RichText,\n        weixin:cc.Label,\n    },\n    OnCreateInit: function () {\n        let httpPath = app.Client.GetClientConfigProperty(\"WebSiteUrl\");\n        if (httpPath[httpPath.length-1] == \"/\") {\n            httpPath = httpPath.substring(0, httpPath.length-1)\n        }\n        this.POSTURL=httpPath + \"/index.php?module=ApplicationAgent&action=setApply\";\n        this.GETURL=httpPath + \"/index.php?module=ApplicationAgent&action=getApply&playerID=\"+app.HeroManager().GetHeroProperty(\"pid\");\n        this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf,this);\n    },\n    OnShow: function () {\n        this.step1.active=false;\n        this.step2.active=false;\n        this.step3.active=false;\n        this.hint.active=false;\n        //刷新客服号码\n        if (!app['KeFuHao']) {\n            app['KeFuHao'] = \"请设置客服号\"\n        }\n        this.weixin.string=app['KeFuHao'].toString();\n        this.step2WeiXin.string=\"客服微信号:\"+app['KeFuHao'].toString();\n        this.step2WeiXinRich.string=\"<color=#512d0a>添加客服微信:</c><color=#da4130>\"+app['KeFuHao'].toString()+\"</color><color=#512d0a>加快审批</color>\";\n        this.step3WeiXinRich.string=\"<color=#512d0a>添加客服微信:</c><color=#da4130>\"+app['KeFuHao'].toString()+\"</color><color=#512d0a></color>\";\n        this.SendHttpRequest(this.GETURL, \"\", \"GET\",{});\n        this.updateTime = new Date().getTime();\n    },\n    \n    OnEvt_CopyTextNtf:function(event){\n        if(0 == event.code)\n            this.ShowSysMsg(\"已复制微信：\"+event.msg);\n        else\n            this.ShowSysMsg(\"复制失败\");\n    },\n\n    SendHttpRequest:function(serverUrl, argString, requestType, sendPack){\n        app.NetRequest().SendHttpRequest(serverUrl, argString, requestType, sendPack, 2000, \n            this.OnReceiveHttpPack.bind(this), \n            this.OnConnectHttpFail.bind(this),\n            null,\n            this.OnConnectHttpFail.bind(this),\n        );\n    },\n     /*\n    *AppID  AppName AppPrice    DiamondNum  ExtraReward ImageName   goodsType   channelType\n       12     金币     29          320000       3002    icon_card6       1           2\n    */\n    OnReceiveHttpPack:function(serverUrl, httpResText){\n        try{\n            let serverPack = JSON.parse(httpResText);\n            console.log(serverUrl, serverPack)\n            if(serverUrl==this.GETURL){\n                if(serverPack.code==301){\n                    //申请存在或者失败\n                    this.step1.active=false;\n                    this.step2.active=true;\n                    this.step3.active=false;\n                    this.hint.active=true;\n                }else if(serverPack.code==200){\n                    //申请不存在\n                    this.step1.active=true;\n                    this.step2.active=false;\n                    this.step3.active=false;\n                    this.hint.active=false;\n                }else if(serverPack.code==400){\n                    //申请存在或者失败\n                    this.step1.active=false;\n                    this.step2.active=false;\n                    this.step3.active=true;\n                    this.hint.active=true;\n                }\n                else{\n                    this.ShowSysMsg(serverPack.msg || \"系统错误\");\n                }\n            }else if(serverUrl==this.POSTURL){\n                if(serverPack.code==200){\n                    this.step1.active=false;\n                    this.step2.active=true;\n                    this.step3.active=false;\n                    this.hint.active=true;\n                    this.SendHttpRequest(this.GETURL, \"\", \"GET\",{});\n                }else if(serverPack.code==300){\n                    this.ShowSysMsg(\"手机格式错误\");\n                }else if(serverPack.code==301){\n                    this.ShowSysMsg(\"姓名不能为空\");\n                }else if(serverPack.code==302){\n                    this.ShowSysMsg(\"申请保存失败\");\n                }else if(serverPack.code==303){\n                    this.ShowSysMsg(\"玩家id不存在\");\n                }else if(serverPack.code==304){\n                    this.ShowSysMsg(\"未获取到数据\");\n                }\n                else{\n                    this.ShowSysMsg(serverPack.msg || \"系统错误\");\n                    this.SendHttpRequest(this.GETURL, \"\", \"GET\",{});\n                }\n            }else if(this.yanzhengUrl==serverUrl){\n                if(serverPack[\"code\"] == 0){\n                    let btn_yanzhengma=this.node.getChildByName('step1').getChildByName('content').getChildByName('code').getChildByName('btn_yzm');\n                    btn_yanzhengma.active=false;\n                    this.lb_times=60;\n                    this.schedule(this.ShowYanZhengMaTime,1);\n                    this.scheduleOnce(function(){\n                        btn_yanzhengma.active=true;\n                        this.lb_times=0;\n                    },60);\n                }else{\n                    this.ShowSysMsg(serverPack.msg);\n                }\n            }\n            this.mictime = serverPack.mictime;\n            let timeString = app.ServerTimeManager().GetMictimeStringBySec(this.mictime, this.ShareDefine.ShowHourMinSec);\n            this.lb_time.string = timeString;\n        }\n        catch (error){\n            \n        }\n    },\n    OnConnectHttpFail:function(serverUrl, readyState, status){\n        \n    },\n      //---------刷新函数--------------------\n    OnUpdate:function () {\n        if(this.mictime){\n            let time = new Date().getTime();\n            if( time < this.updateTime){\n                let timeString = app.ServerTimeManager().GetMictimeStringBySec(this.mictime, this.ShareDefine.ShowHourMinSec,1);\n                // let num = parseInt(timeString);\n                // if(!num){\n                //     this.CloseForm();\n                //     return;\n                // }\n                this.lb_time.string = timeString;\n            }\n            else{\n                this.updateTime += 500;\n            }\n        }\n    },\n    EnterAdmin:function(btnName, btnNode){\n        let httpPath = app.Client.GetClientConfigProperty(\"WebSiteUrl\");\n        if (httpPath[httpPath.length-1] == \"/\") {\n            httpPath = httpPath.substring(0, httpPath.length-1)\n        }\n        cc.sys.openURL(httpPath + \"/index.php?module=Publics&action=Login\");\n    },\n    CopyNumber:function(btnName, btnNode){\n        let str = \"\";\n        if(\"btn_fzwxh\" == btnName.currentTarget.name){\n            str = app[\"KeFuHao\"];\n        }else if(\"btn_fzgzh\" == btnName.currentTarget.name){\n            str = app[\"KeFuHao\"];\n        }\n        if(cc.sys.isNative){\n            let argList = [{\"Name\":\"msg\",\"Value\":str.toString()}];\n            app.NativeManager().CallToNative(\"copyText\", argList);\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n            this.CloseForm();\n        }\n        else if('btn_xieyi' == btnName){\n            app.FormManager().ShowForm('UIDaiLiXieYi');\n        }else if('btn_tijiao'==btnName){\n            /*\n            edit_name:cc.EditBox,\n            edit_phone:cc.EditBox,\n            edit_jieshao:cc.EditBox,\n             */\n            if(this.toggle.isChecked){\n                let name=this.edit_name.string;\n                if(name==\"\"){\n                    this.ShowSysMsg(\"请输入姓名\");\n                    return;\n                }\n                let phone=this.edit_phone.string;\n                if(phone==\"\"){\n                    this.ShowSysMsg(\"请输入手机号码\");\n                    return;\n                }\n                let jieshao=this.edit_jieshao.string;\n                let unicode = 0;\n                let zijie = 0;\n                for (let i = 0; i < jieshao.length; i++) {\n                    unicode = jieshao.charCodeAt(i);\n                    if (unicode < 127) { //判断是单字符还是双字符\n                        zijie += 1;\n                    } else { //chinese\n                        zijie += 2;\n                    }\n                }\n                if(zijie < 30){\n                    this.ShowSysMsg(\"最少为30个字符（15个汉字）\");\n                    return;\n                }\n                let SendPack = {\n                                        \"playerID\":app.HeroManager().GetHeroProperty(\"pid\"),\n                                        \"realName\":name,\n                                        \"phone\":phone,\n                                        \"beizhu\":jieshao,\n                                    };\n                //开始请求客户端配置\n                // key=md5('玩家id'.'wanzi'.date('Y-m-d'))\n                let signString=app.HeroManager().GetHeroID()+'wanzi'+app.ComTool().GetNowDateDayStr();\n                let sign = app.MD5.hex_md5(signString);\n                let para=\"&playerID=\"+app.HeroManager().GetHeroProperty(\"pid\")+\"&realName=\"+encodeURI(name)+\"&phone=\"+phone+\"&beizhu=\"+encodeURI(jieshao)+\"&key=\"+sign;\n                this.SendHttpRequest(this.POSTURL, para, \"GET\",{});\n            }else{\n                this.ShowSysMsg(\"合作协议未同意\");\n            }\n            \n        }else if('btn_copy'==btnName){\n            let str = this.weixin.string;\n            if(cc.sys.isNative){\n                let argList = [{\"Name\":\"msg\",\"Value\":str.toString()}];\n                let promisefunc = function(resolve, reject){\n                    app.NativeManager().CallToNative(\"copyText\", argList);\n                };\n                return new app.bluebird(promisefunc);\n            }\n        }else if(btnName==\"btn_yzm\"){\n            this.click_btn_yzm();\n        }\n    },\n    checkPhone:function(phone){ \n        if(!(/^1[3456789]\\d{9}$/.test(phone))){ \n            return false; \n        }\n        return true;\n    },\n   \n    click_btn_yzm:function(){\n        let node=this.node.getChildByName('step1').getChildByName('content').getChildByName('phone').getChildByName('editbox');\n        let phone=node.getComponent(cc.EditBox).string;\n        if(!phone){\n            this.ShowSysMsg('请填写手机号码');\n            return;\n        }\n        if(this.checkPhone(phone)==false){\n            this.ShowSysMsg('电话号码有误');\n            return;\n        }\n        this.yanzhengUrl= app.Client.GetClientConfigProperty(\"WebSiteUrl\") + \"/SendCode\";\n        let SendPack = {\n\n                                    \"mobile\":phone,\n                                    \"sms_temple\":\"SMS_154085055\",\n                                };\n\n        this.SendHttpRequest(this.yanzhengUrl,\"?mobile=\"+phone+\"&sms_temple=SMS_154085055\",\"GET\",{});\n\n    },\n    ShowYanZhengMaTime:function(){\n        let lb_time=this.node.getChildByName('step1').getChildByName('content').getChildByName('code').getChildByName('tip_yzm').getComponent(cc.Label);\n        this.lb_times=this.lb_times-1;\n        if(this.lb_times<=0){\n            this.unschedule(this.ShowYanZhengMaTime);\n            lb_time.string=\"\";\n            return;\n        }\n        lb_time.string=this.lb_times+\"秒后可再发送\";\n    },\n    // Click_Toggle:function(){\n    //     this.bent_tijiao.interactable = this.toggle.isChecked;\n    // },\n});\n"]}