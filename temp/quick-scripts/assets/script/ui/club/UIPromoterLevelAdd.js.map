{"version":3,"sources":["UIPromoterLevelAdd.js"],"names":["app","require","cc","Class","extends","properties","editbox","EditBox","OnCreateInit","WeChatManager","NetManager","OnShow","clubId","node","getChildByName","active","string","ShowUser","data","usernode","heroID","player","headImageUrl","getComponent","Label","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","InitHeroHeadImage","OnLoad","ShowHeroHead","sign","click_btn_search","shuru","GetBeiZhuID","isNaN","parseInt","StrIsNumInt","SysNotifyManager","ShowSysMsg","self","SendPack","serverPack","error","click_btn_add","sendPack","that","success","newPath","ClubManager","GetUnionTypeByLastClubData","FormManager","GetFormComponentByFormName","GetPromoterList","OnClick","btnName","btnNode","CloseForm","OnClose"],"mappings":"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","file":"UIPromoterLevelAdd.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n       editbox:cc.EditBox,\n    },\n\n    OnCreateInit: function () {\n        this.WeChatManager=app.WeChatManager();\n        this.NetManager=app.NetManager();\n    },\n    //--------------显示函数-----------------\n    OnShow: function (clubId) {\n        this.clubId=clubId;\n        this.node.getChildByName('user').active=false;\n        this.node.getChildByName('btn_hehuo_add').active=false;\n        this.node.getChildByName('btn_hehuo_yaoqing').active=false;\n        this.editbox.string = \"\";\n    },\n    ShowUser:function(data){\n        let usernode=this.node.getChildByName('user');\n        usernode.active=true;\n        let heroID = data.player[\"pid\"];\n        usernode.heroID=heroID;\n        let headImageUrl = data.player[\"iconUrl\"];\n        usernode.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(heroID,data.player.name);\n        usernode.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        let WeChatHeadImage = usernode.getChildByName('head').getComponent(\"WeChatHeadImage\");\n         //用户头像创建\n        if(heroID && headImageUrl){\n            this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n        }\n        WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n\n        if(data.sign==true){\n            this.node.getChildByName('btn_hehuo_add').active=true;\n            this.node.getChildByName('btn_hehuo_yaoqing').active=false;\n        }else{\n            this.node.getChildByName('btn_hehuo_add').active=false;\n            this.node.getChildByName('btn_hehuo_yaoqing').active=true;\n        }\n    },\n    click_btn_search:function(){\n        let shuru=this.ComTool.GetBeiZhuID(this.editbox.string);\n        if(isNaN(parseInt(shuru)) || !app.ComTool().StrIsNumInt(shuru)){\n            app.SysNotifyManager().ShowSysMsg(\"请输入纯数字的玩家id\", [], 3);\n            return;\n        }\n        let self=this;\n        app.NetManager().SendPack('club.CClubPromotionLevelPidInfo',{'clubId':this.clubId,\"pid\":shuru},function(serverPack){\n            self.ShowUser(serverPack);\n        },function(error){\n            \n        });\n    },\n    click_btn_add:function(){\n        let sendPack={\n            \"clubId\":this.clubId,\n            \"pid\":this.node.getChildByName('user').heroID,\n        };\n        let that=this;\n        this.NetManager.SendPack(\"club.CClubPromotionLevelPidAdd\", sendPack,function(success){\n            let newPath = 'ui/club/UIPromoterAllManager';\n            if (app.ClubManager().GetUnionTypeByLastClubData()==1) {\n                newPath = 'ui/club_2/UIPromoterAllManager_2';\n            }\n            that.FormManager.GetFormComponentByFormName(newPath).GetPromoterList(true);\n            that.ShowSysMsg(\"操作成功\");\n        },function(error){\n            that.ShowSysMsg(\"已邀请或未找到该玩家或同赛事不同亲友圈不能重复拉人或距离退出该亲友圈不到10分钟\");\n        });\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n           this.CloseForm();\n        }else if('btn_search'==btnName){\n            this.click_btn_search();\n        }else if('btn_hehuo_yaoqing'==btnName){\n            this.click_btn_add();\n            //this.click_btn_yaoqing();\n        }else if('btn_hehuo_add'==btnName){\n            this.click_btn_add();\n        }\n    },\n    \n    OnClose:function(){\n        \n    },\n});"]}