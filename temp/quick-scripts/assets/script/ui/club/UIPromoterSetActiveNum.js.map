{"version":3,"sources":["UIPromoterSetActiveNum.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","OnShow","data","clubId","lb_TargetActive","node","getChildByName","getComponent","RichText","string","name","substr","pid","lb_curActiveNum","Label","curActiveValue","EditBox","OnClick","btnName","btnNode","percentStr","percentFloat","parseFloat","sendPack","type","value","SendPointPack","SysNotifyManager","ShowSysMsg","CloseForm","ErrLog","self","NetManager","SendPack","serverPack","FormManager","GetFormComponentByFormName","ClickLeftBtn"],"mappings":"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","file":"UIPromoterSetActiveNum.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    OnCreateInit: function () {\n\n    },\n    OnShow: function (data, clubId) {\n        this.data = data;\n        this.clubId = clubId;\n        let lb_TargetActive = this.node.getChildByName(\"lb_TargetActive\").getComponent(cc.RichText);\n        lb_TargetActive.string = \"<color=#705d52>因系统异常修改</c><color=#f8772c>\" + data.name.substr(0,8) + \"（ID:\" + data.pid + \"）\" + \"</color><color=#705d52>的活跃度</c>\";\n        let lb_curActiveNum = this.node.getChildByName(\"lb_curActiveNum\").getComponent(cc.Label);\n        lb_curActiveNum.string = \"该玩家当前拥有活跃度：\" + data.curActiveValue;\n        //初始化比赛分输入框\n        this.node.getChildByName(\"ActiveEditBox\").getComponent(cc.EditBox).string = \"\";\n    },\n    OnClick:function(btnName, btnNode){\n        let percentStr = this.node.getChildByName(\"ActiveEditBox\").getComponent(cc.EditBox).string;\n        let percentFloat = parseFloat(percentStr);\n        if(btnName == \"btn_Add\"){\n            if (percentFloat > 0) {\n                let sendPack = {};\n                sendPack.pid = this.data.pid;\n                sendPack.clubId = this.clubId;\n                sendPack.type = 0;\n                sendPack.value = parseFloat(percentStr);\n                this.SendPointPack(sendPack);\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入大于0的纯数字\",[],3);\n            }\n        }else if(btnName == \"btn_Del\"){\n            if (percentFloat > 0 && percentFloat <= this.data.curActiveValue) {\n                let sendPack = {};\n                sendPack.pid = this.data.pid;\n                sendPack.clubId = this.clubId;\n                sendPack.type = 1;\n                sendPack.value = parseFloat(percentStr);\n                this.SendPointPack(sendPack);\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入小于该玩家所拥有活跃度的纯数字\",[],3);\n            }\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n    SendPointPack:function(sendPack){\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubPromotionActive\",sendPack, function(serverPack){\n            app.FormManager().GetFormComponentByFormName(\"ui/club/UIPromoterManager\").ClickLeftBtn(\"btn_PromoterList\");\n            app.SysNotifyManager().ShowSysMsg(\"成功设置活跃度\",[],3);\n            self.CloseForm();\n        }, function(){\n            // app.SysNotifyManager().ShowSysMsg(\"设置比赛分失败\",[],3);\n        });\n    },\n});\n"]}