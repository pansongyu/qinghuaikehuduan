{"version":3,"sources":["UIJoinClub.js"],"names":["app","require","cc","Class","extends","properties","numLabels","Label","OnCreateInit","InitCommon","InitEvent","labelString","RegEvent","Event_ReqJoinNtf","event","state","joinStatus","notFind","ClubManager","Enum_JoinClub_NotFind","clubFull","Enum_JoinClub_ClubFull","numMax","Enum_JoinClub_NumMax","inList","Enum_JoinClub_InList","joinIng","Enum_JoinClub_JoinIng","existClub","Enum_JoinClub_ExistClub","ShowSysMsg","Click_btn_reset","OnShow","OnEventShow","argDict","detail","bReConnect","OnEventHide","SetWaitForConfirm","msgID","type","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList","OnClick","btnName","btnNode","Click_btn_Join","Click_btn_return","Click_btn_clear","startsWith","str","substring","length","Click_btn_Num","SysNotifyManager","join","clubId","parseInt","SendReqJoinClub","CloseForm","i","string","pop","push","OnClose"],"mappings":"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","file":"UIJoinClub.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        numLabels:[cc.Label],\n    },\n\n    OnCreateInit: function () {\n        this.InitCommon();\n        this.InitEvent();\n    },\n    InitCommon:function(){\n        this.labelString = [];\n    },\n    InitEvent:function(){\n        //基础网络包\n        this.RegEvent(\"OnReqJoinNtf\", this.Event_ReqJoinNtf);\n    },\n    \n    Event_ReqJoinNtf:function(event){\n        let state = event.joinStatus;\n        let notFind = app.ClubManager().Enum_JoinClub_NotFind;\n        let clubFull = app.ClubManager().Enum_JoinClub_ClubFull;\n        let numMax = app.ClubManager().Enum_JoinClub_NumMax;\n        let inList = app.ClubManager().Enum_JoinClub_InList;\n        let joinIng = app.ClubManager().Enum_JoinClub_JoinIng;\n        let existClub = app.ClubManager().Enum_JoinClub_ExistClub;\n        if(state == notFind){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_NotFind\");\n        }\n        else if(state == clubFull){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_ClubFull\");\n        }\n        else if(state == numMax){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_NumMax\");\n        }\n        else if(state == inList){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_InList\");\n        }\n        else if(state == joinIng){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_JoinIng\");\n            this.Click_btn_reset();\n        }\n        else if(state == existClub){\n            this.ShowSysMsg(\"MSG_CLUB_JOIN_ExistClub\");\n            this.Click_btn_reset();\n        }\n    },\n    //--------------显示函数-----------------\n    OnShow: function () {\n        this.Click_btn_reset();\n    },\n    \n    \n    OnEventShow:function(event){\n        let argDict = event.detail;\n        let bReConnect = argDict[\"bReConnect\"];\n\n    },\n    OnEventHide:function(event){\n\n    },\n    //---------点击函数---------------------\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, []);\n        ConfirmManager.ShowConfirm(type, msgID, []);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n       \n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_Join' == btnName){\n           this.Click_btn_Join();\n        }\n        else if('btn_return' == btnName){\n           this.Click_btn_return();\n        }\n        else if('btn_reset' == btnName){\n            this.Click_btn_reset();\n        }\n        else if('btn_clear' == btnName){\n            this.Click_btn_clear();\n        }\n        else if(btnName.startsWith('btn_num')){\n            let str = btnName.substring(btnName.length - 1);\n            this.Click_btn_Num(str);\n        }\n    },\n    Click_btn_Join:function(){\n        if(6 != this.labelString.length){\n            app.SysNotifyManager().ShowSysMsg('MSG_CLUB_JOIN_NotFind');\n            return;\n        }\n        let str = this.labelString.join('');\n        let clubId = parseInt(str);\n        app.ClubManager().SendReqJoinClub(clubId);\n        this.CloseForm();\n    },\n    Click_btn_return:function(){\n        this.CloseForm();\n    },\n    Click_btn_reset:function(){\n        for(let i=0;i<this.numLabels.length;i++)\n            this.numLabels[i].string = '';\n        \n        this.labelString = [];\n    },\n    Click_btn_clear:function(){\n        if(0 == this.labelString.length){\n            return\n        }\n        this.numLabels[this.labelString.length-1].string = '';\n        this.labelString.pop();\n    },\n    Click_btn_Num:function(str){\n        if(6 <= this.labelString.length)\n            return;\n\n        this.labelString.push(str);\n        this.numLabels[this.labelString.length-1].string = str;\n    },\n    \n    OnClose:function(){\n        \n    },\n});"]}