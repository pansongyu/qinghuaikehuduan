{"version":3,"sources":["UIClubRoomPassword.js"],"names":["app","require","cc","Class","extends","properties","sp_shurukuang","Node","OnCreateInit","labelString","GameManager","OnShow","btnNode","CLubID","ResetNumber","children","idx","length","sp_bg","getChildByName","getComponent","Label","string","OnClick","btnName","ErrLog","Click_Btn_Clear","Click_btn_close","Click_BtnNumber","OnClick_Close","node","GetWndNode","pop","num","Math","floor","substring","push","roomKey","join","lb_num","data","toString","localStorage","setItem","tagId","Client","OnEvent","CloseForm"],"mappings":"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","file":"UIClubRoomPassword.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n UIJoin 登陆界面\n*/\nvar app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        sp_shurukuang: cc.Node,\n    },\n    OnCreateInit: function () {\n        this.labelString = [];\n        this.GameManager = app.GameManager();\n    },\n    OnShow: function (btnNode,CLubID) {\n        this.btnNode=btnNode;\n        this.CLubID=CLubID;\n        this.ResetNumber();\n    },\n\n    ResetNumber: function () {\n        let children = this.sp_shurukuang.children;\n        for (let idx = 0; idx < children.length; idx++) {\n            let sp_bg = children[idx];\n            sp_bg.getChildByName(\"lb_num\").getComponent(cc.Label).string = \"\";\n        }\n        this.labelString = [];\n    },\n\n    //---------点击函数---------------------\n    OnClick: function (btnName, btnNode) {\n        if (!btnName) {\n            this.ErrLog(\"UIJoin Buttn OnClick(%s) not find btnName\", btnName);\n        }\n        if (btnName === \"btn_clear\") {\n            this.Click_Btn_Clear();\n        } else if (btnName === \"btn_close\") {\n            this.Click_btn_close();\n        } else if (btnName === \"btn_reset\") {\n            this.ResetNumber();\n        } else {\n            this.Click_BtnNumber(btnName);\n        }\n    },\n\n    Click_btn_close: function () {\n        this.labelString = [];\n        this.OnClick_Close();\n    },\n\n    Click_Btn_Clear: function () {\n        if (this.labelString.length == 0) {\n            return\n        }\n        let node = this.GetWndNode(\"sp_shuru/shurukuang/sp_bg\" + this.labelString.length + \"/lb_num\");\n        node.getComponent(cc.Label).string = \"\";\n        this.labelString.pop();\n    },\n\n    Click_BtnNumber: function (btnName) {\n        if (this.labelString.length >= 6)\n            return;\n        let num = Math.floor(btnName.substring(btnName.length - 1));\n        this.labelString.push(num);\n        let roomKey = this.labelString.join(\"\");\n\n        let children = this.sp_shurukuang.children;\n        for (let idx = 0; idx < children.length; idx++) {\n            let sp_bg = children[idx];\n            let lb_num = sp_bg.getChildByName(\"lb_num\").getComponent(cc.Label);\n            if (lb_num.string == \"\") {\n                let data = this.labelString[this.labelString.length - 1];\n                lb_num.string = data.toString();\n                break;\n            }\n        }\n        if (this.labelString.length == 6) {\n            //存储密码\n            localStorage.setItem(\"password_\"+this.CLubID+\"_\"+this.btnNode.tagId,roomKey);\n            //触发重新加入事件\n            app.Client.OnEvent(\"ReJoin\",this.btnNode);\n            this.CloseForm();\n        }\n    },\n});\n"]}