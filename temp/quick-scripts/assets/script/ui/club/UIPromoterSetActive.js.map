{"version":3,"sources":["UIPromoterSetActive.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","OnShow","data","clubId","lb_TargetActive","node","getChildByName","getComponent","RichText","string","name","substr","pid","lb_curActive","Label","calcActiveValue","EditBox","OnClick","btnName","btnNode","percentStr","isNaN","parseFloat","ComTool","StrIsNum","sendPack","value","self","NetManager","SendPack","serverPack","FormManager","GetFormComponentByFormName","ClickLeftBtn","SysNotifyManager","ShowSysMsg","CloseForm","ShowForm","ErrLog"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY,EAHP;;AAOLC,kBAAc,wBAAY,CAEzB,CATI;AAULC,YAAQ,gBAAUC,IAAV,EAAgBC,MAAhB,EAAwB;AAC5B,aAAKD,IAAL,GAAYA,IAAZ;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,YAAIC,kBAAkB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,iBAAzB,EAA4CC,YAA5C,CAAyDX,GAAGY,QAA5D,CAAtB;AACAJ,wBAAgBK,MAAhB,GAAyB,yCAAyCP,KAAKQ,IAAL,CAAUC,MAAV,CAAiB,CAAjB,EAAmB,CAAnB,CAAzC,GAAiE,MAAjE,GAA0ET,KAAKU,GAA/E,GAAqF,GAArF,GAA2F,iCAApH;AACA,YAAIC,eAAe,KAAKR,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCC,YAAzC,CAAsDX,GAAGkB,KAAzD,CAAnB;AACAD,qBAAaJ,MAAb,GAAsB,eAAeP,KAAKa,eAA1C;AACA;AACA,aAAKV,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CC,YAA1C,CAAuDX,GAAGoB,OAA1D,EAAmEP,MAAnE,GAA4E,EAA5E;AACH,KAnBI;AAoBLQ,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAGD,WAAW,UAAd,EAAyB;AACrB,gBAAIE,aAAa,KAAKf,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CC,YAA1C,CAAuDX,GAAGoB,OAA1D,EAAmEP,MAApF;AACA,gBAAI,CAACY,MAAMC,WAAWF,UAAX,CAAN,CAAD,IAAkC1B,IAAI6B,OAAJ,GAAcC,QAAd,CAAuBJ,UAAvB,CAAlC,IAAwEE,WAAWF,UAAX,KAA0B,CAAtG,EAAyG;AACrG,oBAAIK,WAAW,EAAf;AACAA,yBAAStB,MAAT,GAAkB,KAAKA,MAAvB;AACAsB,yBAASb,GAAT,GAAe,KAAKV,IAAL,CAAUU,GAAzB;AACAa,yBAASC,KAAT,GAAiBJ,WAAWF,UAAX,CAAjB;AACA,oBAAIO,OAAO,IAAX;AACAjC,oBAAIkC,UAAJ,GAAiBC,QAAjB,CAA0B,+BAA1B,EAA0DJ,QAA1D,EAAoE,UAASK,UAAT,EAAoB;AACpFpC,wBAAIqC,WAAJ,GAAkBC,0BAAlB,CAA6C,2BAA7C,EAA0EC,YAA1E,CAAuF,kBAAvF;AACAvC,wBAAIwC,gBAAJ,GAAuBC,UAAvB,CAAkC,aAAlC,EAAgD,EAAhD,EAAmD,CAAnD;AACAR,yBAAKS,SAAL;AACH,iBAJD,EAIG,YAAU,CAEZ,CAND;AAOH,aAbD,MAaK;AACD1C,oBAAIwC,gBAAJ,GAAuBC,UAAvB,CAAkC,YAAlC,EAAgD,EAAhD,EAAoD,CAApD;AACH;AACJ,SAlBD,MAkBM,IAAGjB,WAAW,WAAd,EAA0B;AAC5B,iBAAKkB,SAAL;AACH,SAFK,MAEA,IAAGlB,WAAW,YAAd,EAA2B;AAC7BxB,gBAAIqC,WAAJ,GAAkBM,QAAlB,CAA2B,mCAA3B,EAA+D,KAAKnC,IAApE,EAA0E,KAAKC,MAA/E;AACA,iBAAKiC,SAAL;AACH,SAHK,MAGD;AACD,iBAAKE,MAAL,CAAY,sBAAZ,EAAoCpB,OAApC;AACH;AACJ;AA/CI,CAAT","file":"UIPromoterSetActive.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    OnCreateInit: function () {\n\n    },\n    OnShow: function (data, clubId) {\n        this.data = data;\n        this.clubId = clubId;\n        let lb_TargetActive = this.node.getChildByName(\"lb_TargetActive\").getComponent(cc.RichText);\n        lb_TargetActive.string = \"<color=#705d52>授权</c><color=#f8772c>\" + data.name.substr(0,9) + \"（ID:\" + data.pid + \"）\" + \"</color><color=#705d52>活跃计算</c>\";\n        let lb_curActive = this.node.getChildByName(\"lb_curActive\").getComponent(cc.Label);\n        lb_curActive.string = \"该玩家当前活跃计算：\" + data.calcActiveValue;\n        //初始化比赛分输入框\n        this.node.getChildByName(\"ActiveEditBox\").getComponent(cc.EditBox).string = \"\";\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_sure\"){\n            let percentStr = this.node.getChildByName(\"ActiveEditBox\").getComponent(cc.EditBox).string;\n            if (!isNaN(parseFloat(percentStr)) && app.ComTool().StrIsNum(percentStr) && parseFloat(percentStr) >= 0) {\n                let sendPack = {};\n                sendPack.clubId = this.clubId;\n                sendPack.pid = this.data.pid;\n                sendPack.value = parseFloat(percentStr);\n                let self = this;\n                app.NetManager().SendPack(\"club.CClubPromotionCalcActive\",sendPack, function(serverPack){\n                    app.FormManager().GetFormComponentByFormName(\"ui/club/UIPromoterManager\").ClickLeftBtn(\"btn_PromoterList\");\n                    app.SysNotifyManager().ShowSysMsg(\"成功设置改玩家活跃计算\",[],3);\n                    self.CloseForm();\n                }, function(){\n\n                });\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入大于0的纯数字\", [], 3);\n            }\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else if(btnName == \"btn_detail\"){\n            app.FormManager().ShowForm('ui/club/UIPromoterSetActiveDetail',this.data, this.clubId);\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n});\n"]}