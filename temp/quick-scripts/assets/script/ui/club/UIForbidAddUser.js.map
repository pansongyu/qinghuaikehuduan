{"version":3,"sources":["UIForbidAddUser.js"],"names":["app","require","cc","Class","extends","properties","EditBoxID","EditBox","btn_add","Node","OnCreateInit","WeChatManager","NetManager","OnShow","unionId","clubId","groupingId","string","active","node","getChildByName","ShowUser","player","usernode","heroID","headImageUrl","getComponent","Label","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","InitHeroHeadImage","OnLoad","ShowHeroHead","click_btn_search","shuru","GetBeiZhuID","isNaN","parseInt","StrIsNum","SysNotifyManager","ShowSysMsg","self","SendPack","serverPack","error","Click_btn_add","that","sendPack","success","Client","OnEvent","FormManager","IsFormShow","GetFormComponentByFormName","GetMemberList","ShowForbid","OnClick","btnName","btnNode","CloseForm","ErrLog"],"mappings":"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","file":"UIForbidAddUser.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n    \tEditBoxID:cc.EditBox,\n        btn_add:cc.Node,\n    },\n\n    OnCreateInit: function () {\n        this.WeChatManager=app.WeChatManager();\n        this.NetManager = app.NetManager();\n    },\n\n    OnShow: function (unionId, clubId, groupingId) {\n        this.unionId = unionId;\n    \tthis.clubId=clubId;\n        this.groupingId = groupingId;\n    \tthis.EditBoxID.string='';\n        this.btn_add.active = false;\n        this.node.getChildByName('user').active=false;\n    },\n    ShowUser:function(player){\n        let usernode=this.node.getChildByName('user');\n        usernode.active=true;\n        let heroID = player[\"pid\"];\n        usernode.heroID=heroID;\n        let headImageUrl = player[\"iconUrl\"];\n        usernode.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(heroID,player.name);\n        usernode.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        let WeChatHeadImage = usernode.getChildByName('head').getComponent(\"WeChatHeadImage\");\n         //用户头像创建\n        if(heroID && headImageUrl){\n            this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n        }\n        WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n        this.btn_add.active = true;\n    },\n    click_btn_search:function(){\n        let shuru =this.ComTool.GetBeiZhuID(this.EditBoxID.string);\n        if(isNaN(parseInt(shuru)) || !app.ComTool().StrIsNum(shuru)){\n            app.SysNotifyManager().ShowSysMsg(\"请输入纯数字的玩家id\", [], 3);\n            return;\n        }\n        let self=this;\n        if (this.unionId > 0) {\n            app.NetManager().SendPack('union.CUnionGroupingPidFind',{'unionId':this.unionId,'clubId':this.clubId,\"pid\":shuru},function(serverPack){\n                self.ShowUser(serverPack);\n            },function(error){\n                \n            });\n        }else{\n            app.NetManager().SendPack('club.CClubGroupingPidFind',{'clubId':this.clubId,\"pid\":shuru},function(serverPack){\n                self.ShowUser(serverPack);\n            },function(error){\n                \n            });\n        }\n    },\n    Click_btn_add:function(){\n    \tif(this.EditBoxID.string==''){\n    \t\treturn;\n    \t}\n        let that=this;\n        let sendPack={\n            \"clubId\":this.clubId,\n            \"groupingId\":this.groupingId,\n            \"pid\":this.EditBoxID.string,\n        };\n        if (this.unionId > 0) {\n            sendPack.unionId = this.unionId;\n            this.NetManager.SendPack(\"union.CUnionGroupingPidAdd\", sendPack,function(success){\n                that.btn_add.active = false;\n                that.ShowSysMsg(\"添加成功\");\n                app.Client.OnEvent('OnUnionForbidReShow', null);\n                if(app.FormManager().IsFormShow(\"ui/club/UIForbidUserList\")){\n                    app.FormManager().GetFormComponentByFormName(\"ui/club/UIForbidUserList\").GetMemberList();\n                }\n            },function(error){\n                \n            });\n        }else{\n            this.NetManager.SendPack(\"club.CClubGroupingPidAdd\", sendPack,function(success){\n                that.btn_add.active = false;\n                that.ShowSysMsg(\"添加成功\");\n                if(app.FormManager().IsFormShow(\"ui/club/UIForbidUserList\")){\n                    app.FormManager().GetFormComponentByFormName(\"ui/club/UIForbidUserList\").GetMemberList();\n                }\n                if(app.FormManager().IsFormShow(\"ui/club/UIClubForbid\")){\n                    app.FormManager().GetFormComponentByFormName(\"ui/club/UIClubForbid\").ShowForbid();\n                }\n            },function(error){\n                \n            });\n        }\n        \n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_add\"){\n            this.Click_btn_add();\n        }else if(btnName == \"btn_search\"){\n            this.click_btn_search();\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}