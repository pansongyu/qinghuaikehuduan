{"version":3,"sources":["UIUnionCreate.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","unionNameEditBox","node","getChildByName","getComponent","EditBox","sportsPointEditBox","outSportsEditBox","prizeRankEditBox","prizeValueEditBox","joinToggleContainer","quitToggleContainer","matchRateToggleContainer","prizeToggleContainer","OnShow","clubId","string","Toggle","isChecked","OnClick","btnName","btnNode","CloseForm","SysNotifyManager","ShowSysMsg","length","UtilsWord","CheckContentDirtyEx","ComTool","StrIsNum","isNaN","parseFloat","parseInt","sendPack","unionName","join","quit","initSports","matchRate","outSports","prizeType","ranking","value","self","NetManager","SendPack","serverPack","FormManager","ClubManager","CloseClubFrom"],"mappings":"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","file":"UIUnionCreate.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.unionNameEditBox = this.node.getChildByName(\"unionNameEditBox\").getComponent(cc.EditBox);\n        this.sportsPointEditBox = this.node.getChildByName(\"sportsPointEditBox\").getComponent(cc.EditBox);\n        this.outSportsEditBox = this.node.getChildByName(\"outSportsEditBox\").getComponent(cc.EditBox);\n        this.prizeRankEditBox = this.node.getChildByName(\"prizeRankEditBox\").getComponent(cc.EditBox);\n        this.prizeValueEditBox = this.node.getChildByName(\"prizeValueEditBox\").getComponent(cc.EditBox);\n\n        this.joinToggleContainer = this.node.getChildByName(\"joinToggleContainer\");\n        this.quitToggleContainer = this.node.getChildByName(\"quitToggleContainer\");\n        this.matchRateToggleContainer = this.node.getChildByName(\"matchRateToggleContainer\");\n        this.prizeToggleContainer = this.node.getChildByName(\"prizeToggleContainer\");\n    },\n    //---------显示函数--------------------\n\n    OnShow:function(clubId){\n        this.clubId = clubId;\n        this.sportsPointEditBox.string = \"2000\";\n        this.outSportsEditBox.string = \"0\";\n        this.prizeRankEditBox.string = \"0\";\n        this.prizeValueEditBox.string = \"0\";\n\n        this.joinToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked = true;\n        this.quitToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked = true;\n        this.matchRateToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked = true;\n        this.prizeToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked = true;\n    },\n    //---------点击函数---------------------\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n            this.CloseForm();\n        }else if('btn_create'==btnName){\n            if (this.unionNameEditBox.string == \"\") {\n                app.SysNotifyManager().ShowSysMsg(\"赛事名称不能为空\", [], 3);\n                return;\n            }\n            if (this.unionNameEditBox.string.length > 16) {\n                app.SysNotifyManager().ShowSysMsg(\"赛事名称不能超过16个字符\", [], 3);\n                return;\n            }\n            if (app.UtilsWord().CheckContentDirtyEx(this.unionNameEditBox.string)) {\n                app.SysNotifyManager().ShowSysMsg(\"赛事名称包含敏感词汇\", [], 3);\n                return;\n            }\n            if (!app.ComTool().StrIsNum(this.sportsPointEditBox.string) || isNaN(parseFloat(this.sportsPointEditBox.string)) || parseFloat(this.sportsPointEditBox.string) < 0) {\n                app.SysNotifyManager().ShowSysMsg(\"裁判力度必须是大于0的纯数字\", [], 3);\n                return;\n            }\n            if (!app.ComTool().StrIsNum(this.outSportsEditBox.string) || isNaN(parseFloat(this.outSportsEditBox.string))) {\n                app.SysNotifyManager().ShowSysMsg(\"赛事淘汰必须是纯数字\", [], 3);\n                return;\n            }\n            if (parseFloat(this.outSportsEditBox.string) > parseFloat(this.sportsPointEditBox.string)) {\n                app.SysNotifyManager().ShowSysMsg(\"赛事淘汰不能大于裁判力度\", [], 3);\n                return;\n            }\n            if (isNaN(parseInt(this.prizeRankEditBox.string)) || parseInt(this.prizeRankEditBox.string) < 0 || parseInt(this.prizeRankEditBox.string) > 50) {\n                app.SysNotifyManager().ShowSysMsg(\"奖励排名必须是大于0小于50的纯数字\", [], 3);\n                return;\n            }\n            if (isNaN(parseInt(this.prizeValueEditBox.string)) || parseInt(this.prizeValueEditBox.string) < 0) {\n                app.SysNotifyManager().ShowSysMsg(\"奖励数量必须是大于0的纯数字\", [], 3);\n                return;\n            }\n            let sendPack = {};\n            sendPack.clubId = this.clubId;\n            sendPack.unionName = this.unionNameEditBox.string;\n            if (this.joinToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked) {\n                sendPack.join = 0;\n            }else{\n                sendPack.join = 1;\n            }\n            if (this.quitToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked) {\n                sendPack.quit = 0;\n            }else{\n                sendPack.quit = 1;\n            }\n            sendPack.initSports = parseFloat(this.sportsPointEditBox.string);\n            if (this.matchRateToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked) {\n                sendPack.matchRate = 0;\n            }else if (this.matchRateToggleContainer.getChildByName(\"toggle2\").getComponent(cc.Toggle).isChecked) {\n                sendPack.matchRate = 1;\n            }else{\n                sendPack.matchRate = 2;\n            }\n            sendPack.outSports = parseFloat(this.outSportsEditBox.string);\n            if (this.prizeToggleContainer.getChildByName(\"toggle1\").getComponent(cc.Toggle).isChecked) {\n                sendPack.prizeType = 2;\n            }else{\n                sendPack.prizeType = 1;\n            }\n            sendPack.ranking = parseInt(this.prizeRankEditBox.string);\n            sendPack.value = parseInt(this.prizeValueEditBox.string);\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionCreate\",sendPack, function(serverPack){\n                self.CloseForm();\n                app.FormManager().CloseForm(\"ui/club/UIUnionNone\");\n                // app.FormManager().CloseForm(\"ui/club/UIClubMain\");\n                app.ClubManager().CloseClubFrom();\n            }, function(){\n\n            });\n        }\n\t},\n});\n"]}