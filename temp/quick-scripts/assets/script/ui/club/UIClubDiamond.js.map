{"version":3,"sources":["UIClubDiamond.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","OnShow","clubId","unionId","self","NetManager","SendPack","serverPack","node","getChildByName","getComponent","EditBox","string","unionDiamondsAttentionMinister","unionDiamondsAttentionAll","clubData","ClubManager","GetClubDataByClubID","diamondsAttentionMinister","diamondsAttentionAll","OnClick","btnName","btnNode","CloseForm","value1","value2","SysNotifyManager","ShowSysMsg","ErrLog"],"mappings":"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","file":"UIClubDiamond.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        \n    },\n\n    //初始化\n    OnCreateInit:function(){\n\n    },\n\n    //---------显示函数--------------------\n    OnShow:function(clubId,unionId){\n        this.clubId = clubId;\n        this.unionId=unionId;\n        if(this.unionId>0){\n            //赛事\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionGetConfig\",{\"unionId\":this.unionId, \"clubId\":this.clubId}, function(serverPack){\n                self.node.getChildByName(\"EditBox1\").getComponent(cc.EditBox).string =  serverPack.unionDiamondsAttentionMinister;\n                self.node.getChildByName(\"EditBox2\").getComponent(cc.EditBox).string =  serverPack.unionDiamondsAttentionAll;\n            }, function(){\n                //app.SysNotifyManager().ShowSysMsg(\"获取赛事设置失败，请关闭界面重试\");\n            });\n        }else{\n            let clubData = app.ClubManager().GetClubDataByClubID(clubId);\n            this.node.getChildByName(\"EditBox1\").getComponent(cc.EditBox).string =  clubData.diamondsAttentionMinister;\n            this.node.getChildByName(\"EditBox2\").getComponent(cc.EditBox).string =  clubData.diamondsAttentionAll;\n        }\n        \n    },\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n        \tthis.CloseForm();\n        }else if('btn_sure'==btnName){\n            let value1=this.node.getChildByName(\"EditBox1\").getComponent(cc.EditBox).string;\n            let value2=this.node.getChildByName(\"EditBox2\").getComponent(cc.EditBox).string;\n            /*if(value1==0 || value1==\"\" || value1==1 || value2==\"\"){\n                app.SysNotifyManager().ShowSysMsg(\"请输入提示数量\");\n                return;\n            }*/\n            let self = this;\n            if(this.unionId>0){\n                //赛事\n                app.NetManager().SendPack(\"union.CUnionChangeDimondsAttention\",{\"clubId\":this.clubId,\"unionId\":this.unionId,\"unionDiamondsAttentionMinister\":value1, \"unionDiamondsAttentionAll\":value2}, function(serverPack){\n                    self.CloseForm();\n                }, function(){\n                    app.SysNotifyManager().ShowSysMsg(\"赛事钻石提醒设置失败\");\n                });\n            }else{\n                //亲友圈\n                app.NetManager().SendPack(\"club.CClubChangeDimondsAttention\",{\"clubId\":this.clubId,\"diamondsAttentionMinister\":value1, \"diamondsAttentionAll\":value2}, function(serverPack){\n                    //更新会亲友圈clubdata\n                    let clubData = app.ClubManager().GetClubDataByClubID(self.clubId);\n                    clubData.diamondsAttentionMinister=value1;\n                    clubData.diamondsAttentionAll=value2;\n                    self.CloseForm();\n                }, function(){\n                    app.SysNotifyManager().ShowSysMsg(\"亲友圈钻石提醒设置失败\");\n                });\n            }\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}