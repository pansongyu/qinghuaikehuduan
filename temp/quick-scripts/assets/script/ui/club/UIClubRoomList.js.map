{"version":3,"sources":["UIClubRoomList.js"],"names":["app","require","cc","Class","extends","properties","roomlist_scrollView","ScrollView","roomlist_layout","Node","roomlist_demo","roomlist_bottom","OnCreateInit","RegEvent","Event_RoomCfgs","Event_RoomCfgChange","discountType","OnShow","clubId","active","scrollToTop","DestroyAllChildren","ClubManager","SendGetRoomCfg","that","GetDiscountTypeData","serverPack","console","log","event","isCreate","nomarlState","Enum_RoomCfg_Nomarl","disableState","Enum_RoomCfg_Disable","delState","Enum_RoomCfg_Delete","reviseState","Enum_RoomCfg_Revise","roomData","clubCreateGameSet","waitRoomCount","playingRoomCount","getChildByName","getComponent","Label","string","roomCfgs","push","i","length","bRoomConfigure","gameIndex","status","splice","cfg","ShowRoomList","clubCreateGameSets","SetWaitForConfirm","msgID","type","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList","jesanState","SendSetRoomCfg","SendCloseClub","FormManager","CloseFormReal","SendPlayerStateChange","HeroManager","GetHeroProperty","Enum_Leave","data","pid","kickState","roomCfg","nodePrefab","instantiate","name","toString","gameType","nameData","RoomCfgManager","GetRoomData","smallName1","bigName1","GetGameName","playerNum","payType","paymentRoomCardType","clubWinnerPayConsume","WanFa","roomCount","addChild","childs","children","idxStr","gameName","nameLabel","renLabel","wanfaLabel","zhuoLabel","OnClick","btnName","btnNode","CloseForm","parent","ShareDefine","Confirm","manage","Sprite","enabled","qiyongState","jinyongState","changeRoomData","changeClubData","GetClubDataByClubID","curCityId","cityId","changeData","selectGameList","GametTypeNameDict","toUpperCase","gameList","ErrLog","selectType","enableGameType","ShowForm","nowClubData","Client","GetAllGameId","clubData","roomKey"],"mappings":"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","file":"UIClubRoomList.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n    \troomlist_scrollView:cc.ScrollView,\n        roomlist_layout:cc.Node,\n        roomlist_demo:cc.Node,\n        roomlist_bottom:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.RegEvent(\"OnClubRoomCfgs\", this.Event_RoomCfgs);\n        this.RegEvent(\"OnClubRoomCfgChange\", this.Event_RoomCfgChange);\n        this.discountType = [];\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(clubId){\n        this.clubId=clubId;\n    \tthis.roomlist_demo.active=false;\n        this.roomlist_scrollView.scrollToTop();\n        //this.roomlist_layout.removeAllChildren();\n        this.DestroyAllChildren(this.roomlist_layout);\n        app.ClubManager().SendGetRoomCfg(this.clubId);\n        //this.ShowRoomList();\n        let that = this;\n        // app.NetManager().SendPack('discount.CDiscountList',{clubId:clubId},function(serverPack){\n        //     that.GetDiscountTypeData(serverPack);\n        // },function(error){\n        //     console.error(error);\n        // });\n        // app.NetManager().SendPack('game.CPlayerAllGameList',{},function(serverPack){\n        //     that.gameList = serverPack.gameList;\n        // },function(error){\n        //     console.error(error);\n        // });\n    },\n    GetDiscountTypeData: function (serverPack) {\n        console.log(\"GetDiscountTypeData\", serverPack);\n        this.discountType = serverPack;\n    },\n    Event_RoomCfgChange:function(event){\n        let clubId = event.clubId;\n        if(this.clubId != clubId)\n            return;\n        let isCreate = event.isCreate;\n        let nomarlState = app.ClubManager().Enum_RoomCfg_Nomarl;\n        let disableState = app.ClubManager().Enum_RoomCfg_Disable;\n        let delState = app.ClubManager().Enum_RoomCfg_Delete;\n        let reviseState = app.ClubManager().Enum_RoomCfg_Revise;\n        let roomData = event.clubCreateGameSet;\n\n        let waitRoomCount=event.waitRoomCount;\n        let playingRoomCount=event.playingRoomCount;\n        this.roomlist_bottom.getChildByName('wait').getChildByName('num').getComponent(cc.Label).string=waitRoomCount;\n        this.roomlist_bottom.getChildByName('game').getChildByName('num').getComponent(cc.Label).string=playingRoomCount;\n\n\n        if(isCreate)\n            this.roomCfgs.push(roomData);\n        else{\n            for(let i=0;i<this.roomCfgs.length;i++){\n                if(roomData.bRoomConfigure.gameIndex == this.roomCfgs[i].bRoomConfigure.gameIndex){\n                    if(delState == roomData.status)\n                        this.roomCfgs.splice(i,1);\n                    else\n                        this.roomCfgs[i] = roomData;\n                    break;\n                }\n            }\n        }\n        let cfg = null;\n        if(!isCreate && delState != roomData.status)\n            cfg = roomData;\n        //还没修改this.roomCfgs\n        this.ShowRoomList(cfg);\n    },\n    Event_RoomCfgs:function(event){\n        let clubId = event.clubId;\n        if(this.clubId != clubId)\n            return;\n        this.roomCfgs = event.clubCreateGameSets;\n        this.ShowRoomList();\n        let waitRoomCount=event.waitRoomCount;\n        let playingRoomCount=event.playingRoomCount;\n        this.roomlist_bottom.getChildByName('wait').getChildByName('num').getComponent(cc.Label).string=waitRoomCount;\n        this.roomlist_bottom.getChildByName('game').getChildByName('num').getComponent(cc.Label).string=playingRoomCount;\n    },\n    //---------点击函数---------------------\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[]){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n        if('MSG_CLUB_DissolveRoomCfg' == msgID){\n            let roomData = backArgList[0];\n            let jesanState = app.ClubManager().Enum_RoomCfg_Delete;\n            app.ClubManager().SendSetRoomCfg(this.clubId,roomData.gameIndex,jesanState);\n        }else if('MSG_CLUB_DissolveRoom' == msgID){\n            app.ClubManager().SendCloseClub(this.clubId);\n            //this.FormManager.ShowForm('bottom');\n            this.FormManager.CloseFormReal('ui/club/UIClubManager');\n        }else if('MSG_CLUB_EXIT' == msgID){\n            app.ClubManager().SendPlayerStateChange(this.clubId,app.HeroManager().GetHeroProperty(\"pid\"),app.ClubManager().Enum_Leave);\n            //this.FormManager.ShowForm('bottom');\n        this.FormManager.CloseFormReal('ui/club/UIClubManager');\n        }\n        else if('MSG_CLUB_KICKPlayer' == msgID){\n            let data = backArgList[0];\n            app.ClubManager().SendPlayerStateChange(data.clubId,data.pid,data.kickState);\n        }\n    },\n    ShowRoomList:function(roomCfg=null){\n        if(!roomCfg){\n            this.roomlist_scrollView.scrollToTop();\n            //this.roomlist_layout.removeAllChildren();\n            this.DestroyAllChildren(this.roomlist_layout);\n            for(let i=0;i<this.roomCfgs.length;i++){\n                let nodePrefab = cc.instantiate(this.roomlist_demo);\n                nodePrefab.name = this.roomCfgs[i].bRoomConfigure.gameIndex.toString();\n                nodePrefab.roomData = this.roomCfgs[i];\n                let gameType = this.roomCfgs[i].gameType;\n                let cfg = this.roomCfgs[i].bRoomConfigure;\n                let nameData = app.RoomCfgManager().GetRoomData(gameType,cfg);\n                gameType = '' != nameData.smallName1 ? nameData.smallName1 : nameData.bigName1;\n\n                nodePrefab.getChildByName('name').getComponent(cc.Label).string=app.RoomCfgManager().GetGameName(gameType,true);\n                nodePrefab.getChildByName('renshu').getComponent(cc.Label).string=this.roomCfgs[i].bRoomConfigure.playerNum.toString();\n                let payType='';\n                if(this.roomCfgs[i].bRoomConfigure.paymentRoomCardType==2){\n                    payType=',大赢家付'+this.roomCfgs[i].bRoomConfigure.clubWinnerPayConsume+'圈卡';\n                }else if(this.roomCfgs[i].bRoomConfigure.paymentRoomCardType==1){\n                    payType=',AA付'+this.roomCfgs[i].bRoomConfigure.clubWinnerPayConsume+'圈卡';\n                }else if(this.roomCfgs[i].bRoomConfigure.paymentRoomCardType==0){\n                    payType=',管理付';\n                }\n                nodePrefab.getChildByName('wanfa').getComponent(cc.Label).string=app.RoomCfgManager().WanFa(this.roomCfgs[i].gameType,cfg)+payType;\n                nodePrefab.getChildByName('zhuoshu').getComponent(cc.Label).string=this.roomCfgs[i].roomCount;\n                nodePrefab.active=true;\n                this.roomlist_layout.addChild(nodePrefab);\n            }\n        }else{\n            let childs = this.roomlist_layout.children;\n            let idxStr = roomCfg.bRoomConfigure.gameIndex.toString();\n            for(let i=0;i<childs.length;i++){\n                if(idxStr == childs[i].name){\n                    childs[i].roomData = roomCfg;\n                    let gameType = roomCfg.gameType;\n                    let cfg = roomCfg.bRoomConfigure;\n                    let nameData = app.RoomCfgManager().GetRoomData(gameType,cfg);\n                    gameType = '' != nameData.smallName1 ? nameData.smallName1 : nameData.bigName1;\n                    let gameName = app.RoomCfgManager().GetGameName(gameType,true);\n                    let nameLabel = childs[i].getChildByName('name').getComponent(cc.Label);\n                    nameLabel.string = gameName;\n                    let renLabel = childs[i].getChildByName('renshu').getComponent(cc.Label);\n                    renLabel.string = roomCfg.bRoomConfigure.playerNum.toString();\n                    let wanfaLabel = childs[i].getChildByName('wanfa').getComponent(cc.Label);\n                    gameType = roomCfg.gameType;\n                    let payType='';\n                    if(cfg.paymentRoomCardType==2){\n                        payType=',胜家付'+this.roomCfgs[i].bRoomConfigure.clubWinnerPayConsume+'圈卡';\n                    }else if(cfg.paymentRoomCardType==1){\n                        payType=',AA付'+this.roomCfgs[i].bRoomConfigure.clubWinnerPayConsume+'圈卡';\n                    }else if(cfg.paymentRoomCardType==0){\n                        payType=',管理付';\n                    }\n                    wanfaLabel.string = app.RoomCfgManager().WanFa(gameType,cfg) + payType;\n                    let zhuoLabel = childs[i].getChildByName('zhuoshu').getComponent(cc.Label);\n                    zhuoLabel.string = roomCfg.roomCount;\n                    break;\n                }\n            }\n        }\n\n    },\n\n    //---------点击函数---------------------\n\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n        \tthis.CloseForm();\n        }else if('btn_jiesan' == btnName){\n            let roomData = btnNode.parent.parent.roomData.bRoomConfigure;\n            this.SetWaitForConfirm('MSG_CLUB_DissolveRoomCfg',this.ShareDefine.Confirm,[],[roomData]);\n        }else if('btn_qiyong' == btnName){\n            let manage=btnNode.parent;\n            manage.getComponent(cc.Sprite).enabled = false;\n            manage.getChildByName('btn_jiesan').active=false;\n            manage.getChildByName('btn_jinyong').active=false;\n            manage.getChildByName('btn_qiyong').active=false;\n            manage.getChildByName('btn_xiugai').active=false;\n\n            let roomData = btnNode.parent.parent.roomData.bRoomConfigure;\n            let qiyongState = app.ClubManager().Enum_RoomCfg_Nomarl;\n            app.ClubManager().SendSetRoomCfg(this.clubId,roomData.gameIndex,qiyongState);\n        }\n        else if('btn_jinyong' == btnName){\n            let manage=btnNode.parent;\n\n            manage.getComponent(cc.Sprite).enabled = false;\n            manage.getChildByName('btn_jiesan').active=false;\n            manage.getChildByName('btn_jinyong').active=false;\n            manage.getChildByName('btn_qiyong').active=false;\n            manage.getChildByName('btn_xiugai').active=false;\n\n            let roomData = btnNode.parent.parent.roomData.bRoomConfigure;\n            let jinyongState = app.ClubManager().Enum_RoomCfg_Disable;\n            app.ClubManager().SendSetRoomCfg(this.clubId,roomData.gameIndex,jinyongState);\n        }\n        else if('btn_manage'==btnName){\n            let manage=btnNode.parent;\n            let status = manage.parent.roomData.status;\n\n            manage.getChildByName('btn_jiesan').active=!manage.getChildByName('btn_jiesan').active;\n            manage.getComponent(cc.Sprite).enabled = manage.getChildByName('btn_jiesan').active;\n            if(status==0){\n                manage.getChildByName('btn_qiyong').active=false;\n                manage.getChildByName('btn_jinyong').active=!manage.getChildByName('btn_jinyong').active;\n            }else{\n                manage.getChildByName('btn_qiyong').active=!manage.getChildByName('btn_qiyong').active;\n                manage.getChildByName('btn_jinyong').active=false;\n            }\n            \n            manage.getChildByName('btn_xiugai').active=!manage.getChildByName('btn_xiugai').active;\n        }\n        else if('btn_xiugai' == btnName){\n            let changeRoomData = btnNode.parent.parent.roomData;\n            let changeClubData = app.ClubManager().GetClubDataByClubID(this.clubId);\n            let curCityId = changeClubData.cityId;\n            let changeData = {};\n            let selectGameList = [];\n            selectGameList.push(app.ShareDefine().GametTypeNameDict[changeRoomData.gameType.toUpperCase()]);\n            changeData.gameList = selectGameList;\n            if(0 == changeData.gameList.length){\n                this.ErrLog('btn_createRoom Error Club Not Set GameList');\n                return\n            }\n            let nameData = app.RoomCfgManager().GetRoomData(changeRoomData.gameType,changeRoomData.bRoomConfigure);\n            changeClubData = {};\n            changeClubData.clubId = this.clubId;\n            changeClubData.cityId = curCityId;\n            // changeClubData.roomKey = changeRoomData.roomKey;\n            changeClubData.gameIndex = changeRoomData.bRoomConfigure.gameIndex;//用来判断保存还是创建\n            let selectType = ''!=nameData.smallName1?nameData.smallName1:nameData.bigName1;\n            changeClubData.enableGameType = selectType;//不禁用的按钮\n            changeData.discountType = this.discountType;\n            app.FormManager().ShowForm('UICreatRoom',changeData,'',changeClubData);\n        }else if('btn_createRoom' == btnName){\n            let nowClubData = app.ClubManager().GetClubDataByClubID(this.clubId);\n            let data = {};\n            data.gameList = app.Client.GetAllGameId();\n            if(0 == data.gameList.length){\n                console.log('btn_createRoom Error Club Not Set GameList');\n                return\n            }\n            //let gameType = this.ShareDefine.GametTypeID2PinYin[data.gameList[0]];\n            let clubData = {};\n            clubData.clubId = this.clubId;\n            clubData.cityId = nowClubData.cityId;\n            clubData.roomKey = '0';\n            clubData.gameIndex = 0;//用来判断保存还是创建\n            clubData.enableGameType = '';//不禁用的按钮\n            data.discountType = this.discountType;\n            app.FormManager().ShowForm('UICreatRoom',data,'',clubData);\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}