{"version":3,"sources":["UIUserSetSection.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","minAllowShareToValue","OnShow","data","isShowSelf","curPage","node","getChildByName","active","GetSectionList","GetNextPage","isRefresh","sendPack","ClubManager","GetUnionSendPackHead","opClubId","opPid","pageNum","unionFlag","unionId","self","NetManager","SendPack","serverPack","UpdateScrollView","sectionScrollView","content","getComponent","ScrollView","scrollToTop","DestroyAllChildren","demo","i","length","isExist","j","children","id","child","instantiate","unionSectionId","sectionInfo","Label","string","sectionStr","beginValue","endValue","endFlag","allowShareToValue","shareToSelfValue","renJunStr","twoValue","threeValue","fourValue","tenValue","addChild","UpdateShareToSelfValue","toFixed","GetAllRoomListCfg","list","temp","isNaN","parseFloat","ComTool","StrIsNum","push","SysNotifyManager","ShowSysMsg","OnClick","btnName","btnNode","CloseForm","promotionSectionCalcActiveItems","FormManager","ShowForm","parent","ErrLog"],"mappings":"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","file":"UIUserSetSection.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    OnCreateInit: function () {\n        this.minAllowShareToValue = 0;\n        // let sectionScrollView = this.node.getChildByName(\"mark\").getComponent(cc.ScrollView);\n        // sectionScrollView.node.on('scroll-to-bottom',this.GetNextPage,this);\n    },\n    OnShow: function (data, isShowSelf = false) {\n        this.data = data;\n        this.curPage = 1;\n        this.isShowSelf = isShowSelf;\n        if (isShowSelf) {\n            this.node.getChildByName(\"top\").getChildByName(\"btn_oneKey\").active = false;\n        }else{\n            this.node.getChildByName(\"top\").getChildByName(\"btn_oneKey\").active = true;\n        }\n        this.GetSectionList(true);\n    },\n    GetNextPage:function(){\n        this.curPage++;\n        this.GetSectionList(false);\n    },\n    GetSectionList:function(isRefresh){\n        let sendPack = app.ClubManager().GetUnionSendPackHead();\n        sendPack.opClubId = this.data.opClubId;\n        sendPack.opPid = this.data.opPid;\n        sendPack.pageNum = this.curPage;\n        sendPack.isShowSelf = this.isShowSelf;\n        sendPack.unionFlag = this.data.unionFlag;\n        if (this.data.unionFlag == 0) {\n            sendPack.unionId = 0;//推广员的不用传联盟 id\n        }\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubPromotionSectionChangeList\",sendPack, function(serverPack){\n            self.UpdateScrollView(serverPack[\"promotionShareSectionItems\"], isRefresh);\n            self.minAllowShareToValue = serverPack[\"minAllowShareToValue\"];\n        }, function(){\n\n        });\n    },\n    UpdateScrollView:function(serverPack, isRefresh){\n        let sectionScrollView = this.node.getChildByName(\"mark\");\n        let content = sectionScrollView.getChildByName(\"layout\");\n        if (isRefresh) {\n            sectionScrollView.getComponent(cc.ScrollView).scrollToTop();\n            this.DestroyAllChildren(content);\n        }\n        let demo = this.node.getChildByName(\"demo\");\n        demo.active = false;\n        for (let i = 0; i < serverPack.length; i++) {\n            //先判断下是否已经存在\n            let isExist = false;\n            for (let j = 0; j < content.children.length; j++) {\n                if (content.children[j].id == serverPack[i].id) {\n                    isExist = true;\n                    break;\n                }\n            }\n            if (isExist) continue;\n            let child = cc.instantiate(demo);\n            child.unionSectionId = serverPack[i].unionSectionId;\n            child.sectionInfo = serverPack[i];\n            //UI\n            if (this.isShowSelf) {\n                child.getChildByName(\"btn_change\").active = false;\n            }else{\n                child.getChildByName(\"btn_change\").active = true;\n            }\n            child.getChildByName(\"lb_index\").getComponent(cc.Label).string = \"\"+(i+1);\n            let sectionStr = \"(\"+serverPack[i].beginValue+\",\"+serverPack[i].endValue+\"]\";\n            if (serverPack[i].endFlag == 1) {\n                sectionStr = \"(\"+serverPack[i].beginValue+\",∞]\";\n            }\n            child.getChildByName(\"lb_section\").getComponent(cc.Label).string = sectionStr;\n            child.getChildByName(\"lb_allowShareToValue\").getComponent(cc.Label).string = \"\"+serverPack[i].allowShareToValue;\n            child.getChildByName(\"lb_shareToSelfValue\").getComponent(cc.Label).string = \"\"+serverPack[i].shareToSelfValue;\n            let renJunStr = \"人均:(\"+serverPack[i].twoValue+\",\"+serverPack[i].threeValue+\",\"+serverPack[i].fourValue+\",\"+serverPack[i].tenValue+\")\";\n            child.getChildByName(\"lb_renJunValue\").getComponent(cc.Label).string = renJunStr;\n            child.active = true;\n            content.addChild(child);\n        }\n    },\n    UpdateShareToSelfValue:function(data){\n        let sectionScrollView = this.node.getChildByName(\"mark\");\n        let content = sectionScrollView.getChildByName(\"layout\");\n        let unionSectionId = data[\"unionSectionId\"];\n        let shareToSelfValue = data[\"shareToSelfValue\"];\n        let twoValue = (shareToSelfValue/2).toFixed(2);\n        let threeValue = (shareToSelfValue/3).toFixed(2);\n        let fourValue = (shareToSelfValue/4).toFixed(2);\n        let tenValue = (shareToSelfValue/10).toFixed(2);\n        for (let i = 0; i < content.children.length; i++) {\n            if (unionSectionId == -1) {\n                content.children[i].getChildByName(\"lb_shareToSelfValue\").getComponent(cc.Label).string = shareToSelfValue;\n                let renJunStr = \"人均:(\"+twoValue+\",\"+threeValue+\",\"+fourValue+\",\"+tenValue+\")\";\n                content.children[i].getChildByName(\"lb_renJunValue\").getComponent(cc.Label).string = renJunStr;\n            }else if (content.children[i].unionSectionId == unionSectionId) {\n                content.children[i].getChildByName(\"lb_shareToSelfValue\").getComponent(cc.Label).string = shareToSelfValue;\n                let renJunStr = \"人均:(\"+twoValue+\",\"+threeValue+\",\"+fourValue+\",\"+tenValue+\")\";\n                content.children[i].getChildByName(\"lb_renJunValue\").getComponent(cc.Label).string = renJunStr;\n                break;\n            }\n        }\n    },\n    GetAllRoomListCfg:function(){\n        let sectionScrollView = this.node.getChildByName(\"mark\");\n        let content = sectionScrollView.getChildByName(\"layout\");\n        let list = [];\n        for (let i = 0; i < content.children.length; i++) {\n            let temp = {};\n            temp.unionSectionId = content.children[i].unionSectionId;\n            let shareToSelfValue = content.children[i].getChildByName(\"lb_shareToSelfValue\").getComponent(cc.Label).string;\n            // if (content.children[i].sectionInfo.shareToSelfValue == parseFloat(shareToSelfValue)) {\n            //     //没有修改不用上传\n            //     continue;\n            // }\n            if (!isNaN(parseFloat(shareToSelfValue)) && app.ComTool().StrIsNum(shareToSelfValue) && parseFloat(shareToSelfValue) >= 0) {\n                temp.shareToSelfValue = parseFloat(shareToSelfValue);\n                temp.beginValue = content.children[i].sectionInfo.beginValue;\n                temp.endValue = content.children[i].sectionInfo.endValue;\n                list.push(temp);\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"可分配值请输入大于等于0的数字\",[],3);\n                return [];\n            }\n        }\n        return list;\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_save\"){\n            if (this.isShowSelf) {\n                this.CloseForm();\n                return;\n            }\n            let sendPack = {};\n            sendPack.opClubId = this.data.opClubId;\n            sendPack.opPid = this.data.opPid;\n            sendPack.promotionSectionCalcActiveItems = this.GetAllRoomListCfg();\n            if (sendPack.promotionSectionCalcActiveItems.length == 0) {\n                return;\n            }\n            let self = this;\n            app.NetManager().SendPack(\"club.CClubPromotionShareSectionChangeBatch\",sendPack, function(serverPack){\n                app.SysNotifyManager().ShowSysMsg(\"保存成功\",[],3);\n                self.CloseForm();\n            }, function(){\n                // app.SysNotifyManager().ShowSysMsg(\"保存失败\",[],3);\n            });\n        }else if(btnName == \"btn_cancel\"){\n            this.CloseForm();\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else if(btnName == \"btn_oneKey\"){\n            let data = {};\n            data.unionSectionId = -1;\n            data.minAllowShareToValue = this.minAllowShareToValue;\n            data.shareToSelfValue = this.minAllowShareToValue;\n            app.FormManager().ShowForm(\"ui/club/UIUserChangeSection\",data);\n        }else if(btnName == \"btn_change\"){\n            let data = {};\n            data.unionSectionId = btnNode.parent.sectionInfo.unionSectionId;\n            data.minAllowShareToValue = btnNode.parent.sectionInfo.allowShareToValue;\n            data.shareToSelfValue = btnNode.parent.sectionInfo.shareToSelfValue;\n            app.FormManager().ShowForm(\"ui/club/UIUserChangeSection\",data);\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}