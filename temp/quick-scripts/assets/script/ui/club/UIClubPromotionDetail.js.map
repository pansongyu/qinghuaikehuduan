{"version":3,"sources":["UIClubPromotionDetail.js"],"names":["app","require","cc","Class","extends","properties","tuiguang_scrollView","ScrollView","tuiguang_layout","Node","tuiguang_demo","OnCreateInit","OnShow","tuiguanglist","myisminister","levelPromotion","active","ShowTuiGuanList","self","selfHeroID","HeroManager","GetHeroProperty","DestroyAllChildren","i","length","data","heroID","pid","headImageUrl","icon","node","instantiate","addChild","getChildByName","getComponent","Label","string","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","WeChatManager","InitHeroHeadImage","OnLoad","ShowHeroHead","OnClick","btnName","btnNode","CloseForm","ErrLog"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,6BAAoBJ,GAAGK,UADf;AAERC,yBAAgBN,GAAGO,IAFX;AAGRC,uBAAcR,GAAGO;AAHT,KAHP;;AASL;AACAE,kBAAa,wBAAU,CAEtB,CAZI;;AAcL;;AAEAC,YAAO,gBAASC,YAAT,EAAsBC,YAAtB,EAAmCC,cAAnC,EAAkD;AACrD,aAAKD,YAAL,GAAoBA,YAApB;AACA,aAAKC,cAAL,GAAsBA,cAAtB;AACA,aAAKL,aAAL,CAAmBM,MAAnB,GAA4B,KAA5B;AACA,aAAKC,eAAL,CAAqBJ,YAArB;AACH,KArBI;AAsBLI,qBAAgB,yBAASJ,YAAT,EAAsB;AAClC,YAAIK,OAAK,IAAT;AACA,YAAIC,aAAanB,IAAIoB,WAAJ,GAAkBC,eAAlB,CAAkC,KAAlC,CAAjB;AACA,aAAKC,kBAAL,CAAwB,KAAKd,eAA7B;AACA,aAAI,IAAIe,IAAE,CAAV,EAAYA,IAAEV,aAAaW,MAA3B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIE,OAAKZ,aAAaU,CAAb,CAAT;AACA,gBAAIG,SAASD,KAAKE,GAAlB;AACA,gBAAIC,eAAeH,KAAKI,IAAxB;AACA,gBAAIC,OAAK5B,GAAG6B,WAAH,CAAeb,KAAKR,aAApB,CAAT;AACAoB,iBAAKd,MAAL,GAAY,IAAZ;AACA,iBAAKR,eAAL,CAAqBwB,QAArB,CAA8BF,IAA9B;AACA,gBAAGA,QAAM,CAAT,EAAW;AACPA,qBAAKG,cAAL,CAAoB,aAApB,EAAmCjB,MAAnC,GAA0C,KAA1C;AACH,aAFD,MAEK;AACDc,qBAAKG,cAAL,CAAoB,aAApB,EAAmCjB,MAAnC,GAA0C,IAA1C;AACH;AACDc,iBAAKG,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyChC,GAAGiC,KAA5C,EAAmDC,MAAnD,GAA0D,KAAKC,OAAL,CAAaC,aAAb,CAA2BZ,MAA3B,EAAkCD,KAAKc,IAAvC,CAA1D;AACAT,iBAAKG,cAAL,CAAoB,IAApB,EAA0BC,YAA1B,CAAuChC,GAAGiC,KAA1C,EAAiDC,MAAjD,GAAwDpC,IAAIwC,IAAJ,CAASC,CAAT,CAAW,gBAAX,EAA4B,EAAC,OAAMvB,KAAKmB,OAAL,CAAaK,MAAb,CAAoBhB,MAApB,CAAP,EAA5B,CAAxD;AACAI,iBAAKJ,MAAL,GAAYA,MAAZ;AACA,gBAAIiB,kBAAkBb,KAAKG,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC,iBAAzC,CAAtB;AACC;AACD,gBAAGR,UAAUE,YAAb,EAA0B;AACtB5B,oBAAI4C,aAAJ,GAAoBC,iBAApB,CAAsCnB,MAAtC,EAA8CE,YAA9C;AACH;AACDe,4BAAgBG,MAAhB;AACYH,4BAAgBI,YAAhB,CAA6BrB,MAA7B,EAAoCE,YAApC;AACZ,gBAAG,KAAKb,cAAL,GAAoB,CAApB,IAAyB,KAAKD,YAAL,IAAmB,CAA/C,EAAiD;AAC7C;AACA,oBAAGY,UAAQP,UAAX,EAAsB;AAClB;AACH;AACJ;AAEJ;AACJ,KAxDI;;AA2DR6B,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AACjC,YAAG,eAAaD,OAAhB,EAAwB;AACjB,iBAAKE,SAAL;AACA,SAFP,MAEW;AACV,iBAAKC,MAAL,CAAY,qBAAZ,EAAmCH,OAAnC;AACA;AACD;AAjEO,CAAT","file":"UIClubPromotionDetail.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        tuiguang_scrollView:cc.ScrollView,\n        tuiguang_layout:cc.Node,\n        tuiguang_demo:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(tuiguanglist,myisminister,levelPromotion){\n        this.myisminister = myisminister;\n        this.levelPromotion = levelPromotion;\n        this.tuiguang_demo.active = false;\n        this.ShowTuiGuanList(tuiguanglist);\n    },\n    ShowTuiGuanList:function(tuiguanglist){\n        let self=this;\n        let selfHeroID = app.HeroManager().GetHeroProperty(\"pid\");\n        this.DestroyAllChildren(this.tuiguang_layout);\n        for(let i=0;i<tuiguanglist.length;i++){\n            let data=tuiguanglist[i];\n            let heroID = data.pid;\n            let headImageUrl = data.icon;\n            let node=cc.instantiate(self.tuiguang_demo);\n            node.active=true;\n            this.tuiguang_layout.addChild(node);\n            if(node==0){\n                node.getChildByName(\"tip_jiantou\").active=false;\n            }else{\n                node.getChildByName(\"tip_jiantou\").active=true;\n            }\n            node.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(heroID,data.name);\n            node.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":self.ComTool.GetPid(heroID)});\n            node.heroID=heroID;\n            let WeChatHeadImage = node.getChildByName('head').getComponent(\"WeChatHeadImage\");\n             //用户头像创建\n            if(heroID && headImageUrl){\n                app.WeChatManager().InitHeroHeadImage(heroID, headImageUrl);\n            }\n            WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n            if(this.levelPromotion>0 && this.myisminister==0){\n                //不是管理员，是推广员，渲染到自己就退出\n                if(heroID==selfHeroID){\n                    break;\n                }\n            }\n               \n        }\n    },\n    \n\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n        \tthis.CloseForm();\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}