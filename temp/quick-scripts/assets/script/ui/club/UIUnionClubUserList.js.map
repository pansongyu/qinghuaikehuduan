{"version":3,"sources":["UIUnionClubUserList.js"],"names":["app","require","cc","Class","extends","properties","memberlist_scrollView","ScrollView","memberlist_layout","Node","memberlist_demo","memberlist_editbox","EditBox","OnCreateInit","RegEvent","Event_PlayerNtf","Event_UnionMemberInfoChange","WeChatManager","OnShow","owerClubId","opClubId","unionId","unionName","unionSign","node","getChildByName","getComponent","Toggle","isChecked","memberPage","lastMemberPage","lb_page","Label","string","clubId","active","isSearching","queryStr","GetPalyerList","toBttom","sendOnlinePack","self","NetManager","SendPack","serverPack","SysNotifyManager","ShowSysMsg","isRefresh","sendPack","ClubManager","GetUnionSendPackHead","pageNum","query","ComTool","GetBeiZhuID","isShowOnline","type","isFu","losePoint","length","ShowMemberList","error","event","allUserNode","children","i","pid","playerData","shortPlayer","sportsPoint","GetNextPage","playerlist","DestroyAllChildren","scrollToTop","heroID","shortHeroID","GetPid","nodePrefab","instantiate","name","toString","minister","headImageUrl","iconUrl","GetBeiZhuName","upShortPlayer","isUnionBanGame","addChild","InitHeroHeadImage","WeChatHeadImage","OnLoad","ShowHeroHead","OnClick","btnName","btnNode","CloseForm","BanGameClubMember","clubData","GetClubDataByClubID","parent","opPid","exeClubId","data","allowSportsPoint","GetUnionTypeByLastClubData","FormManager","ShowForm","eliminatePoint","ErrLog","OnClickOnLineToggle","OnClickFuToggle","value"],"mappings":"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","file":"UIUnionClubUserList.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n    \tmemberlist_scrollView:cc.ScrollView,\n    \tmemberlist_layout:cc.Node,\n    \tmemberlist_demo:cc.Node,\n    \tmemberlist_editbox:cc.EditBox,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.RegEvent(\"OnClubPlayerNtf\", this.Event_PlayerNtf);\n        this.RegEvent(\"OnUnionMemberInfoChange\", this.Event_UnionMemberInfoChange, this);\n        this.WeChatManager=app.WeChatManager();\n        // this.memberlist_scrollView.node.on('scroll-to-bottom',this.GetNextPage,this);\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(owerClubId,opClubId, unionId, unionName, unionSign){\n        this.node.getChildByName(\"bottom\").getChildByName(\"FuToggle\").getComponent(cc.Toggle).isChecked=false;\n    \tthis.memberPage = 1;\n        this.lastMemberPage = 1;\n        //刷新页数\n        let lb_page = this.node.getChildByName(\"bottom\").getChildByName(\"page\").getChildByName(\"lb_page\");\n        lb_page.getComponent(cc.Label).string = this.memberPage;\n        this.owerClubId = owerClubId;\n    \tthis.clubId = opClubId;\n        this.unionId = unionId;\n        this.unionName = unionName;\n        this.unionSign = unionSign;\n    \tthis.memberlist_demo.active = false;\n        this.isSearching = false;\n        this.memberlist_editbox.string='';\n        this.queryStr = \"\";\n        this.GetPalyerList(true);\n        this.toBttom=false;\n        let sendOnlinePack = {};\n        sendOnlinePack.clubId = opClubId;\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubOnlinePlayerCount\",sendOnlinePack, function(serverPack){\n            self.node.getChildByName(\"bottom\").getChildByName(\"lb_OnlineCount\").getComponent(cc.Label).string = \"当前亲友圈在线人数：\"+serverPack+\"人\";\n        }, function(){\n            app.SysNotifyManager().ShowSysMsg(\"获取在线人数失败\",[],3);\n        });\n    },\n    GetPalyerList:function(isRefresh=false){\n        let sendPack = app.ClubManager().GetUnionSendPackHead();\n        sendPack.opClubId = this.clubId;\n        sendPack.pageNum = this.memberPage;\n        sendPack.query = this.ComTool.GetBeiZhuID(this.queryStr);\n        if (this.queryStr != \"\") {\n            this.isSearching = true;\n        }else{\n            this.isSearching = false;\n        }\n        //是否勾选只显示在线的\n        let isShowOnline = this.node.getChildByName(\"bottom\").getChildByName(\"OnlineToggle\").getComponent(cc.Toggle).isChecked;\n        if (isShowOnline) {\n            sendPack.type = 1;\n        }else{\n            sendPack.type = 0;\n        }\n        let isFu = this.node.getChildByName(\"bottom\").getChildByName(\"FuToggle\").getComponent(cc.Toggle).isChecked;\n        if (isFu) {\n            sendPack.losePoint = 1;\n        }else{\n            sendPack.losePoint = 0;\n        }\n        let self = this;\n        app.NetManager().SendPack('union.CUnionClubMemberList',sendPack,function(serverPack){\n            if (serverPack.length > 0) {\n                self.ShowMemberList(serverPack,isRefresh);\n                //刷新页数\n                let lb_page = self.node.getChildByName(\"bottom\").getChildByName(\"page\").getChildByName(\"lb_page\");\n                lb_page.getComponent(cc.Label).string = self.memberPage;\n            }else{\n                self.memberPage = self.lastMemberPage;\n            }\n            self.toBttom=false;\n        },function(error){\n            self.ShowSysMsg(\"获取亲友圈玩家列表失败\");\n        });\n    },\n    Event_PlayerNtf:function(event){\n        //处于搜索中，不需要刷新\n        if (this.isSearching) return;\n        let clubId = event.clubId;\n        let self = this;\n        if(this.clubId == clubId){\n            this.memberPage = 1;\n            this.GetPalyerList(true);\n        }\n    },\n    Event_UnionMemberInfoChange:function(serverPack){\n        let allUserNode = this.memberlist_layout.children;\n        for (let i = 0; i < allUserNode.length; i++) {\n            if (serverPack.unionId == this.unionId && \n                serverPack.clubId == this.clubId && \n                serverPack.pid == allUserNode[i].playerData.shortPlayer.pid) {\n                allUserNode[i].playerData.sportsPoint = serverPack.sportsPoint;\n                allUserNode[i].getChildByName(\"pl\").getComponent(cc.Label).string = serverPack.sportsPoint;\n                break;\n            }\n        }\n    },\n    GetNextPage:function(){\n        if(this.toBttom==true){\n            return;\n        }\n        this.toBttom=true;\n        this.memberPage++;\n        this.GetPalyerList(false);\n    },\n    ShowMemberList:function(playerlist,isRefresh){\n        if (isRefresh) {\n            //this.memberlist_layout.removeAllChildren();\n            this.DestroyAllChildren(this.memberlist_layout);\n            this.memberlist_scrollView.scrollToTop();\n        }\n        for(let i=0;i<playerlist.length;i++){\n            let heroID = playerlist[i].shortPlayer.pid;\n            let shortHeroID=this.ComTool.GetPid(heroID);\n            let nodePrefab = cc.instantiate(this.memberlist_demo);\n            nodePrefab.name = heroID.toString();\n            nodePrefab.minister = playerlist[i].minister;\n            nodePrefab.playerData = playerlist[i];\n            let headImageUrl = playerlist[i].shortPlayer.iconUrl;\n            nodePrefab.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(playerlist[i].shortPlayer.pid,playerlist[i].shortPlayer.name);\n            nodePrefab.getChildByName('id').getComponent(cc.Label).string=\"ID:\"+this.ComTool.GetPid(heroID);\n            nodePrefab.getChildByName('promoterName').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(playerlist[i].upShortPlayer.pid,playerlist[i].upShortPlayer.name);\n            nodePrefab.getChildByName('promoterId').getComponent(cc.Label).string=\"ID:\"+this.ComTool.GetPid(playerlist[i].upShortPlayer.pid);\n            if (this.unionId > 0) {\n                nodePrefab.getChildByName('pl').getComponent(cc.Label).string = playerlist[i].sportsPoint;\n                nodePrefab.getChildByName('btn_setPL').active=true;\n            }else{\n                nodePrefab.getChildByName('pl').getComponent(cc.Label).string = \"\";\n                nodePrefab.getChildByName('btn_setPL').active=false;\n            }\n            if (playerlist[i].minister > 0) {\n                nodePrefab.getChildByName('btn_setPL').getChildByName(\"label\").getComponent(cc.Label).string = \"授权比赛分\";\n            }else{\n                nodePrefab.getChildByName('btn_setPL').getChildByName(\"label\").getComponent(cc.Label).string = \"修改比赛分\";\n            }\n            //根据是否禁止来显示按钮\n            if (playerlist[i].isUnionBanGame) {\n                nodePrefab.getChildByName('btn_jzyx').active=false;\n                nodePrefab.getChildByName('btn_qxjz').active=true;\n                nodePrefab.getChildByName(\"img_jzyx\").active=true;\n            }else{\n                nodePrefab.getChildByName('btn_jzyx').active=true;\n                nodePrefab.getChildByName('btn_qxjz').active=false;\n                nodePrefab.getChildByName(\"img_jzyx\").active=false;\n            }\n            nodePrefab.active=true;\n            this.memberlist_layout.addChild(nodePrefab);\n            if(headImageUrl){\n                this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n                let WeChatHeadImage = nodePrefab.getChildByName('head').getComponent(\"WeChatHeadImage\");\n                WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n            }\n        }\n    },\n    //---------点击函数---------------------\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_next'==btnName){\n            this.lastMemberPage = this.memberPage;\n            this.memberPage++;\n            this.GetPalyerList(true);\n        }\n        else if('btn_last'==btnName){\n            if(this.memberPage<=1){\n                return;\n            }\n            this.lastMemberPage = this.memberPage;\n            this.memberPage--;\n            this.GetPalyerList(true);\n        }else if('btn_search'==btnName){\n            this.memberPage = 1;\n            this.lastMemberPage = 1;\n            this.queryStr = this.memberlist_editbox.string;\n            this.GetPalyerList(true);\n        }else if('btn_close'==btnName){\n        \tthis.CloseForm();\n        }else if(btnName==\"btn_jzyx\"){\n            this.BanGameClubMember(btnNode,1);\n        }else if(btnName==\"btn_qxjz\"){\n            this.BanGameClubMember(btnNode,0);\n        }else if('btn_setPL'==btnName){\n            let clubData = app.ClubManager().GetClubDataByClubID(this.owerClubId);\n            if (!clubData) {\n                return;\n            }\n\n            let playerData = btnNode.parent.playerData;\n            let sendPack = {};\n            sendPack.clubId = this.clubId;\n            sendPack.opPid = playerData.shortPlayer.pid;\n            sendPack.exeClubId = this.owerClubId;\n            let self = this;\n            app.NetManager().SendPack(\"club.CClubMemberSportsPointInfo\",sendPack, function(serverPack){\n                let playerData = btnNode.parent.playerData;\n                let data = {\"name\":playerData.shortPlayer.name,\n                    \"pid\":self.ComTool.GetPid(playerData.shortPlayer.pid),\n                    \"opClubId\":self.clubId,\n                    \"targetPL\":serverPack.sportsPoint,\n                    \"owerPL\":serverPack.allowSportsPoint,\n                    \"myisminister\":playerData.minister,\n                }\n                if(app.ClubManager().GetUnionTypeByLastClubData()==1){\n                    app.FormManager().ShowForm(\"ui/club_2/UIUserSetPL_2\",data,true);\n                }else{\n                    app.FormManager().ShowForm(\"ui/club/UIUserSetPL\",data,true);\n                }\n            }, function(){\n\n            });\n        }else if('btn_changePL'==btnName){\n            //eliminatePoin\n\n            let clubData = app.ClubManager().GetClubDataByClubID(this.owerClubId);\n            if (!clubData) {\n                return;\n            }\n            let playerData = btnNode.parent.playerData;\n            let sendPack = {};\n            sendPack.clubId = this.clubId;\n            sendPack.opPid = playerData.shortPlayer.pid;\n            sendPack.exeClubId = this.owerClubId;\n            let data = {\"name\":playerData.shortPlayer.name,\n                    \"pid\":this.ComTool.GetPid(playerData.shortPlayer.pid),\n                    \"opClubId\":this.clubId,\n                    \"eliminatePoint\":playerData.eliminatePoint,\n            }\n            app.FormManager().ShowForm(\"ui/club_2/UIChangeSportsPointWarning_2\",data,true);\n        }\n\n        else if(btnName==\"btn_jjdz\"){\n            let playerData = btnNode.parent.playerData;\n            app.FormManager().ShowForm('ui/club/UIClubUserMessageNew',this.owerClubId,this.unionId,this.unionName,this.unionSign,this.ComTool.GetPid(playerData.shortPlayer.pid),this.clubId);\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n    OnClickOnLineToggle:function(event){\n        this.memberPage = 1;\n        this.lastMemberPage = 1;\n        this.DestroyAllChildren(this.memberlist_layout);\n        this.memberlist_scrollView.scrollToTop();\n        this.GetPalyerList(true);\n    },\n    OnClickFuToggle:function(event){\n        this.memberPage = 1;\n        this.lastMemberPage = 1;\n        this.DestroyAllChildren(this.memberlist_layout);\n        this.memberlist_scrollView.scrollToTop();\n        this.GetPalyerList(true);\n    },\n    BanGameClubMember:function(btnNode, value){\n        let sendPack = app.ClubManager().GetUnionSendPackHead();\n        let playerData = btnNode.parent.playerData;\n        app.FormManager().ShowForm(\"ui/club/UIForbidRoomCfg\",this.clubId,playerData.shortPlayer.pid);\n        // sendPack.opClubId = this.clubId;\n        // sendPack.opPid = playerData.shortPlayer.pid;\n        // sendPack.value = value;\n        // let self = this;\n        // app.NetManager().SendPack('union.CUnionBanGameClubMember',sendPack,function(serverPack){\n        //     //根据是否禁止来显示按钮\n        //     if (value == 1) {\n        //         btnNode.parent.getChildByName('btn_jzyx').active=false;\n        //         btnNode.parent.getChildByName('btn_qxjz').active=true;\n        //         btnNode.parent.getChildByName(\"img_jzyx\").active=true;\n        //     }else{\n        //         btnNode.parent.getChildByName('btn_jzyx').active=true;\n        //         btnNode.parent.getChildByName('btn_qxjz').active=false;\n        //         btnNode.parent.getChildByName(\"img_jzyx\").active=false;\n        //     }\n        // },function(error){\n        //     self.ShowSysMsg(\"操作该玩家失败\");\n        // });\n    },\n});\n"]}