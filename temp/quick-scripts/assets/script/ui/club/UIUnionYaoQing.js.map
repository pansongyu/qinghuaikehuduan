{"version":3,"sources":["UIUnionYaoQing.js"],"names":["app","require","cc","Class","extends","properties","EditBoxID","EditBox","lb_tip","Label","btn_yaoqing","Node","OnCreateInit","WeChatManager","NetManager","RegEvent","Event_CodeError","OnShow","string","active","node","getChildByName","getComponent","event","codeInfo","ShowSysMsg","ShowUser","data","clubName","createName","click_btn_search","shuru","ComTool","GetBeiZhuID","sendPack","ClubManager","GetUnionSendPackHead","clubSign","self","SendPack","serverPack","error","Click_btn_yaoqing","success","OnClick","btnName","btnNode","CloseForm","ErrLog"],"mappings":"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","file":"UIUnionYaoQing.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n    \tEditBoxID:cc.EditBox,\n\t\tlb_tip:cc.Label,\n        btn_yaoqing:cc.Node,\n    },\n\n    OnCreateInit: function () {\n        this.WeChatManager=app.WeChatManager();\n        this.NetManager = app.NetManager();\n        this.RegEvent(\"CodeError\", this.Event_CodeError, this);\n        //this.NetManager.RegNetPack(\"game.cplayerrealauthen\", this.OnPack_ShiMing, this);\n    },\n\n    OnShow: function () {\n    \tthis.EditBoxID.string='';\n        this.btn_yaoqing.active = false;\n        this.lb_tip.string = \"\";\n        this.node.getChildByName(\"lb_clubName\").getComponent(cc.Label).string = \"\";\n        this.node.getChildByName(\"lb_clubCreatorName\").getComponent(cc.Label).string = \"\";\n    },\n    Event_CodeError:function(event){\n        let codeInfo = event;\n        if(codeInfo[\"Code\"] == 5013){\n            this.ShowSysMsg(\"未查找到该玩家\");\n        }else if (codeInfo[\"Code\"] == 6012) {\n            this.ShowSysMsg(\"该玩家已绑定合伙人\");\n        }\n    },\n    ShowUser:function(data){\n        this.node.getChildByName(\"lb_clubName\").getComponent(cc.Label).string = \"亲友圈名字：\" + data.clubName;\n        this.node.getChildByName(\"lb_clubCreatorName\").getComponent(cc.Label).string = \"亲友圈创建者名字：\" + data.createName;\n\n        this.btn_yaoqing.active = true;\n        // let usernode=this.node.getChildByName('user');\n        // usernode.active=true;\n        // let heroID = data.player[\"pid\"];\n        // usernode.heroID=heroID;\n        // let headImageUrl = data.player[\"iconUrl\"];\n        // usernode.getChildByName('name').getComponent(cc.Label).string=data.player.name;\n        // usernode.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        // let WeChatHeadImage = usernode.getChildByName('head').getComponent(\"WeChatHeadImage\");\n        //  //用户头像创建\n        // if(heroID && headImageUrl){\n        //     this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n        // }\n        // WeChatHeadImage.OnLoad();\n        // WeChatHeadImage.ShowHeroHead(heroID);\n        // if(this.HeHuoRen==0){\n        //     if (data.state == app.ClubManager().Enum_Nomarl) {\n        //         this.lb_tip.string = \"该玩家还不是赛事成员，可以邀请玩家进入赛事！\";\n        //         this.btn_yaoqing.active = true;\n        //     }else{\n        //         this.lb_tip.string = \"该玩家已经是加入该赛事了，无法邀请！\";\n        //         this.btn_yaoqing.active = false;\n        //     }\n        // }else{\n        //     if (data.sign) {\n        //         this.lb_tip.string = \"该玩家是赛事成员，可以邀请玩家！\";\n        //         this.btn_yaoqing.active = true;\n        //     }else{\n        //         this.lb_tip.string = \"该玩家不是该赛事成员，邀请加入！\";\n        //         this.btn_yaoqing.active = true;\n        //     }\n        // }\n        \n    },\n    click_btn_search:function(){\n        let shuru = this.ComTool.GetBeiZhuID(this.EditBoxID.string);\n        if(shuru == \"\"){\n            return;\n        }\n        let sendPack = app.ClubManager().GetUnionSendPackHead();\n        sendPack.clubSign = shuru;\n        let self=this;\n        app.NetManager().SendPack('union.CUnionFindClubSignInfo',sendPack,function(serverPack){\n            self.ShowUser(serverPack);\n        },function(error){\n            \n        });\n        \n    },\n    Click_btn_yaoqing:function(){\n    \tif(this.EditBoxID.string==''){\n    \t\treturn;\n    \t}\n        let sendPack = app.ClubManager().GetUnionSendPackHead();\n        sendPack.clubSign = this.EditBoxID.string;\n        let self=this;\n        this.NetManager.SendPack(\"union.CUnionFindClubSignAdd\", sendPack,function(success){\n            self.ShowSysMsg(\"已成功发送邀请信息\");\n        },function(error){\n            self.ShowSysMsg(\"该亲友圈已有联盟\");\n        });\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_yaoqing\"){\n            this.Click_btn_yaoqing();\n        }else if(btnName == \"btn_search\"){\n            this.click_btn_search();\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}