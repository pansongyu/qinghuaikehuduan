{"version":3,"sources":["UIUserSetReservedBaoMingFei.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","OnShow","data","node","getChildByName","getComponent","EditBox","string","reservedValue","Label","OnClick","btnName","btnNode","sendPack","clubId","pid","type","valueStr","parseFloat","value","SysNotifyManager","ShowSysMsg","promotionCalcActiveItemList","self","NetManager","SendPack","serverPack","Client","OnEvent","CloseForm","ErrLog"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY,EAHP;;AAOLC,kBAAc,wBAAY,CAEzB,CATI;AAULC,YAAQ,gBAAUC,IAAV,EAAgB;AACpB,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKC,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCC,YAAzC,CAAsDT,GAAGU,OAAzD,EAAkEC,MAAlE,GAA2EL,KAAKM,aAAhF;AACA,aAAKL,IAAL,CAAUC,cAAV,CAAyB,aAAzB,EAAwCC,YAAxC,CAAqDT,GAAGa,KAAxD,EAA+DF,MAA/D,GAAwE,WAASL,KAAKM,aAAtF;AAEH,KAfI;AAgBLE,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAGD,WAAW,UAAd,EAAyB;AACrB,gBAAIE,WAAW,EAAf;AACAA,qBAASC,MAAT,GAAkB,KAAKZ,IAAL,CAAUY,MAA5B;AACAD,qBAASE,GAAT,GAAe,KAAKb,IAAL,CAAUa,GAAzB;AACAF,qBAASG,IAAT,GAAgB,KAAKd,IAAL,CAAUc,IAA1B;AACA,gBAAIC,WAAW,KAAKd,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCC,YAAzC,CAAsDT,GAAGU,OAAzD,EAAkEC,MAAjF;AACA,gBAAIW,WAAWD,QAAX,KAAwB,IAAxB,IAAgCC,WAAWD,QAAX,KAAwB,CAA5D,EAA+D;AAC3DJ,yBAASM,KAAT,GAAiBD,WAAWD,QAAX,CAAjB;AACH,aAFD,MAEK;AACDvB,oBAAI0B,gBAAJ,GAAuBC,UAAvB,CAAkC,kBAAlC,EAAqD,EAArD,EAAwD,CAAxD;AACA;AACH;AACDR,qBAASS,2BAAT,GAAuC,KAAKpB,IAAL,CAAUoB,2BAAjD;AACA,gBAAIC,OAAO,IAAX;AACA7B,gBAAI8B,UAAJ,GAAiBC,QAAjB,CAA0B,iCAA1B,EAA4DZ,QAA5D,EAAsE,UAASa,UAAT,EAAoB;AACtFhC,oBAAIiC,MAAJ,CAAWC,OAAX,CAAmB,6BAAnB,EAAkDF,UAAlD;AACAH,qBAAKM,SAAL;AACH,aAHD,EAGG,YAAU,CAEZ,CALD;AAMH,SApBD,MAoBM,IAAGlB,WAAW,WAAX,IAA0BA,WAAW,YAAxC,EAAqD;AACvD,iBAAKkB,SAAL;AACH,SAFK,MAED;AACD,iBAAKC,MAAL,CAAY,sBAAZ,EAAoCnB,OAApC;AACH;AACJ;;AA1CI,CAAT","file":"UIUserSetReservedBaoMingFei.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    OnCreateInit: function () {\n\n    },\n    OnShow: function (data) {\n        this.data = data;\n        this.node.getChildByName(\"ValueEditBox\").getComponent(cc.EditBox).string = data.reservedValue;\n        this.node.getChildByName(\"lb_curValue\").getComponent(cc.Label).string = \"当前预留值：\"+data.reservedValue;\n\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_sure\"){\n            let sendPack = {};\n            sendPack.clubId = this.data.clubId;\n            sendPack.pid = this.data.pid;\n            sendPack.type = this.data.type;\n            let valueStr = this.node.getChildByName(\"ValueEditBox\").getComponent(cc.EditBox).string;\n            if (parseFloat(valueStr) != null && parseFloat(valueStr) >= 0) {\n                sendPack.value = parseFloat(valueStr);\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"预留分成值请输入大于等于0的数字\",[],3);\n                return;\n            }\n            sendPack.promotionCalcActiveItemList = this.data.promotionCalcActiveItemList;\n            let self = this;\n            app.NetManager().SendPack(\"club.CClubFixedShareChangeMulti\",sendPack, function(serverPack){\n                app.Client.OnEvent('OnClubFixedShareChangeMulti', serverPack);\n                self.CloseForm();\n            }, function(){\n                \n            });\n        }else if(btnName == \"btn_close\" || btnName == \"btn_cancel\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}