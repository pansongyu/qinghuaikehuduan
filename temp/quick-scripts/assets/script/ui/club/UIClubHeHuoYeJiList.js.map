{"version":3,"sources":["UIClubHeHuoYeJiList.js"],"names":["app","require","cc","Class","extends","properties","hehuoyejilist_scrollView","ScrollView","hehuoyejilist_layout","Node","hehuoyejilist_demo","btn_yeji_today","btn_yeji_yesterday","btn_yeji_santian","btn_yeji_sanshitian","btn_yeji_more","btn_hehuo","jiantouSprite","SpriteFrame","OnCreateInit","OnShow","clubId","hehuozhanji_type","active","ShowHeHuoYeJiList","ShowBtn","btnLable","getChildByName","getComponent","Label","string","type","self","DestroyAllChildren","NetManager","SendPack","serverPack","allNum","allYingJia","allJuShu","i","length","node","instantiate","addChild","data","heroID","player","headImageUrl","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","WeChatManager","InitHeroHeadImage","OnLoad","ShowHeroHead","sumPartner","setPartner","winnerPartner","error","yejibottomNode","sumPlayer","sumWinner","BaiFenBi","sumSet","have","all","Math","floor","SetWaitForConfirm","msgID","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList","OnClick","btnName","btnNode","CloseForm","img_jiantou","Sprite","spriteFrame","FormManager","ShowForm","ErrLog"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,kCAAyBJ,GAAGK,UADpB;AAERC,8BAAqBN,GAAGO,IAFhB;AAGRC,4BAAmBR,GAAGO,IAHd;;AAKRE,wBAAeT,GAAGO,IALV;AAMRG,4BAAmBV,GAAGO,IANd;AAORI,0BAAiBX,GAAGO,IAPZ;AAQRK,6BAAoBZ,GAAGO,IARf;AASRM,uBAAcb,GAAGO,IATT;AAURO,mBAAUd,GAAGO,IAVL;;AAYRQ,uBAAc,CAACf,GAAGgB,WAAJ;AAZN,KAHP;;AAkBL;AACAC,kBAAa,wBAAU,CAEtB,CArBI;;AAuBL;;AAEAC,YAAO,gBAASC,MAAT,EAAgB;AACnB,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKC,gBAAL,GAAwB,CAAxB;AACA,aAAKX,cAAL,CAAoBY,MAApB,GAA6B,KAA7B;AACA,aAAKX,kBAAL,CAAwBW,MAAxB,GAAiC,KAAjC;AACA,aAAKV,gBAAL,CAAsBU,MAAtB,GAA+B,KAA/B;AACA,aAAKT,mBAAL,CAAyBS,MAAzB,GAAkC,KAAlC;AACA,aAAKb,kBAAL,CAAwBa,MAAxB,GAAiC,KAAjC;AACA,aAAKC,iBAAL,CAAuB,KAAKF,gBAA5B;AACH,KAlCI;;AAoCLG,aAAQ,mBAAU;AACd,aAAKd,cAAL,CAAoBY,MAApB,GAA6B,KAA7B;AACA,aAAKX,kBAAL,CAAwBW,MAAxB,GAAiC,KAAjC;AACA,aAAKV,gBAAL,CAAsBU,MAAtB,GAA+B,KAA/B;AACA,aAAKT,mBAAL,CAAyBS,MAAzB,GAAkC,KAAlC;AACA,YAAIG,WAAW,KAAKX,aAAL,CAAmBY,cAAnB,CAAkC,OAAlC,EAA2CC,YAA3C,CAAwD1B,GAAG2B,KAA3D,CAAf;AACA,YAAI,KAAKP,gBAAL,IAAyB,CAA7B,EAAgC;AAC5BI,qBAASI,MAAT,GAAkB,MAAlB;AACH,SAFD,MAEM,IAAI,KAAKR,gBAAL,IAAyB,CAA7B,EAAgC;AAClCI,qBAASI,MAAT,GAAkB,MAAlB;AACH,SAFK,MAEA,IAAI,KAAKR,gBAAL,IAAyB,CAA7B,EAAgC;AAClCI,qBAASI,MAAT,GAAkB,KAAlB;AACH,SAFK,MAEA,IAAI,KAAKR,gBAAL,IAAyB,CAA7B,EAAgC;AAClCI,qBAASI,MAAT,GAAkB,MAAlB;AACH;AACJ,KAnDI;;AAqDLN,uBAAkB,2BAASO,IAAT,EAAc;AAC5B,YAAIC,OAAK,IAAT;AACA,aAAKV,gBAAL,GAAsBS,IAAtB;AACA,aAAKN,OAAL;AACA;AACA,aAAKQ,kBAAL,CAAwB,KAAKzB,oBAA7B;AACAR,YAAIkC,UAAJ,GAAiBC,QAAjB,CAA0B,yBAA1B,EAAoD,EAAC,UAAS,KAAKd,MAAf,EAAsB,WAAUU,IAAhC,EAApD,EAA0F,UAASK,UAAT,EAAoB;AAC1G,gBAAIC,SAAO,CAAX;AACA,gBAAIC,aAAW,CAAf;AACA,gBAAIC,WAAS,CAAb;AACA,iBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEJ,WAAWK,MAAzB,EAAgCD,GAAhC,EAAoC;AAChC,oBAAIE,OAAKxC,GAAGyC,WAAH,CAAeX,KAAKtB,kBAApB,CAAT;AACAgC,qBAAKnB,MAAL,GAAY,IAAZ;AACAS,qBAAKxB,oBAAL,CAA0BoC,QAA1B,CAAmCF,IAAnC;;AAEA,oBAAIG,OAAKT,WAAWI,CAAX,CAAT;AACA,oBAAIM,SAASD,KAAKE,MAAL,CAAY,KAAZ,CAAb;AACA,oBAAIC,eAAeH,KAAKE,MAAL,CAAY,SAAZ,CAAnB;AACAL,qBAAKf,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC1B,GAAG2B,KAA5C,EAAmDC,MAAnD,GAA0DE,KAAKiB,OAAL,CAAaC,aAAb,CAA2BJ,MAA3B,EAAkCD,KAAKE,MAAL,CAAYI,IAA9C,CAA1D;AACAT,qBAAKf,cAAL,CAAoB,IAApB,EAA0BC,YAA1B,CAAuC1B,GAAG2B,KAA1C,EAAiDC,MAAjD,GAAwD9B,IAAIoD,IAAJ,CAASC,CAAT,CAAW,gBAAX,EAA4B,EAAC,OAAMrB,KAAKiB,OAAL,CAAaK,MAAb,CAAoBR,MAApB,CAAP,EAA5B,CAAxD;AACAJ,qBAAKI,MAAL,GAAYA,MAAZ;AACAJ,qBAAKf,cAAL,CAAoB,qBAApB,EAA2CmB,MAA3C,GAAkDA,MAAlD;AACA,oBAAIS,kBAAkBb,KAAKf,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC,iBAAzC,CAAtB;AACC;AACD,oBAAGkB,UAAUE,YAAb,EAA0B;AACtBhD,wBAAIwD,aAAJ,GAAoBC,iBAApB,CAAsCX,MAAtC,EAA8CE,YAA9C;AACH;AACDO,gCAAgBG,MAAhB;AACQH,gCAAgBI,YAAhB,CAA6Bb,MAA7B,EAAoCE,YAApC;AACR;AACAN,qBAAKf,cAAL,CAAoB,QAApB,EAA8BC,YAA9B,CAA2C1B,GAAG2B,KAA9C,EAAqDC,MAArD,GAA4De,KAAKe,UAAjE;AACAlB,qBAAKf,cAAL,CAAoB,UAApB,EAAgCC,YAAhC,CAA6C1B,GAAG2B,KAAhD,EAAuDC,MAAvD,GAA8De,KAAKgB,UAAnE;AACAnB,qBAAKf,cAAL,CAAoB,YAApB,EAAkCC,YAAlC,CAA+C1B,GAAG2B,KAAlD,EAAyDC,MAAzD,GAAgEe,KAAKiB,aAArE;AACH;AAGJ,SA9BD,EA8BE,UAASC,KAAT,EAAe,CAChB,CA/BD;;AAiCA/D,YAAIkC,UAAJ,GAAiBC,QAAjB,CAA0B,wBAA1B,EAAmD,EAAC,UAAS,KAAKd,MAAf,EAAsB,WAAUU,IAAhC,EAAnD,EAAyF,UAASK,UAAT,EAAoB;AACzG,gBAAI4B,iBAAehC,KAAKU,IAAL,CAAUf,cAAV,CAAyB,QAAzB,CAAnB;AACAqC,2BAAerC,cAAf,CAA8B,WAA9B,EAA2CC,YAA3C,CAAwD1B,GAAG2B,KAA3D,EAAkEC,MAAlE,GAAyE,SAAOM,WAAWwB,UAAlB,GAA6B,GAA7B,GAAiCxB,WAAW6B,SAArH;AACAD,2BAAerC,cAAf,CAA8B,YAA9B,EAA4CC,YAA5C,CAAyD1B,GAAG2B,KAA5D,EAAmEC,MAAnE,GAA0E,SAAOM,WAAW0B,aAAlB,GAAgC,GAAhC,GAAoC1B,WAAW8B,SAA/C,GAAyD,GAAzD,GAA6DlC,KAAKmC,QAAL,CAAc/B,WAAW0B,aAAzB,EAAuC1B,WAAW8B,SAAlD,CAA7D,GAA0H,GAApM;AACAF,2BAAerC,cAAf,CAA8B,UAA9B,EAA0CC,YAA1C,CAAuD1B,GAAG2B,KAA1D,EAAiEC,MAAjE,GAAwE,WAASM,WAAWyB,UAApB,GAA+B,GAA/B,GAAmCzB,WAAWgC,MAA9C,GAAqD,GAArD,GAAyDpC,KAAKmC,QAAL,CAAc/B,WAAWyB,UAAzB,EAAoCzB,WAAWgC,MAA/C,CAAzD,GAAgH,GAAxL,CAA4L;AAC/L,SALD,EAKE,UAASL,KAAT,EAAe,CAEhB,CAPD;AASH,KArGI;AAsGLI,cAAS,kBAASE,IAAT,EAAcC,GAAd,EAAkB;AACvB,YAAGD,OAAK,CAAR,EAAU;AACN,mBAAOE,KAAKC,KAAL,CAAWH,OAAK,GAAL,GAASC,GAApB,IAAyB,GAAhC;AACH;AACD,eAAO,IAAP;AACH,KA3GI;AA4GL;AACA;;;;;AAKAG,uBAAkB,2BAASC,KAAT,EAAe3C,IAAf,EAAuC;AAAA,YAAnB4C,MAAmB,uEAAZ,EAAY;AAAA,YAATC,KAAS,uEAAH,EAAG;;AACrD,YAAIC,iBAAiB7E,IAAI6E,cAAJ,EAArB;AACAA,uBAAeC,qBAAf,CAAqC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAArC,EAAgEN,KAAhE,EAAuEE,KAAvE;AACAC,uBAAeI,WAAf,CAA2BlD,IAA3B,EAAiC2C,KAAjC,EAAwCC,MAAxC;AACH,KAtHI;AAuHLI,eAAU,mBAASG,SAAT,EAAoBR,KAApB,EAA2BS,WAA3B,EAAuC;AAC7C,YAAGD,aAAa,MAAhB,EAAuB;AACnB;AACH;AACJ,KA3HI;AA4HL;;AAEHE,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AACjC,YAAG,eAAaD,OAAhB,EAAwB;AACjB,iBAAKE,SAAL;AACA,SAFP,MAEY,IAAG,oBAAoBF,OAAvB,EAA+B;AACjC,iBAAK7D,iBAAL,CAAuB,CAAvB;AACH,SAFK,MAEA,IAAG,wBAAwB6D,OAA3B,EAAmC;AACrC,iBAAK7D,iBAAL,CAAuB,CAAvB;AACH,SAFK,MAEA,IAAG,sBAAsB6D,OAAzB,EAAiC;AACnC,iBAAK7D,iBAAL,CAAuB,CAAvB;AACH,SAFK,MAEA,IAAG,yBAAyB6D,OAA5B,EAAoC;AACtC,iBAAK7D,iBAAL,CAAuB,CAAvB;AACH,SAFK,MAEA,IAAG,mBAAmB6D,OAAtB,EAA8B;AAChC,iBAAK1E,cAAL,CAAoBY,MAApB,GAA6B,CAAC,KAAKZ,cAAL,CAAoBY,MAAlD;AACA,iBAAKX,kBAAL,CAAwBW,MAAxB,GAAiC,CAAC,KAAKX,kBAAL,CAAwBW,MAA1D;AACA,iBAAKV,gBAAL,CAAsBU,MAAtB,GAA+B,CAAC,KAAKV,gBAAL,CAAsBU,MAAtD;AACA,iBAAKT,mBAAL,CAAyBS,MAAzB,GAAkC,CAAC,KAAKT,mBAAL,CAAyBS,MAA5D;AACA,gBAAIiE,cAAc,KAAKzE,aAAL,CAAmBY,cAAnB,CAAkC,aAAlC,EAAiDC,YAAjD,CAA8D1B,GAAGuF,MAAjE,CAAlB;AACA,gBAAI,KAAK9E,cAAL,CAAoBY,MAAxB,EAAgC;AAC5BiE,4BAAYE,WAAZ,GAA0B,KAAKzE,aAAL,CAAmB,CAAnB,CAA1B;AACH,aAFD,MAEK;AACDuE,4BAAYE,WAAZ,GAA0B,KAAKzE,aAAL,CAAmB,CAAnB,CAA1B;AACH;AACJ,SAXK,MAWA,IAAG,cAAYoE,OAAf,EAAuB,CAE5B,CAFK,MAEA,IAAG,cAAYA,OAAf,EAAuB,CAE5B,CAFK,MAEA,IAAG,yBAAuBA,OAA1B,EAAkC;AACpC,iBAAKM,WAAL,CAAiBC,QAAjB,CAA0B,+BAA1B,EAA2D,KAAKvE,MAAhE,EAAwEiE,QAAQxC,MAAhF,EAAwF,KAAKxB,gBAA7F;AACH,SAFK,MAEA,IAAG,eAAa+D,OAAhB,EAAwB;AAC1B,iBAAKM,WAAL,CAAiBC,QAAjB,CAA0B,yBAA1B,EAAoD,KAAKvE,MAAzD;AACH,SAFK,MAED;AACV,iBAAKwE,MAAL,CAAY,qBAAZ,EAAmCR,OAAnC;AACA;AACD;AA/JO,CAAT","file":"UIClubHeHuoYeJiList.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        hehuoyejilist_scrollView:cc.ScrollView,\n        hehuoyejilist_layout:cc.Node,\n        hehuoyejilist_demo:cc.Node,\n\n        btn_yeji_today:cc.Node,\n        btn_yeji_yesterday:cc.Node,\n        btn_yeji_santian:cc.Node,\n        btn_yeji_sanshitian:cc.Node,\n        btn_yeji_more:cc.Node,\n        btn_hehuo:cc.Node,\n\n        jiantouSprite:[cc.SpriteFrame],\n    },\n\n    //初始化\n    OnCreateInit:function(){\n\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(clubId){\n        this.clubId = clubId;\n        this.hehuozhanji_type = 0;\n        this.btn_yeji_today.active = false;\n        this.btn_yeji_yesterday.active = false;\n        this.btn_yeji_santian.active = false;\n        this.btn_yeji_sanshitian.active = false;\n        this.hehuoyejilist_demo.active = false;\n        this.ShowHeHuoYeJiList(this.hehuozhanji_type);\n    },\n\n    ShowBtn:function(){\n        this.btn_yeji_today.active = false;\n        this.btn_yeji_yesterday.active = false;\n        this.btn_yeji_santian.active = false;\n        this.btn_yeji_sanshitian.active = false;\n        let btnLable = this.btn_yeji_more.getChildByName(\"label\").getComponent(cc.Label);\n        if (this.hehuozhanji_type == 0) {\n            btnLable.string = \"今  天\";\n        }else if (this.hehuozhanji_type == 1) {\n            btnLable.string = \"昨  天\";\n        }else if (this.hehuozhanji_type == 2) {\n            btnLable.string = \"近三天\";\n        }else if (this.hehuozhanji_type == 3) {\n            btnLable.string = \"近三十天\";\n        }\n    },\n\n    ShowHeHuoYeJiList:function(type){\n        let self=this;\n        this.hehuozhanji_type=type;\n        this.ShowBtn();\n        //this.hehuoyejilist_layout.removeAllChildren();\n        this.DestroyAllChildren(this.hehuoyejilist_layout);\n        app.NetManager().SendPack('club.CClubPartnerRecord',{'clubId':this.clubId,\"getType\":type},function(serverPack){\n            let allNum=0;\n            let allYingJia=0;\n            let allJuShu=0;\n            for(let i=0;i<serverPack.length;i++){\n                let node=cc.instantiate(self.hehuoyejilist_demo);\n                node.active=true;\n                self.hehuoyejilist_layout.addChild(node);\n\n                let data=serverPack[i];\n                let heroID = data.player[\"pid\"];\n                let headImageUrl = data.player[\"iconUrl\"];\n                node.getChildByName('name').getComponent(cc.Label).string=self.ComTool.GetBeiZhuName(heroID,data.player.name);\n                node.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":self.ComTool.GetPid(heroID)});\n                node.heroID=heroID;\n                node.getChildByName('btn_hehuo_xiangqing').heroID=heroID;\n                let WeChatHeadImage = node.getChildByName('head').getComponent(\"WeChatHeadImage\");\n                 //用户头像创建\n                if(heroID && headImageUrl){\n                    app.WeChatManager().InitHeroHeadImage(heroID, headImageUrl);\n                }\n                WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n                //显示玩家数\n                node.getChildByName('lb_num').getComponent(cc.Label).string=data.sumPartner;\n                node.getChildByName('lb_canyu').getComponent(cc.Label).string=data.setPartner;\n                node.getChildByName('lb_yingjia').getComponent(cc.Label).string=data.winnerPartner;\n            }\n            \n\n        },function(error){\n        });\n        \n        app.NetManager().SendPack('club.CClubPartnerCount',{'clubId':this.clubId,\"getType\":type},function(serverPack){\n            let yejibottomNode=self.node.getChildByName('bottom');\n            yejibottomNode.getChildByName('lb_renshu').getComponent(cc.Label).string=\"总人数：\"+serverPack.sumPartner+\"/\"+serverPack.sumPlayer;\n            yejibottomNode.getChildByName('lb_yingjia').getComponent(cc.Label).string=\"大赢家：\"+serverPack.winnerPartner+\"/\"+serverPack.sumWinner+\"(\"+self.BaiFenBi(serverPack.winnerPartner,serverPack.sumWinner)+\")\";\n            yejibottomNode.getChildByName('lb_jushu').getComponent(cc.Label).string=\"总参与局数：\"+serverPack.setPartner+\"/\"+serverPack.sumSet+\"(\"+self.BaiFenBi(serverPack.setPartner,serverPack.sumSet)+\")\";;\n        },function(error){\n\n        });\n\n    },\n    BaiFenBi:function(have,all){\n        if(have>0){\n            return Math.floor(have*100/all)+\"%\";\n        }\n        return '暂无';\n    },\n    //---------点击函数---------------------\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[]){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n    },\n    //---------点击函数---------------------\n\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n        \tthis.CloseForm();\n        }else if('btn_yeji_today' == btnName){\n            this.ShowHeHuoYeJiList(0);\n        }else if('btn_yeji_yesterday' == btnName){\n            this.ShowHeHuoYeJiList(1);\n        }else if('btn_yeji_santian' == btnName){\n            this.ShowHeHuoYeJiList(2);\n        }else if('btn_yeji_sanshitian' == btnName){\n            this.ShowHeHuoYeJiList(3);\n        }else if('btn_yeji_more' == btnName){\n            this.btn_yeji_today.active = !this.btn_yeji_today.active;\n            this.btn_yeji_yesterday.active = !this.btn_yeji_yesterday.active;\n            this.btn_yeji_santian.active = !this.btn_yeji_santian.active;\n            this.btn_yeji_sanshitian.active = !this.btn_yeji_sanshitian.active;\n            let img_jiantou = this.btn_yeji_more.getChildByName(\"img_jiantou\").getComponent(cc.Sprite);\n            if (this.btn_yeji_today.active) {\n                img_jiantou.spriteFrame = this.jiantouSprite[1];\n            }else{\n                img_jiantou.spriteFrame = this.jiantouSprite[0];\n            }\n        }else if('btn_last'==btnName){\n            \n        }else if('btn_next'==btnName){\n            \n        }else if('btn_hehuo_xiangqing'==btnName){\n            this.FormManager.ShowForm('ui/club/UIClubHeHuoZhanJiList', this.clubId, btnNode.heroID, this.hehuozhanji_type);\n        }else if('btn_hehuo'==btnName){\n            this.FormManager.ShowForm('ui/club/UIClubHeHuoList',this.clubId);\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}