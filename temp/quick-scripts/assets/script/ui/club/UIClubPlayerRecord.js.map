{"version":3,"sources":["UIClubPlayerRecord.js"],"names":["app","require","cc","Class","extends","properties","layout","Node","OnCreateInit","OnShow","clubId","unionId","type","node","getChildByName","getComponent","Label","string","InitLeft","InitLeftLb","GetData","DestroyAllChildren","self","NetManager","SendPack","serverPack","ShowData","size","winner","sumPoint","OnClose","data","demo","i","length","child","instantiate","active","GameId2Name","gameId","addChild","ShareDefine","GametTypeID2Name","tab","children","lb","getDay","day","today","Date","targetday_milliseconds","getTime","setTime","tYear","getFullYear","tMonth","getMonth","tDate","getDate","doHandleMonth","month","OnClick","btnName","btnNode","CloseForm","startsWith","parseInt","replace","ErrLog"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACTC,gBAAOJ,GAAGK;AADD,KAHP;;AAOL;AACAC,kBAAa,wBAAU,CAEtB,CAVI;;AAYL;;AAEAC,YAAO,gBAASC,MAAT,EAA0B;AAAA,YAAVC,OAAU,uEAAF,CAAE;;AAC7B,aAAKC,IAAL,GAAU,CAAV,CAD6B,CACjB;AACZ,aAAKD,OAAL,GAAaA,OAAb;AACA,aAAKD,MAAL,GAAYA,MAAZ;AACA,YAAG,KAAKC,OAAL,GAAa,CAAhB,EAAkB;AACd,iBAAKE,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+BA,cAA/B,CAA8C,aAA9C,EAA6DC,YAA7D,CAA0Eb,GAAGc,KAA7E,EAAoFC,MAApF,GAA2F,KAA3F;AACH,SAFD,MAEK;AACD,iBAAKJ,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+BA,cAA/B,CAA8C,aAA9C,EAA6DC,YAA7D,CAA0Eb,GAAGc,KAA7E,EAAoFC,MAApF,GAA2F,KAA3F;AACH;AACD,aAAKC,QAAL;AACA,aAAKC,UAAL;AACA,aAAKC,OAAL;AACH,KA1BI;AA2BLA,aAAQ,mBAAU;AACd,aAAKC,kBAAL,CAAwB,KAAKf,MAA7B;AACA,YAAIgB,OAAO,IAAX;AACAtB,YAAIuB,UAAJ,GAAiBC,QAAjB,CAA0B,wBAA1B,EAAmD,EAAC,UAAS,KAAKd,MAAf,EAAsB,WAAU,KAAKC,OAArC,EAA6C,WAAU,KAAKC,IAA5D,EAAnD,EAAsH,UAASa,UAAT,EAAoB;AACtIH,iBAAKI,QAAL,CAAcD,UAAd;AACH,SAFD,EAEG,YAAU,CACZ,CAHD;;AAKAzB,YAAIuB,UAAJ,GAAiBC,QAAjB,CAA0B,6BAA1B,EAAwD,EAAC,UAAS,KAAKd,MAAf,EAAsB,WAAU,KAAKC,OAArC,EAA6C,WAAU,KAAKC,IAA5D,EAAxD,EAA2H,UAASa,UAAT,EAAoB;AAC3IH,iBAAKT,IAAL,CAAUC,cAAV,CAAyB,UAAzB,EAAqCC,YAArC,CAAkDb,GAAGc,KAArD,EAA4DC,MAA5D,GAAmE,SAAOQ,WAAWE,IAArF;AACAL,iBAAKT,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCC,YAAzC,CAAsDb,GAAGc,KAAzD,EAAgEC,MAAhE,GAAuE,SAAOQ,WAAWG,MAAzF;AACA,gBAAGN,KAAKX,OAAL,GAAa,CAAhB,EAAkB;AACdW,qBAAKT,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CC,YAA1C,CAAuDb,GAAGc,KAA1D,EAAiEC,MAAjE,GAAwE,SAAOQ,WAAWI,QAA1F;AACH,aAFD,MAEK;AACDP,qBAAKT,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CC,YAA1C,CAAuDb,GAAGc,KAA1D,EAAiEC,MAAjE,GAAwE,SAAOQ,WAAWI,QAA1F;AACH;AAEJ,SATD,EASG,YAAU,CACZ,CAVD;AAWH,KA9CI;AA+CLC,aAAQ,mBAAU;AACd,aAAKT,kBAAL,CAAwB,KAAKf,MAA7B;AACA,aAAKO,IAAL,CAAUC,cAAV,CAAyB,UAAzB,EAAqCC,YAArC,CAAkDb,GAAGc,KAArD,EAA4DC,MAA5D,GAAmE,MAAnE;AACA,aAAKJ,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCC,YAAzC,CAAsDb,GAAGc,KAAzD,EAAgEC,MAAhE,GAAuE,MAAvE;AACA,aAAKJ,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CC,YAA1C,CAAuDb,GAAGc,KAA1D,EAAiEC,MAAjE,GAAwE,EAAxE;AACH,KApDI;AAqDLS,cAAS,kBAASK,IAAT,EAAc;AACnB,YAAIC,OAAK,KAAKnB,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAT;AACA,aAAI,IAAImB,IAAE,CAAV,EAAYA,IAAEF,KAAKG,MAAnB,EAA0BD,GAA1B,EAA8B;AAC1B,gBAAIE,QAAQjC,GAAGkC,WAAH,CAAeJ,IAAf,CAAZ;AACA,gBAAGC,IAAE,CAAF,IAAK,CAAR,EAAU;AACNE,sBAAMrB,cAAN,CAAqB,IAArB,EAA2BuB,MAA3B,GAAkC,KAAlC;AACH;AACDF,kBAAMrB,cAAN,CAAqB,UAArB,EAAiCC,YAAjC,CAA8Cb,GAAGc,KAAjD,EAAwDC,MAAxD,GAA+Dc,KAAKE,CAAL,EAAQN,IAAvE;AACAQ,kBAAMrB,cAAN,CAAqB,cAArB,EAAqCC,YAArC,CAAkDb,GAAGc,KAArD,EAA4DC,MAA5D,GAAmEc,KAAKE,CAAL,EAAQL,MAA3E;AACAO,kBAAMrB,cAAN,CAAqB,eAArB,EAAsCC,YAAtC,CAAmDb,GAAGc,KAAtD,EAA6DC,MAA7D,GAAoEc,KAAKE,CAAL,EAAQJ,QAA5E;AACAM,kBAAMrB,cAAN,CAAqB,SAArB,EAAgCC,YAAhC,CAA6Cb,GAAGc,KAAhD,EAAuDC,MAAvD,GAA8D,KAAKqB,WAAL,CAAiBP,KAAKE,CAAL,EAAQM,MAAzB,CAA9D;AACAJ,kBAAME,MAAN,GAAa,IAAb;AACA,iBAAK/B,MAAL,CAAYkC,QAAZ,CAAqBL,KAArB;AACH;AACJ,KAnEI;AAoELG,iBAAY,qBAASC,MAAT,EAAgB;AACxB,eAAO,KAAKE,WAAL,CAAiBC,gBAAjB,CAAkCH,MAAlC,CAAP;AACH,KAtEI;AAuELrB,cAAS,oBAAU;AACf,YAAIyB,MAAI,KAAK9B,IAAL,CAAUC,cAAV,CAAyB,KAAzB,CAAR;AACA,aAAI,IAAImB,IAAE,CAAV,EAAYA,IAAEU,IAAIC,QAAJ,CAAaV,MAA3B,EAAkCD,GAAlC,EAAsC;AAClCU,gBAAIC,QAAJ,CAAaX,CAAb,EAAgBnB,cAAhB,CAA+B,KAA/B,EAAsCuB,MAAtC,GAA6CJ,KAAG,KAAKrB,IAArD;AACA+B,gBAAIC,QAAJ,CAAaX,CAAb,EAAgBnB,cAAhB,CAA+B,IAA/B,EAAqCuB,MAArC,GAA4CJ,KAAG,KAAKrB,IAApD;AACH;AACJ,KA7EI;AA8ELO,gBAAW,sBAAU;AACjB,YAAIwB,MAAI,KAAK9B,IAAL,CAAUC,cAAV,CAAyB,KAAzB,CAAR;AACA,aAAI,IAAImB,IAAE,CAAV,EAAYA,IAAEU,IAAIC,QAAJ,CAAaV,MAA3B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAGA,KAAG,CAAN,EAAQ;AACJ,yBADI,CACM;AACb;AACD,gBAAIY,KAAG,KAAKC,MAAL,CAAYb,CAAZ,CAAP;AACAU,gBAAIC,QAAJ,CAAaX,CAAb,EAAgBnB,cAAhB,CAA+B,IAA/B,EAAqCA,cAArC,CAAoD,IAApD,EAA0DC,YAA1D,CAAuEb,GAAGc,KAA1E,EAAiFC,MAAjF,GAAwF4B,EAAxF;AACAF,gBAAIC,QAAJ,CAAaX,CAAb,EAAgBnB,cAAhB,CAA+B,KAA/B,EAAsCA,cAAtC,CAAqD,IAArD,EAA2DC,YAA3D,CAAwEb,GAAGc,KAA3E,EAAkFC,MAAlF,GAAyF4B,EAAzF;AACH;AACJ,KAxFI;AAyFLC,YAAO,gBAASC,GAAT,EAAa;AAChB,YAAIC,QAAQ,IAAIC,IAAJ,EAAZ;AACA,YAAIC,yBAAuBF,MAAMG,OAAN,KAAkB,OAAK,EAAL,GAAQ,EAAR,GAAW,EAAX,GAAcJ,GAA3D;AACAC,cAAMI,OAAN,CAAcF,sBAAd,EAHgB,CAGuB;AACvC,YAAIG,QAAQL,MAAMM,WAAN,EAAZ;AACA,YAAIC,SAASP,MAAMQ,QAAN,EAAb;AACA,YAAIC,QAAQT,MAAMU,OAAN,EAAZ;AACAH,iBAAS,KAAKI,aAAL,CAAmBJ,SAAS,CAA5B,CAAT;AACAE,gBAAQ,KAAKE,aAAL,CAAmBF,KAAnB,CAAR;AACA,eAAOF,SAAO,GAAP,GAAWE,KAAX,GAAiB,GAAxB;AACH,KAnGI;AAoGLE,mBAAc,uBAASC,KAAT,EAAe;AACzB,eAAOA,KAAP;AACH,KAtGI;AAuGRC,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AACjC,YAAG,eAAaD,OAAhB,EAAwB;AACjB,iBAAKE,SAAL;AACA,SAFP,MAGW,IAAGF,QAAQG,UAAR,CAAmB,UAAnB,CAAH,EAAkC;AACnC,iBAAKrD,IAAL,GAAUsD,SAASJ,QAAQK,OAAR,CAAgB,UAAhB,EAA2B,EAA3B,CAAT,CAAV;AACA,iBAAK/C,OAAL;AACA,iBAAKF,QAAL;AAEH,SALI,MAMD;AACT,iBAAKkD,MAAL,CAAY,qBAAZ,EAAmCN,OAAnC;AACA;AACD;AApHO,CAAT","file":"UIClubPlayerRecord.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n       layout:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n       \n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(clubId,unionId=0){\n        this.type=0;//默认显示今天的数据\n        this.unionId=unionId;\n        this.clubId=clubId;\n        if(this.unionId>0){\n            this.node.getChildByName(\"bg\").getChildByName(\"tip_shuying\").getComponent(cc.Label).string=\"比赛分\";\n        }else{\n            this.node.getChildByName(\"bg\").getChildByName(\"tip_shuying\").getComponent(cc.Label).string=\"输赢分\";\n        }\n        this.InitLeft();\n        this.InitLeftLb();\n        this.GetData();\n    },\n    GetData:function(){\n        this.DestroyAllChildren(this.layout);\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubPlayerRecord\",{\"clubId\":this.clubId,\"unionId\":this.unionId,\"getType\":this.type}, function(serverPack){\n            self.ShowData(serverPack);\n        }, function(){\n        });\n\n        app.NetManager().SendPack(\"club.CClubPlayerRecordCount\",{\"clubId\":this.clubId,\"unionId\":this.unionId,\"getType\":this.type}, function(serverPack){\n            self.node.getChildByName(\"lb_jushu\").getComponent(cc.Label).string=\"对局数：\"+serverPack.size;\n            self.node.getChildByName(\"lb_dayingjia\").getComponent(cc.Label).string=\"大赢家：\"+serverPack.winner;\n            if(self.unionId>0){\n                self.node.getChildByName(\"lb_shuyingfen\").getComponent(cc.Label).string=\"比赛分：\"+serverPack.sumPoint;\n            }else{\n                self.node.getChildByName(\"lb_shuyingfen\").getComponent(cc.Label).string=\"输赢分：\"+serverPack.sumPoint;\n            }\n            \n        }, function(){\n        });\n    },\n    OnClose:function(){\n        this.DestroyAllChildren(this.layout);\n        this.node.getChildByName(\"lb_jushu\").getComponent(cc.Label).string=\"对局数：\";\n        this.node.getChildByName(\"lb_dayingjia\").getComponent(cc.Label).string=\"大赢家：\";\n        this.node.getChildByName(\"lb_shuyingfen\").getComponent(cc.Label).string=\"\";\n    },\n    ShowData:function(data){\n        let demo=this.node.getChildByName(\"demo\");\n        for(let i=0;i<data.length;i++){\n            let child = cc.instantiate(demo);\n            if(i%2==1){\n                child.getChildByName(\"bg\").active=false;\n            }\n            child.getChildByName(\"lb_jushu\").getComponent(cc.Label).string=data[i].size;\n            child.getChildByName(\"lb_dayingjia\").getComponent(cc.Label).string=data[i].winner;\n            child.getChildByName(\"lb_shuyingfen\").getComponent(cc.Label).string=data[i].sumPoint;\n            child.getChildByName(\"lb_game\").getComponent(cc.Label).string=this.GameId2Name(data[i].gameId);\n            child.active=true;\n            this.layout.addChild(child);\n        }\n    },\n    GameId2Name:function(gameId){\n        return this.ShareDefine.GametTypeID2Name[gameId];\n    },\n    InitLeft:function(){\n        let tab=this.node.getChildByName(\"tab\");\n        for(let i=0;i<tab.children.length;i++){\n            tab.children[i].getChildByName('off').active=i!=this.type;\n            tab.children[i].getChildByName('on').active=i==this.type;\n        }\n    },\n    InitLeftLb:function(){\n        let tab=this.node.getChildByName(\"tab\");\n        for(let i=0;i<tab.children.length;i++){\n            if(i<=2){\n                continue; //今天，昨天，前天\n            }\n            let lb=this.getDay(i);\n            tab.children[i].getChildByName(\"on\").getChildByName(\"lb\").getComponent(cc.Label).string=lb;\n            tab.children[i].getChildByName(\"off\").getChildByName(\"lb\").getComponent(cc.Label).string=lb;\n        }\n    },\n    getDay:function(day){\n        var today = new Date();\n        var targetday_milliseconds=today.getTime() - 1000*60*60*24*day;\n        today.setTime(targetday_milliseconds); //注意，这行是关键代码\n        var tYear = today.getFullYear();\n        var tMonth = today.getMonth();\n        var tDate = today.getDate();\n        tMonth = this.doHandleMonth(tMonth + 1);\n        tDate = this.doHandleMonth(tDate);\n        return tMonth+\"月\"+tDate+\"日\";\n    },\n    doHandleMonth:function(month){\n        return month;\n    },\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n        \tthis.CloseForm();\n        }\n        else if(btnName.startsWith(\"btn_tian\")){\n            this.type=parseInt(btnName.replace(\"btn_tian\",''));\n            this.GetData();\n            this.InitLeft();\n\n        }\n        else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}