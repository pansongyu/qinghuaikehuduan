{"version":3,"sources":["UIClubPromoterAdd.js"],"names":["app","require","cc","Class","extends","properties","editbox","EditBox","OnCreateInit","WeChatManager","NetManager","OnShow","clubId","node","getChildByName","active","ShowUser","data","usernode","heroID","player","headImageUrl","getComponent","Label","string","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","InitHeroHeadImage","OnLoad","ShowHeroHead","sign","click_btn_search","shuru","GetBeiZhuID","isNaN","parseInt","StrIsNumInt","SysNotifyManager","ShowSysMsg","self","SendPack","serverPack","error","click_btn_add","sendPack","that","success","FormManager","GetFormComponentByFormName","ClickLeftBtn","OnClick","btnName","btnNode","CloseForm","OnClose"],"mappings":"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","file":"UIClubPromoterAdd.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n       editbox:cc.EditBox,\n    },\n\n    OnCreateInit: function () {\n        this.WeChatManager=app.WeChatManager();\n        this.NetManager=app.NetManager();\n    },\n    //--------------显示函数-----------------\n    OnShow: function (clubId) {\n        this.clubId=clubId;\n        this.node.getChildByName('user').active=false;\n        this.node.getChildByName('btn_hehuo_add').active=false;\n        this.node.getChildByName('btn_hehuo_yaoqing').active=false;\n    },\n    ShowUser:function(data){\n        let usernode=this.node.getChildByName('user');\n        usernode.active=true;\n        let heroID = data.player[\"pid\"];\n        usernode.heroID=heroID;\n        let headImageUrl = data.player[\"iconUrl\"];\n        usernode.getChildByName('name').getComponent(cc.Label).string=this.ComTool.GetBeiZhuName(heroID,data.player.name);\n        usernode.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        let WeChatHeadImage = usernode.getChildByName('head').getComponent(\"WeChatHeadImage\");\n         //用户头像创建\n        if(heroID && headImageUrl){\n            this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n        }\n        WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n\n        if(data.sign==true){\n            this.node.getChildByName('btn_hehuo_add').active=true;\n            this.node.getChildByName('btn_hehuo_yaoqing').active=false;\n        }else{\n            this.node.getChildByName('btn_hehuo_add').active=false;\n            this.node.getChildByName('btn_hehuo_yaoqing').active=true;\n        }\n    },\n    click_btn_search:function(){\n        let shuru=this.ComTool.GetBeiZhuID(this.editbox.string);\n        if(isNaN(parseInt(shuru)) || !app.ComTool().StrIsNumInt(shuru)){\n            app.SysNotifyManager().ShowSysMsg(\"请输入纯数字的玩家id\", [], 3);\n            return;\n        }\n        let self=this;\n        app.NetManager().SendPack('club.CClubPromotionPidInfo',{'clubId':this.clubId,\"pid\":shuru},function(serverPack){\n            self.ShowUser(serverPack);\n        },function(error){\n            \n        });\n    },\n    click_btn_add:function(){\n        let sendPack={\n            \"clubId\":this.clubId,\n            \"pid\":this.node.getChildByName('user').heroID,\n        };\n        let that=this;\n        this.NetManager.SendPack(\"club.CClubPromotionPidAdd\", sendPack,function(success){\n            that.FormManager.GetFormComponentByFormName(\"ui/club/UIPromoterManager\").ClickLeftBtn(\"btn_PromoterList\"); \n            that.ShowSysMsg(\"操作成功\");\n        },function(error){\n            that.ShowSysMsg(\"已邀请或未找到该玩家或同赛事不同亲友圈不能重复拉人或距离退出该亲友圈不到10分钟\");\n        });\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n           this.CloseForm();\n        }else if('btn_search'==btnName){\n            this.click_btn_search();\n        }else if('btn_hehuo_yaoqing'==btnName){\n            this.click_btn_add();\n            //this.click_btn_yaoqing();\n        }else if('btn_hehuo_add'==btnName){\n            this.click_btn_add();\n        }\n    },\n    \n    OnClose:function(){\n        \n    },\n});"]}