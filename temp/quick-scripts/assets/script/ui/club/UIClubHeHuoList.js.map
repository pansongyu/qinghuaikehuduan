{"version":3,"sources":["UIClubHeHuoList.js"],"names":["app","require","cc","Class","extends","properties","hehuoist_scrollView","ScrollView","hehuolist_layout","Node","hehuolist_demo","OnCreateInit","OnShow","clubId","active","ShowHeHuoList","self","DestroyAllChildren","NetManager","SendPack","serverPack","i","length","node","instantiate","addChild","data","heroID","player","headImageUrl","getChildByName","getComponent","Label","string","ComTool","GetBeiZhuName","name","i18n","t","GetPid","WeChatHeadImage","WeChatManager","InitHeroHeadImage","OnLoad","ShowHeroHead","number","pid","partner","error","RefreshRenMing","btnNode","parent","SetWaitForConfirm","msgID","type","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","clickType","backArgList","OnClick","btnName","CloseForm","destroy","ShowSysMsg","FormManager","ShowForm","ErrLog"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,6BAAoBJ,GAAGK,UADf;AAERC,0BAAiBN,GAAGO,IAFZ;AAGRC,wBAAeR,GAAGO;AAHV,KAHP;;AASL;AACAE,kBAAa,wBAAU,CAEtB,CAZI;;AAcL;;AAEAC,YAAO,gBAASC,MAAT,EAAgB;AACnB,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKH,cAAL,CAAoBI,MAApB,GAA6B,KAA7B;AACA,aAAKC,aAAL;AACH,KApBI;AAqBLA,mBAAc,yBAAU;AACpB,YAAIC,OAAK,IAAT;AACA;AACA,aAAKC,kBAAL,CAAwB,KAAKT,gBAA7B;AACAR,YAAIkB,UAAJ,GAAiBC,QAAjB,CAA0B,2BAA1B,EAAsD,EAAC,UAAS,KAAKN,MAAf,EAAtD,EAA6E,UAASO,UAAT,EAAoB;AAC7F,iBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAED,WAAWE,MAAzB,EAAgCD,GAAhC,EAAoC;AAChC,oBAAIE,OAAKrB,GAAGsB,WAAH,CAAeR,KAAKN,cAApB,CAAT;AACAa,qBAAKT,MAAL,GAAY,IAAZ;AACAE,qBAAKR,gBAAL,CAAsBiB,QAAtB,CAA+BF,IAA/B;AACA,oBAAIG,OAAKN,WAAWC,CAAX,CAAT;AACA,oBAAIM,SAASD,KAAKE,MAAL,CAAY,KAAZ,CAAb;AACA,oBAAIC,eAAeH,KAAKE,MAAL,CAAY,SAAZ,CAAnB;AACAL,qBAAKO,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC7B,GAAG8B,KAA5C,EAAmDC,MAAnD,GAA0DjB,KAAKkB,OAAL,CAAaC,aAAb,CAA2BR,MAA3B,EAAkCD,KAAKE,MAAL,CAAYQ,IAA9C,CAA1D;AACAb,qBAAKO,cAAL,CAAoB,IAApB,EAA0BC,YAA1B,CAAuC7B,GAAG8B,KAA1C,EAAiDC,MAAjD,GAAwDjC,IAAIqC,IAAJ,CAASC,CAAT,CAAW,gBAAX,EAA4B,EAAC,OAAMtB,KAAKkB,OAAL,CAAaK,MAAb,CAAoBZ,MAApB,CAAP,EAA5B,CAAxD;AACAJ,qBAAKI,MAAL,GAAYA,MAAZ;AACA,oBAAIa,kBAAkBjB,KAAKO,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC,iBAAzC,CAAtB;AACC;AACD,oBAAGJ,UAAUE,YAAb,EAA0B;AACtB7B,wBAAIyC,aAAJ,GAAoBC,iBAApB,CAAsCf,MAAtC,EAA8CE,YAA9C;AACH;AACDW,gCAAgBG,MAAhB;AACQH,gCAAgBI,YAAhB,CAA6BjB,MAA7B,EAAoCE,YAApC;AACR;AACAN,qBAAKO,cAAL,CAAoB,KAApB,EAA2BC,YAA3B,CAAwC7B,GAAG8B,KAA3C,EAAkDC,MAAlD,GAAyDP,KAAKmB,MAA9D;;AAEAtB,qBAAKO,cAAL,CAAoB,mBAApB,EAAyCgB,GAAzC,GAA6CnB,MAA7C;AACAJ,qBAAKO,cAAL,CAAoB,kBAApB,EAAwCgB,GAAxC,GAA4CnB,MAA5C;AACAJ,qBAAKO,cAAL,CAAoB,mBAApB,EAAyCgB,GAAzC,GAA6CnB,MAA7C;AACAJ,qBAAKO,cAAL,CAAoB,kBAApB,EAAwCgB,GAAxC,GAA4CnB,MAA5C;AACA,oBAAGD,KAAKqB,OAAL,IAAc,CAAjB,EAAmB;AACfxB,yBAAKO,cAAL,CAAoB,mBAApB,EAAyChB,MAAzC,GAAgD,IAAhD;AACAS,yBAAKO,cAAL,CAAoB,kBAApB,EAAwChB,MAAxC,GAA+C,KAA/C;AACH,iBAHD,MAGM,IAAGY,KAAKqB,OAAL,IAAc,CAAjB,EAAmB;AACrBxB,yBAAKO,cAAL,CAAoB,mBAApB,EAAyChB,MAAzC,GAAgD,KAAhD;AACAS,yBAAKO,cAAL,CAAoB,kBAApB,EAAwChB,MAAxC,GAA+C,IAA/C;AACH;AACJ;AACJ,SAjCD,EAiCE,UAASkC,KAAT,EAAe,CAEhB,CAnCD;AAoCH,KA7DI;AA8DLC,oBAAe,wBAASC,OAAT,EAAiB;AAC5B,YAAGA,QAAQd,IAAR,IAAc,kBAAjB,EAAoC;AAChCc,oBAAQpC,MAAR,GAAe,KAAf;AACAoC,oBAAQC,MAAR,CAAerB,cAAf,CAA8B,mBAA9B,EAAmDhB,MAAnD,GAA0D,IAA1D;AACH,SAHD,MAGK;AACDoC,oBAAQpC,MAAR,GAAe,KAAf;AACAoC,oBAAQC,MAAR,CAAerB,cAAf,CAA8B,kBAA9B,EAAkDhB,MAAlD,GAAyD,IAAzD;AACH;AACJ,KAtEI;AAuEL;AACA;;;;;AAKAsC,uBAAkB,2BAASC,KAAT,EAAeC,IAAf,EAAuC;AAAA,YAAnBC,MAAmB,uEAAZ,EAAY;AAAA,YAATC,KAAS,uEAAH,EAAG;;AACrD,YAAIC,iBAAiBzD,IAAIyD,cAAJ,EAArB;AACAA,uBAAeC,qBAAf,CAAqC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAArC,EAAgEP,KAAhE,EAAuEG,KAAvE;AACAC,uBAAeI,WAAf,CAA2BP,IAA3B,EAAiCD,KAAjC,EAAwCE,MAAxC;AACH,KAjFI;AAkFLI,eAAU,mBAASG,SAAT,EAAoBT,KAApB,EAA2BU,WAA3B,EAAuC;AAC7C,YAAGD,aAAa,MAAhB,EAAuB;AACnB;AACH;AACJ,KAtFI;AAuFL;;AAEHE,aAAQ,iBAASC,OAAT,EAAkBf,OAAlB,EAA0B;AACjC,YAAG,eAAae,OAAhB,EAAwB;AACjB,iBAAKC,SAAL;AACA,SAFP,MAEY,IAAG,sBAAoBD,OAAvB,EAA+B;AACjCjE,gBAAIkB,UAAJ,GAAiBC,QAAjB,CAA0B,yBAA1B,EAAoD,EAAC,UAAS,KAAKN,MAAf,EAAsB,OAAMqC,QAAQJ,GAApC,EAApD;AACA,iBAAKG,cAAL,CAAoBC,OAApB;AAEH,SAJK,MAIA,IAAG,uBAAqBe,OAAxB,EAAgC;AAClCjE,gBAAIkB,UAAJ,GAAiBC,QAAjB,CAA0B,0BAA1B,EAAqD,EAAC,UAAS,KAAKN,MAAf,EAAsB,OAAMqC,QAAQJ,GAApC,EAArD;AACA,iBAAKG,cAAL,CAAoBC,OAApB;AAGH,SALK,MAKA,IAAG,uBAAqBe,OAAxB,EAAgC;AAClC,gBAAIjD,OAAK,IAAT;AACAhB,gBAAIkB,UAAJ,GAAiBC,QAAjB,CAA0B,yBAA1B,EAAoD,EAAC,UAAS,KAAKN,MAAf,EAAsB,OAAMqC,QAAQJ,GAApC,EAApD,EAA6F,UAAS1B,UAAT,EAAoB;AAC7G8B,wBAAQC,MAAR,CAAegB,OAAf;AACH,aAFD,EAEE,UAASnB,KAAT,EAAe;AACbhC,qBAAKoD,UAAL,CAAgB,cAAhB;AACH,aAJD;AAKH,SAPK,MAOA,IAAG,sBAAoBH,OAAvB,EAA+B;AACjCjE,gBAAIqE,WAAJ,GAAkBC,QAAlB,CAA2B,+BAA3B,EAA4D,KAAKzD,MAAjE,EAAyEqC,QAAQJ,GAAjF;AACH,SAFK,MAEA,IAAG,mBAAiBmB,OAApB,EAA4B;AAC9BjE,gBAAIqE,WAAJ,GAAkBC,QAAlB,CAA2B,wBAA3B,EAAqD,KAAKzD,MAA1D;AACH,SAFK,MAEA,IAAG,oBAAkBoD,OAArB,EAA6B;AAC/B,iBAAKC,SAAL;AACAlE,gBAAIqE,WAAJ,GAAkBC,QAAlB,CAA2B,6BAA3B,EAA0D,KAAKzD,MAA/D;AACH,SAHK,MAGA,IAAG,wBAAsBoD,OAAzB,EAAiC;AACnCjE,gBAAIqE,WAAJ,GAAkBC,QAAlB,CAA2B,6BAA3B;AACH,SAFK,MAED;AACV,iBAAKC,MAAL,CAAY,qBAAZ,EAAmCN,OAAnC;AACA;AACD;AAxHO,CAAT","file":"UIClubHeHuoList.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        hehuoist_scrollView:cc.ScrollView,\n        hehuolist_layout:cc.Node,\n        hehuolist_demo:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(clubId){\n        this.clubId = clubId;\n        this.hehuolist_demo.active = false;\n        this.ShowHeHuoList();\n    },\n    ShowHeHuoList:function(){\n        let self=this;\n        //this.hehuolist_layout.removeAllChildren();\n        this.DestroyAllChildren(this.hehuolist_layout);\n        app.NetManager().SendPack('club.CClubPartnerInfoList',{'clubId':this.clubId},function(serverPack){\n            for(let i=0;i<serverPack.length;i++){\n                let node=cc.instantiate(self.hehuolist_demo);\n                node.active=true;\n                self.hehuolist_layout.addChild(node);\n                let data=serverPack[i];\n                let heroID = data.player[\"pid\"];\n                let headImageUrl = data.player[\"iconUrl\"];\n                node.getChildByName('name').getComponent(cc.Label).string=self.ComTool.GetBeiZhuName(heroID,data.player.name);\n                node.getChildByName('id').getComponent(cc.Label).string=app.i18n.t(\"UIMain_PIDText\",{\"pid\":self.ComTool.GetPid(heroID)});\n                node.heroID=heroID;\n                let WeChatHeadImage = node.getChildByName('head').getComponent(\"WeChatHeadImage\");\n                 //用户头像创建\n                if(heroID && headImageUrl){\n                    app.WeChatManager().InitHeroHeadImage(heroID, headImageUrl);\n                }\n                WeChatHeadImage.OnLoad();\n                        WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n                //显示玩家数\n                node.getChildByName('num').getComponent(cc.Label).string=data.number;\n\n                node.getChildByName('btn_hehuo_renming').pid=heroID;\n                node.getChildByName('btn_hehuo_xieren').pid=heroID;\n                node.getChildByName('btn_hehuo_shanchu').pid=heroID;\n                node.getChildByName('btn_hehuo_xiashu').pid=heroID;\n                if(data.partner==0){\n                    node.getChildByName('btn_hehuo_renming').active=true;\n                    node.getChildByName('btn_hehuo_xieren').active=false;\n                }else if(data.partner==1){\n                    node.getChildByName('btn_hehuo_renming').active=false;\n                    node.getChildByName('btn_hehuo_xieren').active=true;\n                }\n            }\n        },function(error){\n\n        });\n    },\n    RefreshRenMing:function(btnNode){\n        if(btnNode.name==\"btn_hehuo_xieren\"){\n            btnNode.active=false;\n            btnNode.parent.getChildByName('btn_hehuo_renming').active=true;\n        }else{\n            btnNode.active=false;\n            btnNode.parent.getChildByName('btn_hehuo_xieren').active=true;\n        }\n    },\n    //---------点击函数---------------------\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[]){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n    },\n    //---------点击函数---------------------\n\n\tOnClick:function(btnName, btnNode){\n\t\tif('btn_close'==btnName){\n        \tthis.CloseForm();\n        }else if('btn_hehuo_xieren'==btnName){\n            app.NetManager().SendPack('club.CClubPartnerCancel',{'clubId':this.clubId,\"pid\":btnNode.pid});\n            this.RefreshRenMing(btnNode);\n\n        }else if('btn_hehuo_renming'==btnName){\n            app.NetManager().SendPack('club.CClubPartnerAppoint',{'clubId':this.clubId,\"pid\":btnNode.pid});\n            this.RefreshRenMing(btnNode);\n\n\n        }else if('btn_hehuo_shanchu'==btnName){\n            let self=this;\n            app.NetManager().SendPack('club.CClubPartnerDelete',{'clubId':this.clubId,\"pid\":btnNode.pid},function(serverPack){\n                btnNode.parent.destroy();\n            },function(error){\n                self.ShowSysMsg('合伙人玩家数为1才能删除');\n            });\n        }else if('btn_hehuo_xiashu'==btnName){\n            app.FormManager().ShowForm('ui/club/UIClubHeHuoXiaShuList', this.clubId, btnNode.pid);\n        }else if('btn_hehuo_add'==btnName){\n            app.FormManager().ShowForm('ui/club/UIClubHeHuoAdd', this.clubId);\n        }else if('btn_hehuo_yeji'==btnName){\n            this.CloseForm();\n            app.FormManager().ShowForm('ui/club/UIClubHeHuoYeJiList', this.clubId);\n        }else if('btn_hehuo_shuoming'==btnName){\n            app.FormManager().ShowForm('ui/club/UIClubHeHuoShuoMing');\n        }else{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}