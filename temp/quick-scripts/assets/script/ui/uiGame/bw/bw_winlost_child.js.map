{"version":3,"sources":["bw_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","prefab_zhadan","Prefab","prefab_card","lb1","Label","lbSportsPoint","OnLoad","ComTool","ShareDefine","PokerCard","ShowPlayerJieSuan","ShowPlayerHuaCard","ShowPlayerHuImg","huNode","huTypeName","huType","HuTypeStringDict","getComponent","string","HuType_DianPao","HuType_JiePao","HuType_ZiMo","HuType_QGH","onPlusScore","s","ShowPlayerData","setEnd","playerAll","index","console","log","jin1","jin2","dPos","posResultList","posHuArray","Array","posCount","length","i","posInfo","pos","posHuType","PlayerInfo","node","active","UpdatePlayData","getChildByName","WeChatManager","InitHeroHeadImage","weChatHeadImage","ShowHeroHead","posEndList","str","baseScore","rewardCount","rewardScore","point","sportsPoint","prizeCardList","zhaDanLayOut","removeAllChildren","prizeCard","bompList","l","push","createZhaDanNode","j","children","paiNode","zhashu","pailist","num","createCardNode","k","cardNode","cardValue","ShowCard","cardType","isShowIcon1","realValue","GetPokeCard","layOutNode","card","instantiate","name","addChild","LabelName","huTypeDict","QDHu","Gang","JieGang","QYS","Long","HunYou","AnGang","Hu"],"mappings":"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","file":"bw_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\bw","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseMJ_winlost_child\"),\n\n    properties: {\n        prefab_zhadan: cc.Prefab,\n        prefab_card: cc.Prefab,\n        lb1: cc.Label,\n        lbSportsPoint: cc.Label,\n    },\n\n    // use this for initialization\n    OnLoad: function () {\n        this.ComTool = app.ComTool();\n        this.ShareDefine = app.ShareDefine();\n        this.PokerCard = app.PokerCard();\n    },\n    ShowPlayerJieSuan() {\n\n    },\n    ShowPlayerHuaCard() {\n\n    },\n    ShowPlayerHuImg: function (huNode, huTypeName) {\n        /*huLbIcon\n        *  0:单吊，1：点炮，2：单游，3：胡，4：六金，5：平胡，6:抢杠胡 7:抢金，8：三游，9：四金倒，10：三金倒，11：三金游，12：十三幺\n        *  13：双游，14：天胡，15：五金，16：自摸 17:接炮\n        */\n        let huType = this.ShareDefine.HuTypeStringDict[huTypeName];\n        if (typeof (huType) == \"undefined\") {\n            huNode.getComponent(cc.Label).string = '';\n        } else if (huType == this.ShareDefine.HuType_DianPao) {\n            huNode.getComponent(cc.Label).string = '点泡';\n        } else if (huType == this.ShareDefine.HuType_JiePao) {\n            huNode.getComponent(cc.Label).string = '接炮';\n        } else if (huType == this.ShareDefine.HuType_ZiMo) {\n            huNode.getComponent(cc.Label).string = '自摸';\n        } else if (huType == this.ShareDefine.HuType_QGH) {\n            huNode.getComponent(cc.Label).string = '抢杠胡';\n        } else {\n            huNode.getComponent(cc.Label).string = '';\n        }\n    },\n\n    onPlusScore(s) {\n        if (s > 0) {\n            return '+' + s;\n        }\n        return s;\n    },\n\n    ShowPlayerData: function (setEnd, playerAll, index) {\n        console.log('包王单局战绩数据', setEnd, playerAll, index);\n        let jin1 = setEnd.jin1;\n        let jin2 = setEnd.jin2;\n        let dPos = setEnd.dPos;\n        let posResultList = setEnd[\"posResultList\"];\n        let posHuArray = new Array();\n        let posCount = posResultList.length;\n        for (let i = 0; i < posCount; i++) {\n            let posInfo = posResultList[i];\n            let pos = posInfo[\"pos\"];\n            let posHuType = this.ShareDefine.HuTypeStringDict[posInfo[\"huType\"]];\n            posHuArray[pos] = posHuType;\n        }\n        let PlayerInfo = playerAll[index];\n        this.node.active = true;\n        this.UpdatePlayData(this.node, posResultList[index], PlayerInfo, jin1, jin2);\n        let huNode = this.node.getChildByName('jiesuan').getChildByName('hutype');\n        this.ShowPlayerHuImg(huNode, posResultList[index]['huType']);\n\n        if (dPos === index) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        }\n        //显示头像，如果头像UI\n        if (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n            app.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n        }\n        let weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        weChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n\n\n        //\n        let posEndList = posResultList[index];\n\n        //显示头游\n        let str = '';\n        //输赢分\n        str += '输赢分:'\n        str += this.onPlusScore(posEndList.baseScore) + '  ';\n\n        //赏数\n        str += '赏数:';\n        str += this.onPlusScore(posEndList.rewardCount) + '  ';\n\n        //赏分\n        str += '赏分:';\n        str += this.onPlusScore(posEndList.rewardScore) + '  ';\n        //得分\n        str += '得分:';\n        str += this.onPlusScore(posEndList.point) + '  ';\n        this.lb1.string = str;\n\n        if (posEndList.sportsPoint) {\n            this.lbSportsPoint.string = '比赛分:' + posEndList.sportsPoint;\n        }\n\n        //\n        // if (posEndList.totalPoint > 0) {\n        //     PlayerNode.getChildByName('lb_zdf').getComponent(cc.Label).string = \"+\" + posEndList.totalPoint;\n        // } else {\n        //     PlayerNode.getChildByName('lb_zdf').getComponent(cc.Label).string = posEndList.totalPoint;\n        // }\n\n        //显示牌\n        let prizeCardList = [];\n        let zhaDanLayOut = this.node.getChildByName('zhadan');\n        zhaDanLayOut.removeAllChildren();\n        console.log('当前显示的玩家是', posEndList);\n        let prizeCard = posEndList.bompList;//[cardList:{}]\n        for (let l = 0; l < prizeCard.length; l++) {\n            prizeCardList.push(prizeCard[l][\"cardList\"]);\n            this.createZhaDanNode(zhaDanLayOut, l);\n        }\n\n        for (let j = 0; j < zhaDanLayOut.children.length; j++) {\n            let paiNode = zhaDanLayOut.getChildByName('zhadan' + j);\n            if (prizeCardList[j]) {\n                let zhashu = prizeCardList[j].length;\n                let pailist = prizeCardList[j];\n                paiNode.getChildByName('lb_num').getComponent(cc.Label).string = 'x' + zhashu;\n                let num = zhashu;\n                this.createCardNode(paiNode, num);\n                for (let k = 0; k < num; k++) {\n                    let cardNode = paiNode.getChildByName('layout').getChildByName('handCard' + (k + 1));\n                    let cardValue = pailist[k];\n                    if (cardValue) {\n                        if (k + 1 == pailist.length) {\n                            this.ShowCard(cardValue, cardNode, true);\n                        } else {\n                            this.ShowCard(cardValue, cardNode, false);\n                        }\n                        cardNode.active = true;\n                    } else {\n                        cardNode.active = false;\n                    }\n\n                }\n                paiNode.active = true;\n            } else {\n                paiNode.active = false;\n            }\n\n        }\n    },\n\n    ShowCard: function (cardType, cardNode, isShowIcon1) {\n        cardNode.active = true;\n        let realValue = 0;\n        if (cardType > 500) {\n            realValue = cardType - 500;\n        } else {\n            realValue = cardType;\n        }\n        cardNode.active = true;\n        if (cardType == 0) {\n            cardNode.getChildByName(\"poker_back\").active = true;\n            return;\n        } else {\n            cardNode.getChildByName(\"poker_back\").active = false;\n        }\n        this.PokerCard.GetPokeCard(realValue, cardNode, {}, isShowIcon1);\n    },\n\n    createCardNode: function (paiNode, num) {\n        let layOutNode = paiNode.getChildByName('layout');\n        layOutNode.removeAllChildren();\n        for (let i = 1; i < num + 1; i++) {\n            let card = cc.instantiate(this.prefab_card);//this# two\n            card.name = \"handCard\" + i;\n            layOutNode.addChild(card);\n        }\n    },\n\n    createZhaDanNode: function (zhaDanLayOut, num) {\n        //\n        let card = cc.instantiate(this.prefab_zhadan);//this# one\n        card.name = \"zhadan\" + num;\n        zhaDanLayOut.addChild(card);\n    },\n\n    LabelName: function (huType) {\n        let huTypeDict = {\n            QDHu: \"七对胡\",\n            Gang: \"杠\",\n            JieGang: \"接杠\",\n            QYS: \"清一色\",\n            Long: \"一条龙\",\n            HunYou: \"混悠\",\n            AnGang: \"暗杠\",\n            Hu: \"胡\",\n        };\n        return huTypeDict[huType];\n    },\n});\n"]}