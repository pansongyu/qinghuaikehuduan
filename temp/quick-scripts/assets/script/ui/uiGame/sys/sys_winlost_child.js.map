{"version":3,"sources":["sys_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","prefab_zhadan","Prefab","prefab_card","lb1","Label","lbSportsPoint","you_icon","SpriteFrame","OnLoad","GetModel","ComTool","ShareDefine","PokerCard","gz_PokerCard","ShowPlayerJieSuan","ShowPlayerHuaCard","ShowPlayerHuImg","huNode","huTypeName","huType","HuTypeStringDict","getComponent","string","HuType_DianPao","HuType_JiePao","HuType_ZiMo","HuType_QGH","onPlusScore","s","ShowPlayerData","setEnd","playerAll","index","myPid","HeroManager","GetHeroProperty","posResultList","clientPos","partnerPosList","i","length","posResultInfo","pid","partnerPos","push","pos","indexOf","jin1","jin2","dPos","posHuArray","Array","posCount","posInfo","posHuType","PlayerInfo","node","active","UpdatePlayData","getChildByName","WeChatManager","InitHeroHeadImage","weChatHeadImage","ShowHeroHead","posEndList","isShowPartner","endType","endTypeNode","ShowYou","str","roomPoint","sportsPoint","youDict","NOT","ONE","TWO","THREE","FOUR","Five","SIX","Sprite","spriteFrame","ShowCard","cardType","cardNode","sameCardNum","isLastCard","isShowLandowner","hideBg","isRazz","GetPokeCard","createCardNode","paiNode","num","layOutNode","removeAllChildren","card","instantiate","name","addChild","createZhaDanNode","zhaDanLayOut","LabelName","huTypeDict","QDHu"],"mappings":"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","file":"sys_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\sys","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseMJ_winlost_child\"),\n\n    properties: {\n        prefab_zhadan: cc.Prefab,\n        prefab_card: cc.Prefab,\n        lb1: cc.Label,\n        lbSportsPoint: cc.Label,\n        you_icon: [cc.SpriteFrame],\n    },\n\n    // use this for initialization\n    OnLoad: function () {\n        app[\"gz_PokerCard\"] = require(\"gz_PokerCard\").GetModel;\n        this.ComTool = app.ComTool();\n        this.ShareDefine = app.ShareDefine();\n        this.PokerCard = app.gz_PokerCard();\n    },\n    ShowPlayerJieSuan() {\n\n    },\n    ShowPlayerHuaCard() {\n\n    },\n    ShowPlayerHuImg: function (huNode, huTypeName) {\n        /*huLbIcon\n         *  0:单吊，1：点炮，2：单游，3：胡，4：六金，5：平胡，6:抢杠胡 7:抢金，8：三游，9：四金倒，10：三金倒，11：三金游，12：十三幺\n         *  13：双游，14：天胡，15：五金，16：自摸 17:接炮\n         */\n        let huType = this.ShareDefine.HuTypeStringDict[huTypeName];\n        if (typeof (huType) == \"undefined\") {\n            huNode.getComponent(cc.Label).string = '';\n        } else if (huType == this.ShareDefine.HuType_DianPao) {\n            huNode.getComponent(cc.Label).string = '点泡';\n        } else if (huType == this.ShareDefine.HuType_JiePao) {\n            huNode.getComponent(cc.Label).string = '接炮';\n        } else if (huType == this.ShareDefine.HuType_ZiMo) {\n            huNode.getComponent(cc.Label).string = '自摸';\n        } else if (huType == this.ShareDefine.HuType_QGH) {\n            huNode.getComponent(cc.Label).string = '抢杠胡';\n        } else {\n            huNode.getComponent(cc.Label).string = '';\n        }\n    },\n\n    onPlusScore(s) {\n        if (s > 0) {\n            return '+' + s;\n        }\n        return s;\n    },\n\n    ShowPlayerData: function (setEnd, playerAll, index) {\n        let myPid = app.HeroManager().GetHeroProperty(\"pid\");\n        this.posResultList = setEnd[\"posResultList\"];\n\n        let clientPos = -1;\n        let partnerPosList = [];\n        // let enemyPosList = [];\n        for (let i = 0; i < this.posResultList.length; i++) {\n            let posResultInfo = this.posResultList[i];\n            let pid = posResultInfo[\"pid\"];\n            if (myPid == pid) {\n                clientPos = posResultInfo[\"pos\"];\n                let partnerPos = posResultInfo[\"partnerPos\"];\n                partnerPosList.push(clientPos);\n                partnerPosList.push(partnerPos);\n                // enemyPosList = posResultInfo.enemyPosList;\n                break;\n            }\n        }\n\n        for (let i = 0; i < this.posResultList.length; i++) {\n            let posResultInfo = this.posResultList[i];\n            let pos = posResultInfo.pos;\n            if (partnerPosList.indexOf(pos) > -1) {\n                posResultInfo[\"isShowPartner\"] = true;\n            }\n            else {\n                posResultInfo[\"isShowPartner\"] = false;\n            }\n        }\n\n        let jin1 = setEnd.jin1;\n        let jin2 = setEnd.jin2;\n        let dPos = setEnd.dPos;\n        let posResultList = setEnd[\"posResultList\"];\n        let posHuArray = new Array();\n        let posCount = posResultList.length;\n        for (let i = 0; i < posCount; i++) {\n            let posInfo = posResultList[i];\n            let pos = posInfo[\"pos\"];\n            let posHuType = this.ShareDefine.HuTypeStringDict[posInfo[\"huType\"]];\n            posHuArray[pos] = posHuType;\n        }\n        let PlayerInfo = playerAll[index];\n        this.node.active = true;\n        this.UpdatePlayData(this.node, posResultList[index], PlayerInfo, jin1, jin2);\n        let huNode = this.node.getChildByName('jiesuan').getChildByName('hutype');\n        this.ShowPlayerHuImg(huNode, posResultList[index]['huType']);\n\n        if (dPos === index) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        }\n        //显示头像，如果头像UI\n        if (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n            app.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n        }\n        let weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        weChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n\n\n\n        //\n        let posEndList = posResultList[index];\n        let isShowPartner = posEndList.isShowPartner;\n        this.node.getChildByName(\"img_di\").active = !isShowPartner;\n        this.node.getChildByName(\"img_you\").active = isShowPartner;\n\n        let endType = posEndList[\"endType\"];\n        let endTypeNode = this.node.getChildByName(\"img_youCount\");\n        this.ShowYou(endTypeNode, endType);\n\n        //显示头游\n        let str = '';\n\n        // str += '吃分:';\n        // str += this.onPlusScore(posEndList[\"k510Point\"]) + '  ';\n\n        str += '总战绩:';\n        str += this.onPlusScore(posEndList.roomPoint) + '  ';\n\n        this.lb1.string = str;\n\n        if (typeof (posEndList.sportsPoint) != \"undefined\") {\n            this.lbSportsPoint.string = '比赛分:' + posEndList.sportsPoint;\n        } else {\n            this.lbSportsPoint.string = '';\n        }\n    },\n    ShowYou: function (node, endType) {\n        let youDict = {\n            NOT: -1,\n            ONE: 0,\n            TWO: 1,\n            THREE: 2,\n            FOUR: 3,\n            Five: 4,\n            SIX: 5,\n        };\n        node.getComponent(cc.Sprite).spriteFrame = this.you_icon[youDict[endType]] || \"\";\n    },\n    ShowCard: function (cardType, cardNode, sameCardNum, isLastCard, isShowLandowner = false, hideBg = false, isRazz = false) {\n        cardNode.active = true;\n        if (cardType == 0) {\n            cardNode.getChildByName(\"poker_back\").active = true;\n            return;\n        } else {\n            cardNode.getChildByName(\"poker_back\").active = false;\n        }\n        this.PokerCard.GetPokeCard(cardType, cardNode, sameCardNum, isLastCard, isShowLandowner, hideBg, isRazz);\n\n    },\n\n    createCardNode: function (paiNode, num) {\n        let layOutNode = paiNode.getChildByName('layout');\n        layOutNode.removeAllChildren();\n        for (let i = 1; i < num + 1; i++) {\n            let card = cc.instantiate(this.prefab_card);//this# two\n            card.name = \"handCard\" + i;\n            layOutNode.addChild(card);\n        }\n    },\n\n    createZhaDanNode: function (zhaDanLayOut, num) {\n        //\n        let card = cc.instantiate(this.prefab_zhadan);//this# one\n        card.name = \"zhadan\" + num;\n        zhaDanLayOut.addChild(card);\n    },\n\n    LabelName: function (huType) {\n        let huTypeDict = {\n            QDHu: \"七对胡\",\n        };\n        return huTypeDict[huType];\n    },\n});\n"]}