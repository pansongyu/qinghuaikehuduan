{"version":3,"sources":["scnjmj_detail_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ShowPlayerData","resultsList","playerAll","idx","data","userInfo","node","getChildByName","getComponent","ShowHeroHead","pid","Label","string","ComTool","GetPid","index","player","name","jiesuan","show","showLabel","huTypesShow","point","active","sportsPoint","maxPoint","maxDianPao","i","length","dianPaoPoint","dissolveState","imagePath","that","loader","loadRes","SpriteFrame","error","spriteFrame","console","log","Sprite","huData","jiepao","GetJiePaoCount","hupaiNum","huTypes"],"mappings":"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","file":"scnjmj_detail_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\scnjmj","sourcesContent":["/*\n\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseComponent\"),\n\n    properties: {\n    },\n\n    // use this for initialization\n    OnLoad: function () {\n\n    },\n    ShowPlayerData: function (resultsList, playerAll, idx) {\n        let data = resultsList[idx];\n        let userInfo = this.node.getChildByName(\"user_info\");\n        if (userInfo) {\n            userInfo.getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\").ShowHeroHead(data.pid);\n            userInfo.getChildByName(\"label_id\").getComponent(cc.Label).string = \"ID:\" + app.ComTool().GetPid(data.pid);\n            for (let index in playerAll) {\n                let player = playerAll[index];\n                if (player.pid == data.pid) {\n                    userInfo.getChildByName(\"lable_name\").getComponent(cc.Label).string = player.name;\n                    // if(player.sex==app.ShareDefine().HeroSex_Boy){\n                    //     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteMale;\n                    // }else if(player.sex==app.ShareDefine().HeroSex_Girl){\n                    //     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteFeMale;\n                    // }\n                    break;\n                }\n            }\n        }\n\n        let jiesuan = this.node.getChildByName(\"jiesuan\");\n        let show = 1;\n        let showLabel = false;\n        if (jiesuan) {\n            this.huTypesShow(jiesuan, data);\n            if (data.point >= 0) {\n                jiesuan.getChildByName(\"lb_win\").active = true;\n                jiesuan.getChildByName(\"lb_lost\").active = false;\n                jiesuan.getChildByName(\"lb_win\").getComponent(cc.Label).string = '+' + data.point;\n            } else {\n                jiesuan.getChildByName(\"lb_win\").active = false;\n                jiesuan.getChildByName(\"lb_lost\").active = true;\n                jiesuan.getChildByName(\"lb_lost\").getComponent(cc.Label).string = data.point;\n            }\n            //比赛分\n            if (typeof (data.sportsPoint) != \"undefined\") {\n                jiesuan.getChildByName(\"lb_sportsPoint\").active = true;\n                if (data.sportsPoint > 0) {\n                    jiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：+\" + data.sportsPoint;\n                } else {\n                    jiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：\" + data.sportsPoint;\n                }\n            } else {\n                jiesuan.getChildByName(\"lb_sportsPoint\").active = false;\n            }\n        }\n        let maxPoint = 0;\n        let maxDianPao = 0;\n        for (let i = 0; i < resultsList.length; i++) {\n            let data = resultsList[i];\n            if (data.point > maxPoint) {\n                maxPoint = data.point;\n            }\n            if (data.dianPaoPoint > maxDianPao) {\n                maxDianPao = data.dianPaoPoint;\n            }\n        }\n        //显示大赢家图标\n        if (data.dianPaoPoint >= maxDianPao && maxDianPao > 0) {\n            this.node.getChildByName('icon_paoshou').active = true;\n        } else {\n            this.node.getChildByName('icon_paoshou').active = false;\n        }\n        if (data.point >= maxPoint) {\n            this.node.getChildByName('icon_win').active = true;\n            this.node.getChildByName('icon_paoshou').active = false;\n        } else {\n            this.node.getChildByName('icon_win').active = false;\n        }\n\n        if (this.node.getChildByName('icon_dissolve') != null) {\n            //显示是否解散（-1:正常结束,0:未操作,1:同意操作,2:拒绝操作,3:发起者）\n            if (typeof (data.dissolveState) == \"undefined\" || data.dissolveState == -1) {\n                this.node.getChildByName('icon_dissolve').active = false;\n            } else {\n                let imagePath = \"texture/record/img_dissolve\" + data.dissolveState;\n                let that = this;\n                //加载图片精灵\n                cc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\n                    if (error) {\n                        console.log(\"加载图片精灵失败  \" + imagePath);\n                        return\n                    }\n                    that.node.getChildByName('icon_dissolve').getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                    that.node.getChildByName('icon_dissolve').active = true;\n                });\n            }\n        }\n    },\n\n    huTypesShow: function (jiesuan, huData) {\n\t\tlet jiepao = this.GetJiePaoCount(huData);\n\t\tlet hupaiNum = huData.huTypes.length - jiepao;\n        jiesuan.getChildByName('top').getChildByName('hupai').getComponent(cc.Label).string = hupaiNum;\n        jiesuan.getChildByName('top').getChildByName('jiepao').getComponent(cc.Label).string = jiepao;\n        jiesuan.getChildByName('top').getChildByName('dianpao').getComponent(cc.Label).string = huData.dianPaoPoint;\n        // jiesuan.getChildByName('top').getChildByName('lb_sanyou').getComponent(cc.Label).string = huData.sanYouPoint;\n        // jiesuan.getChildByName('top').getChildByName('lb_kaigang').getComponent(cc.Label).string = huData.kaiGangPoint;\n    },\n\n\tGetJiePaoCount: function (huData) {\n\t\tlet jiepao = 0;\n\t\tfor (let i = 0; i < huData.huTypes.length; i++) {\n\t\t\tif (huData.huTypes[i] == 'JiePao') {\n\t\t\t\tjiepao++;\n\t\t\t}\n\t\t}\n\t\treturn jiepao;\n\t},\n});\n"]}