{"version":3,"sources":["ytmj_UIMJCard_Down.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","JS_Name","node","name","ShareDefine","ChildCount","PaiChildCount","ComTool","SysDataManager","IntegrateImage","GetTableDict","HideAllChild","index","childName","StringAddNumSuffix","childNode","getChildByName","active","indexChild","paiChildName","paiNode","ErrLog","paiSprite","getComponent","Sprite","da","zhi","spriteFrame","ShowDownCard","publicCardList","jin1","jin2","imageString","count","length","publicInfoList","cardIDList","slice","opType","OpType_AnGang","cardCount","cardIndex","cardID","childPath","join","find","ShowImage","ShowJinBg","cardSprite","Pos2Show","pos","RoomPosMgr","RoomMgr","GetEnterRoom","GetRoomPosMgr","clientPos","GetClientPos","downPos","GetClientDownPos","facePos","GetClientFacePos","upPos","GetClientUpPos","ShowTipOutCard","room","roomSet","GetRoomSet","get_jin1","get_jin2","paiIndex","CardType","Math","floor","color","ShowAllOutEatCard","nodeParentName","parent","roomPosMgr","indexOf","is3DShow","setPos","GetSetPosByPos","GetSetPosProperty","Log","benpos","cardbgPos","cardIDPos","getCardID","OpType_Gang","OpType_JieGang","showPos","GetRoomPlayerCount","rotate","roateIcon","ShowZhi","imageName","imageInfo","imagePath","that","childSprite","ControlManager","CreateLoadPromise","SpriteFrame","then","catch","error","stack"],"mappings":"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","file":"ytmj_UIMJCard_Down.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\ytmj","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseComponent\"),\n\n\tproperties: {},\n\n\t// use this for initialization\n\tOnLoad: function () {\n\t\tthis.JS_Name = this.node.name + \"_UIMJCard_Down\";\n\t\tthis.ShareDefine = app.ShareDefine();\n\t\tthis.ChildCount = 5;\n\t\tthis.PaiChildCount = 4;\n\t\tthis.ComTool = app.ComTool();\n\t\tthis.SysDataManager = app.SysDataManager();\n\t\tthis.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\n\t\tthis.HideAllChild();\n\t},\n\tHideAllChild: function () {\n\t\tfor (let index = 1; index <= this.ChildCount; index++) {\n\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"down\", index, 2);\n\t\t\tlet childNode = this.node.getChildByName(childName);\n\t\t\tif (!childNode) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tchildNode.active = false;\n\t\t\tfor (let indexChild = 1; indexChild <= this.PaiChildCount; indexChild++) {\n\t\t\t\tlet paiChildName = this.ComTool.StringAddNumSuffix(\"card\", indexChild, 2);\n\t\t\t\tlet paiNode = childNode.getChildByName(paiChildName);\n\t\t\t\tif (!paiNode) {\n\t\t\t\t\tthis.ErrLog(\"HideAllChild(%s) not find:%s\", childName, paiChildName);\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tlet paiSprite = paiNode.getComponent(cc.Sprite);\n\t\t\t\tlet da = paiNode.getChildByName('da');\n\t\t\t\tif (da != null) {\n\t\t\t\t\tda.active = false;\n\t\t\t\t}\n\t\t\t\tlet zhi = paiNode.getChildByName('zhi');\n\t\t\t\tif (zhi != null) {\n\t\t\t\t\tzhi.active = false;\n\t\t\t\t}\n\t\t\t\tpaiSprite.spriteFrame = null;\n\t\t\t}\n\t\t}\n\t},\n\n\tShowDownCard: function (publicCardList, jin1, jin2, imageString = 'EatCard_Self_') {\n\t\tlet count = 0;\n\t\tif (typeof(publicCardList) != \"undefined\") {\n\t\t\tcount = publicCardList.length;\n\t\t}\n\t\tfor (let index = 0; index < count; index++) {\n\t\t\tlet publicInfoList = publicCardList[index];\n\t\t\tlet cardIDList = publicInfoList.slice(3, publicInfoList.length);\n\t\t\t//操作类型\n\t\t\tlet opType = publicInfoList[0];\n\t\t\t//如果是暗杠,前面3个盖牌，最后一个显示牌\n\t\t\tif (opType == this.ShareDefine.OpType_AnGang) {\n\t\t\t\tif (cardIDList.length = 4) {\n\t\t\t\t\tcardIDList = [0, 0, 0, cardIDList[0]];\n\t\t\t\t} else if (cardIDList.length = 3) {\n\t\t\t\t\tcardIDList = [0, cardIDList[0], 0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"down\", index + 1, 2);\n\t\t\tlet childNode = this.node.getChildByName(childName);\n\t\t\tif (!childNode) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tchildNode.active = true;\n\t\t\tlet cardCount = cardIDList.length;\n\t\t\tfor (let cardIndex = 0; cardIndex < cardCount; cardIndex++) {\n\t\t\t\tlet cardID = cardIDList[cardIndex];\n\t\t\t\tlet paiChildName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex + 1, 2);\n\t\t\t\tlet childPath = [childName, paiChildName].join(\"/\");\n\t\t\t\tlet childNode = cc.find(childPath, this.node);\n\t\t\t\tif (!childNode) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tthis.ShowImage(childNode, imageString, cardID);\n\t\t\t\tthis.ShowJinBg(cardID, childNode, jin1, jin2);\n\t\t\t}\n\t\t\t//设置多余的卡牌位置空\n\t\t\tfor (let cardIndex = cardCount + 1; cardIndex <= this.PaiChildCount; cardIndex++) {\n\t\t\t\tlet paiChildName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex, 2);\n\t\t\t\tlet childPath = [childName, paiChildName].join(\"/\");\n\t\t\t\tlet childNode = cc.find(childPath, this.node);\n\t\t\t\tif (!childNode) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tlet cardSprite = childNode.getComponent(cc.Sprite);\n\t\t\t\tcardSprite.spriteFrame = null;\n\n\t\t\t}\n\t\t}\n\n\t\t//隐藏掉剩余的卡牌\n\t\tfor (let index = count + 1; index <= this.ChildCount; index++) {\n\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"down\", index, 2);\n\t\t\tlet childNode = this.node.getChildByName(childName);\n\t\t\tif (!childNode) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tchildNode.active = false;\n\t\t}\n\t},\n\tPos2Show: function (pos) {\n\t\tlet RoomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\n\t\tlet clientPos = RoomPosMgr.GetClientPos();\n\t\tlet downPos = RoomPosMgr.GetClientDownPos();\n\t\tlet facePos = RoomPosMgr.GetClientFacePos();\n\t\tlet upPos = RoomPosMgr.GetClientUpPos();\n\t\tif (pos == clientPos) {\n\t\t\treturn 1;\n\t\t} else if (pos == downPos) {\n\t\t\treturn 2;\n\t\t} else if (pos == facePos) {\n\t\t\treturn 3;\n\t\t} else if (pos == upPos) {\n\t\t\treturn 4;\n\t\t}\n\t\treturn -1;\n\t},\n\n\tShowTipOutCard: function (cardID) {\n\t\tlet room = this.RoomMgr.GetEnterRoom();\n\t\tlet roomSet = room.GetRoomSet();\n\t\tlet jin1 = roomSet.get_jin1();\n\t\tlet jin2 = roomSet.get_jin2();\n\n\n\t\tfor (let index = 1; index <= this.ChildCount; index++) {\n\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"down\", index, 2);\n\t\t\tlet childNode = this.node.getChildByName(childName);\n\t\t\tif (!childNode) {\n\t\t\t\tthis.ErrLog(\"ShowTipOutCard not find:%s\", childName);\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tfor (let paiIndex = 1; paiIndex <= this.PaiChildCount; paiIndex++) {\n\t\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"card\", paiIndex, 2);\n\t\t\t\tlet paiNode = childNode.getChildByName(childName);\n\t\t\t\tif (!paiNode) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tif ((jin1 > 0 && paiNode.CardType == Math.floor(jin1 / 100)) || (jin2 > 0 && paiNode.CardType == Math.floor(jin2 / 100))) {\n\t\t\t\t\tif (paiNode.CardType != 0) {\n\t\t\t\t\t\tpaiNode.color = cc.color(255, 255, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpaiNode.color = cc.color(255, 255, 255);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (Math.floor(cardID / 100) == paiNode.CardType) {\n\t\t\t\t\t\tpaiNode.color = cc.color(0, 255, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpaiNode.color = cc.color(255, 255, 255);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t//显示所有吃到的牌\n\tShowAllOutEatCard: function () {\n\t\tlet room = this.RoomMgr.GetEnterRoom();\n\t\tif (!room) {\n\t\t\tthis.ErrLog(\"ShowAllOutEatCard not enter room\");\n\t\t\treturn\n\t\t}\n\t\t//UICard01\n\t\tlet nodeParentName = this.node.parent.name;\n\t\tlet roomPosMgr = room.GetRoomPosMgr();\n\t\tlet pos = 0;\n\t\t//需要获取当前本家位置ID\n\t\tlet imageString = \"\";\n\t\tif (nodeParentName.indexOf(\"Card01\") >= 0) {\n\t\t\tpos = roomPosMgr.GetClientPos();\n\t\t\tif (this.is3DShow == 1) {\n\t\t\t\timageString = \"EatCard_Self_\";\n\t\t\t} else if (this.is3DShow == 0) {\n\t\t\t\timageString = \"OutCard2D_Self_\";\n\t\t\t}\n\t\t}\n\t\telse if (nodeParentName.indexOf(\"Card02\") >= 0) {\n\t\t\tpos = roomPosMgr.GetClientDownPos();\n\t\t\tif (this.is3DShow == 1) {\n\t\t\t\timageString = \"EatCard_Down_\";\n\t\t\t} else if (this.is3DShow == 0) {\n\t\t\t\timageString = \"OutCard2D_Down_\";\n\t\t\t}\n\t\t}\n\t\telse if (nodeParentName.indexOf(\"Card03\") >= 0) {\n\t\t\tpos = roomPosMgr.GetClientFacePos();\n\t\t\tif (this.is3DShow == 1) {\n\t\t\t\timageString = \"EatCard_Self_\";\n\t\t\t} else if (this.is3DShow == 0) {\n\t\t\t\timageString = \"OutCard2D_Self_\";\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tpos = roomPosMgr.GetClientUpPos();\n\t\t\tif (this.is3DShow == 1) {\n\t\t\t\timageString = \"EatCard_Up_\";\n\t\t\t} else if (this.is3DShow == 0) {\n\t\t\t\timageString = \"OutCard2D_Up_\";\n\t\t\t}\n\t\t}\n\t\tlet roomSet = room.GetRoomSet();\n\t\tlet jin1 = roomSet.get_jin1();\n\t\tlet jin2 = roomSet.get_jin2();\n\t\tlet setPos = roomSet.GetSetPosByPos(pos);\n\t\tif (!setPos) {\n\t\t\tthis.ErrLog(\"ShowEatCard(%s) not find:%s\", nodeParentName, pos);\n\t\t\treturn\n\t\t}\n\t\tlet publicCardList = setPos.GetSetPosProperty(\"publicCardList\");\n\t\t// let daList=setPos.GetSetPosProperty(\"daList\");\n\n\t\t/*let touda=daList[0];\n\t\tlet erda=daList[1];\n\t\tlet beida=daList[2];*/\n\n\t\tthis.Log(\"ShowEatCard pos(%s) publicCardList:\", pos, publicCardList);\n\t\tlet count = publicCardList.length;\n\t\tlet benpos = roomPosMgr.GetClientPos();\n\t\tfor (let index = 0; index < count; index++) {\n\t\t\tlet publicInfoList = publicCardList[index];\n\t\t\tlet cardIDList = publicInfoList.slice(3, publicInfoList.length);\n\t\t\t//操作类型\n\t\t\tlet opType = publicInfoList[0];\n\t\t\t//定位碰吃位置，上家下家还是对家\n\t\t\tlet cardbgPos = -1;\n\t\t\tlet cardIDPos = publicInfoList[1];\n\t\t\tlet getCardID = publicInfoList[2];\n\t\t\tif (opType == this.ShareDefine.OpType_Gang || opType == this.ShareDefine.OpType_JieGang) {\n\t\t\t\t//暗杠把牌移动到最顶端\n\t\t\t\tgetCardID = publicInfoList[publicInfoList.length - 1];\n\t\t\t} else if (opType == this.ShareDefine.OpType_AnGang) {\n\t\t\t\tgetCardID = 0;\n\t\t\t}\n\t\t\tlet showPos = this.Pos2Show(cardIDPos);\n\t\t\tif (nodeParentName.indexOf(\"Card01\") > 0) {\n\t\t\t\tif (showPos == 1) {\n\t\t\t\t\tcardIDPos = 0;\n\t\t\t\t} else if (showPos == 2) {\n\t\t\t\t\tcardIDPos = 3;\n\t\t\t\t} else if (showPos == 3) {\n\t\t\t\t\tcardIDPos = 2;\n\t\t\t\t} else if (showPos == 4) {\n\t\t\t\t\tcardIDPos = 1;\n\t\t\t\t}\n\t\t\t} else if (nodeParentName.indexOf(\"Card02\") > 0) {\n\t\t\t\tif (showPos == 1) {\n\t\t\t\t\tcardIDPos = 1;\n\t\t\t\t} else if (showPos == 2) {\n\t\t\t\t\tcardIDPos = 0;\n\t\t\t\t} else if (showPos == 3) {\n\t\t\t\t\tcardIDPos = 3;\n\t\t\t\t} else if (showPos == 4) {\n\t\t\t\t\tcardIDPos = 2;\n\t\t\t\t}\n\t\t\t} else if (nodeParentName.indexOf(\"Card03\") > 0) {\n\t\t\t\tif (showPos == 1) {\n\t\t\t\t\tcardIDPos = 2;\n\t\t\t\t} else if (showPos == 2) {\n\t\t\t\t\tcardIDPos = 1;\n\t\t\t\t} else if (showPos == 3) {\n\t\t\t\t\tcardIDPos = 0;\n\t\t\t\t} else if (showPos == 4) {\n\t\t\t\t\tcardIDPos = 3;\n\t\t\t\t}\n\t\t\t} else if (nodeParentName.indexOf(\"Card04\")) {\n\t\t\t\tif (showPos == 1) {\n\t\t\t\t\tcardIDPos = 3;\n\t\t\t\t} else if (showPos == 2) {\n\t\t\t\t\tcardIDPos = 2;\n\t\t\t\t} else if (showPos == 3) {\n\t\t\t\t\tcardIDPos = 1;\n\t\t\t\t} else if (showPos == 4) {\n\t\t\t\t\tcardIDPos = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cardIDPos == 1) {\n\t\t\t\tcardbgPos = 0;\n\t\t\t} else if (cardIDPos == 2) {\n\t\t\t\tcardbgPos = 1;\n\t\t\t} else if (cardIDPos == 3) {\n\t\t\t\tcardbgPos = 2;\n\t\t\t}\n\t\t\tif (cardIDList.length == 4 && cardbgPos == 1) {\n\t\t\t\t//如果是杠，牌还是对家的，那蒙版就贴在第4张\n\t\t\t\tcardbgPos = 3;\n\t\t\t}\n\t\t\t//如果是暗杠,前面3个盖牌，最后一个显示牌\n\t\t\tif (opType == this.ShareDefine.OpType_AnGang) {\n\t\t\t\t// 暗杠改成所有人都可以看到第一張\n\t\t\t\tif (nodeParentName.indexOf(\"Card01\") >= 0) {\n\t\t\t\t\tif (cardIDList.length == 4) {\n\t\t\t\t\t\t// cardIDList = [0,0,0,cardIDList[0]];\n\t\t\t\t\t\tcardIDList = [0, 0, 0, 0];\n\t\t\t\t\t} else if (cardIDList.length == 3) {\n\t\t\t\t\t\tcardIDList = [0, cardIDList[0], 0];\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tcardIDList = [0, 0, 0, 0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"down\", index + 1, 2);\n\t\t\tlet childNode = this.node.getChildByName(childName);\n\t\t\tif (!childNode) {\n\t\t\t\tthis.ErrLog(\"ShowEatCard not find childName:%s\", childName);\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tchildNode.active = true;\n\t\t\tlet cardCount = cardIDList.length;\n\t\t\tfor (let cardIndex = 0; cardIndex < cardCount; cardIndex++) {\n\t\t\t\tlet cardID = cardIDList[cardIndex];\n\t\t\t\tlet paiChildName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex + 1, 2);\n\t\t\t\tlet childPath = [childName, paiChildName].join(\"/\");\n\t\t\t\tlet childNode = cc.find(childPath, this.node);\n\t\t\t\tif (!childNode) {\n\t\t\t\t\tthis.ErrLog(\"ShowEatCard not find childPath:%s\", childPath);\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tchildNode.CardType = Math.floor(cardID / 100);\n\t\t\t\tthis.ShowJinBg(cardID, childNode, jin1, jin2);\n\t\t\t\tthis.ShowImage(childNode, imageString, cardID);\n\n\t\t\t\t//显示头搭二搭被搭\n\t\t\t\t//二人不搞帖黑底\n\t\t\t\tif (roomPosMgr.GetRoomPlayerCount() > 2) {\n\t\t\t\t\t//if(cardID>0 && cardIndex==cardbgPos){\n\t\t\t\t\tif (cardID > 0 && cardID == getCardID) {\n\t\t\t\t\t\t//childNode.color=cc.color(255,180,200);\n\t\t\t\t\t\tlet rotate = 'left';\n\t\t\t\t\t\t////本家情况\n\t\t\t\t\t\tif (cardbgPos == 0 && nodeParentName.indexOf(\"Card01\") > 0) {\n\t\t\t\t\t\t\trotate = 'left';  //本家碰上家\n\t\t\t\t\t\t} else if ((cardbgPos == 1 || cardbgPos == 3) && nodeParentName.indexOf(\"Card01\") > 0) {\n\t\t\t\t\t\t\trotate = 'up';  //本家碰对家\n\t\t\t\t\t\t} else if (cardbgPos == 2 && nodeParentName.indexOf(\"Card01\") > 0) {\n\t\t\t\t\t\t\trotate = 'right';  //本家碰下家\n\t\t\t\t\t\t}\n\t\t\t\t\t\t////本家情况\n\t\t\t\t\t\t////下家情况\n\t\t\t\t\t\telse if (cardbgPos == 0 && nodeParentName.indexOf(\"Card02\") > 0) {\n\t\t\t\t\t\t\trotate = 'down';  //下家碰上家\n\t\t\t\t\t\t} else if ((cardbgPos == 1 || cardbgPos == 3) && nodeParentName.indexOf(\"Card02\") > 0) {\n\t\t\t\t\t\t\trotate = 'left';  //下家碰对家\n\t\t\t\t\t\t} else if (cardbgPos == 2 && nodeParentName.indexOf(\"Card02\") > 0) {\n\t\t\t\t\t\t\trotate = 'up';  //本家碰下家\n\t\t\t\t\t\t}\n\t\t\t\t\t\t////下家情况\n\t\t\t\t\t\t////对家情况\n\t\t\t\t\t\telse if (cardbgPos == 0 && nodeParentName.indexOf(\"Card03\") > 0) {\n\t\t\t\t\t\t\trotate = 'right';  //对家家碰上家\n\t\t\t\t\t\t} else if ((cardbgPos == 1 || cardbgPos == 3) && nodeParentName.indexOf(\"Card03\") > 0) {\n\t\t\t\t\t\t\trotate = 'down';  //对家碰对家\n\t\t\t\t\t\t} else if (cardbgPos == 2 && nodeParentName.indexOf(\"Card03\") > 0) {\n\t\t\t\t\t\t\trotate = 'left';  //对家碰下家\n\t\t\t\t\t\t}\n\t\t\t\t\t\t////对家情况\n\t\t\t\t\t\t////上家情况\n\t\t\t\t\t\telse if (cardbgPos == 0 && nodeParentName.indexOf(\"Card04\") > 0) {\n\t\t\t\t\t\t\trotate = 'up';  //上家碰上家\n\t\t\t\t\t\t} else if ((cardbgPos == 1 || cardbgPos == 3) && nodeParentName.indexOf(\"Card04\") > 0) {\n\t\t\t\t\t\t\trotate = 'right';  //上家碰对家\n\t\t\t\t\t\t} else if (cardbgPos == 2 && nodeParentName.indexOf(\"Card04\") > 0) {\n\t\t\t\t\t\t\trotate = 'down';  //上家碰下家\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet roateIcon = childNode.getChildByName('zhi');\n\t\t\t\t\t\tthis.ShowZhi(roateIcon, rotate);\n\t\t\t\t\t\t//roateIcon.rotation=rotate;\n\t\t\t\t\t\t//roateIcon.active=true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchildNode.getChildByName('zhi').active = false;\n\t\t\t\t\t\t//childNode.color=cc.color(255,255,255);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tchildNode.getChildByName('zhi').active = false;\n\t\t\t\t\t//childNode.color=cc.color(255,255,255);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//设置多余的卡牌位置空\n\t\t\tfor (let cardIndex = cardCount + 1; cardIndex <= this.PaiChildCount; cardIndex++) {\n\t\t\t\tlet paiChildName = this.ComTool.StringAddNumSuffix(\"card\", cardIndex, 2);\n\t\t\t\tlet childPath = [childName, paiChildName].join(\"/\");\n\t\t\t\tlet childNode = cc.find(childPath, this.node);\n\t\t\t\tif (!childNode) {\n\t\t\t\t\tthis.ErrLog(\"ShowEatCard not find:%s\", childPath);\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tlet cardSprite = childNode.getComponent(cc.Sprite);\n\t\t\t\tcardSprite.spriteFrame = null;\n\t\t\t\tchildNode.getChildByName('zhi').active = false;\n\t\t\t\tchildNode.getChildByName('da').active = false;\n\t\t\t}\n\t\t}\n\n\t\t//隐藏掉剩余的卡牌\n\t\tfor (let index = count + 1; index <= this.ChildCount; index++) {\n\t\t\tlet childName = this.ComTool.StringAddNumSuffix(\"down\", index, 2);\n\t\t\tlet childNode = this.node.getChildByName(childName);\n\t\t\tif (!childNode) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tchildNode.active = false;\n\t\t}\n\t},\n\tShowJinBg: function (cardID, childNode, jin1 = 0, jin2 = 0) {\n\t\tif (Math.floor(cardID / 100) == Math.floor(jin1 / 100) ||\n\t\t\tMath.floor(cardID / 100) == Math.floor(jin2 / 100)) {\n\t\t\tif (cardID != 0) {\n\t\t\t\tchildNode.color = cc.color(255, 255, 0);\n\t\t\t\tchildNode.getChildByName(\"da\").active = true;\n\t\t\t}\n\t\t} else {\n\t\t\tchildNode.color = cc.color(255, 255, 255);\n\t\t\tchildNode.getChildByName(\"da\").active = false;\n\t\t}\n\t},\n\tShowZhi: function (childNode, zhi) {\n\t\tlet imageName = \"zhi_\" + zhi;\n\t\t/*if(this.is3DShow==0){\n\t\t\timageName = \"zhibz_\"+zhi;\n\t\t} else if(this.is3DShow==2){\n\t\t\timageName = \"zhijp_\"+zhi;\n\t\t}*/\n\t\tlet imageInfo = this.IntegrateImage[imageName];\n\t\tif (!imageInfo) {\n\t\t\tthis.ErrLog(\"ShowImage IntegrateImage.txt not find:%s\", imageName);\n\t\t\treturn\n\t\t}\n\t\tlet imagePath = imageInfo[\"FilePath\"];\n\t\tlet that = this;\n\t\tlet childSprite = childNode.getComponent(cc.Sprite);\n\t\tchildSprite.spriteFrame = null;\n\t\tapp.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame)\n\t\t\t.then(function (spriteFrame) {\n\t\t\t\tif (!spriteFrame) {\n\t\t\t\t\tthat.ErrLog(\"OpenPoker(%s) load spriteFrame fail\", imagePath);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tchildSprite.spriteFrame = spriteFrame;\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\t\tthat.ErrLog(\"OpenPoker(%s) error:%s\", imagePath, error.stack);\n\t\t\t\t}\n\t\t\t);\n\t\tchildNode.active = true;\n\t},\n\tShowImage: function (childNode, imageString, cardID) {\n\t\t//显示贴图\n\t\tlet childSprite = childNode.getComponent(cc.Sprite);\n\t\tif (!childSprite) {\n\t\t\tthis.ErrLog(\"ShowOutCard(%s) not find cc.Sprite\", childNode.name);\n\t\t\treturn\n\t\t}\n\t\tlet imageName = \"\";\n\t\tif (cardID) {\n\t\t\t//取卡牌ID的前2位\n\t\t\timageName = [imageString, Math.floor(cardID / 100)].join(\"\");\n\t\t} else {\n\t\t\tif (imageString == \"EatCard_Self_\") {\n\t\t\t\timageName = \"CardBack_Self\";\n\t\t\t} else if (imageString == \"EatCard_Up_\") {\n\t\t\t\timageName = \"CardBack_Up\";\n\t\t\t} else if (imageString == \"EatCard_Down_\") {\n\t\t\t\timageName = \"CardBack_Down\";\n\t\t\t} else if (imageString == \"OutCard2D_Self_\") {\n\t\t\t\timageName = \"OutCard2D_Self_50\";\n\t\t\t} else if (imageString == \"OutCard2D_Up_\") {\n\t\t\t\timageName = \"OutCard2D_Up_50\";\n\t\t\t} else if (imageString == \"OutCard2D_Down_\") {\n\t\t\t\timageName = \"OutCard2D_Down_50\";\n\t\t\t}\n\n\t\t\t/*else if(imageString==\"OutCardJP_Self_\"){\n\t\t\t\timageName = \"CardBackJP_Self\";\n\t\t\t}else if(imageString==\"EatCardJP_Self_\"){\n\t\t\t\timageName = \"CardBackJP_Self\";\n\t\t\t}else if(imageString==\"OutCardJP_Up_\"){\n\t\t\t\timageName = \"CardBackJP_Up\";\n\t\t\t}else if(imageString==\"OutCardJP_Down_\"){\n\t\t\t\timageName = \"CardBackJP_Down\";\n\t\t\t}*/\n\t\t}\n\t\tlet imageInfo = this.IntegrateImage[imageName];\n\t\tif (!imageInfo) {\n\t\t\tthis.ErrLog(\"ShowImage IntegrateImage.txt not find:%s\", imageString);\n\t\t\treturn\n\t\t}\n\t\tlet imagePath = imageInfo[\"FilePath\"];\n\t\tlet that = this;\n\t\tapp.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame)\n\t\t\t.then(function (spriteFrame) {\n\t\t\t\tif (!spriteFrame) {\n\t\t\t\t\tthat.ErrLog(\"OpenPoker(%s) load spriteFrame fail\", imagePath);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tchildSprite.spriteFrame = spriteFrame;\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\t\tthat.ErrLog(\"OpenPoker(%s) error:%s\", imagePath, error.stack);\n\t\t\t\t}\n\t\t\t);\n\t},\n});"]}