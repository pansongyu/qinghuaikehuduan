{"version":3,"sources":["rjmj_detail_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ShowPlayerData","resultsList","playerAll","idx","console","log","data","userInfo","node","getChildByName","getComponent","ShowHeroHead","pid","Label","string","ComTool","GetPid","index","player","name","pointMap","jufenLayout","jufenDemo","opacity","i","children","length","key","point","item","instantiate","addChild","x","jiesuan","show","showLabel","huTypesShow","active","sportsPoint","maxPoint","maxDianPao","dianPaoPoint","dissolveState","imagePath","that","loader","loadRes","SpriteFrame","error","spriteFrame","Sprite","huData","jiePaoPoint","ziMoPoint"],"mappings":"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","file":"rjmj_detail_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\rjmj","sourcesContent":["/*\n\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_detail_child\"),\n\n\tproperties: {},\n\n\t// use this for initialization\n\tOnLoad: function () {\n\n\t},\n\tShowPlayerData: function (resultsList, playerAll, idx) {\n\t\tconsole.log(\"总结算数据\", resultsList, playerAll, idx);\n\t\tlet data = resultsList[idx];\n\t\tlet userInfo = this.node.getChildByName(\"user_info\");\n\t\tif (userInfo) {\n\t\t\tuserInfo.getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\").ShowHeroHead(data.pid);\n\t\t\tuserInfo.getChildByName(\"label_id\").getComponent(cc.Label).string = \"ID:\" + app.ComTool().GetPid(data.pid);\n\t\t\tfor (let index in playerAll) {\n\t\t\t\tlet player = playerAll[index];\n\t\t\t\tif (player.pid == data.pid) {\n\t\t\t\t\tuserInfo.getChildByName(\"lable_name\").getComponent(cc.Label).string = player.name;\n\t\t\t\t\t// if(player.sex==app.ShareDefine().HeroSex_Boy){\n\t\t\t\t\t//     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteMale;\n\t\t\t\t\t// }else if(player.sex==app.ShareDefine().HeroSex_Girl){\n\t\t\t\t\t//     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteFeMale;\n\t\t\t\t\t// }\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet pointMap = data[\"pointMap\"];\n\t\tlet jufenLayout = this.node.getChildByName(\"jufenScrollView\").getChildByName(\"view\").getChildByName(\"content\");\n\t\tlet jufenDemo = this.node.getChildByName(\"demo_item\");\n\t\tjufenDemo.opacity = 0;\n\t\tfor (let i = 0; i < jufenLayout.children.length; i++) {\n\t\t\tjufenLayout.children[i].opacity = 0;\n\t\t}\n\t\tfor (let key in pointMap) {\n\t\t\tlet point = pointMap[key];\n\t\t\tlet item = jufenLayout.getChildByName(key);\n\t\t\tif (!item) {\n\t\t\t\titem = cc.instantiate(jufenDemo);\n\t\t\t\tjufenLayout.addChild(item);\n\t\t\t\titem.name = key;\n\t\t\t}\n\t\t\titem.x = -73;\n\t\t\titem.opacity = 255;\n\t\t\titem.getComponent(cc.Label).string = \"第\" + key + \"局\";\n\t\t\titem.getChildByName(\"num\").getComponent(cc.Label).string = point;\n\t\t}\n\n\t\tlet jiesuan = this.node.getChildByName(\"jiesuan\");\n\t\tlet show = 1;\n\t\tlet showLabel = false;\n\t\tif (jiesuan) {\n\t\t\tthis.huTypesShow(jiesuan, data);\n\t\t\tif (data.point >= 0) {\n\t\t\t\tjiesuan.getChildByName(\"lb_win\").active = true;\n\t\t\t\tjiesuan.getChildByName(\"lb_lost\").active = false;\n\t\t\t\tjiesuan.getChildByName(\"lb_win\").getComponent(cc.Label).string = '+' + data.point;\n\t\t\t} else {\n\t\t\t\tjiesuan.getChildByName(\"lb_win\").active = false;\n\t\t\t\tjiesuan.getChildByName(\"lb_lost\").active = true;\n\t\t\t\tjiesuan.getChildByName(\"lb_lost\").getComponent(cc.Label).string = data.point;\n\t\t\t}\n\t\t\t//比赛分\n\t\t\tif (typeof(data.sportsPoint) != \"undefined\") {\n\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").active = true;\n\t\t\t\tif (data.sportsPoint > 0) {\n\t\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：+\" + data.sportsPoint;\n\t\t\t\t} else {\n\t\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：\" + data.sportsPoint;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjiesuan.getChildByName(\"lb_sportsPoint\").active = false;\n\t\t\t}\n\t\t}\n\t\tlet maxPoint = 0;\n\t\tlet maxDianPao = 0;\n\t\tfor (let i = 0; i < resultsList.length; i++) {\n\t\t\tlet data = resultsList[i];\n\t\t\tif (data.point > maxPoint) {\n\t\t\t\tmaxPoint = data.point;\n\t\t\t}\n\t\t\tif (data.dianPaoPoint > maxDianPao) {\n\t\t\t\tmaxDianPao = data.dianPaoPoint;\n\t\t\t}\n\t\t}\n\t\t//显示大赢家图标\n\t\tif (data.dianPaoPoint >= maxDianPao && maxDianPao > 0) {\n\t\t\tthis.node.getChildByName('icon_paoshou').active = true;\n\t\t} else {\n\t\t\tthis.node.getChildByName('icon_paoshou').active = false;\n\t\t}\n\t\tif (data.point >= maxPoint) {\n\t\t\tthis.node.getChildByName('icon_win').active = true;\n\t\t\tthis.node.getChildByName('icon_paoshou').active = false;\n\t\t} else {\n\t\t\tthis.node.getChildByName('icon_win').active = false;\n\t\t}\n\n\t\tif (this.node.getChildByName('icon_dissolve') != null) {\n\t\t\t//显示是否解散（-1:正常结束,0:未操作,1:同意操作,2:拒绝操作,3:发起者）\n\t\t\tif (typeof(data.dissolveState) == \"undefined\" || data.dissolveState == -1) {\n\t\t\t\tthis.node.getChildByName('icon_dissolve').active = false;\n\t\t\t} else {\n\t\t\t\tlet imagePath = \"texture/record/img_dissolve\" + data.dissolveState;\n\t\t\t\tlet that = this;\n\t\t\t\t//加载图片精灵\n\t\t\t\tcc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tconsole.log(\"加载图片精灵失败  \" + imagePath);\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tthat.node.getChildByName('icon_dissolve').getComponent(cc.Sprite).spriteFrame = spriteFrame;\n\t\t\t\t\tthat.node.getChildByName('icon_dissolve').active = true;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"请检查 xxmj_detail_child预制体是否有 icon_dissolve图集节点\")\n\t\t}\n\t},\n\thuTypesShow: function (jiesuan, huData) {\n\t\tjiesuan.getChildByName('top').getChildByName('lb_dianpao').active = false;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_jiepao').active = false;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_zimo').active = false;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_dianpao').getComponent(cc.Label).string = huData.dianPaoPoint;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_jiepao').getComponent(cc.Label).string = huData.jiePaoPoint;\n\t\tjiesuan.getChildByName('top').getChildByName('lb_zimo').getComponent(cc.Label).string = huData.ziMoPoint;\n\t},\n});\n"]}