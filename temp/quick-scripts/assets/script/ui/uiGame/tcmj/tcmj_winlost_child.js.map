{"version":3,"sources":["tcmj_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","huaNum","Node","OnLoad","ComTool","ShareDefine","ShowPlayerData","setEnd","playerAll","index","jin1","jin","jin2","dPos","posResultList","posHuArray","Array","posCount","length","i","posInfo","pos","posHuType","HuTypeStringDict","PlayerInfo","node","active","huNode","getChildByName","huType","ShowPlayerHuImg","huaCard","layout","children","getComponent","Sprite","spriteFrame","banGangMap","banGangList","HuType_NotHu","HuType_DianPao","JSON","stringify","banGangCom","key","value","push","console","log","ShowBanGangMap","UpdatePlayData","WeChatManager","InitHeroHeadImage","weChatHeadImage","ShowHeroHead","PlayerNode","HuList","showLabelNum","ClearLabelShow","sportsPoint","ShowLabelName","ShowPlayerRecord","ShowPlayerJieSuan","ShowPlayerInfo","ShowPlayerDownCard","publicCardList","ShowPlayerShowCard","shouCard","handCard","Label","string","ShowNode","piaoHua","GetBeiZhuName","GetPid","LabelName","huTypeDict","Hu","DiHua","YingHua","PiHu","MengQing","MenQing","WuHuaGuo","LZP","QYS","HYS","PPHu","QD","GSKH","DDC","QGHu","GangHua","WuHuaGuoZhuaChong","huInfoAll","huInfo","huTypeMap","huPoint"],"mappings":"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","file":"tcmj_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\tcmj","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_winlost_child\"),\n\n\tproperties: {\n\t\thuaNum: cc.Node,\n\t},\n\n\t// use this for initialization\n\tOnLoad: function () {\n\t\tthis.ComTool = app.ComTool();\n\t\tthis.ShareDefine = app.ShareDefine();\n\t},\n\tShowPlayerData: function (setEnd, playerAll, index) {\n\t\tlet jin1 = setEnd.jin;\n\t\tlet jin2 = 0;\n\t\tif (setEnd.jin2 > 0) {\n\t\t\tjin2 = setEnd.jin2;\n\t\t}\n\t\tlet dPos = setEnd.dPos;\n\t\tlet posResultList = setEnd[\"posResultList\"];\n\t\tlet posHuArray = new Array();\n\t\tlet posCount = posResultList.length;\n\t\tfor (let i = 0; i < posCount; i++) {\n\t\t\tlet posInfo = posResultList[i];\n\t\t\tlet pos = posInfo[\"pos\"];\n\t\t\tlet posHuType = this.ShareDefine.HuTypeStringDict[posInfo[\"huType\"]];\n\t\t\tposHuArray[pos] = posHuType;\n\t\t}\n\t\tlet PlayerInfo = playerAll[index];\n\t\tthis.node.active = true;\n\t\tlet huNode = this.node.getChildByName('jiesuan').getChildByName('hutype');\n\t\tlet huType = posResultList[index]['huType'];\n\t\tthis.ShowPlayerHuImg(huNode, huType);\n\t\tlet huaCard = this.node.getChildByName(\"huacardscrollView\").getChildByName(\"view\");\n\t\thuaCard.active = false;\n\t\tlet layout = huaCard.getChildByName(\"content\");\n\t\tfor (let i = 0; i < layout.children.length; i++) {\n\t\t\tlayout.children[i].getComponent(cc.Sprite).spriteFrame = \"\";\n\t\t\tlayout.children[i].children[0].active = false;\n\t\t}\n\t\tlet banGangMap = setEnd[\"banGangMap\"];\n\t\tlet banGangList = [];\n\t\tif (this.ShareDefine.HuTypeStringDict[huType] != this.ShareDefine.HuType_NotHu &&\n\t\t\tthis.ShareDefine.HuTypeStringDict[huType] != this.ShareDefine.HuType_DianPao) {\n\t\t\tif (JSON.stringify(banGangMap) == \"{}\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet banGangCom = layout.getComponent(\"UIMJCard_ShowHua\");\n\t\t\tfor (let key in banGangMap) {\n\t\t\t\tlet value = banGangMap[key];\n\t\t\t\tbanGangList.push({\"cardID\":key, \"isBanGang\":value});\n\t\t\t}\n\t\t\thuaCard.active = true;\n\t\t\tconsole.log(\"banGangList\", banGangList);\n\t\t\tbanGangCom.ShowBanGangMap(banGangList, jin1, jin2);\n\t\t}\n\t\tthis.UpdatePlayData(this.node, posResultList[index], PlayerInfo, jin1, jin2, banGangList);\n\n\t\tif (dPos === index) {\n\t\t\tthis.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = true;\n\t\t} else {\n\t\t\tthis.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n\t\t}\n\t\t//显示头像，如果头像UI\n\t\tif (PlayerInfo[\"pid\"] && PlayerInfo[\"iconUrl\"]) {\n\t\t\tapp.WeChatManager().InitHeroHeadImage(PlayerInfo[\"pid\"], PlayerInfo[\"iconUrl\"]);\n\t\t}\n\t\tlet weChatHeadImage = this.node.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n\t\tweChatHeadImage.ShowHeroHead(PlayerInfo[\"pid\"]);\n\t},\n\tUpdatePlayData: function (PlayerNode, HuList, PlayerInfo, jin1 = 0, jin2 = 0, banGangList) {\n\t\tthis.showLabelNum = 1;\n\t\tthis.ClearLabelShow(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'));\n\t\t//显示比赛分\n\t\tif (typeof(HuList.sportsPoint) != \"undefined\") {\n\t\t\tif (HuList.sportsPoint > 0) {\n\t\t\t\tthis.ShowLabelName(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'), \"比赛分：+\" + HuList.sportsPoint);\n\t\t\t} else {\n\t\t\t\tthis.ShowLabelName(PlayerNode.getChildByName('jiesuan').getChildByName('label_lists'), \"比赛分：\" + HuList.sportsPoint);\n\t\t\t}\n\t\t}\n\t\tthis.huaNum.active = false;\n\t\tthis.ShowPlayerRecord(PlayerNode.getChildByName('record'), HuList);\n\t\tthis.ShowPlayerJieSuan(PlayerNode.getChildByName('jiesuan'), HuList);\n\t\tthis.ShowPlayerInfo(PlayerNode.getChildByName('user_info'), PlayerInfo, HuList[\"piaoHua\"]);\n\t\tthis.ShowPlayerDownCard(PlayerNode.getChildByName('downcard'), HuList.publicCardList);\n\t\tthis.ShowPlayerShowCard(PlayerNode.getChildByName('showcard'), HuList.shouCard, HuList.handCard, jin1, jin2);\n\t\tif (banGangList.length > 0) {\n\t\t\tthis.huaNum.active = true;\n\t\t\tthis.huaNum.getComponent(cc.Label).string = banGangList.length + \"个\";\n\t\t}\n\t},\n\tShowPlayerInfo: function (ShowNode, PlayerInfo, piaoHua) {\n\t\tShowNode.getChildByName('lable_name').getComponent(\"cc.Label\").string = this.ComTool.GetBeiZhuName(PlayerInfo[\"pid\"],PlayerInfo[\"name\"]);\n\t\tShowNode.getChildByName('label_id').getComponent(\"cc.Label\").string = \"ID:\" + this.ComTool.GetPid(PlayerInfo[\"pid\"]);\n\t\tShowNode.getChildByName('piaofen').getComponent(\"cc.Label\").string = \"飘\" + piaoHua + \"分\";\n\t},\n\tLabelName: function (huType) {\n\t\tlet huTypeDict = {\n\t\t\tHu: \"胡\",\n\t\t\tDiHua: \"底花\",\n\t\t\tYingHua: \"硬花\",\n\t\t\tPiHu: \"平胡\",\n\t\t\tMengQing: \"门清\",\n\t\t\tMenQing: \"门清\",\n\t\t\tWuHuaGuo: \"无花果\",\n\t\t\tLZP: \"辣子牌\",\n\t\t\tQYS: \"清一色\",\n\t\t\tHYS: \"混一色\",\n\t\t\tPPHu: \"碰碰胡\",\n\t\t\tQD: \"门清\",\n\t\t\tGSKH: \"杠上开花\",\n\t\t\tDDC: \"大吊车\",\n\t\t\tQGHu: \"抢杠胡\",\n\t\t\tGangHua: \"杠\",\n\t\t\tWuHuaGuoZhuaChong:\"无花果抓冲\",\n\t\t};\n\t\treturn huTypeDict[huType];\n\t},\n\tShowPlayerJieSuan: function (ShowNode, huInfoAll) {\n\t\tlet huInfo = false;\n\t\tif (huInfoAll['endPoint']) {\n\t\t\thuInfo = huInfoAll['endPoint'];\n\t\t} else {\n\t\t\thuInfo = huInfoAll;\n\t\t}\n\t\tlet huTypeMap = huInfo.huTypeMap;\n\t\tfor (let huType in huTypeMap) {\n\t\t\tlet huPoint = huTypeMap[huType];\n\t\t\tthis.ShowLabelName(ShowNode.getChildByName('label_lists'), this.LabelName(huType) + huPoint);\n\t\t}\n\t},\n});\n"]}