{"version":3,"sources":["twgz_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","PokerCard","ShowPlayerData","setEnd","playerAll","index","teamType","posResultList","isInList","i","length","posResult","pos","partnerPosList","concat","player","pid","point","winPoint","roomPoint","manGuan","liangCardList","dPos","node","getChildByName","active","winNode","loseNode","liangCardLayout","selfPid","HeroManager","GetHeroProperty","indexOf","children","cardType","cardNode","instantiate","addChild","GetPokeCard","getComponent","Label","string","lb_roomPoint","lb_winPoint","lb_sportsPointTitle","sportsPoint","upLevelId","playerInfo","head","ShowHeroHead","playerName","name","substring","id","ComTool","GetPid"],"mappings":"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","file":"twgz_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\twgz","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BasePoker_winlost_child\"),\n\n    properties: {},\n\n    // use this for initialization\n    OnLoad: function () {\n        this.PokerCard = app.PokerCard();\n    },\n    ShowPlayerData: function (setEnd, playerAll, index) {\n        let teamType = setEnd[\"teamType\"];\n        let posResultList = setEnd[\"posResultList\"];\n        let isInList = [];\n        if (teamType == 0) {\n            isInList = [0, 2];\n        } else if (teamType == 1) {\n            for (let i = 0; i < posResultList.length; i++) {\n                let posResult = posResultList[i];\n                let pos = posResult[\"pos\"];\n                let partnerPosList = posResult[\"partnerPosList\"];\n                isInList = isInList.concat(pos, partnerPosList[0]);\n                break;\n            }\n        } else if (teamType == 2) {\n            for (let i = 0; i < posResultList.length; i++) {\n                let posResult = posResultList[i];\n                let partnerPosList = posResult[\"partnerPosList\"];\n                if (partnerPosList.length > 0) {\n                    isInList = partnerPosList;\n                }\n            }\n        }\n        let player = setEnd.posResultList[index];\n\n        let pos = player.pos;\n        let pid = player.pid;\n        let point = player.point;\n        let winPoint = player.winPoint;\n        let roomPoint = player.roomPoint;\n        let manGuan = player.manGuan;\n        let liangCardList = player.liangCardList;\n\n        let dPos = setEnd.dPos;\n\n        //显示庄闲\n        // this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = (player.pos == dPos);\n        this.node.getChildByName(\"user_info\").getChildByName(\"zhuangjia\").active = false;\n        // this.node.getChildByName(\"user_info\").getChildByName(\"xianjia\").active = !(player.pos == dPos);\n        this.node.getChildByName(\"user_info\").getChildByName(\"xianjia\").active = false;\n        this.node.getChildByName(\"user_info\").getChildByName(\"you\").active = false;\n        this.node.getChildByName(\"user_info\").getChildByName(\"di\").active = false;\n\n        //玩家分数\n        let winNode = this.node.getChildByName(\"lb_win_num\");\n        let loseNode = this.node.getChildByName(\"lb_lose_num\");\n        winNode.active = false;\n        loseNode.active = false;\n        let liangCardLayout = this.node.getChildByName(\"liangCardLayout\");\n        this.node.getChildByName(\"manguan1\").active = false;\n        this.node.getChildByName(\"manguan2\").active = false;\n        if (manGuan > 0) {\n            this.node.getChildByName(\"manguan\" + manGuan).active = true;\n        }\n        let selfPid = app.HeroManager().GetHeroProperty(\"pid\");\n        if (selfPid == pid) {\n            if (isInList.indexOf(pos) > -1) {\n                this.node.getChildByName(\"user_info\").getChildByName(\"you\").active = true;\n            } else {\n                this.node.getChildByName(\"user_info\").getChildByName(\"di\").active = true;\n            }\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"di\").active = true;\n        }\n        for (let i = 0; i < liangCardLayout.children.length; i++) {\n            liangCardLayout.children[i].active = false;\n        }\n        for (let i = 0; i < liangCardList.length; i++) {\n            let cardType = liangCardList[i];\n            let cardNode = liangCardLayout.children[i];\n            if (!cardNode) {\n                cardNode = cc.instantiate(liangCardLayout.children[0]);\n                liangCardLayout.addChild(cardNode);\n            }\n            cardNode.active = true;\n            this.PokerCard.GetPokeCard(cardType, cardNode);\n        }\n\n        if (point > 0) {\n            winNode.active = true;\n            winNode.getComponent(cc.Label).string = \"+\" + point;\n            this.node.getChildByName(\"user_info\").getChildByName(\"bg_win\").active = true;\n            this.node.getChildByName(\"user_info\").getChildByName(\"bg_lost\").active = false;\n        } else {\n            loseNode.active = true;\n            loseNode.getComponent(cc.Label).string = point;\n            this.node.getChildByName(\"user_info\").getChildByName(\"bg_win\").active = false;\n            this.node.getChildByName(\"user_info\").getChildByName(\"bg_lost\").active = true;\n        }\n//房间分\n        let lb_roomPoint = this.node.getChildByName(\"lb_roomPoint\");\n        if (roomPoint > 0) {\n            lb_roomPoint.getComponent(cc.Label).string = \"+\" + roomPoint;\n        } else {\n            lb_roomPoint.getComponent(cc.Label).string = roomPoint;\n        }\n//分值\n        let lb_winPoint = this.node.getChildByName(\"lb_winPoint\");\n        if (winPoint > 0) {\n            lb_winPoint.getComponent(cc.Label).string = \"+\" + winPoint;\n        } else {\n            lb_winPoint.getComponent(cc.Label).string = winPoint;\n        }\n//比赛分\n        let lb_sportsPointTitle = this.node.getChildByName(\"lb_sportsPointTitle\");\n        if (player.sportsPoint) {\n            if (player.sportsPoint > 0) {\n                lb_sportsPointTitle.active = true;\n                lb_sportsPointTitle.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"+\" + player.sportsPoint;\n            }\n            else {\n                lb_sportsPointTitle.active = true;\n                lb_sportsPointTitle.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = player.sportsPoint;\n            }\n        } else {\n            lb_sportsPointTitle.active = false;\n        }\n\n//所属推广员ID\n        if (player.upLevelId > 0) {\n            this.node.getChildByName(\"user_info\").getChildByName(\"label_upLevel\").getComponent(cc.Label).string = \"所属推广员ID：\" + player.upLevelId;\n        } else {\n            this.node.getChildByName(\"user_info\").getChildByName(\"label_upLevel\").getComponent(cc.Label).string = \"\";\n        }\n\n        let playerInfo = null;\n        for (let i = 0; i < playerAll.length; i++) {\n            if (player.pid == playerAll[i].pid) {\n                playerInfo = playerAll[i];\n                break;\n            }\n        }\n\n        let head = this.node.getChildByName(\"user_info\").getChildByName(\"mask\").getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\");\n        head.ShowHeroHead(playerInfo.pid);\n//玩家名字\n        let playerName = \"\";\n        playerName = playerInfo.name;\n        if (playerName.length > 6) {\n            playerName = playerName.substring(0, 6) + '...';\n        }\n        let name = this.node.getChildByName(\"user_info\").getChildByName(\"lable_name\").getComponent(cc.Label);\n        name.string = playerName;\n\n        let id = this.node.getChildByName(\"user_info\").getChildByName(\"label_id\").getComponent(cc.Label);\n        id.string = \"ID:\" + app.ComTool().GetPid(playerInfo[\"pid\"]);\n    }\n})\n;\n"]}