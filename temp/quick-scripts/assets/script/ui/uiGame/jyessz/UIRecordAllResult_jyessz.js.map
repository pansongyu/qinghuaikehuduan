{"version":3,"sources":["UIRecordAllResult_jyessz.js"],"names":["app","require","cc","Class","extends","properties","roomID","Node","jushu","endTime","MJPlayers","page_search","EditBox","OnCreateInit","FormManager","ComTool","SDKManager","NetManager","WeChatManager","gametypeConfig","SysDataManager","GetTableDict","RegEvent","Event_GameRecord","lastChildName","lastRoomId","sp_restCard","node","getChildByName","LoadAllImages","i","imageName","join","imageInfo","IntegrateImage","imagePath","that","ControlManager","CreateLoadPromise","SpriteFrame","then","spriteFrame","ErrLog","catch","error","stack","OnShow","roomId","playerAll","gameType","unionId","roomKey","defaultPage","page","ShareDefine","GametTypeID2PinYin","path","ShowForm","gameTypeID","active","Players","getWndNodePath","LoadPrefabByGameType","prefabPath","Prefab","prefab","InitNode","Player1Node","instantiate","nowChildName","name","DestroyAllChildren","addChild","ShowCardNode","GetWndNode","sp_in","toUpperCase","cardNode","StringAddNumSuffix","Math","abs","DownCardNode","downNode01","downNode","InitPlayers","alldata","maxpage","SendPack","bind","AddNode","length","PlayerSon","ShowRoomInfo","roomEndResult","setID","time","getComponent","Label","string","GetDateYearMonthDayHourMinuteString","playBackCode","parent","find","actvie","dataJsonRes","JSON","parse","roomKeyStr","e","console","serverPack","pSetRoomRecords","playbackCode","ShowData","SetPageLabel","data","Str2Json","InitShowPlayerInfo","SetWndProperty","setEnd","PlayerNode","posResultList","count","pid","ShowPlayerData","restCardList","ShowRestCard","cardListNode","removeAllChildren","childNode","SpriteShow","cardID","FilePath","childSprite","Sprite","floor","OnClick","btnName","btnNode","CloseForm","SysNotifyManager","ShowSysMsg","Click_btn_Share","OnPack_VideoData","OnVideoFailed","isNaN","parseInt","switchRecord","action","sys","localStorage","setItem","stringify","Client","VideoCheckSubGame","Name","toLowerCase","heroName","HeroManager","GetHeroProperty","gameId","GametTypeNameDict","gameName","GametTypeID2Name","title","desc","heroID","cityId","weChatAppShareUrl","GetClientConfigProperty","log","Share","jsondata","json"],"mappings":"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","file":"UIRecordAllResult_jyessz.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\jyessz","sourcesContent":["var app = require(\"app\");\ncc.Class({\n\textends: require(\"BaseForm\"),\n\n\tproperties: {\n\t\troomID: cc.Node,\n\t\tjushu: cc.Node,\n\t\tendTime: cc.Node,\n\n\t\tMJPlayers: cc.Node,\n\n\n\t\tpage_search: cc.EditBox,\n\t},\n\n\tOnCreateInit: function () {\n\t\tthis.FormManager = app.FormManager();\n\t\tthis.ComTool = app.ComTool();\n\t\tthis.SDKManager = app.SDKManager();\n\t\tthis.NetManager = app.NetManager();\n\t\tthis.WeChatManager = app.WeChatManager();\n\t\tthis.gametypeConfig = app.SysDataManager().GetTableDict(\"gametype\");\n\t\tthis.RegEvent(\"GameRecord\", this.Event_GameRecord, this);\n\t\tthis.lastChildName = null;\n\t\tthis.lastRoomId = 0;\n\t\tthis.sp_restCard = this.node.getChildByName(\"sp_restCard\");\n\t\t//加载麻将资源，防止异步坑爹的bug\n\t\t// this.LoadAllImages();\n\t},\n\tLoadAllImages: function () {\n\t\tlet i = 11;\n\t\tfor (; i <= 58; i++) {\n\t\t\tlet imageName = [\"EatCard_Self_\", i].join(\"\");\n\t\t\tlet imageInfo = this.IntegrateImage[imageName];\n\t\t\tif (!imageInfo) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (app['majiang_' + imageName]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet imagePath = imageInfo[\"FilePath\"];\n\t\t\tlet that = this;\n\t\t\tapp.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame).then(function (spriteFrame) {\n\t\t\t\tif (!spriteFrame) {\n\t\t\t\t\tthat.ErrLog(\"OpenMaJiang(%s) load spriteFrame fail\", imagePath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//记录精灵图片对象\n\t\t\t\tapp['majiang_' + imageName] = spriteFrame;\n\t\t\t}).catch(function (error) {\n\t\t\t\tthat.ErrLog(\"OpenMaJiang(%s) error:%s\", imagePath, error.stack);\n\t\t\t})\n\t\t}\n\t},\n\tOnShow: function (roomId, playerAll, gameType, unionId = 0, roomKey = null, defaultPage = 1) {\n\t\tthis.page = defaultPage;\n\t\tthis.gameType = this.ShareDefine.GametTypeID2PinYin[gameType];\n\t\tlet path = \"ui/uiGame/\" + this.gameType + \"/UIRecordAllResult_\" + this.gameType;\n\t\tthis.FormManager.ShowForm(\"UITop\", path);\n\t\tthis.gameTypeID = gameType;\n\t\tthis.gameType = app.ShareDefine().GametTypeID2PinYin[gameType];\n\t\tthis.playerAll = playerAll;\n\t\tthis.roomId = roomId;\n\t\tthis.unionId = unionId;\n\t\tthis.roomKey = roomKey;\n\t\tthis.MJPlayers.active = true;\n\t\tthis.Players = this.MJPlayers;\n\t\tthis.getWndNodePath = \"MJPlayers\";\n\n\t\t//动态生成节点\n\t\tthis.LoadPrefabByGameType();\n\t},\n\tLoadPrefabByGameType: function () {\n\t\tlet prefabPath = \"ui/uiGame/\" + this.gameType + \"/\" + this.gameType + \"_winlost_child\";\n\t\tlet that = this;\n\t\tapp.ControlManager().CreateLoadPromise(prefabPath, cc.Prefab)\n\t\t\t.then(function (prefab) {\n\t\t\t\tif (!prefab) {\n\t\t\t\t\tthat.ErrLog(\"LoadPrefabByGameType(%s) load spriteFrame fail\", prefabPath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthat.InitNode(prefab);\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\t\tthat.ErrLog(\"LoadPrefabByGameType(%s) error:%s\", prefabPath, error.stack);\n\t\t\t\t}\n\t\t\t);\n\t},\n\tInitNode: function (prefab) {\n\t\tlet Player1Node = cc.instantiate(prefab);\n\t\tthis.nowChildName = Player1Node.name;\n\t\tif (this.lastChildName != null && this.lastChildName == this.nowChildName\n\t\t\t&& this.lastRoomId == this.roomId) {\n\t\t\t//子节点跟之前一样，无需重新创建，直接return\n\t\t\t//由于未结束的战绩会时时改变，所以不能return\n\t\t\t// return;\n\t\t}\n\t\t//清空之前的节点,生成新的节点\n\t\tthis.lastChildName = this.nowChildName;\n\t\tthis.lastRoomId = this.roomId;\n\t\t//this.Players.removeAllChildren();\n\t\tthis.DestroyAllChildren(this.Players);\n\t\tPlayer1Node.name = 'player1';\n\t\tthis.Players.addChild(Player1Node);\n\n\n\t\tif (this.MJPlayers.active) {\n\t\t\t//添加手牌\n\t\t\tlet ShowCardNode = this.GetWndNode(this.getWndNodePath + '/player1/showcard');\n\t\t\tlet sp_in = ShowCardNode.getChildByName('sp_in');\n\t\t\tfor (let i = 1; i <= this.ShareDefine[this.gameType.toUpperCase() + 'RoomDealPerPosCardCount']; i++) {\n\t\t\t\tlet cardNode = cc.instantiate(sp_in);\n\t\t\t\tcardNode.name = this.ComTool.StringAddNumSuffix(\"card\", Math.abs(i - (this.ShareDefine[this.gameType.toUpperCase() + 'RoomDealPerPosCardCount'] + 1)), 2);\n\t\t\t\tShowCardNode.getChildByName(\"handCards\").addChild(cardNode);\n\t\t\t}\n\t\t\t//添加吃牌\n\t\t\tlet DownCardNode = this.GetWndNode(this.getWndNodePath + '/player1/downcard');\n\t\t\tlet downNode01 = DownCardNode.getChildByName('down01');\n\t\t\tfor (let i = 2; i <= 8; i++) {\n\t\t\t\tlet downNode = cc.instantiate(downNode01);\n\t\t\t\tdownNode.name = this.ComTool.StringAddNumSuffix(\"down\", i, 2);\n\t\t\t\tDownCardNode.addChild(downNode);\n\t\t\t}\n\t\t}\n\t\tthis.InitPlayers();\n\t\tthis.alldata = false;\n\t\tthis.maxpage = 0;\n\t\tthis.NetManager.SendPack(\"game.CPlayerSetRoomRecord\", {\"roomID\": this.roomId}, this.Event_GameRecord.bind(this));\n\t},\n\tInitPlayers: function () {\n\t\tlet AddNode = this.GetWndNode(this.getWndNodePath + '/player1');\n\t\tfor (let i = 2; i <= this.playerAll.length; i++) {\n\t\t\tlet PlayerSon = cc.instantiate(AddNode);\n\t\t\tPlayerSon.name = 'player' + i;\n\t\t\tPlayerSon.active = false;\n\t\t\tthis.Players.addChild(PlayerSon);\n\t\t}\n\t},\n\tShowRoomInfo: function (roomEndResult) {\n\t\tlet setID = roomEndResult[\"setID\"];\n\t\tlet time = roomEndResult[\"endTime\"];\n\t\tif (setID > 0) {\n\t\t\tthis.jushu.active = true;\n\t\t\tthis.jushu.getComponent(cc.Label).string = \"第\" + setID + \"局\";\n\t\t} else {\n\t\t\tthis.jushu.active = false;\n\t\t}\n\n\t\tthis.endTime.getComponent(cc.Label).string = this.ComTool.GetDateYearMonthDayHourMinuteString(time);\n\t\tif (this.playBackCode > 0) {\n\t\t\tthis.node.getChildByName('btn_replay').active = true;\n\t\t\tthis.node.getChildByName('btn_share').active = true;\n\t\t\tthis.endTime.parent.getChildByName(\"backCode\").getComponent(cc.Label).string = \"回放码:\" + this.playBackCode;\n\t\t\tcc.find('btn_replay', this.node).actvie = true;\n\t\t} else {\n\t\t\tthis.node.getChildByName('btn_replay').active = false;\n\t\t\tthis.node.getChildByName('btn_share').active = false;\n\t\t\tthis.endTime.parent.getChildByName(\"backCode\").getComponent(cc.Label).string = \"\";\n\t\t\tcc.find('btn_replay', this.node).actvie = false;\n\t\t}\n\t\t//第几局 第几轮\n\t\tlet {dataJsonRes, roomID} = roomEndResult;\n\t\ttry {\n\t\t\tdataJsonRes = JSON.parse(dataJsonRes);\n\t\t\t\n\t\t\tlet roomKeyStr = \"\";\n\t\t\tif (this.roomKey != null) {\n\t\t\t\troomKeyStr = \"房间号:\" + this.roomKey;\n\t\t\t}\n\t\t\tif (dataJsonRes['currentCirCle'] != null) {\n\t\t\t\tthis.jushu.getComponent(cc.Label).string = roomKeyStr + `第${dataJsonRes['setId']}局 第${dataJsonRes['currentCirCle']}手`;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t},\n\t\n\t\n\tEvent_GameRecord: function (serverPack) {\n\t\tthis.alldata = serverPack.pSetRoomRecords;\n\t\tthis.maxpage = serverPack.pSetRoomRecords.length;\n\t\tthis.playBackCode = serverPack.pSetRoomRecords[0].playbackCode;\n\t\tthis.ShowData(this.page);\n\t},\n\tShowData: function () {\n\t\tthis.SetPageLabel();\n\t\tlet data = this.Str2Json(this.alldata[this.page - 1].dataJsonRes);\n\t\tthis.playBackCode = this.alldata[this.page - 1].playbackCode;\n\t\tthis.InitShowPlayerInfo(data);\n\t\tthis.ShowRoomInfo(this.alldata[this.page - 1]);\n\t},\n\tSetPageLabel: function () {\n\t\tthis.SetWndProperty(\"page/editbox_page\", \"text\", this.page + \"/\" + this.maxpage);\n\t\tthis.SetWndProperty(\"page2/editbox_page\", \"text\", this.page);\n\t},\n\tInitShowPlayerInfo: function (setEnd) {\n\t\tfor (let i = 0; i < this.playerAll.length; i++) {\n\t\t\tlet PlayerNode = this.GetWndNode(this.getWndNodePath + '/player' + (i + 1));\n\t\t\tif (PlayerNode) {\n\t\t\t\tPlayerNode.active = false;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet posResultList = setEnd.posResultList;\n\t\tlet count = 0;\n\t\tfor (let i = 0; i < posResultList.length; i++) {\n\t\t\tif (!posResultList[i].pid) continue;\n\t\t\tlet PlayerNode = this.GetWndNode(this.getWndNodePath + '/player' + (count + 1));\n\t\t\tPlayerNode.active = true;\n\t\t\tPlayerNode.getComponent(this.nowChildName).ShowPlayerData(setEnd, this.playerAll, i);\n\t\t\tcount++;\n\t\t}\n\t\tlet restCardList = setEnd[\"restCard\"] || [];\n\t\tthis.ShowRestCard(restCardList);\n\n\t},\n\tShowRestCard: function (restCardList) {\n\t\tif(restCardList.length==0){\n\t\t\tthis.sp_restCard.active=false;\n\t\t\treturn;\n\t\t}\n\t\tthis.sp_restCard.active=true;\n\t\tlet cardNode = this.sp_restCard.getChildByName(\"cardNode\");\n\t\tlet cardListNode = this.sp_restCard.getChildByName(\"cardList\");\n\t\tcardListNode.removeAllChildren();\n\t\tfor (let i = 0; i < restCardList.length; i++) {\n\t\t\tlet childNode = cc.instantiate(cardNode);\n\t\t\tchildNode.active = true;\n\t\t\tthis.SpriteShow(childNode, restCardList[i]);\n            cardListNode.addChild(childNode);\n\t\t}\n\t},\n\tSpriteShow:function(childNode, cardID){\n        let FilePath = \"ui/uiGame/jyessz/poker/\";\n        let childSprite = childNode.getComponent(cc.Sprite);\n        if (!childSprite) {\n            this.ErrLog(\"ShowOutCard(%s) not find cc.Sprite\", childNode.name);\n            return\n        }\n\n        //取卡牌ID的前2位\n        let imagePath = [FilePath, Math.floor(cardID / 100)].join(\"\");\n        // if (!imagePath) {\n        //     this.ErrLog(\"fuck ShowImage IntegrateImage.txt not find:%s\", imageName);\n        //     return\n        // }\n        let that = this;\n        app.ControlManager().CreateLoadPromise(imagePath, cc.SpriteFrame)\n            .then(function(spriteFrame){\n                        if(!spriteFrame){\n                            that.ErrLog(\"OpenPoker(%s) load spriteFrame fail\", imagePath);\n                            return\n                        }\n                        childSprite.spriteFrame = spriteFrame;\n            }).catch(function(error){\n                that.ErrLog(\"OpenPoker(%s) error:%s\", imagePath, error.stack);\n            }\n        );\n    },\n\t//---------点击函数---------------------\n\tOnClick: function (btnName, btnNode) {\n\t\tif (btnName == \"btn_close\") {\n\t\t\tthis.CloseForm();\n\t\t} else if (btnName == \"btn_last\") {\n\t\t\tif (this.page == 1) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"NowFirstPage\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.page -= 1;\n\t\t\tthis.ShowData();\n\t\t} else if (btnName == \"btn_next\") {\n\t\t\tif (this.page == this.maxpage) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"NowLastPage\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.page += 1;\n\t\t\tthis.ShowData();\n\t\t} else if (btnName == \"btn_share\") {\n\t\t\tthis.Click_btn_Share();\n\t\t} else if (btnName == \"btn_replay\") {\n\t\t\tthis.NetManager.SendPack(\"game.CPlayerPlayBack\", {\n\t\t\t\t\"playBackCode\": this.playBackCode,\n\t\t\t\t\"chekcPlayBackCode\": true\n\t\t\t}, this.OnPack_VideoData.bind(this), this.OnVideoFailed.bind(this));\n\t\t\treturn;\n\t\t} else if (btnName == \"btn_search\") {\n\t\t\tif (isNaN(this.page_search.string) == true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet page_search = parseInt(this.page_search.string);\n\t\t\tif (page_search < 1) {\n\t\t\t\tthis.page = 1;\n\t\t\t} else if (page_search >= this.maxpage) {\n\t\t\t\tthis.page = this.maxpage;\n\t\t\t} else {\n\t\t\t\tthis.page = page_search;\n\t\t\t}\n\t\t\tthis.ShowData();\n\t\t} else {\n\t\t\tthis.ErrLog(\"OnClick not find btnName\", btnName);\n\t\t}\n\t},\n\tOnPack_VideoData: function (serverPack) {\n\t\t//记录当前的switchData,退出的时候要调用\n\t\tlet switchRecord = {\n\t\t\taction: \"OpenUIRecordAllResult\",\n\t\t\tplayerAll: this.playerAll,\n\t\t\troomId: this.roomId,\n\t\t\tunionId: this.unionId,\n\t\t\troomKey: this.roomKey,\n\t\t\tgameType: this.gameTypeID,\n\t\t\tpage: this.page\n\t\t};\n\t\tcc.sys.localStorage.setItem(\"switchRecord\", JSON.stringify(switchRecord));\n\t\tapp.Client.VideoCheckSubGame(serverPack.Name.toLowerCase(), this.playBackCode);\n\t},\n\tOnVideoFailed: function (serverPack) {\n\t\tapp.SysNotifyManager().ShowSysMsg(\"MSG_REPLAY_ERROR\");\n\t},\n\tClick_btn_Share: function () {\n\t\tlet heroName = app.HeroManager().GetHeroProperty(\"name\");\n\t\tlet gameId = app.ShareDefine().GametTypeNameDict[this.gameType.toUpperCase()];\n\t\tlet gameName = app.ShareDefine().GametTypeID2Name[gameId];\n\t\tlet title = \"回放码为【\" + this.playBackCode + \"】\";\n\t\tlet desc = \"【\" + heroName + \"】邀请您观看【\" + gameName + \"】中牌局回放记录\";\n\t\tlet heroID = app.HeroManager().GetHeroProperty(\"pid\");\n\t\tlet cityId = app.HeroManager().GetHeroProperty(\"cityId\");\n\t\tlet weChatAppShareUrl = app.Client.GetClientConfigProperty(\"WeChatAppShareUrl\") + heroID + \"&cityid=\" + cityId;\n\t\tconsole.log(\"回放码==\" + this.playBackCode);\n\t\tthis.SDKManager.Share(title, desc, weChatAppShareUrl, \"0\");\n\t},\n\tStr2Json: function (jsondata) {\n\t\tif (jsondata === \"\") {\n\t\t\treturn false;\n\t\t}\n\t\tvar json = JSON.parse(jsondata);\n\t\treturn json;\n\t},\n});\n"]}