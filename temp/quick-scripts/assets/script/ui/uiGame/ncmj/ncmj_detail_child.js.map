{"version":3,"sources":["ncmj_detail_child.js"],"names":["app","require","cc","Class","extends","properties","OnLoad","ShowPlayerData","resultsList","playerAll","idx","console","log","data","userInfo","node","getChildByName","getComponent","ShowHeroHead","pid","Label","string","ComTool","GetPid","index","player","name","jiesuan","show","showLabel","huTypesShow","sportsPoint","active","point","maxPoint","maxDianPao","i","length","dianPaoPoint","dissolveState","imagePath","that","loader","loadRes","SpriteFrame","error","spriteFrame","Sprite","huData","ziMoPoint","jiePaoPoint"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACRC,aAASH,QAAQ,qBAAR,CADD;;AAGRI,gBAAY,EAHJ;;AAMR;AACAC,YAAQ,kBAAY,CAEnB,CATO;;AAWRC,oBAAe,wBAASC,WAAT,EAAsBC,SAAtB,EAAgCC,GAAhC,EAAoC;AAClDC,gBAAQC,GAAR,CAAY,OAAZ,EAAqBJ,WAArB,EAAkCC,SAAlC,EAA6CC,GAA7C;AACM,YAAIG,OAAOL,YAAYE,GAAZ,CAAX;AACA,YAAII,WAAW,KAAKC,IAAL,CAAUC,cAAV,CAAyB,WAAzB,CAAf;AACA,YAAGF,QAAH,EAAY;AACRA,qBAASE,cAAT,CAAwB,UAAxB,EAAoCC,YAApC,CAAiD,iBAAjD,EAAoEC,YAApE,CAAiFL,KAAKM,GAAtF;AACAL,qBAASE,cAAT,CAAwB,UAAxB,EAAoCC,YAApC,CAAiDf,GAAGkB,KAApD,EAA2DC,MAA3D,GAAoE,QAAQrB,IAAIsB,OAAJ,GAAcC,MAAd,CAAqBV,KAAKM,GAA1B,CAA5E;AACA,iBAAI,IAAIK,KAAR,IAAiBf,SAAjB,EAA2B;AACvB,oBAAIgB,SAAShB,UAAUe,KAAV,CAAb;AACA,oBAAGC,OAAON,GAAP,IAAcN,KAAKM,GAAtB,EAA0B;AACtBL,6BAASE,cAAT,CAAwB,YAAxB,EAAsCC,YAAtC,CAAmDf,GAAGkB,KAAtD,EAA6DC,MAA7D,GAAsEI,OAAOC,IAA7E;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AACJ;;AAED,YAAIC,UAAU,KAAKZ,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAd;AACA,YAAIY,OAAK,CAAT;AACA,YAAIC,YAAU,KAAd;AACA,YAAGF,OAAH,EAAW;AACP,iBAAKG,WAAL,CAAiBH,OAAjB,EAAyBd,IAAzB;;AAEA;AACA,gBAAI,OAAOA,KAAKkB,WAAZ,IAA0B,WAA9B,EAA2C;AACvCJ,wBAAQX,cAAR,CAAuB,gBAAvB,EAAyCgB,MAAzC,GAAkD,IAAlD;AACA,oBAAInB,KAAKkB,WAAL,GAAmB,CAAvB,EAA0B;AACtBJ,4BAAQX,cAAR,CAAuB,gBAAvB,EAAyCC,YAAzC,CAAsDf,GAAGkB,KAAzD,EAAgEC,MAAhE,GAAyE,UAAUR,KAAKkB,WAAxF;AACH,iBAFD,MAEK;AACDJ,4BAAQX,cAAR,CAAuB,gBAAvB,EAAyCC,YAAzC,CAAsDf,GAAGkB,KAAzD,EAAgEC,MAAhE,GAAyE,SAASR,KAAKkB,WAAvF;AACH;AACDJ,wBAAQX,cAAR,CAAuB,QAAvB,EAAiCgB,MAAjC,GAAwC,KAAxC;AACHL,wBAAQX,cAAR,CAAuB,SAAvB,EAAkCgB,MAAlC,GAAyC,KAAzC;AACA,aATD,MASK;AACDL,wBAAQX,cAAR,CAAuB,gBAAvB,EAAyCgB,MAAzC,GAAkD,KAAlD;;AAEA,oBAAGnB,KAAKoB,KAAL,IAAY,CAAf,EAAiB;AAChBN,4BAAQX,cAAR,CAAuB,QAAvB,EAAiCgB,MAAjC,GAAwC,IAAxC;AACAL,4BAAQX,cAAR,CAAuB,SAAvB,EAAkCgB,MAAlC,GAAyC,KAAzC;AACAL,4BAAQX,cAAR,CAAuB,QAAvB,EAAiCC,YAAjC,CAA8Cf,GAAGkB,KAAjD,EAAwDC,MAAxD,GAAiE,MAAIR,KAAKoB,KAA1E;AACH,iBAJE,MAIE;AACDN,4BAAQX,cAAR,CAAuB,QAAvB,EAAiCgB,MAAjC,GAAwC,KAAxC;AACAL,4BAAQX,cAAR,CAAuB,SAAvB,EAAkCgB,MAAlC,GAAyC,IAAzC;AACAL,4BAAQX,cAAR,CAAuB,SAAvB,EAAkCC,YAAlC,CAA+Cf,GAAGkB,KAAlD,EAAyDC,MAAzD,GAAkER,KAAKoB,KAAvE;AACH;AACD;AACJ;AACD,YAAIC,WAAS,CAAb;AACA,YAAIC,aAAW,CAAf;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI5B,YAAY6B,MAA/B,EAAuCD,GAAvC,EAA2C;AACvC,gBAAIvB,QAAOL,YAAY4B,CAAZ,CAAX;AACA,gBAAGvB,MAAKoB,KAAL,GAAWC,QAAd,EAAuB;AACnBA,2BAASrB,MAAKoB,KAAd;AACH;AACD,gBAAGpB,MAAKyB,YAAL,GAAkBH,UAArB,EAAgC;AAC5BA,6BAAWtB,MAAKyB,YAAhB;AACH;AACJ;AACD;AACA,YAAGzB,KAAKyB,YAAL,IAAmBH,UAAnB,IAAiCA,aAAW,CAA/C,EAAiD;AAC7C,iBAAKpB,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCgB,MAAzC,GAAgD,IAAhD;AACH,SAFD,MAEK;AACD,iBAAKjB,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCgB,MAAzC,GAAgD,KAAhD;AACH;AACD,YAAGnB,KAAKoB,KAAL,IAAYC,QAAf,EAAwB;AACpB,iBAAKnB,IAAL,CAAUC,cAAV,CAAyB,UAAzB,EAAqCgB,MAArC,GAA4C,IAA5C;AACA,iBAAKjB,IAAL,CAAUC,cAAV,CAAyB,cAAzB,EAAyCgB,MAAzC,GAAgD,KAAhD;AACH,SAHD,MAGK;AACD,iBAAKjB,IAAL,CAAUC,cAAV,CAAyB,UAAzB,EAAqCgB,MAArC,GAA4C,KAA5C;AACH;;AAED,YAAI,KAAKjB,IAAL,CAAUC,cAAV,CAAyB,eAAzB,KAA6C,IAAjD,EAAuD;AACnD;AACA,gBAAI,OAAOH,KAAK0B,aAAZ,IAA8B,WAA9B,IAA6C1B,KAAK0B,aAAL,IAAsB,CAAC,CAAxE,EAA2E;AACvE,qBAAKxB,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CgB,MAA1C,GAAiD,KAAjD;AACH,aAFD,MAEK;AACD,oBAAIQ,YAAY,gCAA8B3B,KAAK0B,aAAnD;AACA,oBAAIE,OAAO,IAAX;AACA;AACAvC,mBAAGwC,MAAH,CAAUC,OAAV,CAAkBH,SAAlB,EAA6BtC,GAAG0C,WAAhC,EAA6C,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B;AACvE,wBAAGD,KAAH,EAAS;AACLlC,gCAAQC,GAAR,CAAY,eAAe4B,SAA3B;AACA;AACH;AACDC,yBAAK1B,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CC,YAA1C,CAAuDf,GAAG6C,MAA1D,EAAkED,WAAlE,GAAgFA,WAAhF;AACAL,yBAAK1B,IAAL,CAAUC,cAAV,CAAyB,eAAzB,EAA0CgB,MAA1C,GAAiD,IAAjD;AACH,iBAPD;AAQH;AACJ,SAjBD,MAiBO;AACNrB,oBAAQkC,KAAR,CAAc,+CAAd;AACA;AACP,KA1GO;;AA6GRf,iBAAa,qBAAUH,OAAV,EAAmBqB,MAAnB,EAA2B;AACvCrB,gBAAQX,cAAR,CAAuB,SAAvB,EAAkCA,cAAlC,CAAiD,MAAjD,EAAyDA,cAAzD,CAAwE,KAAxE,EAA+EC,YAA/E,CAA4Ff,GAAGkB,KAA/F,EAAsGC,MAAtG,GAA+G2B,OAAOC,SAAtH;AACAtB,gBAAQX,cAAR,CAAuB,SAAvB,EAAkCA,cAAlC,CAAiD,QAAjD,EAA2DA,cAA3D,CAA0E,KAA1E,EAAiFC,YAAjF,CAA8Ff,GAAGkB,KAAjG,EAAwGC,MAAxG,GAAiH2B,OAAOE,WAAxH;AACAvB,gBAAQX,cAAR,CAAuB,SAAvB,EAAkCA,cAAlC,CAAiD,SAAjD,EAA4DA,cAA5D,CAA2E,KAA3E,EAAkFC,YAAlF,CAA+Ff,GAAGkB,KAAlG,EAAyGC,MAAzG,GAAkH2B,OAAOV,YAAzH;AACA;AACA;;AAlHO,CAAT","file":"ncmj_detail_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\ncmj","sourcesContent":["/*\n\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BaseMJ_detail_child\"),\n\n\tproperties: {\n    },\n\n\t// use this for initialization\n\tOnLoad: function () {\n\n\t},\n\n\tShowPlayerData:function(resultsList, playerAll,idx){\n\t\tconsole.log(\"总结算数据\", resultsList, playerAll, idx);\n        let data = resultsList[idx];\n        let userInfo = this.node.getChildByName(\"user_info\");\n        if(userInfo){\n            userInfo.getChildByName(\"head_img\").getComponent(\"WeChatHeadImage\").ShowHeroHead(data.pid);\n            userInfo.getChildByName(\"label_id\").getComponent(cc.Label).string = \"ID:\" + app.ComTool().GetPid(data.pid);\n            for(let index in playerAll){\n                let player = playerAll[index];\n                if(player.pid == data.pid){\n                    userInfo.getChildByName(\"lable_name\").getComponent(cc.Label).string = player.name;\n                    // if(player.sex==app.ShareDefine().HeroSex_Boy){\n                    //     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteMale;\n                    // }else if(player.sex==app.ShareDefine().HeroSex_Girl){\n                    //     userInfo.getChildByName(\"sex\").getComponent(cc.Sprite).SpriteFrame=this.SpriteFeMale;\n                    // }\n                    break;\n                }\n            }\n        }\n\n        let jiesuan = this.node.getChildByName(\"jiesuan\");\n        let show=1;\n        let showLabel=false;\n        if(jiesuan){\n            this.huTypesShow(jiesuan,data);\n            \n            //比赛分\n            if (typeof(data.sportsPoint)!=\"undefined\") {\n                jiesuan.getChildByName(\"lb_sportsPoint\").active = true;\n                if (data.sportsPoint > 0) {\n                    jiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：+\" + data.sportsPoint;\n                }else{\n                    jiesuan.getChildByName(\"lb_sportsPoint\").getComponent(cc.Label).string = \"比赛分：\" + data.sportsPoint;\n                }\n                jiesuan.getChildByName(\"lb_win\").active=false;\n\t            jiesuan.getChildByName(\"lb_lost\").active=false;\n            }else{\n                jiesuan.getChildByName(\"lb_sportsPoint\").active = false;\n\n                if(data.point>=0){\n\t                jiesuan.getChildByName(\"lb_win\").active=true;\n\t                jiesuan.getChildByName(\"lb_lost\").active=false;\n\t                jiesuan.getChildByName(\"lb_win\").getComponent(cc.Label).string = '+'+data.point;\n\t            }else{\n\t                jiesuan.getChildByName(\"lb_win\").active=false;\n\t                jiesuan.getChildByName(\"lb_lost\").active=true;\n\t                jiesuan.getChildByName(\"lb_lost\").getComponent(cc.Label).string = data.point;\n\t            }\n            }\n        }\n        let maxPoint=0;\n        let maxDianPao=0;\n        for(let i = 0; i < resultsList.length; i++){\n            let data = resultsList[i];\n            if(data.point>maxPoint){\n                maxPoint=data.point;\n            }\n            if(data.dianPaoPoint>maxDianPao){\n                maxDianPao=data.dianPaoPoint;\n            }\n        }\n        //显示大赢家图标\n        if(data.dianPaoPoint>=maxDianPao && maxDianPao>0){\n            this.node.getChildByName('icon_paoshou').active=true;\n        }else{\n            this.node.getChildByName('icon_paoshou').active=false;\n        }\n        if(data.point>=maxPoint){\n            this.node.getChildByName('icon_win').active=true;\n            this.node.getChildByName('icon_paoshou').active=false;\n        }else{\n            this.node.getChildByName('icon_win').active=false;\n        }\n\n        if (this.node.getChildByName('icon_dissolve') != null) {\n            //显示是否解散（-1:正常结束,0:未操作,1:同意操作,2:拒绝操作,3:发起者）\n            if (typeof(data.dissolveState) == \"undefined\" || data.dissolveState == -1) {\n                this.node.getChildByName('icon_dissolve').active=false;\n            }else{\n                let imagePath = \"texture/record/img_dissolve\"+data.dissolveState;\n                let that = this;\n                //加载图片精灵\n                cc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\n                    if(error){\n                        console.log(\"加载图片精灵失败  \" + imagePath);\n                        return\n                    }\n                    that.node.getChildByName('icon_dissolve').getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                    that.node.getChildByName('icon_dissolve').active=true;\n                });\n            }\n        } else {\n        \tconsole.error(\"请检查 xxmj_detail_child预制体是否有 icon_dissolve图集节点\")\n        }\n\t},\n\n\t\n\thuTypesShow: function (jiesuan, huData) {\t\t\n\t\tjiesuan.getChildByName('huTypes').getChildByName('zimo').getChildByName('num').getComponent(cc.Label).string = huData.ziMoPoint;\n\t\tjiesuan.getChildByName('huTypes').getChildByName('jiepao').getChildByName('num').getComponent(cc.Label).string = huData.jiePaoPoint;\n\t\tjiesuan.getChildByName('huTypes').getChildByName('dianpao').getChildByName('num').getComponent(cc.Label).string = huData.dianPaoPoint;\n\t\t// jiesuan.getChildByName('huTypes').getChildByName('baipai').getChildByName('num').getComponent(cc.Label).string = huData.mingBaiNum;\n\t},\n\n});\n"]}