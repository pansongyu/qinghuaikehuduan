{"version":3,"sources":["UILogInfo.js"],"names":["app","require","cc","Class","extends","properties","TextLabel","Label","OnCreateInit","LogManager","Client","MaxLogCount","OnShow","msgList","GetLogMsgList","count","length","logTypeList","InitPrintLogType","messageList","index","message","logType","logId","allContent","indexOf","join","string","log","GetWndComponent","Toggle","isChecked","error","sys","warn","push","OnClick","btnName","eventData","Log","Click_btn_clear","ErrLog","ClearShowLog"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,mBAAUJ,GAAGK;AADL,KAHP;;AAOL;AACAC,kBAAa,wBAAU;AACnB,aAAKC,UAAL,GAAkBT,IAAIU,MAAJ,CAAWD,UAA7B;;AAEA;AACA,aAAKE,WAAL,GAAmB,EAAnB;AAEH,KAdI;;AAiBLC,YAAO,kBAAU;AACb,YAAIC,UAAU,KAAKJ,UAAL,CAAgBK,aAAhB,CAA8B,KAAKH,WAAnC,CAAd;AACA,YAAII,QAAQF,QAAQG,MAApB;;AAEA,YAAIC,cAAc,KAAKC,gBAAL,EAAlB;;AAEA,YAAIC,cAAc,IAAlB;AACA,YAAIC,QAAQ,CAAZ;AACA,YAAIC,UAAU,CAAd;AACA,YAAIC,UAAU,CAAd;AACH,YAAIC,QAAQ,CAAZ;;AAEA,YAAIC,aAAa,EAAjB;AACG,aAAIJ,QAAM,CAAV,EAAaA,QAAML,KAAnB,EAA0BK,OAA1B,EAAkC;AAC9BD,0BAAcN,QAAQO,KAAR,CAAd;AACAC,sBAAUF,YAAY,CAAZ,CAAV;AACAG,sBAAUH,YAAY,CAAZ,CAAV;AACA,gBAAGF,YAAYQ,OAAZ,CAAoBH,OAApB,KAAgC,CAAC,CAApC,EAAsC;AAClCC,wBAAQJ,YAAY,CAAZ,CAAR;AACAK,8BAAc,CAAC,GAAD,EAAMD,KAAN,EAAa,GAAb,EAAkBF,OAAlB,EAA0B,IAA1B,EAAgCK,IAAhC,CAAqC,EAArC,CAAd;AACH;AACJ;;AAEJ,aAAKpB,SAAL,CAAeqB,MAAf,GAAwBH,UAAxB;AACA,KAzCI;;AA2CLN,sBAAiB,4BAAY;AACzB,YAAID,cAAc,EAAlB;AACA,YAAIW,MAAM,KAAKC,eAAL,CAAqB,KAArB,EAA2B3B,GAAG4B,MAA9B,EAAsCC,SAAhD;AACA,YAAIC,QAAQ,KAAKH,eAAL,CAAqB,OAArB,EAA6B3B,GAAG4B,MAAhC,EAAwCC,SAApD;AACA,YAAIE,MAAM,KAAKJ,eAAL,CAAqB,KAArB,EAA2B3B,GAAG4B,MAA9B,EAAsCC,SAAhD;AACA,YAAIG,OAAO,KAAKL,eAAL,CAAqB,MAArB,EAA4B3B,GAAG4B,MAA/B,EAAuCC,SAAlD;AACA,YAAGH,GAAH,EAAO;AACHX,wBAAYkB,IAAZ,CAAiB,KAAjB;AACH;AACD,YAAGH,KAAH,EAAS;AACLf,wBAAYkB,IAAZ,CAAiB,OAAjB;AACH;AACD,YAAGF,GAAH,EAAO;AACHhB,wBAAYkB,IAAZ,CAAiB,MAAjB;AACH;AACD,YAAGD,IAAH,EAAQ;AACJjB,wBAAYkB,IAAZ,CAAiB,MAAjB;AACH;AACD,eAAOlB,WAAP;AACH,KA9DI;AA+DL;;AAEA;;AAEAmB,aAAQ,iBAASC,OAAT,EAAkBC,SAAlB,EAA4B;AAChC,aAAKC,GAAL,CAASF,OAAT;AACA,YAAGA,WAAW,WAAd,EAA0B;AACtB,iBAAKG,eAAL;AACH,SAFD,MAGK,IAAGH,WAAW,KAAX,IAAoBA,WAAW,OAA/B,IAA0CA,WAAW,KAArD,IAA8DA,WAAW,MAA5E,EAAmF;AACpF,iBAAKzB,MAAL;AACH,SAFI,MAGD;AACA,iBAAK6B,MAAL,CAAY,qBAAZ,EAAmCJ,OAAnC;AACH;AACJ,KA9EI;;AAgFLG,qBAAgB,2BAAU;AAC5B,aAAKE,YAAL;AACG,KAlFI;;AAoFRA,kBAAa,wBAAU;AAChB,aAAK9B,MAAL;AACN;;AAtFO,CAAT","file":"UILogInfo.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n    UILogInfo log信息界面\n*/\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        TextLabel:cc.Label,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.LogManager = app.Client.LogManager;\n\n        //一次最多取多少条信息显示\n        this.MaxLogCount = 50;\n\n    },\n\n\n    OnShow:function(){\n        let msgList = this.LogManager.GetLogMsgList(this.MaxLogCount);\n        let count = msgList.length;\n\n        let logTypeList = this.InitPrintLogType();\n\n        let messageList = null;\n        let index = 0;\n        let message = 0;\n        let logType = 0;\n\t    let logId = 0;\n\n\t    let allContent = \"\";\n        for(index=0; index<count; index++){\n            messageList = msgList[index];\n            message = messageList[0];\n            logType = messageList[1];\n            if(logTypeList.indexOf(logType) != -1){\n                logId = messageList[2];\n                allContent += [\"[\", logId, \"]\", message,\"\\n\"].join(\"\");\n            }\n        }\n\n\t    this.TextLabel.string = allContent;\n    },\n\n    InitPrintLogType:function () {\n        let logTypeList = [];\n        let log = this.GetWndComponent(\"log\",cc.Toggle).isChecked;\n        let error = this.GetWndComponent(\"error\",cc.Toggle).isChecked;\n        let sys = this.GetWndComponent(\"sys\",cc.Toggle).isChecked;\n        let warn = this.GetWndComponent(\"warn\",cc.Toggle).isChecked;\n        if(log){\n            logTypeList.push(\"log\");\n        }\n        if(error){\n            logTypeList.push(\"error\");\n        }\n        if(sys){\n            logTypeList.push(\"info\");\n        }\n        if(warn){\n            logTypeList.push(\"warn\");\n        }\n        return logTypeList;\n    },\n    //-------------回掉函数----------------\n\n    //---------点击函数---------------------\n\n    OnClick:function(btnName, eventData){\n        this.Log(btnName);\n        if(btnName == \"btn_clear\"){\n            this.Click_btn_clear();\n        }\n        else if(btnName == \"log\" || btnName == \"error\" || btnName == \"sys\" || btnName == \"warn\"){\n            this.OnShow();\n        }\n        else{\n            this.ErrLog(\"OnClick:%s not find\", btnName);\n        }\n    },\n\n    Click_btn_clear:function(){\n\t\tthis.ClearShowLog();\n    },\n\n\tClearShowLog:function(){\n        this.OnShow();\n\t},\n\n\n});\n"]}