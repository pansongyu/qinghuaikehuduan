{"version":3,"sources":["UIChouJiangResult.js"],"names":["app","require","cc","Class","extends","properties","img_bjl_fx","Node","qian","ledou","fangka","lb_fangka","Label","lb_qian","lb_ledou","OnCreateInit","RegEvent","Event_ChouJiangShareSuccess","event","FormManager","CloseForm","SetWndProperty","OnShow","choujiangData","byUILog","dataID","active","prizeType","rewardNum","id","ShowOneJiangLi","luckSpr","ShareFangKa","ShareQian","ShareLeDou","ShowShareForm","shareType","shareObj","getChildByName","getComponent","Sprite","spriteFrame","ShowForm","type","num","string","OnClick","btnName","eventData","ErrLog"],"mappings":"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","file":"UIChouJiangResult.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        img_bjl_fx:cc.Node,\n        qian:cc.Node,\n        ledou:cc.Node,\n        fangka:cc.Node,\n\n        lb_fangka:cc.Label,\n        lb_qian:cc.Label,\n        lb_ledou:cc.Label,\n\n\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.RegEvent(\"ChouJiangShareSuccess\", this.Event_ChouJiangShareSuccess, this);\n    },\n    Event_ChouJiangShareSuccess:function(event){\n        app.FormManager().CloseForm(\"UIChouJiangShare\");\n        // this.SetWndProperty(\"image01/btnSure\", \"active\",false);\n        this.SetWndProperty(\"image01/btnLingQu\", \"interactable\",true);\n    },\n    //---------显示函数--------------------\n\n    OnShow:function(choujiangData,byUILog = false){\n        this.byUILog = byUILog;\n        this.dataID = 0;\n        this.SetWndProperty(\"image01/btnSure\", \"active\",true);\n        this.SetWndProperty(\"image01/btnLingQu\", \"interactable\",true);\n        this.fangka.active=false;\n        this.ledou.active=false;\n        this.qian.active=false;\n        this.img_bjl_fx.active = false;\n        //this.ShowOneJiangLi(UniList[0],UniCountList[0]);\n        let fangka=0;\n        let ledou=0;\n        let qian=0;\n        if(byUILog){\n            if(2 == choujiangData.prizeType)\n                fangka = choujiangData.rewardNum;\n            else if(1 == choujiangData.prizeType)\n                ledou = choujiangData.rewardNum;\n            else if(8 == choujiangData.prizeType)\n                qian = choujiangData.rewardNum/100;\n            this.dataID = choujiangData.id;\n        }\n        else{\n            if(2 == choujiangData.prizeType)\n                fangka = choujiangData.rewardNum;\n            else if(1 == choujiangData.prizeType)\n                ledou = choujiangData.rewardNum;\n            else if(8 == choujiangData.prizeType)\n                qian = choujiangData.rewardNum/100;\n            this.dataID = choujiangData.id;\n        }\n        if(qian>0)\n            this.ShowOneJiangLi(8,qian,choujiangData.luckSpr);\n        if(fangka>0)\n            this.ShowOneJiangLi(2,fangka,choujiangData.luckSpr);\n        if(ledou)\n            this.ShowOneJiangLi(1,ledou,choujiangData.luckSpr);\n        this.ShareFangKa=fangka;\n        this.ShareQian=qian;\n        this.ShareLeDou=ledou;\n    //    app.NetManager().SendPack(\"game.CPlayerLuckDraw\",{\"type\":7});  改成必须分享成功后才能领取\n    },\n    ShowShareForm:function(shareType){\n        this.img_bjl_fx.active = false;\n        let shareObj = {\n            \"qian\":this.ShareQian,\n            \"qianSpr\":this.qian.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame,\n            \"fangka\":this.ShareFangKa,\n            \"fangkaSpr\":this.fangka.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame,\n            \"ledou\":this.ShareLeDou,\n            \"ledouSpr\":this.ledou.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame,\n        };\n    \tapp.FormManager().ShowForm('UIChouJiangShare',shareObj,shareType);\n        // this.SetWndProperty(\"image01/btnSure\", \"active\",false);\n        this.SetWndProperty(\"image01/btnLingQu\", \"interactable\",true);\n    },\n    ShowOneJiangLi:function(type,num,luckSpr){\n        if(type==2){\n            //钻石\n            this.fangka.active=true;\n            this.fangka.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = luckSpr;\n            this.lb_fangka.string='X'+num;\n        }else if(type==1){\n            //乐斗\n            this.ledou.active=true;\n            this.ledou.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = luckSpr;\n            this.lb_ledou.string='X'+num;\n        }else if(type==8){\n             //红包\n            this.qian.active=true;\n            this.qian.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = luckSpr;\n            this.lb_qian.string=num+'元';\n        }\n    },\n    //---------点击函数---------------------\n\n\tOnClick:function(btnName, eventData){\n\t\tif(btnName == \"btnSure\"){\n            this.img_bjl_fx.active = !this.img_bjl_fx.active;\n\t\t}else if(btnName==\"btnSure_wx\"){\n            this.ShowShareForm(1);\n        }else if(btnName==\"btnSure_dd\"){\n            this.ShowShareForm(2);\n        }else if(btnName==\"btnSure_mw\"){\n            this.ShowShareForm(3);\n        }else if(btnName==\"btnLingQu\"){\n            // if(this.byUILog)\n            //     app.NetManager().SendPack(\"game.CPlayerLuckDraw\",{\"type\":8,\"recordId\":this.dataID});\n            // else\n            //     app.NetManager().SendPack(\"game.CPlayerLuckDraw\",{\"type\":7});\n            this.CloseForm();\n        }\n\t\telse{\n\t\t\tthis.ErrLog(\"OnClick:%s not find\", btnName);\n\t\t}\n\t},\n});\n"]}