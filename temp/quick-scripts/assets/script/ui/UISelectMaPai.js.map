{"version":3,"sources":["UISelectMaPai.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","OnShow","callback","maPai","LOGIC_MASK_COLOR","LOGIC_MASK_VALUE","PokerCard","layout","node","getChildByName","card","destroyAllChildren","i","index","n","instantiate","active","parent","ShowCard","name","OnClick","UpdateTxt","GetCardValue","poker","GetCardColor","color","cardType","newPoker","SubCardValue","GetPokeCard","cardNode","isShowIcon1","isShowLandowner","hideBg","isRazz","isPartnerCard","type","type1","type2","num","cardColor","cardValue","numNode","numSp","getComponent","Sprite","iconSp","icon1_Sp","spriteFrame","pokerDict","btnName","btnNode","children","length","element","Number","SysNotifyManager","ShowSysMsg","CloseForm","lb","Label","string","colors","values","Math","floor"],"mappings":"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","file":"UISelectMaPai.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n    OnCreateInit: function () {\n\n    },\n\n    OnShow: function (callback, maPai) {\n\t\tthis.LOGIC_MASK_COLOR = 0xF0;\n\t\tthis.LOGIC_MASK_VALUE = 0x0F;\n\t\tthis.PokerCard = app.PokerCard();\n        this.callback = callback\n        this.maPai = maPai\n        var layout = this.node.getChildByName(\"bg_create\").getChildByName(\"layout\")\n        const card = this.node.getChildByName(\"bg_create\").getChildByName(\"card\")\n        layout.destroyAllChildren()\n        for (let i = 3; i >= 0; i--) {\n            for (let index = 2; index <= 14; index++) {\n                let n = cc.instantiate(card)\n                n.active = true\n                n.parent = layout\n                this.ShowCard(i*16+index, n);\n                n.name = \"\" + (i*16+index)\n                if (this.maPai == i*16+index) {\n                    this.OnClick(n.name, n)\n                }\n            }\n        }\n        this.UpdateTxt()\n    },\n\t//获取牌值\n\tGetCardValue: function (poker) {\n\t\treturn poker & this.PokerCard.LOGIC_MASK_VALUE;\n\t},\n\n\t//获取花色\n\tGetCardColor: function (poker) {\n\t\twhile (poker >= 256) {\n\t\t\tpoker -= 256;\n\t\t}\n\t\tlet color = poker & this.PokerCard.LOGIC_MASK_COLOR;\n\t\treturn color;\n\t},\n    ShowCard: function (cardType, node) {\n\t\tlet newPoker = this.PokerCard.SubCardValue(cardType);\n\t\tthis.GetPokeCard(newPoker, node);\n\t},\n\tGetPokeCard: function (poker, cardNode, isShowIcon1 = true, isShowLandowner = false, hideBg = false, isRazz = false, isPartnerCard = false) {\n\t\tif (0 == poker) {\n\t\t\treturn;\n\t\t}\n\t\tlet type = \"\";\n\t\tlet type1 = \"\";\n\t\tlet type2 = \"\";\n\t\tlet num = \"\";\n\t\tlet cardColor = this.GetCardColor(poker);\n\t\tlet cardValue = this.GetCardValue(poker);\n\t\tlet numNode = cardNode.getChildByName(\"num\");\n\t\tnumNode.active = true;\n\t\tif (cardColor == 0) {\n\t\t\ttype = \"bg_diamond1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_red_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_diamond_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"red_\" + cardValue;\n\t\t} else if (cardColor == 16) {\n\t\t\ttype = \"bg_club1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_blue_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_club_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"black_\" + cardValue;\n\t\t} else if (cardColor == 32) {\n\t\t\ttype = \"bg_heart1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_red_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_heart_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"red_\" + cardValue;\n\t\t} else if (cardColor == 48) {\n\t\t\ttype = \"bg_spade1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_blue_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_spade_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"black_\" + cardValue;\n\t\t} else if (cardColor == 64) {//双数小鬼   0x42-0x4e\n\t\t\tnumNode.active = false;//2,3,4,5,6,7,8,9,a\n\t\t\tif (cardValue % 2 == 0) {//双数小鬼\n\t\t\t\ttype1 = \"icon_small_king_01\";\n\t\t\t\ttype2 = \"icon_small_king\";\n\t\t\t} else if (cardValue % 2 == 1) {//单数大鬼\n\t\t\t\ttype1 = \"icon_big_king_01\";\n\t\t\t\ttype2 = \"icon_big_king\";\n\t\t\t}\n\t\t}\n\t\tlet numSp = cardNode.getChildByName(\"num\").getComponent(cc.Sprite);\n\t\tlet iconSp = cardNode.getChildByName(\"icon\").getComponent(cc.Sprite);\n\t\tlet icon1_Sp = cardNode.getChildByName(\"icon_1\").getComponent(cc.Sprite);\n\t\tnumSp.spriteFrame = this.PokerCard.pokerDict[num];\n\t\ticonSp.spriteFrame = this.PokerCard.pokerDict[type1];\n\t\ticon1_Sp.spriteFrame = this.PokerCard.pokerDict[type2];\n\t},\n\t//获取牌值\n\tGetCardValue: function (poker) {\n\t\treturn poker & this.PokerCard.LOGIC_MASK_VALUE;\n\t},\n\n    OnClick: function (btnName, btnNode) {\n        for (let index = 0; index < btnNode.parent.children.length; index++) {\n            const element = btnNode.parent.children[index];\n            element.getChildByName(\"bg_poker\").color = cc.color(255,255,255)\n        }\n        btnNode.getChildByName(\"bg_poker\").color = cc.color(200,200,0)\n        this.maPai = Number(btnName)\n        this.UpdateTxt()\n    },\n    OnSure : function () {\n        if (!this.maPai) {\n            app.SysNotifyManager().ShowSysMsg(\"请选择一个马牌\", [], 3);\n            return\n        }\n        if (this.callback) {\n            this.callback(this.maPai)\n        }\n        this.CloseForm()\n    },\n    UpdateTxt : function () {\n        let lb = this.node.getChildByName(\"bg_create\").getChildByName(\"tip\").getComponent(cc.Label)\n        if (!this.maPai) {\n            lb.string = \"当前马牌：未选择\"\n            return\n        }\n        let colors = {0:\"方块\", 1:\"梅花\", 2:\"红桃\",3:\"黑桃\"}\n        let values = {11:\"J\", 12:\"Q\", 13:\"K\", 14:\"A\"}\n        let name = \"当前马牌：\" + (colors[Math.floor(this.maPai/16)] || \"\") + (values[this.maPai%16] || this.maPai%16)\n        lb.string = name\n    },\n});\n"]}