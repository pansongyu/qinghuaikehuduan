{"version":3,"sources":["BaseForm.js"],"names":["app","require","ZorderLvEnum","cc","Enum","ZorderLv0","ZorderLv1","ZorderLv2","ZorderLv3","ZorderLv4","ZorderLv5","ZorderLv6","ZorderLv7","ZorderLv8","ZorderLv9","ShowEffectEnum","None","FromTop","FromBottom","FromLeft","FromRight","FromCenter","CloseEffectEnum","ToTop","ToBottom","ToLeft","ToRight","ToCenter","BaseForm","Class","extends","properties","OnCreate","formName","JS_Name","OpenActionTag","InitNodeScale","node","scale","_dataInfo","InitBaseData","OnCreateInit","ShowFormName","SysNotifyManager","ConfirmManager","SysDataManager","ShareDefine","ComTool","EffectManager","FormManager","SoundManager","LocalDataManager","SDKManager","IntegrateImage","GetTableDict","Effect","on","OnEffectAnimationEnd","bind","_effectDict","_eventFuncDict","_childFormComponentDict","_cacheChildFormDict","_loadWndImageDict","OnLoad","Destroy","Client","UnRegTargetEvent","OnDestroy","destroy","update","dt","OnUpdate","error","ErrLog","stack","ShowForm","argList","parent","find","Log","addChild","ZorderLv","ShowFormAction","eventName","RegEvent","AddShowingForm","OnShow","apply","PlayerHelpManager","OnFormShow","CloseForm","isDestory","CloseFormAction","OnClose","removeFromParent","RemoveShowingForm","ShowOrCloseForm","IsFormShow","GetAppName","ChangeLogo","logo","hasOwnProperty","appName","sys","localStorage","getItem","getComponent","Sprite","spriteFrame","logoSprite","OnFormActionEnd","sender","userData","isNative","getChildByName","Node","setPosition","Math","random","label","addComponent","Label","string","GetFormProperty","fontSize","color","Color_Orange","IsShow","uiName","childs","children","i","length","name","active","openAction","startScale","ShowEffectType","scaleTo","easing","easeElasticOut","stopActionByTag","action","sequence","callFunc","setTag","runAction","CreateChildForm","childComponentName","childPrefab","parentNode","pos","zorderLv","argument","isShowForm","childFormNode","NewChildFormNode","childFormComponent","WarnLog","AddChildFormComponent","get","instantiate","childFormComponentList","SetDefault","push","GetChildComponentByUserData","allChildFormComponentList","count","index","childComponent","childUserData","GetChildComponentByChildIndex","childIndex","GetAllChildComponentByName","ClearAllChildComponentByName","allChildFormList","NodePool","cacheNodePool","put","ClearFormAllChildComponent","GetChildFormCacheNodePool","TriggerChildEvent","argDict","OnParentEvent","TriggerChildEventByChildComponent","TriggerAllChildEvent","GetFormContentSize","getContentSize","property","GetWndNode","wndPath","wndNode","GetWndComponent","componentType","wndComponent","GetWndProperty","EditBox","getPosition","opacity","Button","interactable","ProgressBar","progress","SetFormPosition","SetFormProperty","value","SetWndProperty","RichText","SetWndImage","queryPid","queryClubId","imageName","fileName","imageInfo","filePath","fileNameList","SetWndImageByFilePath","SetNodeImageByFilePath","isHideFirst","nodeSprite","that","ControlManager","CreateLoadPromise","SpriteFrame","then","isValid","bluebird","resolve","sprite","resType","SpriteAtlas","loadWndImageInfo","getSpriteFrame","catch","ClearWndImage","SetWndFlyTo","startPos","endPos","time","useData","WndRunAction","SetWndOpacity","endFade","SetWndDelay","delayTime","StopWndFly","StopWndOpacity","StopWndDelay","actionType","WndFlyUseData","starPos","moveTo","OnRunActionEnd","fadeTo","FlyWnd_FlyEnd","OpacityWnd_End","FlyWnd_DelayEnd","wndName","GetWndEffectPos","wndObj","postType","offPosList","EffectPosType_5","size","posX","posY","EffectPosType_1","width","height","EffectPosType_2","EffectPosType_3","EffectPosType_4","EffectPosType_6","EffectPosType_7","EffectPosType_8","EffectPosType_9","EffectPosType_10","halfWidth","halfHeight","RandInt","p","AddWndEffect","effectName","effectRes","repeatCount","posType","effectTableInfo","effectPos","allEffectDict","effectComponent","GetModelProperty","DeleteWndEffect","CreateEffectByEffectRes","OnCreateEffectEnd","AddModelToParent","SetModelProperty","animationState","ShowEffect","wrapMode","WrapMode","Default","PingPong","Loop","event","modelComponent","detail","OnEffectEnd","DeleteEffect","DeleteWndAllEffect","DeleteEffectByDict","DeleteFormAllEffect","func","ShowSysMsg","msgID","msgArgList","WaitForConfirm","backArgList","curConFirmType","Confirm","SetWaitForConfirmForm","OnConFirm","SetUpTipFormConfirmList","InArray","ShowConfirm","ConfirmUse","ShowUseMsg","ConfirmBuy","ShowBuyMsg","clickType","SimulateOnClick","btnNode","buttonComponent","btnName","OnClick","OnClick_Close","OnClick_BtnWnd","eventTouch","eventData","PlaySound","currentTarget","OnClick_Toggle","toggle","OnClick_Form","OnClickForm","passSecond","OnReload","InitWeiXinShare","console","log","WeChatManager","OnWeChatReady","IsIphoneX","FrameSize","view","getFrameSize","OnScrollEnded","GetTuiGuangUrl","TuiGuangUrl","GetConfigProperty","heroID","HeroManager","GetHeroProperty","ShortHeroID","GetPid","long_url","NetManager","SendPack","GetShorTuiGuangUrl","FailTuiGuangUrl","getRandom","min","max","r","re","round","GetRandBaseUrl","urls","GetClientConfigProperty","urlList","split","rand","serverPack","randUrl","SetConfigProperty","requestUrl","jsonStr","replace","ShareUrl","eval","url_short","SuccessTcnUrl","shareUrl","text","ShareText","FailTcnUrl","BeginShare","roomKey","Click_btn_Sharelink","title","ShareShortRoomID","desc","PlayerName","join","weChatAppShareUrl","ShareLongRoomID","Share","Click_btn_weixin","Click_btn_fzkl","str","toString","NativeManager","CallToNative","WanFa","DestroyAllChildren","child","DestroyFromParent","SendHttpRequest","serverUrl","argString","requestType","sendPack","NetRequest","OnReceiveHttpPack","OnConnectHttpFail","httpResText","readyState","status","module","exports"],"mappings":"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","file":"BaseForm.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\n BaseForm 界面基类(又FormManager控制创建和销毁)\n */\n\nvar app = require(\"app\");\n\n//界面层级枚举\nvar ZorderLvEnum = cc.Enum({\n\n\t//置底界面层(UIFightTower)\n\tZorderLv0: 0,\n\n\t//聊天层(UIChat)\n\tZorderLv1: 1,\n\n\t//玩家头像层(UIPlayer)\n\tZorderLv2: 2,\n\n\t//通用背景层(UIResource)\n\tZorderLv3:3,\n\n\t//布阵层\n\tZorderLv4: 4,\n\n\t//主场景工具层(UIMenu)\n\tZorderLv5: 5,\n\n\t//正常界面层(多数界面)\n\tZorderLv6: 6,\n\n\t//置顶层(3级界面使用到,UICardPackFragSale)\n\tZorderLv7: 7,\n\n\t//模态层,消息提示层(UIMessage)\n\tZorderLv8:8,\n\n\t//debugTool界面\n\tZorderLv9:9,\n});\n\n//界面显示动画枚举\n\nvar ShowEffectEnum = cc.Enum({\n\n\t//没有效果\n\tNone:0,\n\t//从上划入\n\tFromTop:1,\n\t//从下划入\n\tFromBottom:2,\n\t//从左划入\n\tFromLeft:3,\n\t//从右划入\n\tFromRight:4,\n\t//从中间从小变大\n\tFromCenter:5,\n});\n\n\n\n//界面关闭动画枚举\nvar CloseEffectEnum = cc.Enum({\n\n\t//没有效果\n\tNone:0,\n\t//从上划入\n\tToTop:1,\n\t//从下划入\n\tToBottom:2,\n\t//从左划入\n\tToLeft:3,\n\t//从右划入\n\tToRight:4,\n\t//从中间从小变大\n\tToCenter:5,\n});\n\n\nvar BaseForm = cc.Class({\n\n\textends: require(\"BaseComponent\"),\n\n\tproperties: {\n\n\t\t//显示界面效果类型\n\t\t\"ShowEffectType\":{\n\t\t\t\"default\":ShowEffectEnum.None,\n\t\t\t\"tooltip\":\"显示界面动画\",\n\t\t\t\"type\": ShowEffectEnum,\n\t\t},\n\n\t\t//关闭界面效果类型\n\t\t\"CloseEffectType\":{\n\t\t\t\"default\":CloseEffectEnum.None,\n\t\t\t\"tooltip\":\"关闭界面动画\",\n\t\t\t\"type\": CloseEffectEnum,\n\t\t},\n\n\t\t//场景精灵层级\n\t\t\"ZorderLv\":{\n\t\t\t\"default\":ZorderLvEnum.ZorderLv6,\n\t\t\t\"tooltip\":\"界面层级\",\n\t\t\t\"type\": ZorderLvEnum,\n\t\t},\n\n\t},\n\t//创建对象是被调用(OnLoad前,还未执行addChild,逻辑层初始化)\n\tOnCreate:function(formName){\n\t\tthis.JS_Name = formName;\n\n\t\tthis.OpenActionTag = 1000;\n\t\tthis.InitNodeScale = this.node.scale;\n\n\t\t//界面数据\n\t\tthis._dataInfo = {\n\t\t\t\"FormName\":formName,\n\t\t};\n\n\n\t\tthis.InitBaseData();\n\n\t\tthis.OnCreateInit();\n\t\tthis.ShowFormName();\n\t},\n\n\t//BaseChildForm也需要初始化调用这个接口\n\tInitBaseData:function(){\n\t\t//管理器\n\t\tthis.SysNotifyManager = app.SysNotifyManager();\n\t\tthis.ConfirmManager = app.ConfirmManager();\n\t\tthis.SysDataManager = app.SysDataManager();\n\t\tthis.ShareDefine = app.ShareDefine();\n\t\tthis.ComTool = app.ComTool();\n\t\tthis.EffectManager = app.EffectManager();\n\t\tthis.FormManager = app.FormManager();\n\t\tthis.SoundManager = app.SoundManager();\n\t\tthis.LocalDataManager=app.LocalDataManager();\n\t\tthis.SDKManager=app.SDKManager();\n\t\t//表配置\n\t\tthis.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\n\t\tthis.Effect = this.SysDataManager.GetTableDict(\"Effect\");\n\n\n\t\tthis.node.on(\"EffectAnimationEnd\", this.OnEffectAnimationEnd.bind(this));\n\n\t\t//-----成员变量----------------\n\t\t//控件特效\n\t\t// {    spt_card/icon\n\t\t//     wndPath:{effectName:effectComponent},\n\t\t// }\n\t\tthis._effectDict = {};\n\n\t\t//-----事件注册函数字典------------\n\t\tthis._eventFuncDict = {};\n\n\t\t//子类界面组件字典\n\t\tthis._childFormComponentDict = {};\n\n\t\t//子类界面缓存字典\n\t\t// {\n\t\t//     'UICardReplace_Child':new cc.NodePool('UICardReplace_Child'),\n\t\t// }\n\t\tthis._cacheChildFormDict = {};\n\t\t//等待加载的贴图信息字典\n\t\tthis._loadWndImageDict = {};\n\n\t},\n\n\t//------------回掉函数----------------\n\n\t// active node时调用\n\tOnLoad: function () {\n\n\t},\n\n\t//销毁界面\n\tDestroy:function(){\n\n\t\tapp.Client.UnRegTargetEvent(this);\n\n\t\tthis._eventFuncDict = {};\n\n\t\tthis.OnDestroy();\n\t\t//销毁节点\n\t\tthis.node.destroy();\n\t},\n\n\t//没帧回掉\n\tupdate: function (dt) {\n\t\ttry{\n\t\t\tthis.OnUpdate(dt);\n\t\t}\n\t\tcatch(error){\n\t\t\tthis.ErrLog(\"update:%s\", error.stack);\n\t\t}\n\n\t},\n\n\t//显示界面\n\tShowForm:function(argList){\n\n\t\tif(!argList){\n\t\t\targList = [];\n\t\t}\n\n\t\tlet formName = this._dataInfo[\"FormName\"];\n\t\t//获取到当前场景的画布\n\t\tlet parent = cc.find('Canvas/uiLayer');\n\t\tif(!parent){\n\t\t\tthis.ErrLog(\"ShowForm not find uiLayer\");\n\t\t\treturn\n\t\t}\n\n\t\tif(this.node.parent == parent){\n\t\t\tthis.Log(\"ShowForm already show\");\n\t\t}\n\t\telse{\n\t\t\t//设置界面新父类\n\t\t\tparent.addChild(this.node, this.ZorderLv);\n\n\t\t\tthis.ShowFormAction();\n\n\t\t\t//开启界面重新注册已经注册的监听事件\n\t\t\tfor(let eventName in this._eventFuncDict){\n\t\t\t\tapp.Client.RegEvent(eventName, this._eventFuncDict[eventName], this);\n\t\t\t}\n\n\t\t\tthis.FormManager.AddShowingForm(formName, this);\n\t\t}\n\t\tthis.Log(\"ShowForm\");\n\t\ttry{\n\t\t\tthis.OnShow.apply(this, argList);\n\t\t}\n\t\tcatch(error){\n\t\t\tthis.ErrLog(\"ShowForm error:%s\", error.stack);\n\t\t}\n\n\t\t//OnShow完成调用新手引导界面,OnShow里面会创建界面子类\n\t\tapp.PlayerHelpManager().OnFormShow(formName);\n\n\t},\n\n\t//关闭界面\n\tCloseForm:function(isDestory=false){\n\t\t//获取到当前场景的画布\n\t\tlet parent = cc.find('Canvas/uiLayer');\n\n\t\tif(this.node.parent != parent){\n\t\t\tthis.Log(\"CloseForm already close\");\n\t\t\treturn\n\t\t}\n\t\tthis.Log(\"CloseForm\");\n\t\t//关闭界面则取消所有事件监听\n\t\tapp.Client.UnRegTargetEvent(this);\n\n\t\tthis.CloseFormAction();\n\n\t\tthis.OnClose();\n\n\t\tthis.node.removeFromParent(false);\n\t\tif(isDestory){\n\t\t\tthis.node.destroy();\n\t\t}\n\n\t\tthis.FormManager.RemoveShowingForm(this._dataInfo[\"FormName\"]);\n\n\t},\n\n\t//开启或者关闭界面\n\tShowOrCloseForm:function(argList){\n\t\tif (this.IsFormShow()){\n\t\t\tthis.CloseForm();\n\t\t\treturn false\n\t\t}\n\t\telse{\n\t\t\tthis.ShowForm(argList);\n\t\t\treturn true\n\t\t}\n\t},\n\tGetAppName:function(){\n        return \"xinhua\";\n\t},\n\tChangeLogo:function(){\n\t\tif(typeof(this.logo)==\"undefined\" || this.logo==null || this.logo==false){\n            return;\n        }\n        if(!this.logo.hasOwnProperty(\"_components\")){\n            return;\n        }\n\t\tlet appName=cc.sys.localStorage.getItem('appName');\n        // if (appName==\"baodao\") {\n        //     this.logo.getComponent(cc.Sprite).spriteFrame=this.logoSprite[1];\n        // }else if (appName==\"sansan\") {\n        //     this.logo.getComponent(cc.Sprite).spriteFrame=this.logoSprite[2];\n        // }else if (appName==\"ganzhou\") {\n        //     this.logo.getComponent(cc.Sprite).spriteFrame=this.logoSprite[3];\n        // }else if (appName==\"guosou\") {\n        //     this.logo.getComponent(cc.Sprite).spriteFrame=this.logoSprite[4];\n        // }else{\n        \tthis.logo.getComponent(cc.Sprite).spriteFrame=this.logoSprite[0];\n        //}\n\t},\n\n\t//界面动作执行界面回调\n\tOnFormActionEnd:function(sender, userData){\n\n\t},\n\n\tShowFormName:function(){\n\t\t//不显示界面名字\n\t\t//return;\n\t\tif (cc.sys.isNative) {\n\t\t\treturn;\n\t\t}\n\t\tif(this.node.getChildByName(\"LabelFormName\")){\n\t\t\treturn\n\t\t}\n\t\tlet node = new cc.Node(\"LabelFormName\");\n\n\t\tnode.parent = this.node;\n\t\tnode.setPosition(10,-10*Math.random()*20);\n\t\tlet label = node.addComponent(cc.Label);\n\t\tlabel.string = this.GetFormProperty(\"FormName\");\n\t\tlabel.fontSize = 25\n\t\tnode.color = this.ShareDefine.Color_Orange;\n\t},\n\n\t//--------------获取接口-----------------\n\n\t//界面是否显示中\n\tIsFormShow:function(){\n\t\tlet parent = cc.find('Canvas/uiLayer');\n\n\t\tif(this.node.parent == parent){\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t},\n\n\tIsShow:function(uiName=''){\n\t\tlet childs = this.node.parent.children;\n\t\tfor(let i=0;i<childs.length;i++){\n\t\t\tif(uiName == childs[i].name && childs[i].active)\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t//--------------动作函数------------\n\t//显示界面动作\n\tShowFormAction:function(){\n\n\t\tlet openAction = null;\n\n\t\t//设置起点缩放倍速\n\t\tlet startScale = this.InitNodeScale*0.5;\n\n\t\tswitch(this.ShowEffectType){\n\n\t\t\tcase ShowEffectEnum.None:\n\t\t\t\tbreak\n\t\t\tcase ShowEffectEnum.FromTop:\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\n\t\t\t\tbreak\n\t\t\tcase ShowEffectEnum.FromBottom:\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\n\t\t\t\tbreak\n\t\t\tcase ShowEffectEnum.FromLeft:\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\n\t\t\t\tbreak\n\t\t\tcase ShowEffectEnum.FromRight:\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\n\t\t\t\tbreak\n\t\t\tcase ShowEffectEnum.FromCenter:\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tthis.ErrLog(\"ShowEffectType:%s error\", this.ShowEffectType);\n\t\t\t\tbreak\n\t\t}\n\n\t\t//如果之前有打开动作,先停止\n\t\tthis.node.stopActionByTag(this.OpenActionTag);\n\n\t\tif(openAction){\n\t\t\tlet action = cc.sequence(\n\t\t\t\topenAction,\n\t\t\t\tcc.callFunc(this.OnFormActionEnd, this, \"OpenAction\"),\n\t\t\t);\n\t\t\taction.setTag(this.OpenActionTag);\n\t\t\tthis.node.scale = startScale;\n\t\t\tthis.node.runAction(action);\n\t\t}\n\t},\n\n\t//关闭界面动作\n\tCloseFormAction:function(){\n\t\t//let closeAction = cc.scaleTo(0.5, 1).easing(cc.easeElasticIn());\n\t},\n\n\t//-------------子类界面操作接口------------------\n\t//创建子类界面\n\t/*\n\t childComponentName:子类界面的组件名字 字符串类型 \"UIBuyCard_Child\"\n\t childPrefab:子类界面的预制对象,cc.Prefab类型\n\t userData:子界面特殊数据 默认0\n\t parentNode:子界面的父类node 默认为界面自身对象node\n\t pos:子类创建时的坐标,可不传\n\t zorderLv:子类层级\n\t argument:传递给子类的显示参数 ShowForm(argument) 最终在OnShow(argument)接收\n\t isShowForm:创建子类默认是否显示\n\t */\n\tCreateChildForm:function(childComponentName, childPrefab, userData=0, parentNode=null, pos=null, zorderLv=0, argument=null, isShowForm=true){\n\n\t\tif(!parentNode){\n\t\t\tparentNode = this.node;\n\t\t}\n\t\tlet childFormNode = this.NewChildFormNode(childComponentName, childPrefab);\n\n\t\tlet childFormComponent = childFormNode.getComponent(childComponentName);\n\t\tif(!childFormComponent){\n\t\t\t//如果子类node没有这个组件,则主动添加组件对象\n\t\t\tthis.WarnLog(\"CreateChildForm not find:%s addComponent\", childComponentName);\n\t\t\tchildFormComponent = childFormNode.addComponent(childComponentName);\n\t\t\tif(!childFormComponent){\n\t\t\t\tthis.ErrLog(\"CreateChildForm(%s) fail\", childComponentName);\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tchildFormComponent.OnCreate(this, childComponentName, 0, userData, pos);\n\t\tparentNode.addChild(childFormNode, zorderLv);\n\n\t\tthis.AddChildFormComponent(childComponentName, childFormComponent);\n\n\t\tif(isShowForm){\n\t\t\tchildFormComponent.ShowForm(argument);\n\t\t}\n\t\telse{\n\t\t\tchildFormComponent.CloseForm(argument);\n\t\t}\n\n\t\treturn childFormComponent\n\n\t},\n\n\t//new一个字界面node\n\tNewChildFormNode:function(childComponentName, childPrefab){\n\n\t\tlet childFormNode = null;\n\n\t\t//如果有缓存从缓存中取\n\t\tif(this._cacheChildFormDict.hasOwnProperty(childComponentName)){\n\t\t\tchildFormNode = this._cacheChildFormDict[childComponentName].get()\n\t\t}\n\n\t\t//如果没有创建缓存,创建一个新对象\n\t\tif(!childFormNode){\n\t\t\tthis.Log(\"创建子类界面(%s)\", childComponentName);\n\t\t\tchildFormNode = cc.instantiate(childPrefab);\n\t\t}\n\n\t\treturn childFormNode\n\t},\n\n\tAddChildFormComponent:function(childComponentName, childFormComponent){\n\t\tlet childFormComponentList = this._childFormComponentDict.SetDefault(childComponentName, []);\n\t\tchildFormComponentList.push(childFormComponent)\n\t},\n\n\t//通过userData获取子类的组件对象\n\tGetChildComponentByUserData:function(childComponentName, userData){\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\n\t\tif(!allChildFormComponentList){\n\t\t\tthis.ErrLog(\"GetChildComponentByUserData not find(%s)\", childComponentName);\n\t\t\treturn\n\t\t}\n\t\tlet count = allChildFormComponentList.length;\n\t\tfor(let index=0; index<count; index++){\n\t\t\tlet childComponent = allChildFormComponentList[index];\n\t\t\tlet childUserData = childComponent.GetFormProperty(\"UserData\");\n\t\t\tif(childUserData == userData){\n\t\t\t\treturn childComponent\n\t\t\t}\n\t\t}\n\t},\n\n\t//通过索引获取子类界面\n\tGetChildComponentByChildIndex:function(childComponentName, childIndex){\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\n\t\tif(!allChildFormComponentList){\n\t\t\tthis.ErrLog(\"GetChildComponentByChildIndex not find(%s)\", childComponentName);\n\t\t\treturn\n\t\t}\n\t\tlet childComponent = allChildFormComponentList[childIndex];\n\t\tif(!childComponent){\n\t\t\tthis.ErrLog(\"GetChildComponentByChildIndex(%s,%s) not find child\", childComponentName, childIndex);\n\t\t\treturn\n\t\t}\n\t\treturn childComponent\n\t},\n\n\t//返回子界面列表\n\tGetAllChildComponentByName:function(childComponentName){\n\n\t\tif(this._childFormComponentDict.hasOwnProperty(childComponentName)){\n\t\t\treturn this._childFormComponentDict[childComponentName];\n\t\t}\n\t\tthis.Log(\"GetAllChildComponentByName(%s) child is empty\", childComponentName);\n\t\treturn []\n\t},\n\n\t//清楚掉指定的子类\n\tClearAllChildComponentByName:function(childComponentName){\n\n\t\tif(!this._childFormComponentDict.hasOwnProperty(childComponentName)){\n\t\t\tthis.Log(\"ClearAllChildComponentByName(%s)\",childComponentName);\n\t\t\treturn\n\t\t}\n\t\tlet allChildFormList = this._childFormComponentDict[childComponentName];\n\n\t\tdelete this._childFormComponentDict[childComponentName];\n\n\t\tif(!this._cacheChildFormDict.hasOwnProperty(childComponentName)){\n\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\n\t\t}\n\t\tlet cacheNodePool = this._cacheChildFormDict[childComponentName];\n\n\t\tlet count = allChildFormList.length;\n\t\tfor(let index=0; index<count; index++){\n\t\t\tlet childFormComponent = allChildFormList[index];\n\t\t\tcacheNodePool.put(childFormComponent.node);\n\t\t}\n\t},\n\n\tClearFormAllChildComponent:function(){\n\n\t\tfor(let childComponentName in this._childFormComponentDict){\n\n\t\t\tif(!this._cacheChildFormDict.hasOwnProperty(childComponentName)){\n\t\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\n\t\t\t}\n\t\t\tlet cacheNodePool = this._cacheChildFormDict[childComponentName];\n\n\t\t\tlet allChildFormList = this._childFormComponentDict[childComponentName];\n\t\t\tlet count = allChildFormList.length;\n\t\t\tfor(let index=0; index<count; index++){\n\t\t\t\tcacheNodePool.put(allChildFormList[index].node);\n\t\t\t}\n\t\t}\n\n\t\tthis._childFormComponentDict = {};\n\t},\n\n\t//获取指定子类的缓存池对象\n\tGetChildFormCacheNodePool:function(childComponentName){\n\t\tif(!this._cacheChildFormDict.hasOwnProperty(childComponentName)){\n\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\n\t\t}\n\t\treturn this._cacheChildFormDict[childComponentName];\n\t},\n\n\t//触发子类事件\n\tTriggerChildEvent:function(childComponentName, userData, eventName, argDict){\n\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\n\t\tif(!allChildFormComponentList){\n\t\t\tthis.ErrLog(\"TriggerChildEvent not find(%s)\", childComponentName);\n\t\t\treturn\n\t\t}\n\t\tlet count = allChildFormComponentList.length;\n\t\tfor(let index=0; index<count; index++){\n\t\t\tlet childComponent = allChildFormComponentList[index];\n\t\t\tlet childUserData = childComponent.GetFormProperty(\"UserData\");\n\n\t\t\t//找到一个子类,执行则跳出\n\t\t\tif(childUserData == userData){\n\t\t\t\tchildComponent.OnParentEvent(eventName, argDict);\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t},\n\n\t//触发子界面事件\n\tTriggerChildEventByChildComponent:function(childComponent, eventName, argDict){\n\t\tchildComponent.OnParentEvent(eventName, argDict);\n\t},\n\n\t//触发所有子类的事件\n\tTriggerAllChildEvent:function(childComponentName, eventName, argDict){\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\n\t\tif(!allChildFormComponentList){\n\t\t\tthis.ErrLog(\"TriggerAllChildEvent not find(%s)\", childComponentName);\n\t\t\treturn\n\t\t}\n\t\tlet count = allChildFormComponentList.length;\n\t\tfor(let index=0; index<count; index++){\n\t\t\tallChildFormComponentList[index].OnParentEvent(eventName, argDict);\n\t\t}\n\t},\n\n\n\t//-------------获取接口-------------------\n\tGetFormContentSize:function(){\n\t\treturn this.node.getContentSize();\n\t},\n\t//获取界面属性\n\tGetFormProperty:function(property){\n\n\t\tif(!this._dataInfo.hasOwnProperty(property)){\n\t\t\tthis.ErrLog(\"GetFormProperty not find:%s\", property);\n\t\t\treturn\n\t\t}\n\t\treturn this._dataInfo[property];\n\t},\n\n\tGetWndNode:function(wndPath){\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"GetWndNode(%s) not find\", wndPath);\n\t\t\treturn\n\t\t}\n\t\treturn wndNode\n\t},\n\n\t//获取指定控件的组件对象\n\tGetWndComponent:function(wndPath, componentType){\n\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"GetWndComponent wndPath(%s) error\", wndPath);\n\t\t\treturn\n\t\t}\n\n\t\tlet wndComponent = wndNode.getComponent(componentType);\n\n\t\tif(!wndComponent){\n\t\t\tthis.ErrLog(\"GetWndComponent wndPath(%s) not find Component(%s)\", wndPath, componentType.name);\n\t\t\treturn\n\t\t}\n\t\treturn wndComponent\n\t},\n\n\tGetWndProperty:function(wndPath, property){\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) not find wndPath\", wndPath, property);\n\t\t\treturn\n\t\t}\n\n\t\tlet wndComponent = null;\n\t\tif(property == \"text\"){\n\t\t\twndComponent = wndNode.getComponent(cc.Label);\n\t\t\t//可能是label\n\t\t\tif(wndComponent){\n\t\t\t}\n\t\t\t//没有label可能是editbox\n\t\t\telse{\n\t\t\t\twndComponent = wndNode.getComponent(cc.EditBox);\n\t\t\t}\n\n\t\t\tif(!wndComponent){\n\t\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) wnd not find cc.Label cc.EditBox\", wndPath, property);\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn wndComponent.string;\n\t\t}\n\t\telse if(property == \"position\"){\n\t\t\treturn wndNode.getPosition()\n\t\t}\n\t\telse if(property == \"active\"){\n\t\t\treturn wndNode.active;\n\t\t}\n\t\telse if(property == \"color\"){\n\t\t\treturn wndNode.color;\n\t\t}\n\t\telse if(property == \"scale\"){\n\t\t\treturn wndNode.scale;\n\t\t}\n\t\telse if(property == \"opacity\"){\n\t\t\treturn wndNode.opacity;\n\t\t}\n\t\telse if(property == \"interactable\"){\n\t\t\twndComponent = wndNode.getComponent(cc.Button);\n\t\t\tif(!wndComponent){\n\t\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) wnd not find cc.Button\", wndPath, property);\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn wndComponent.interactable;\n\t\t}\n\t\telse if(property == \"progress\"){\n\t\t\twndComponent = wndNode.getComponent(cc.ProgressBar);\n\t\t\tif(!wndComponent){\n\t\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) wnd not find cc.ProgressBar\", wndPath, property);\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn wndComponent.progress;\n\t\t}\n\t\telse{\n\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) property error\", wndPath, property);\n\t\t\treturn\n\t\t}\n\t},\n\n\n\t//-------------设置接口-----------------\n\n\tSetFormPosition:function(pos){\n\t\tthis.node.setPosition(pos);\n\t},\n\n\t//获取界面属性\n\tSetFormProperty:function(property, value){\n\n\t\tif(!this._dataInfo.hasOwnProperty(property)){\n\t\t\tthis.ErrLog(\"SetFormProperty not find:%s\", property);\n\t\t\treturn\n\t\t}\n\t\tthis._dataInfo[property] = value;\n\t},\n\n\t//设置控件属性\n\tSetWndProperty:function(wndPath, property, value){\n\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) not find wndPath\", wndPath, property, value);\n\t\t\treturn\n\t\t}\n\n\t\tlet wndComponent = null;\n\t\tif(property == \"text\"){\n\t\t\twndComponent = wndNode.getComponent(cc.Label);\n\t\t\t//可能是label\n\t\t\tif(wndComponent){\n\t\t\t}\n\t\t\t//没有label可能是editbox\n\t\t\telse if(wndNode.getComponent(cc.RichText)){\n\t\t\t\twndComponent = wndNode.getComponent(cc.RichText);\n\t\t\t}\n\t\t\telse{\n\t\t\t\twndComponent = wndNode.getComponent(cc.EditBox);\n\t\t\t}\n\n\t\t\tif(!wndComponent){\n\t\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) wnd not find cc.Label cc.EditBox\", wndPath, property, value);\n\t\t\t\treturn\n\t\t\t}\n\t\t\twndComponent.string = value + \"\";\n\t\t}\n\t\telse if(property == \"position\"){\n\t\t\twndNode.setPosition(value)\n\t\t}\n\t\telse if(property == \"active\"){\n\t\t\twndNode.active = value;\n\t\t}\n\t\telse if(property == \"color\"){\n\t\t\twndNode.color = value\n\t\t}\n\t\telse if(property == \"image\"){\n\t\t\tthis.SetWndImage(wndPath, value);\n\t\t}\n\t\telse if(property == \"scale\"){\n\t\t\twndNode.scale = value\n\t\t}\n\t\telse if(property == \"opacity\"){\n\t\t\twndNode.opacity = value\n\t\t}\n\t\telse if(property == \"interactable\"){\n\t\t\twndComponent = wndNode.getComponent(cc.Button);\n\t\t\tif(!wndComponent){\n\t\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) wnd not find cc.Button\", wndPath, property, value);\n\t\t\t\treturn\n\t\t\t}\n\t\t\twndComponent.interactable = value;\n\t\t}\n\t\telse if(property == \"progress\"){\n\t\t\twndComponent = wndNode.getComponent(cc.ProgressBar);\n\t\t\tif(!wndComponent){\n\t\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) wnd not find cc.ProgressBar\", wndPath, property, value);\n\t\t\t\treturn\n\t\t\t}\n\t\t\twndComponent.progress = value;\n\t\t}else if(property == \"queryPid\"){\n\t\t\twndNode.queryPid = value;\n\t\t}else if(property == \"queryClubId\"){\n\t\t\twndNode.queryClubId = value;\n\t\t}\n\t},\n\n\n\tSetWndImage:function(wndPath, imageName){\n\n\t\tlet fileName = \"\";\n\t\t//如果有传图片\n\t\tlet imageInfo = this.IntegrateImage[imageName];\n\t\tif(!imageInfo){\n\t\t\tthis.ErrLog(\"SetWndImage IntegrateImage.txt not find key(%s)\", imageName);\n\t\t\treturn\n\t\t}\n\t\tlet filePath = imageInfo[\"FilePath\"];\n\t\tlet fileNameList = imageInfo[\"FileNameList\"];\n\n\t\tif(fileNameList && fileNameList.length){\n\t\t\tfileName = fileNameList[0];\n\t\t}\n\t\tthis.SetWndImageByFilePath(wndPath, filePath, fileName);\n\t},\n\tSetNodeImageByFilePath:function(node,filePath,isHideFirst=false){\n\t\tlet nodeSprite = node.getComponent(cc.Sprite);\n\t\tif(!nodeSprite){\n\t\t\tthis.ErrLog('SetNodeImageByFilePath error not cc.Sprite');\n\t\t\treturn;\n\t\t}\n\t\tlet that = this;\n\t\treturn app.ControlManager().CreateLoadPromise(filePath, cc.SpriteFrame)\n\t\t\t.then(function(spriteFrame){\n\t\t\t\tif(!spriteFrame){\n\t\t\t\t\tthat.ErrLog(\"SetNodeImageByFilePath load spriteFrame fail filePath : \", filePath);\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (!node || !cc.isValid(node)) return false\n\t\t\t\tnodeSprite.spriteFrame = spriteFrame;\n\t\t\t\tif(isHideFirst)\n\t\t\t\t\tnode.active = true;\n\t\t\t});\n\t},\n\t//通过图片路径设置控件贴图\n\tSetWndImageByFilePath:function(wndPath, filePath, fileName=\"\", isHideFirst=false){\n\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"(%s) SetWndImageByFilePath(%s,%s) not find node\", wndPath, filePath, fileName);\n\t\t\treturn app.bluebird.resolve(false)\n\t\t}\n\n\t\tlet sprite = wndNode.getComponent(cc.Sprite);\n\t\tif(!sprite){\n\t\t\tthis.ErrLog(\"SetWndImageByFilePath(%s) not find cc.Sprite\", wndPath);\n\t\t\treturn app.bluebird.resolve(false)\n\t\t}\n\n\t\tlet that = this;\n\n\t\tlet resType = cc.SpriteFrame;\n\t\tif(fileName){\n\t\t\tresType = cc.SpriteAtlas;\n\t\t}\n\n\t\t//记录图片设置的贴图信息\n\t\tthis._loadWndImageDict[wndPath] = {\"FilePath\":filePath, \"FileName\":fileName, \"IsHideFirst\":isHideFirst};\n\n\t\t//是否先隐藏节点,等待资源加载完成在显示节点\n\t\tif(isHideFirst){\n\t\t\t//闲隐藏掉控件,加注完成在显示\n\t\t\twndNode.active = 0;\n\t\t}\n\n\t\treturn app.ControlManager().CreateLoadPromise(filePath, resType)\n\t\t\t.then(function(spriteFrame){\n\n\t\t\t\t//重新激活控件显示\n\t\t\t\tif(isHideFirst && !wndNode.active){\n\t\t\t\t\twndNode.active = 1;\n\t\t\t\t}\n\n\t\t\t\tif(!spriteFrame){\n\t\t\t\t\tthat.ErrLog(\"SetWndImageByFilePath(%s,%s,%s) load spriteFrame fail\", wndPath, filePath, fileName);\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\tlet loadWndImageInfo = that._loadWndImageDict[wndPath];\n\t\t\t\tif(!loadWndImageInfo){\n\t\t\t\t\tthat.WarnLog(\"_loadWndImageDict not find:%s\", wndPath);\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\t//如果设置的贴图路径异步回调回来判断已经被更新设置贴图路径了,则跳出\n\t\t\t\tif(loadWndImageInfo[\"FilePath\"] != filePath){\n\t\t\t\t\tthat.WarnLog(\"wndPath:%s FilePath(%s)!=(%s)\", wndPath, loadWndImageInfo[\"FilePath\"], filePath);\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\tif(fileName){\n\t\t\t\t\t//如果设置的贴图路径异步回调回来判断已经被更新设置贴图路径下的贴图了,则跳出\n\t\t\t\t\tif(loadWndImageInfo[\"FileName\"] != fileName){\n\t\t\t\t\t\tthat.WarnLog(\"wndPath:%s FileName(%s)!=(%s)\", wndPath, loadWndImageInfo[\"FilePath\"], filePath);\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tsprite.spriteFrame = spriteFrame.getSpriteFrame(fileName);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsprite.spriteFrame = spriteFrame;\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t})\n\t\t\t.catch(function(error){\n\t\t\t\tthat.ErrLog(\"SetWndImageByFilePath(%s,%s,%s) error:%s\", wndPath, filePath, fileName, error.stack);\n\t\t\t})\n\n\t},\n\n\t//清除控件贴图\n\tClearWndImage:function(wndPath){\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"ClearWndImage(%s) not find node\", wndPath);\n\t\t\treturn\n\t\t}\n\n\t\tlet sprite = wndNode.getComponent(cc.Sprite);\n\t\tif(!sprite){\n\t\t\tthis.ErrLog(\"ClearWndImage(%s) not find cc.Sprite\", wndPath);\n\t\t\treturn\n\t\t}\n\t\tsprite.spriteFrame = null;\n\t},\n\n\t//------------控件飞行--------------------\n\n\t//设置控件飞行\n\tSetWndFlyTo:function(wndPath, startPos, endPos, time, useData=0){\n\n\t\tlet argDict = {\n\t\t\t\"StartPos\":startPos,\n\t\t\t\"EndPos\":endPos,\n\t\t\t\"Time\":time,\n\t\t};\n\n\t\tthis.WndRunAction(wndPath, \"FlyAction\", argDict, useData);\n\t},\n\n\t//设置控件透明度\n\tSetWndOpacity:function(wndPath, endFade, time, useData=0){\n\t\tlet argDict = {\n\t\t\t\"EndFade\":endFade,\n\t\t\t\"Time\":time,\n\t\t};\n\n\t\tthis.WndRunAction(wndPath, \"OpacityAction\", argDict, useData);\n\t},\n\n\tSetWndDelay:function(wndPath, delayTime, useData=0){\n\t\tlet argDict = {\n\t\t\t\"DelayTime\":delayTime,\n\t\t};\n\n\t\tthis.WndRunAction(wndPath, \"DelayAction\", argDict, useData);\n\t},\n\n\t//停止控件飞行\n\tStopWndFly:function(wndPath){\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"StopWndFly(%s) wndPath not find\", wndPath);\n\t\t\treturn\n\t\t}\n\t\twndNode.stopActionByTag(11111);\n\t},\n\n\t//停止控件渐变\n\tStopWndOpacity:function(wndPath){\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"StopWndFly(%s) wndPath not find\", wndPath);\n\t\t\treturn\n\t\t}\n\t\twndNode.stopActionByTag(22222);\n\t},\n\n\tStopWndDelay:function(wndPath){\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"StopWndDelay(%s) wndPath not find\", wndPath);\n\t\t\treturn\n\t\t}\n\t\twndNode.stopActionByTag(33333);\n\t},\n\n\t/**\n\t * 控件动作接口\n\t */\n\tWndRunAction:function(wndPath, actionType, argDict, useData){\n\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"WndRunAction(%s,%s) wndPath not find\", wndPath, actionType);\n\t\t\treturn\n\t\t}\n\n\t\twndNode.WndFlyUseData = useData;\n\n\t\t//控件飞行效果\n\t\tif(actionType == \"FlyAction\"){\n\t\t\tvar starPos = argDict[\"StartPos\"];\n\t\t\tvar endPos = argDict[\"EndPos\"];\n\t\t\tvar time = argDict[\"Time\"];\n\n\t\t\twndNode.setPosition(starPos);\n\t\t\twndNode.stopActionByTag(11111);\n\n\t\t\tvar action = cc.sequence(\n\t\t\t\tcc.moveTo(time, endPos),\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"FlyWndEnd\")\n\t\t\t);\n\t\t\taction.setTag(11111);\n\t\t\twndNode.runAction(action);\n\t\t}\n\t\t//控件透明度效果\n\t\telse if(actionType == \"OpacityAction\"){\n\t\t\tvar endFade = argDict[\"EndFade\"];\n\t\t\tvar time = argDict[\"Time\"];\n\n\t\t\tvar action = cc.sequence(\n\t\t\t\tcc.fadeTo(time, endFade),\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"OpacityWndEnd\")\n\t\t\t);\n\n\t\t\taction.setTag(22222);\n\t\t\twndNode.runAction(action);\n\t\t}\n\t\t//停留等待\n\t\telse if(actionType == \"DelayAction\"){\n\t\t\tvar delayTime = argDict[\"DelayTime\"];\n\t\t\tvar action = cc.sequence(\n\t\t\t\tcc.delayTime(delayTime),\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"DelayEnd\")\n\t\t\t);\n\n\t\t\taction.setTag(33333);\n\t\t\twndNode.runAction(action);\n\t\t}\n\t\telse{\n\t\t\tthis.ErrLog(\"WndRunAction(%s) error\", actionType);\n\t\t\treturn\n\t\t}\n\t},\n\n\t/**\n\t * runAction结束回调\n\t */\n\tOnRunActionEnd:function(sender, useData){\n\n\t\tif(useData == \"FlyWndEnd\"){\n\t\t\tthis.FlyWnd_FlyEnd(sender.name, sender);\n\t\t}\n\t\telse if(useData == \"OpacityWndEnd\"){\n\t\t\tthis.OpacityWnd_End(sender.name, sender);\n\t\t}\n\t\telse if(useData == \"DelayEnd\"){\n\t\t\tthis.FlyWnd_DelayEnd(sender.name, sender);\n\t\t}\n\t\telse{\n\t\t\tthis.ErrLog(\"OnRunActionEnd useData:%s error\", useData);\n\t\t}\n\t},\n\n\t//控件飞行结束回调\n\tFlyWnd_FlyEnd:function(wndName, wndNode){\n\n\t},\n\n\tOpacityWnd_End:function(wndName, wndNode){\n\n\t},\n\n\tFlyWnd_DelayEnd:function(wndName, wndNode){\n\n\t},\n\t//------------特效接口-------------------\n\n\tGetWndEffectPos:function(wndObj, postType, offPosList){\n\n\t\tif(!postType){\n\t\t\tpostType = this.ShareDefine.EffectPosType_5;\n\t\t}\n\n\t\tlet size = wndObj.getContentSize();\n\t\tlet posX = 0;\n\t\tlet posY = 0;\n\n\t\tswitch(postType){\n\t\t\t// 控件特效位置1左下\n\t\t\tcase this.ShareDefine.EffectPosType_1:\n\t\t\t\t//在控件中心添加特效\n\t\t\t\tposX = -size.width/2;\n\t\t\t\tposY = -size.height/2;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置2下中\n\t\t\tcase this.ShareDefine.EffectPosType_2:\n\t\t\t\tposX = 0;\n\t\t\t\tposY = -size.height/2;\n\t\t\t\tbreak\n\t\t\t// 控件特效位置3右下\n\t\t\tcase this.ShareDefine.EffectPosType_3:\n\t\t\t\tposX = size.width/2;\n\t\t\t\tposY = -size.height/2;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置中左\n\t\t\tcase this.ShareDefine.EffectPosType_4:\n\t\t\t\tposX = -size.width/2;\n\t\t\t\tposY = 0;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置中间\n\t\t\tcase this.ShareDefine.EffectPosType_5:\n\t\t\t\t//在控件中心添加特效\n\t\t\t\tposX = 0;\n\t\t\t\tposY = 0;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置中右\n\t\t\tcase this.ShareDefine.EffectPosType_6:\n\t\t\t\t//在控件中心添加特效\n\t\t\t\tposX = size.width/2;\n\t\t\t\tposY = 0;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置上左\n\t\t\tcase this.ShareDefine.EffectPosType_7:\n\t\t\t\tposX = -size.width/2;\n\t\t\t\tposY = size.height/2;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置上中\n\t\t\tcase this.ShareDefine.EffectPosType_8:\n\t\t\t\tposX = 0;\n\t\t\t\tposY = size.height/2;\n\t\t\t\tbreak\n\n\t\t\t// 控件特效位置上右\n\t\t\tcase this.ShareDefine.EffectPosType_9:\n\t\t\t\tposX = size.width/2;\n\t\t\t\tposY = size.height/2;\n\t\t\t\tbreak\n\n\t\t\t//随机位置\n\t\t\tcase this.ShareDefine.EffectPosType_10:\n\t\t\t\tlet halfWidth = size.width/2;\n\t\t\t\tlet halfHeight = size.height/2;\n\t\t\t\tposX = this.ComTool.RandInt(-halfWidth, halfWidth);\n\t\t\t\tposY = this.ComTool.RandInt(-halfHeight, halfHeight);\n\t\t\t\tbreak\n\t\t}\n\n\t\tif(offPosList.length == 2){\n\t\t\tposX += offPosList[0];\n\t\t\tposY += offPosList[1];\n\t\t}\n\n\t\treturn cc.p(posX, posY);\n\t},\n\n\t//给控件加特效\n\tAddWndEffect:function(wndPath, effectName, effectRes, repeatCount=0, userData=0, offPosList=null, posType=null){\n\n\t\tlet effectTableInfo = this.Effect[effectRes];\n\t\tif(!effectTableInfo){\n\t\t\tthis.ErrLog(\"AddWndEffect Effect.txt not find:%s\", effectRes);\n\t\t\treturn\n\t\t}\n\n\t\tlet wndNode = cc.find(wndPath, this.node);\n\t\tif(!wndNode){\n\t\t\tthis.ErrLog(\"AddWndEffect wndPath(%s) error\", wndPath);\n\t\t\treturn\n\t\t}\n\n\t\t//如果没有传递偏移坐标,取配置表默认偏移坐标\n\t\tif(!offPosList){\n\t\t\toffPosList = effectTableInfo[\"OffPosList\"];\n\t\t}\n\t\tif(!posType){\n\t\t\tposType = effectTableInfo[\"PosType\"];\n\t\t}\n\t\tlet effectPos = this.GetWndEffectPos(wndNode, posType, offPosList);\n\n\n\t\t//初始化父类的特效字典\n\t\tlet allEffectDict = this._effectDict.SetDefault(wndPath, {});\n\n\t\t//如果子控件已经被加上这个特效了,需要删除,因为可能特效名一样但是特效使用的资源不一样了\n\t\tif(allEffectDict.hasOwnProperty(effectName)){\n\n\t\t\tlet effectComponent = allEffectDict[effectName];\n\n\t\t\tif(effectComponent){\n\n\t\t\t\t//如果特效名和特效资源名都一样,则不添加新特效\n\t\t\t\tif(effectComponent.GetModelProperty(\"EffectRes\") == effectRes){\n\t\t\t\t\tthis.Log(\"(%s) AddWndEffect allEffectDict have create:%s\", wndPath, effectName);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t//资源不一样需要删除旧的特效\n\t\t\t\tthis.DeleteWndEffect(wndPath, effectName);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.Log(\"(%s) AddWndEffect allEffectDict waitingfor create:%s\", wndPath, effectName);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t}\n\t\t//初始化特效对象null避免AddWndEffect重复调用时出现CreateEffectByEffectRes被多次调用\n\t\tallEffectDict[effectName] = 0;\n\n\t\tlet that = this;\n\n\t\tthis.EffectManager.CreateEffectByEffectRes(effectName, effectRes, userData)\n\t\t\t.then(function(effectComponent){\n\t\t\t\treturn that.OnCreateEffectEnd(wndPath, wndNode, effectName, effectComponent, effectPos, repeatCount);\n\t\t\t})\n\t\t\t.catch(function(error){\n\t\t\t\tthat.ErrLog(\"CreateFormEffect(%s,%s,%s):%s\", effectName, effectRes, userData, error.stack);\n\t\t\t})\n\n\t},\n\n\n\t//创建特效成功回调\n\tOnCreateEffectEnd:function(wndPath, wndNode, effectName, effectComponent, effectPos, repeatCount){\n\t\tif(!effectComponent){\n\t\t\tthis.ErrLog(\"OnCreateEffectEnd(%s) fail\", effectName);\n\t\t\treturn\n\t\t}\n\t\tlet allEffectDict = this._effectDict.SetDefault(wndPath, {});\n\n\t\t//默认初始化为0\n\t\tif(allEffectDict[effectName]){\n\t\t\tthis.ErrLog(\"OnCreateEffectEnd allEffectDict have find:%s \", effectName);\n\t\t\treturn\n\t\t}\n\n\t\teffectComponent.AddModelToParent(wndNode, this.node, effectPos);\n\t\teffectComponent.SetModelProperty(\"WndPath\", wndPath);\n\n\t\tlet animationState = effectComponent.ShowEffect();\n\t\tif(!animationState){\n\t\t\tthis.ErrLog(\"OnCreateEffectEnd ShowEffect fail\");\n\t\t\treturn\n\t\t}\n\n\t\t//如果是0代表循环播放\n\t\tif(repeatCount > 0){\n\t\t\tanimationState.wrapMode  = cc.WrapMode.Default;\n\t\t\tanimationState.repeatCount = repeatCount;\n\t\t}\n\t\t//如果是-1,播放结束马上倒序播放\n\t\telse if(repeatCount == -1){\n\t\t\tanimationState.wrapMode  = cc.WrapMode.PingPong ;\n\t\t}\n\t\t//0是循环播放\n\t\telse{\n\t\t\t//需要注意的是，修改wrapMode时，会重置time以及repeatCount\n\t\t\tanimationState.wrapMode  = cc.WrapMode.Loop;\n\t\t}\n\n\t\tallEffectDict[effectName] = effectComponent;\n\n\t\treturn effectComponent\n\t},\n\n\tOnEffectAnimationEnd:function(event){\n\t\tlet modelComponent = event.detail[\"Model\"];\n\t\t//let animationName = event.detail[\"AnimationName\"];\n\n\t\tlet wndPath = modelComponent.GetModelProperty(\"WndPath\");\n\t\tlet effectName = modelComponent.GetModelProperty(\"EffectName\");\n\n\t\t//特效播放结束删除掉\n\t\tthis.DeleteWndEffect(wndPath, effectName);\n\t\tthis.OnEffectEnd(wndPath, effectName);\n\t},\n\n\t//删除控件特效\n\tDeleteWndEffect:function(wndPath, effectName){\n\t\tlet allEffectDict = this._effectDict[wndPath];\n\t\tif(!allEffectDict){\n\t\t\treturn\n\t\t}\n\t\tlet effectComponent = allEffectDict[effectName];\n\t\tif(!effectComponent){\n\t\t\treturn\n\t\t}\n\t\tdelete allEffectDict[effectName];\n\n\t\tthis.EffectManager.DeleteEffect(effectComponent);\n\t},\n\n\t//删除控件所有的特效\n\tDeleteWndAllEffect:function(wndPath){\n\t\tlet allEffectDict = this._effectDict[wndPath];\n\t\tif(!allEffectDict){\n\t\t\treturn\n\t\t}\n\t\tthis.EffectManager.DeleteEffectByDict(allEffectDict);\n\n\t\tdelete this._effectDict[wndPath]\n\t},\n\n\t//删除界面所有特效\n\tDeleteFormAllEffect:function(){\n\n\t\tfor(let wndPath in this._effectDict){\n\t\t\tthis.EffectManager.DeleteEffectByDict(this._effectDict[wndPath]);\n\t\t}\n\t\tthis._effectDict = {};\n\t},\n\t//------------快捷功能函数-------------\n\n\t//注冊事件函数\n\tRegEvent:function(eventName, func){\n\t\tthis._eventFuncDict[eventName] = func;\n\t},\n\n\t//系统提示\n\tShowSysMsg:function(msgID, msgArgList){\n\t\tthis.SysNotifyManager.ShowSysMsg(msgID, msgArgList);\n\t},\n\n\t//------------------2次确认框----------------------------\n\n\t/**\n\t * 等待\"是\"\"否\"确认框\n\t */\n\tWaitForConfirm:function(msgID, msgArgList, backArgList, curConFirmType){\n\n\t\t// 事件类型参数\n\t\tif(!backArgList){\n\t\t\tbackArgList = [];\n\t\t}\n\t\t// 默认确认框类型\n\t\tif(!curConFirmType){\n\t\t\tcurConFirmType = this.ShareDefine.Confirm;\n\t\t}\n\n\t\tthis.ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, backArgList);\n\n\t\t// frmSetUpTips 界面的确认框类型\n\t\tif(this.ShareDefine.SetUpTipFormConfirmList.InArray(curConFirmType)){\n\t\t\tthis.ConfirmManager.ShowConfirm(curConFirmType, msgID, msgArgList);\n\t\t}\n\t\t// frmSetUpTipsUse 使用道具界面\n\t\telse if(curConFirmType == this.ShareDefine.ConfirmUse){\n\t\t\tthis.ConfirmManager.ShowUseMsg(msgID, msgArgList);\n\t\t}\n\t\t// frmSetUpTips01 购买道具界面\n\t\telse if(curConFirmType == this.ShareDefine.ConfirmBuy){\n\t\t\tthis.ConfirmManager.ShowBuyMsg(msgID, backArgList);\n\t\t}\n\t\telse{\n\t\t\tthis.ErrLog(\"WaitForConfirm((%s, %s), (%s), %s) error\", msgID, msgArgList, backArgList, curConFirmType);\n\t\t\treturn;\n\t\t}\n\t},\n\n\t/**\n\t * 2次确认点击回调\n\t * @param curEventType\n\t * @param curArgList\n\t */\n\tOnConFirm:function(clickType, msgID, backArgList){\n\t\t// 如果子类没有继承接口报错提示\n\t\tthis.ErrLog(\"Not have func OnConFirm(%s,%s,%s)\", clickType, msgID, backArgList);\n\t},\n\n\n\t//-------------点击函数-------------\n\n\t//模拟点击控件\n\tSimulateOnClick:function(wndPath){\n\n\t\tlet btnNode = cc.find(wndPath, this.node);\n\t\tif(!btnNode){\n\t\t\tthis.ErrLog(\"SimulateOnClick not find (%s)\", wndPath);\n\t\t\treturn\n\t\t}\n\t\tlet buttonComponent = btnNode.getComponent(cc.Button);\n\t\tif(!buttonComponent){\n\t\t\tthis.ErrLog(\"SimulateOnClick(%s) not find cc.Button\", wndPath);\n\t\t\treturn\n\t\t}\n\t\tlet btnName = btnNode.name;\n\t\tthis.OnClick(btnName, btnNode);\n\t},\n\n\t//关闭界面\n\tOnClick_Close:function(){\n\t\ttry{\n\t\t\tthis.CloseForm();\n\t\t}\n\t\tcatch(error){\n\t\t\tthis.ErrLog(\"OnClick_Close:%s\", error.stack);\n\t\t}\n\n\t},\n\n\t//控件点击回调\n\tOnClick_BtnWnd:function(eventTouch, eventData){\n\t\ttry{\n\t\t\tthis.SoundManager.PlaySound(\"BtnClick\");\n\t\t\tlet btnNode = eventTouch.currentTarget;\n\t\t\tlet btnName = btnNode.name;\n\t\t\tthis.OnClick(btnName, btnNode);\n\t\t}\n\t\tcatch (error){\n\t\t\tthis.ErrLog(\"OnClick_BtnWnd:%s\", error.stack);\n\t\t}\n\t},\n\n\tOnClick_Toggle:function(toggle){\n\n\t\ttry{\n\t\t\tthis.SoundManager.PlaySound(\"BtnClick\");\n\t\t\tlet btnNode = toggle.node;\n\t\t\tlet btnName = btnNode.name;\n\t\t\tthis.OnClick(btnName, btnNode);\n\t\t}\n\t\tcatch (error){\n\t\t\tthis.ErrLog(\"OnClick_Toggle:%s\", error.stack);\n\t\t}\n\t},\n\n\tOnClick_Form:function(eventTouch, eventData){\n\t\ttry{\n\t\t\tthis.OnClickForm(eventTouch);\n\t\t}\n\t\tcatch(error){\n\t\t\tthis.ErrLog(\"OnClick_Form:%s\", error.stack);\n\t\t}\n\n\t},\n\n\t//--------------子类重载接口---------------\n\t//创建界面被调用一次\n\tOnCreateInit:function(){\n\t},\n\n\t//每次显示界面被调用\n\tOnShow:function(/*..*/){\n\t},\n\n\t//每次关闭界面被调用\n\tOnClose:function(){\n\t},\n\n\t//销毁界面被调用\n\tOnDestroy:function(){\n\n\t},\n\t//定时回掉\n\tOnUpdate:function(passSecond){\n\n\t},\n\n\t//切换账号\n\tOnReload:function(){\n\n\t},\n\n\t//控件被点击\n\tOnClick:function(btnName, eventData){\n\n\t},\n\n\t//界面被点击\n\tOnClickForm:function(){\n\n\t},\n\n\t//特效播放结束\n\tOnEffectEnd:function(wndPath, effectName){\n\n\t},\n\t//网页版微信分享处理\n\tInitWeiXinShare:function(){\n\t\tconsole.log(\"XiaoFu InitWeiXinShare\");\n\t\tif(!cc.sys.isNative){\n\t\t\t//更新微信分享信息\n\t\t\tconsole.log(\"XiaoFu InitWeiXinShare OnWeChatReady\");\n    \t\tapp.WeChatManager().OnWeChatReady();\n    \t}\n\t},\n\tIsIphoneX:function(){\n\t    let FrameSize=cc.view.getFrameSize();\n\t    if(FrameSize.width==2436 && FrameSize.height==1125){\n\t    \treturn true;\n\t    }\n    \t//{ name: 'IPhone X', width: 375, height: 812, ratio: 3 },\n    \tif(!cc.sys.isNative){\n\t    \tif(FrameSize.width==812 && FrameSize.height==375){\n\t    \t\treturn true;\n\t    \t}\n    \t}\n    \treturn false;\n\t},\n\n\t//滑动结束\n\tOnScrollEnded:function(){\n\n\t},\n\t//获取用户推广Url\n\tGetTuiGuangUrl:function(){\n\t\tconsole.log(\"GetTuiGuangUrl begin\");\n\t\tthis.TuiGuangUrl = this.LocalDataManager.GetConfigProperty(\"SysSetting\", \"TuiGuangUrl\");\n\t\tconsole.log(\"GetTuiGuangUrl this.TuiGuangUrl:\",this.TuiGuangUrl);\n        if(this.TuiGuangUrl == ''){\n\t\t\tconsole.log(\"GetTuiGuangUrl 1\");\n        \tlet heroID = app.HeroManager().GetHeroProperty(\"pid\");\n        \tconsole.log(\"GetTuiGuangUrl 2\");\n\t\t\tlet ShortHeroID=this.ComTool.GetPid(heroID);\n\t\t\tconsole.log(\"GetTuiGuangUrl 3\");\n        \tlet long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=https://fb.qicaiqh.com:88/\"+ShortHeroID+'/';\n        \t//let long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=http://m.zle.com/xiaofu.php\";\n        \tconsole.log(\"GetTuiGuangUrl 4\");\n        \tapp.NetManager().SendPack(\"game.CShortenGenerate\",{\"url\":long_url},this.GetShorTuiGuangUrl.bind(this),this.FailTuiGuangUrl.bind(this));\n        \tconsole.log(\"GetTuiGuangUrl 5\");\n        }\n        else {\n        \tconsole.log(\"GetTuiGuangUrl 6\");\n        \tthis.InitWeiXinShare();\n        }\n        console.log(\"GetTuiGuangUrl end\");\n\t},\n\tgetRandom:function(min, max){\n            var r = Math.random() * (max - min);\n            var re = Math.round(r + min);\n            re = Math.max(Math.min(re, max), min)\n            return re;\n        },\n\tGetRandBaseUrl:function(){\n\t\tlet urls=app.Client.GetClientConfigProperty(\"UrlLists\");\n\t\tif(urls==0){\n\t\t\treturn 0;\n\t\t}\n\t\tlet urlList=urls.split(',');\n\t\tlet count=urlList.length;\n\t\tlet rand=this.getRandom(0,count-1);\n\t\treturn urlList[rand]+\":89\";  //走89端口\n\t},\n\tFailTuiGuangUrl:function(serverPack){\n\t\tlet heroID = app.HeroManager().GetHeroProperty(\"pid\");\n\t\tlet ShortHeroID=this.ComTool.GetPid(heroID);\n\t\tlet randUrl=this.GetRandBaseUrl();\n\t\tthis.TuiGuangUrl='http://'+randUrl+\"/\"+ShortHeroID+\"/\";\n\t\tthis.LocalDataManager.SetConfigProperty(\"SysSetting\", \"TuiGuangUrl\",this.TuiGuangUrl);\n        this.InitWeiXinShare();\n\t},\n\t//获取微信短域名并且设置到字典\n\tGetShorTuiGuangUrl:function(serverPack){\n        if(typeof(serverPack.requestUrl)==\"undefined\"){\n            return;\n        }\n        let jsonStr=serverPack.requestUrl;\n        jsonStr=jsonStr.replace('[','');\n        jsonStr=jsonStr.replace(']','');\n        let ShareUrl=eval('(' + jsonStr + ')');\n        this.TuiGuangUrl=ShareUrl.url_short;\n        this.LocalDataManager.SetConfigProperty(\"SysSetting\", \"TuiGuangUrl\",this.TuiGuangUrl);\n        this.InitWeiXinShare();\n\n    },\n    //微信分享获取短域名并且启动分享\n    SuccessTcnUrl:function(serverPack){\n        let shareUrl=\"https://fb.qicaiqh.com:88/\"+app.ComTool().GetPid(app.HeroManager().GetHeroProperty(\"pid\"))+\"/\";\n    \tif(this.TuiGuangUrl){\n        \ttext=this.ShareText+\"\\n\"+\"下载地址:\"+shareUrl;\n    \t}else{\n    \t\tif(url_short){\n    \t\t\ttext=this.ShareText;\n    \t\t}else{\n    \t\t\ttext=this.ShareText;\n    \t\t}\n    \t}\n        console.log(\"SuccessTcnUrl text:\",text);\n        this.SDKManager.ShareText(text,\"0\");\n    },\n    //微信分享获取短域名失败分享\n    FailTcnUrl:function(event){\n    \tlet shareUrl=\"https://fb.qicaiqh.com:88/\"+app.ComTool().GetPid(app.HeroManager().GetHeroProperty(\"pid\"))+\"/\";\n        let text=this.ShareText+\"\\n\"+\"下载地址:\"+shareUrl;\n        this.SDKManager.ShareText(text,\"0\");\n    },\n\n    //启动微信房间分享\n    BeginShare:function(roomKey,text){\n    \tthis.ShareText=text;\n    \tthis.roomKey=roomKey;\n    \t//校服\n    \tlet long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=https://fb.qicaiqh.com:88/room\"+roomKey;\n        app.NetManager().SendPack(\"game.CShortenGenerate\",{\"url\":long_url},this.SuccessTcnUrl.bind(this),this.FailTcnUrl.bind(this));\n    },\n    Click_btn_Sharelink: function () {\n\t\tlet title = '房号：' + this.ShareShortRoomID + ' 互动中';\n\t\tlet desc = '[' + this.PlayerName.join('] [') + ']';\n\t\tlet weChatAppShareUrl = app.Client.GetClientConfigProperty(\"ChatRoomUrl\")+ this.ShareLongRoomID;\n\t\tthis.SDKManager.Share(title, desc, weChatAppShareUrl, \"0\");\n\t},\n    Click_btn_weixin:function(){\n\n    },\n    \n    Click_btn_fzkl:function(str){\n        if(cc.sys.isNative){\n            let argList = [{\"Name\":\"msg\",\"Value\":str.toString()}];\n            app.NativeManager().CallToNative(\"copyText\", argList);\n        }\n        else{\n            console.log(\"真机复制分享cc.sys.isNative\", str);\n        }\n    },\n\n    WanFa:function(){\n    \treturn \"\";\n    },\n    //手动释放内存\n    DestroyAllChildren:function(node){\n    \tlet i=node.children.length-1;\n    \tfor(;i>=0;i--) {\n    \t\tlet child=node.children[i];\n    \t\tchild.removeFromParent();\n    \t\tchild.destroy();\n    \t}\n    \t/*node.destroyAllChildren();\n    \tnode.removeAllChildren();*/\n    },\n    //手动释放内存\n    DestroyFromParent:function(node){\n    \tnode.removeFromParent();\n    \t//销毁节点\n        node.destroy();\n    },\n\n    SendHttpRequest:function(serverUrl, argString, requestType, sendPack){\n\t\tapp.NetRequest().SendHttpRequest(serverUrl, argString, requestType, sendPack, 3000, \n            this.OnReceiveHttpPack.bind(this), \n            this.OnConnectHttpFail.bind(this),\n            this.OnConnectHttpFail.bind(this),\n            this.OnConnectHttpFail.bind(this),\n\t\t);\n\t\t\n    \t// let timeOut=false;\n        // var url = [serverUrl, argString].join(\"\");\n        // var dataStr = JSON.stringify(sendPack);\n        // //每次都实例化一个，否则会引起请求结束，实例被释放了\n        // var httpRequest = new XMLHttpRequest();\n        // httpRequest.timeout = 3000;\n        // httpRequest.open(requestType, url, true);\n        // //服务器json解码\n        // httpRequest.setRequestHeader(\"Content-Type\", \"application/json\");\n        // var that = this;\n        // httpRequest.onerror = function(){\n        //     that.ErrLog(\"httpRequest.error:%s\", url);\n        //     that.OnConnectHttpFail(serverUrl, httpRequest.readyState,2);\n        // };\n        // httpRequest.ontimeout = function(){\n        // \ttimeOut=true;\n        //     that.OnConnectHttpFail(serverUrl, httpRequest.readyState,1);\n        // };\n        // httpRequest.onreadystatechange = function(){\n        // \tif(timeOut==true){\n\t\t// \t\treturn;\n\t\t// \t}\n        //     //执行成功\n        //     if (httpRequest.status == 200){\n        //         if(httpRequest.readyState == 4){\n        //             that.OnReceiveHttpPack(serverUrl, httpRequest.responseText);\n        //         }\n        //     }else if(httpRequest.status == 404){\n        //     \tthat.OnConnectHttpFail(serverUrl, httpRequest.readyState,3);\n        //     }else{\n        //         that.ErrLog(\"onreadystatechange(%s,%s)\", httpRequest.readyState, httpRequest.status);\n        //     }\n        // };\n        // httpRequest.send(dataStr);\n\n    },\n    OnReceiveHttpPack:function(serverUrl, httpResText){\n        //需要重写，自己调用的时候回调\n    },\n    OnConnectHttpFail:function(serverUrl, readyState, status){\n        //需要重写，自己调用的时候回调\n    },\n});\n\nmodule.exports = BaseForm;\n\n\n\n"]}