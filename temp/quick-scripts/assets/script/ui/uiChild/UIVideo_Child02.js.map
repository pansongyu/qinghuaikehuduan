{"version":3,"sources":["UIVideo_Child02.js"],"names":["app","require","cc","Class","extends","properties","recordTimeLabel","Label","recordIDLabel","juShuLabel","yinJiaNode1","Node","yinJiaNode2","yinJiaNode3","yinJiaNode4","OnCreateInit","ComTool","RoomRecordManager","yinJiaNodeList","OnShow","userData","GetFormProperty","active","SetRecordPlayerInfo","roomID","GetParent","GetRoomID","allRecordList","GetRoomRecordDetail","recordList","string","GetDateYearMonthDayHourMinuteString","i18n","t","GetPid","playersList","pointList","setPoint","setPointMax","ListMaxNum","count","length","i","startPath","StringAddNumSuffix","namePath","join","IDPath","chengJiPath","zhongFenPath","headPath","headPathWeChatImage","find","node","getComponent","player","playerChengJi","j","playerZongFen","playerName","playerID","ShowHeroHead","GetWndComponent","GetBeiZhuName","OnClick","btnName","btnNode","ShowSysMsg","ErrLog"],"mappings":"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","file":"UIVideo_Child02.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiChild","sourcesContent":["\nvar app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseChildForm\"),\n\n    properties: {\n        recordTimeLabel:cc.Label,\n        recordIDLabel:cc.Label,\n\n        juShuLabel:cc.Label,\n\n        yinJiaNode1:cc.Node,\n        yinJiaNode2:cc.Node,\n        yinJiaNode3:cc.Node,\n        yinJiaNode4:cc.Node,\n    },\n\n    //创建界面回掉\n    OnCreateInit:function(){\n        this.ComTool = app.ComTool();\n        this.RoomRecordManager = app.RoomRecordManager();\n\n        this.yinJiaNodeList = [this.yinJiaNode1, this.yinJiaNode2, this.yinJiaNode3, this.yinJiaNode4];\n    },\n\n    //显示\n    OnShow:function(){\n        let userData = this.GetFormProperty(\"UserData\");\n\n        this.yinJiaNode1.active = 0;\n        this.yinJiaNode2.active = 0;\n        this.yinJiaNode3.active = 0;\n        this.yinJiaNode4.active = 0;\n\n        this.SetRecordPlayerInfo(userData);\n\n    },\n    SetRecordPlayerInfo:function (userData) {\n        let roomID = this.GetParent().GetRoomID();\n        let allRecordList = this.RoomRecordManager.GetRoomRecordDetail(roomID);\n        let recordList = allRecordList[userData];\n        this.juShuLabel.string = recordList[\"setID\"];\n        this.recordTimeLabel.string = this.ComTool.GetDateYearMonthDayHourMinuteString(recordList[\"endSec\"]);\n        this.recordIDLabel.string = app.i18n.t(\"UIVideo_Child02_PaiJuID\", {\"PaiJuID\":this.ComTool.GetPid(recordList[\"keyID\"])});\n        let playersList = recordList[\"players\"];\n        let pointList = recordList[\"point\"];\n        let setPoint = recordList[\"setPoint\"];\n        let setPointMax = this.ComTool.ListMaxNum(setPoint);\n        let count = playersList.length;\n\n        for(let i = 0; i < count; i++){\n            let startPath = this.ComTool.StringAddNumSuffix(\"sp_info/nd_chengji\", i+1, 2);\n            let namePath = [startPath, \"lb_name\"].join(\"/\");\n            let IDPath = [startPath, \"lb_id\"].join(\"/\");\n            let chengJiPath = [startPath, \"lb_chengji\"].join(\"/\");\n            let zhongFenPath = [startPath, \"sp_zongfen/lb_zongfen\"].join(\"/\");\n            let headPath = [startPath, \"touxiang/btn_head\"].join(\"/\");\n            let headPathWeChatImage =  cc.find(headPath, this.node).getComponent(\"WeChatHeadImage\");\n\n            let player = playersList[i];\n\n            let playerChengJi = 0;\n            for(let j = 1; j <= userData; j++){\n                let recordList = allRecordList[j];\n                let setPoint = recordList[\"point\"];\n                playerChengJi += setPoint[i];\n            }\n\n            let playerZongFen = pointList[i];\n\n            if(playerChengJi == setPointMax){\n                this.yinJiaNodeList[i].active = 1;\n            }\n            else{\n                this.yinJiaNodeList[i].active = 0;\n            }\n\n            let playerName = player[\"name\"];\n            let playerID = player[\"pid\"];\n\n            headPathWeChatImage.ShowHeroHead(playerID);\n            this.GetWndComponent(namePath, cc.Label).string = this.ComTool.GetBeiZhuName(playerID,playerName);\n            this.GetWndComponent(IDPath, cc.Label).string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(playerID)});\n            this.GetWndComponent(chengJiPath, cc.Label).string = app.i18n.t(\"Integral\",{\"Integral\":playerChengJi});\n            this.GetWndComponent(zhongFenPath, cc.Label).string = app.i18n.t(\"UIVideo_Child_ZongFen\", {\"ZongFen\":playerZongFen});\n\n        }\n    },\n    //-------------点击函数-------------\n    OnClick: function (btnName, btnNode) {\n\n        if(btnName == \"btn_benji\"){\n            this.ShowSysMsg(\"UIVideoChildSeeVideotape\");\n        }\n        else if(btnName == \"btn_fenxiang\"){\n            this.ShowSysMsg(\"UIVideoChildSeeVideotape\");\n        }\n        else if(btnName == \"btn_chakan\"){\n            this.ShowSysMsg(\"UIVideoChildSeeVideotape\");\n        }\n        else{\n            this.ErrLog(\"OnClick not find btnName:%s\", btnName);\n        }\n\n    },\n\n});\n\n"]}