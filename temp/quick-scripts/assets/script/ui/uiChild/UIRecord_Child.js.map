{"version":3,"sources":["UIRecord_Child.js"],"names":["cc","Class","extends","require","properties","lb_jushu","Label","layout","Node","OnCreateInit","InitShowInfo","clientPosHuType","node","active","clientPosZhongMa","clientDownPosHuType","clientDownPosZhongMa","clientFacePosHuType","clientFacePosZhongMa","clientUpPosHuType","clientUpPosZhongMa","OnShow","i","children","length","getComponent","string","userData","GetFormProperty","parseInt","toString","app","RecordData","SetEveryGame","posHuList","GetEveryGameProperty","pResults","posHuListKeys","Object","keys","player","path","GetWndNode","join","sort","a","b","posIdx","SetPlayerInfo","playerPos","playerIntegral","playerHuType","playerZhongMa","clientPos","HZRoomPosMgr","GetClientPos","clientDownPos","GetClientDownPos","clientFacePos","GetClientFacePos","clientUpPos","GetClientUpPos","huTypeString","ShareDefine","HuType_ZiMo","i18n","t","HuType_QGH","HuType_FHZ","HuType_NotHu","zhongMaString","clientPosIntegral","clientDownPosIntegral","clientFacePosIntegral","clientUpPosIntegral","OnClick","btnName","btnNode"],"mappings":"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","file":"UIRecord_Child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiChild","sourcesContent":["/*\n UIGMTool_Child2 GM工具子界面\n */\n\ncc.Class({\n    extends: require(\"BaseChildForm\"),\n\n    properties: {\n        lb_jushu:cc.Label,\n        layout:cc.Node,\n    },\n\n    //创建界面回掉\n    OnCreateInit:function(){\n        // this.HZRoomMgr = app.HZRoomMgr();\n        // this.HZRoom = this.HZRoomMgr.GetEnterRoom();\n        // this.HZRoomPosMgr = this.HZRoom.GetRoomPosMgr();\n    },\n\n    InitShowInfo:function () {\n        this.clientPosHuType.node.active = 0;\n        this.clientPosZhongMa.node.active = 0;\n\n        this.clientDownPosHuType.node.active = 0;\n        this.clientDownPosZhongMa.node.active = 0;\n\n        this.clientFacePosHuType.node.active = 0;\n        this.clientFacePosZhongMa.node.active = 0;\n\n        this.clientUpPosHuType.node.active = 0;\n        this.clientUpPosZhongMa.node.active = 0;\n    },\n    //显示\n    OnShow:function(){\n        // this.InitShowInfo();\n\n        // let userData = this.GetFormProperty(\"UserData\");\n        // this.jushu.string = userData;\n\n        // let roomKey = this.HZRoom.GetRoomProperty(\"key\");\n        // this.lb_paijuid.string = app.i18n.t(\"roomKey\",{\"roomKey\": roomKey});\n\n        // let roomRecord = this.HZRoomMgr.GetEnterRoom().GetRoomRecord();\n        // let everyGameKeys = Object.keys(roomRecord);\n        // let everyGame = roomRecord[everyGameKeys[userData]];\n\n        // this.lb_paijushijian.string = this.ComTool.GetDateYearMonthDayHourMinuteString(everyGame[\"endTime\"]);\n\n        // let posHuList = everyGame[\"posHuList\"];\n        // let posHuListKeys = Object.keys(posHuList);\n        // for(let i = 0; i < posHuListKeys.length; i++ ){\n        //     let player = posHuList[posHuListKeys[i]];\n        //     let playerPos = player[\"pos\"];\n        //     let playerIntegral = player[\"point\"] > 0 ? [\"+\",player[\"point\"]].join(\"\") : player[\"point\"];\n        //     let playerHuType = player[\"huType\"];\n        //     let playerZhongMa = player[\"zhongMa\"];\n        //     this.SetPlayerInfo(playerPos, playerIntegral, playerHuType, playerZhongMa);\n        // }\n\n        //清空分数\n        for(let i = 0; i < this.layout.children.length; i++){\n            let node = this.layout.children[i];\n            node.getComponent(cc.Label).string = '';\n        }\n\n        let userData = this.GetFormProperty(\"UserData\");\n        this.lb_jushu.string = (parseInt(userData)+1).toString();\n\n        app.RecordData().SetEveryGame(userData);\n        \n        let posHuList = app.RecordData().GetEveryGameProperty(\"posHuList\");\n        let pResults = app.RecordData().GetEveryGameProperty(\"pResults\");\n        if(posHuList){\n            let posHuListKeys = Object.keys(posHuList);\n            for(let i = 0; i < posHuListKeys.length; i++ ){\n                let player = posHuList[posHuListKeys[i]];\n                let path = 'layout/lb_score' + (i+1).toString();\n                let node = this.GetWndNode(path);\n                node.getComponent(cc.Label).string = player[\"point\"] > 0 ? [\"+\",player[\"point\"]].join(\"\") : player[\"point\"];\n            }\n        }else if(pResults){\n            pResults.sort(function(a, b){\n                return a.posIdx - b.posIdx;\n            });\n            for(let i = 0; i < pResults.length; i++ ){\n                let player = pResults[i];\n                let path = 'layout/lb_score' + (i+1).toString();\n                let node = this.GetWndNode(path);\n                node.getComponent(cc.Label).string = player[\"shui\"] > 0 ? [\"+\",player[\"shui\"]].join(\"\") : player[\"shui\"];\n            }\n        }\n\n    },\n    SetPlayerInfo:function (playerPos, playerIntegral, playerHuType, playerZhongMa) {\n        let clientPos = this.HZRoomPosMgr.GetClientPos();\n        let clientDownPos = this.HZRoomPosMgr.GetClientDownPos();\n        let clientFacePos = this.HZRoomPosMgr.GetClientFacePos();\n        let clientUpPos = this.HZRoomPosMgr.GetClientUpPos();\n        let huTypeString = \"\";\n        if(playerHuType == this.ShareDefine.HuType_ZiMo){\n            huTypeString = app.i18n.t(\"ZiMo\");\n        }\n        else if(playerHuType == this.ShareDefine.HuType_QGH){\n            huTypeString = app.i18n.t(\"QiangGangHu\");\n        }\n        else if(playerHuType == this.ShareDefine.HuType_FHZ){\n            huTypeString = app.i18n.t(\"SiHongZhong\");\n        }\n        else if(playerHuType == this.ShareDefine.HuType_NotHu){\n            huTypeString = \"\";\n        }\n        let zhongMaString = \"\";\n        if(playerZhongMa){\n            zhongMaString = app.i18n.t(\"ZhongMa\",{\"ZhongMa\":playerZhongMa});\n        }\n        if(playerPos == clientPos){\n            this.clientPosIntegral.string = app.i18n.t(\"Integral\",{\"Integral\":playerIntegral});\n            this.clientPosHuType.node.active = 1;\n            this.clientPosZhongMa.node.active = 1;\n            this.clientPosHuType.string = huTypeString;\n            this.clientPosZhongMa.string = zhongMaString;\n        }\n        else if(playerPos == clientDownPos){\n            this.clientDownPosIntegral.string = app.i18n.t(\"Integral\",{\"Integral\":playerIntegral});\n            this.clientDownPosHuType.node.active = 1;\n            this.clientDownPosZhongMa.node.active = 1;\n            this.clientDownPosHuType.string = huTypeString;\n            this.clientDownPosZhongMa.string = zhongMaString;\n        }\n        else if(playerPos == clientFacePos){\n            this.clientFacePosIntegral.string = app.i18n.t(\"Integral\",{\"Integral\":playerIntegral});\n            this.clientFacePosHuType.node.active = 1;\n            this.clientFacePosZhongMa.node.active = 1;\n            this.clientFacePosHuType.string = huTypeString;\n            this.clientFacePosZhongMa.string = zhongMaString;\n        }\n        else if(playerPos == clientUpPos){\n            this.clientUpPosIntegral.string = app.i18n.t(\"Integral\",{\"Integral\":playerIntegral});\n            this.clientUpPosHuType.node.active = 1;\n            this.clientUpPosZhongMa.node.active = 1;\n            this.clientUpPosHuType.string = huTypeString;\n            this.clientUpPosZhongMa.string = zhongMaString;\n        }\n    },\n    //-------------点击函数-------------\n\n    OnClick:function(btnName, btnNode){\n        \n       \n    },\n\n});"]}