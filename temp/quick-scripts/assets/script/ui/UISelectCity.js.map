{"version":3,"sources":["UISelectCity.js"],"names":["app","require","SubgameManager","cc","Class","extends","properties","lb_heroName","Label","lb_heroID","node_head","Node","rightTop","searchName","EditBox","lb_Secect","loading","provinceContent","cityContent","countyContent","provinceItem","cityItem","countyItem","OnCreateInit","selectCityConfig","SysDataManager","GetTableDict","FormManager","NetManager","allSelectCityData","RegEvent","Event_CodeError","Event_HeroProperty","WeChatHeadImage1","getComponent","OnShow","isShowAllCity","SelectProvinceNode","SelectCityNode","SelectCountyNode","SelectId","curSelectProvince","curSelectCity","curSelectCounty","localProvince","localCity","DestroyAllChildren","HeroManager","GetCurSelectCityData","length","node","getChildByName","active","Animation","play","ShowHero_NameOrID","ShowFastCount","ShowRoomCard","ShowClubCard","SendHttpRequest","ShowAlreadySelect","event","argDict","gold","GetHeroProperty","string","heroRoomCard","heroClubCard","heroName","heroID","ComTool","GetBeiZhuName","i18n","t","GetPid","ShowHeroHead","i","cityInfo","Name","ShowAllCity","allProvince","key","push","isOnClickSelect","instantiate","name","toString","color","Color","on","OnSelectProvince","addChild","id","idArr","SplitIdToArr","allCity","tempIdArr","OnSelectCity","allCounty","OnSelectCounty","console","log","ids","split","result","tempStr","serverUrl","argString","requestType","sendPack","ControlManager","IsOpenVpn","url","join","dataStr","JSON","stringify","httpRequest","XMLHttpRequest","timeout","open","setRequestHeader","that","onerror","ErrLog","OnConnectHttpFail","readyState","status","ontimeout","onreadystatechange","OnReceiveHttpPack","responseText","send","httpResText","serverPack","parse","codeInfo","ShareDefine","NotFind_Room","SysNotifyManager","ShowSysMsg","curRoomID","curGameTypeStr","OnClose","OnClick","btnName","btnNode","Click_btn_searchName","CloseForm","self","SendPack","Client","allGameIdFormServer","curSelectGameList","GetAllGameId","UpdateCity","sys","localStorage","setItem","OnEvent","searchData","children","cityId","provinceId","Click_Btn_QieHuan","ConfirmManager","SetWaitForConfirmForm","OnConFirm","bind","ShowConfirm","Confirm","clickType","msgID","backArgList","LocalDataManager","SetConfigProperty","LogOutGame","game","end"],"mappings":"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","file":"UISelectCity.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\nvar SubgameManager = require('SubgameManager');\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        lb_heroName:cc.Label,\n        lb_heroID:cc.Label,\n        node_head:cc.Node,\n        rightTop:cc.Node,\n        searchName:cc.EditBox,\n\n        lb_Secect:[cc.Label],\n\n        loading:cc.Node,\n\n        provinceContent:cc.Node,\n        cityContent:cc.Node,\n        countyContent:cc.Node,\n\n        provinceItem:cc.Node,\n        cityItem:cc.Node,\n        countyItem:cc.Node,\n    },\n    OnCreateInit: function () {\n        this.selectCityConfig = app.SysDataManager().GetTableDict(\"selectCity\");\n        this.FormManager = app.FormManager();\n        this.NetManager=app.NetManager();\n        this.allSelectCityData = [];\n        this.RegEvent(\"CodeError\", this.Event_CodeError, this);\n        this.RegEvent(\"HeroProperty\", this.Event_HeroProperty);\n        this.WeChatHeadImage1 = this.node_head.getComponent(\"WeChatHeadImage\");\n    },\n    //-----------------显示函数------------------\n    OnShow: function () {\n        this.isShowAllCity=false;\n        this.SelectProvinceNode = null;\n        this.SelectCityNode = null;\n        this.SelectCountyNode = null;\n        this.SelectId = 0;\n        this.curSelectProvince = \"\";//当前选择的省市县\n        this.curSelectCity = \"\";\n        this.curSelectCounty = \"\";\n        this.localProvince = \"\";//定位出来的省\n        this.localCity = \"\";//定位出来的市\n       /* this.provinceContent.removeAllChildren();\n        this.cityContent.removeAllChildren();\n        this.countyContent.removeAllChildren();\n*/\n        this.DestroyAllChildren(this.provinceContent);\n        this.DestroyAllChildren(this.cityContent);\n        this.DestroyAllChildren(this.countyContent);\n        \n        this.allSelectCityData = app.HeroManager().GetCurSelectCityData();\n        // this.allSelectCityData = app.LocalDataManager().GetConfigProperty(\"SysSetting\",\"SelectCityData\");\n        if (this.allSelectCityData.length == 0) {\n            this.node.getChildByName(\"btn_close\").active = false;\n        }else{\n            this.node.getChildByName(\"btn_close\").active = true;\n        }\n        this.loading.active = true;\n        this.loading.getComponent(cc.Animation).play(\"loadingAni\");\n\n        this.ShowHero_NameOrID();\n\n        this.ShowFastCount();\n        this.ShowRoomCard();\n        this.ShowClubCard();\n\n        this.SendHttpRequest('http://code.qicaiqh.com/myipaddress.php', \"\", \"GET\",{});\n\n        this.ShowAlreadySelect();\n    },\n\n    Event_HeroProperty:function (event) {\n        let argDict = event;\n        if(argDict[\"Property\"] == \"gold\"){\n            this.ShowFastCount();\n        }\n        else if(argDict[\"Property\"] == \"roomCard\"){\n            this.ShowRoomCard();\n        }else if(argDict[\"Property\"] == \"clubCard\"){\n            this.ShowClubCard();\n        }\n    },\n    ShowFastCount:function () {\n        let gold = app.HeroManager().GetHeroProperty('gold');\n        this.rightTop.getChildByName('ledou').getChildByName('label').getComponent(cc.Label).string=gold;\n    },\n    ShowRoomCard:function () {\n        let heroRoomCard = app.HeroManager().GetHeroProperty(\"roomCard\");\n        this.rightTop.getChildByName('fangka').getChildByName('label').getComponent(cc.Label).string=heroRoomCard;\n    },\n    ShowClubCard:function () {\n        let heroClubCard = app.HeroManager().GetHeroProperty(\"clubCard\");\n        this.rightTop.getChildByName('quanka').getChildByName('label').getComponent(cc.Label).string=heroClubCard;\n    },\n    ShowHero_NameOrID:function () {\n        let heroName = app.HeroManager().GetHeroProperty(\"name\");\n        let heroID = app.HeroManager().GetHeroProperty(\"pid\");\n        this.lb_heroName.string =this.ComTool.GetBeiZhuName(heroID,heroName,9);\n        this.lb_heroID.string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        this.WeChatHeadImage1.ShowHeroHead(heroID);\n    },\n\n    ShowAlreadySelect:function(){\n        for (var i = 0; i < this.allSelectCityData.length; i++) {\n            let cityInfo = this.selectCityConfig[this.allSelectCityData[i]['selcetId']];\n            this.lb_Secect[i].string = cityInfo.Name;\n        }\n    },\n\n    ShowAllCity:function(){\n        if(this.isShowAllCity==true){\n            return;\n        }\n        this.isShowAllCity=true;\n        this.loading.active = false;\n        let allProvince = [];\n        for(let key in this.selectCityConfig){\n            if (this.selectCityConfig[key][\"Type\"] == 1) {\n                allProvince.push(this.selectCityConfig[key]);\n            }\n        }\n        //加载所有省\n        let isOnClickSelect = false;\n        for (let i = 0; i < allProvince.length; i++) {\n            let provinceItem = cc.instantiate(this.provinceItem);\n            provinceItem.name = allProvince[i]['Id'].toString();\n            provinceItem.getChildByName('lb_province').getComponent(cc.Label).string = allProvince[i]['Name'];            \n            provinceItem.getChildByName(\"lb_province\").color = new cc.Color(255, 255, 231);\n            provinceItem.on('click',this.OnSelectProvince,this);\n            provinceItem.active = true;\n            this.provinceContent.addChild(provinceItem);\n            //优先选择上次选择的城市\n            if (this.allSelectCityData.length > 0 &&\n                this.allSelectCityData[0]['province'] == allProvince[i]['Id'].toString()) {\n                this.OnSelectProvince({\"node\":provinceItem});\n                isOnClickSelect = true;\n            }\n            //如果上次没选，优先选择定位城市\n            if (this.localProvince == allProvince[i]['Name']) {\n                provinceItem.getChildByName('icon_checkmap').active = true;\n                if (this.allSelectCityData.length == 0) {\n                    this.OnSelectProvince({\"node\":provinceItem});\n                    isOnClickSelect = true;\n                }\n            }\n            //定位未找到城市并且上次没选择，选择配表中默认的城市\n            if (!isOnClickSelect && allProvince[i]['DefaultCity'] == 1) {\n                this.OnSelectProvince({\"node\":provinceItem});\n                isOnClickSelect = true;\n            }\n            if (allProvince[i]['Popular'] == 1 && \n                !provinceItem.getChildByName('icon_checkmap').active) {\n                provinceItem.getChildByName('icon_hot').active = true;\n            }\n        }\n    },\n\n    OnSelectProvince:function(event){\n        if (this.SelectProvinceNode != null) {\n            this.SelectProvinceNode.getChildByName(\"icon_checkin_cs\").active = false;\n            this.SelectProvinceNode.getChildByName(\"lb_province\").color = new cc.Color(255, 255, 231);\n        }\n        this.SelectProvinceNode = event.node;\n        /*this.cityContent.removeAllChildren();\n        this.countyContent.removeAllChildren();*/\n\n        this.DestroyAllChildren(this.cityContent);\n        this.DestroyAllChildren(this.countyContent);\n\n        let id = event.node.name;\n        this.SelectId = id;\n        this.curSelectProvince = id;\n        event.node.getChildByName(\"icon_checkin_cs\").active = true;\n        event.node.getChildByName(\"lb_province\").color = new cc.Color(97, 22, 2);\n        let idArr = this.SplitIdToArr(id.toString());\n        let allCity = [];\n        \n        for(let key in this.selectCityConfig){\n            let tempIdArr = this.SplitIdToArr(this.selectCityConfig[key][\"Id\"].toString());\n            if (this.selectCityConfig[key][\"Type\"] == 2 &&\n                idArr[0] == tempIdArr[0]) {\n                allCity.push(this.selectCityConfig[key]);\n            }\n        }\n        //加载选择省所有的市\n        let isOnClickSelect = false;\n        for (let i = 0; i < allCity.length; i++) {\n            let cityItem = cc.instantiate(this.cityItem);\n            cityItem.name = allCity[i]['Id'].toString();\n            cityItem.getChildByName('lb_city').getComponent(cc.Label).string = allCity[i]['Name'];\n            cityItem.getChildByName(\"lb_city\").color = new cc.Color(255, 255, 231);\n            cityItem.on('click',this.OnSelectCity,this);\n            cityItem.active = true;\n            this.cityContent.addChild(cityItem);\n            if (i == 0) {\n                //先默认第一个，防止漏选城市\n                this.OnSelectCity({\"node\":cityItem});\n            }\n            if (this.allSelectCityData.length > 0 &&\n                this.allSelectCityData[0]['city'] == allCity[i]['Id'].toString()) {\n                this.OnSelectCity({\"node\":cityItem});\n                isOnClickSelect = true;\n            }\n            if (this.localCity == allCity[i]['Name']) {\n                if (this.allSelectCityData.length == 0) {\n                    this.OnSelectCity({\"node\":cityItem});\n                    isOnClickSelect = true;\n                }\n            }\n            //定位未找到城市并且上次没选择，选择配表中默认的城市\n            if (!isOnClickSelect && allCity[i]['DefaultCity'] == 1) {\n                this.OnSelectCity({\"node\":cityItem});\n                isOnClickSelect = true;\n            }\n        }\n    },\n\n    OnSelectCity:function(event){\n        if (this.SelectCityNode != null) {\n            if(this.SelectCityNode.name!=\"\"){\n                this.SelectCityNode.getChildByName(\"icon_checkin_cs\").active = false;\n                this.SelectCityNode.getChildByName(\"lb_city\").color = new cc.Color(255, 255, 231);\n            }\n        }\n        this.SelectCityNode = event.node;\n        //this.countyContent.removeAllChildren();\n        this.DestroyAllChildren(this.countyContent);\n        let id = event.node.name;\n        this.SelectId = id;\n        this.curSelectCity = id;\n        event.node.getChildByName(\"icon_checkin_cs\").active = true;\n        event.node.getChildByName(\"lb_city\").color = new cc.Color(97, 22, 2);\n        let idArr = this.SplitIdToArr(id.toString());\n        let allCounty = [];        \n        for(let key in this.selectCityConfig){\n            let tempIdArr = this.SplitIdToArr(this.selectCityConfig[key][\"Id\"].toString());\n            if (this.selectCityConfig[key][\"Type\"] == 3 &&\n                idArr[0] == tempIdArr[0]&&\n                idArr[1] == tempIdArr[1]) {\n                allCounty.push(this.selectCityConfig[key]);\n            }\n        }\n        //加载选择省所有的市\n        let isOnClickSelect = false;\n        for (let i = 0; i < allCounty.length; i++) {\n            let countyItem = cc.instantiate(this.countyItem);\n            countyItem.name = allCounty[i]['Id'].toString();\n            countyItem.getChildByName('lb_county').getComponent(cc.Label).string = allCounty[i]['Name'];\n            countyItem.getChildByName(\"lb_county\").color = new cc.Color(255, 255, 231);\n            countyItem.on('click',this.OnSelectCounty,this);\n            countyItem.active = true;\n            this.countyContent.addChild(countyItem);\n            //先默认第一个，防止漏选城市\n            if (i == 0) {\n                this.OnSelectCounty({\"node\":countyItem});\n            }\n            if (this.allSelectCityData.length > 0 &&\n                this.allSelectCityData[0]['county'] == allCounty[i]['Id'].toString()) {\n                this.OnSelectCounty({\"node\":countyItem});\n            }\n            //定位未找到城市并且上次没选择，选择配表中默认的城市\n            if (!isOnClickSelect && allCounty[i]['DefaultCity'] == 1) {\n                this.OnSelectCounty({\"node\":countyItem});\n                isOnClickSelect = true;\n            }\n        }\n    },\n\n    OnSelectCounty:function(event){\n        console.log(\"OnSelectCounty id == \" + event.node.name);\n        if (this.SelectCountyNode != null) {\n            if(this.SelectCountyNode.name!=\"\"){\n                this.SelectCountyNode.getChildByName(\"icon_checkin_cs\").active = false;\n                this.SelectCountyNode.getChildByName(\"lb_county\").color = new cc.Color(255, 255, 231);\n            }\n        }\n        this.SelectCountyNode = event.node;\n        event.node.getChildByName(\"icon_checkin_cs\").active = true;\n        event.node.getChildByName(\"lb_county\").color = new cc.Color(97, 22, 2);\n\n        this.SelectId = event.node.name;\n        this.curSelectCounty = event.node.name;\n    },\n\n    //对id进行分割，前三位表示省，中间两位表示市，最后两位表示省\n    SplitIdToArr:function(id){\n        let ids = id.split('');\n        let result = [];\n        let tempStr = \"\";\n        for (var i = 0; i < 3; i++) {\n            tempStr += ids[i].toString();\n        }\n        result.push(tempStr);\n        tempStr = \"\"\n        for (var i = 3; i < 5; i++) {\n            tempStr += ids[i].toString();\n        }\n        result.push(tempStr);\n        tempStr = \"\"\n        for (var i = 5; i < 7; i++) {\n            tempStr += ids[i].toString();\n        }\n        return result;\n    },\n    \n    SendHttpRequest:function(serverUrl, argString, requestType, sendPack){\n\t\tif (app.ControlManager().IsOpenVpn()) {\n            return;\n        }\n        \n        var url = [serverUrl, argString].join(\"\")\n\n        var dataStr = JSON.stringify(sendPack);\n\n        //每次都实例化一个，否则会引起请求结束，实例被释放了\n        var httpRequest = new XMLHttpRequest();\n\n        httpRequest.timeout = 2000;\n\n\n        httpRequest.open(requestType, url, true);\n        //服务器json解码\n        httpRequest.setRequestHeader(\"Content-Type\", \"application/json\");\n        var that = this;\n        httpRequest.onerror = function(){\n            that.ErrLog(\"httpRequest.error:%s\", url);\n            that.OnConnectHttpFail(serverUrl, httpRequest.readyState, httpRequest.status);\n        };\n        httpRequest.ontimeout = function(){\n            that.ShowAllCity();\n        };\n        httpRequest.onreadystatechange = function(){\n            //执行成功\n            if (httpRequest.status == 200){\n                if(httpRequest.readyState == 4){\n                    that.OnReceiveHttpPack(serverUrl, httpRequest.responseText);\n                }else{\n                    that.ShowAllCity();\n                }\n            }\n            else{\n                that.OnConnectHttpFail(serverUrl, httpRequest.readyState, httpRequest.status);\n                that.ErrLog(\"onreadystatechange(%s,%s)\", httpRequest.readyState, httpRequest.status);\n            }\n        };\n        httpRequest.send(dataStr);\n\n    },\n    OnReceiveHttpPack:function(serverUrl, httpResText){\n        // try{\n        let serverPack = JSON.parse(httpResText);\n        //获取到当前地址刷新选项\n        console.log(\"当前ip位置：\" + serverPack[\"province\"] + \",\" + serverPack[\"city\"]);\n        this.localProvince = serverPack[\"province\"];\n        this.localCity = serverPack[\"city\"];\n        this.ShowAllCity();\n        // }\n        // catch (error){\n        //     this.ShowAllCity();\n        // }\n    },\n    OnConnectHttpFail:function(serverUrl, readyState, status){\n        this.ShowAllCity();\n    },\n    Event_CodeError:function(event){\n        let codeInfo = event;\n        if(codeInfo[\"Code\"] == this.ShareDefine.NotFind_Room){\n            app.SysNotifyManager().ShowSysMsg('DissolveRoom');\n            this.curRoomID = 0;\n            this.curGameTypeStr = '';\n        }\n    },\n    OnClose:function(){\n\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_search' == btnName){\n            this.Click_btn_searchName();\n            return;\n        }else if ('btn_close' == btnName) {\n            this.CloseForm();\n        }else if ('btn_starGame' == btnName) {\n            if (this.SelectId == 0) {\n                this.ShowSysMsg(\"请先选择一个城市\");\n                return;\n            }\n            if (this.selectCityConfig[this.SelectId][\"Type\"] != 3) {\n                this.ShowSysMsg(\"需指定县级市，才能进入游戏\");\n                return;\n            }\n            // let selectCityData = app.LocalDataManager().GetConfigProperty(\"SysSetting\",\"SelectCityData\");\n            // if (selectCityData.length >= 3) {\n            //     //最多只记录三个\n            //     selectCityData.pop();\n            // }\n            // let curSelectData = {\"province\" : this.curSelectProvince,\n            //                     \"city\" : this.curSelectCity,\n            //                     \"county\" : this.curSelectCounty,\n            //                     \"selcetId\" : this.SelectId};\n            // selectCityData.unshift(curSelectData);\n            // app.LocalDataManager().SetConfigProperty(\"SysSetting\",\"SelectCityData\",selectCityData);\n            // let curSelectGameList = this.selectCityConfig[this.SelectId][\"Game\"];\n            //根据选择的城市向服务端请求所有游戏\n            let self = this;\n            app.NetManager().SendPack(\"room.CBaseGameIdList\", {\"selectCityId\":this.SelectId}, function(event){\n                app.Client.allGameIdFormServer = event.split(\",\");\n                let curSelectGameList = app.Client.GetAllGameId();\n                let argDict = {\n                    \"gameList\":curSelectGameList,\n                };\n                //记录用户选择的城市，城市节点使用\n                app.HeroManager().UpdateCity(self.SelectId);\n                cc.sys.localStorage.setItem(\"myCityID\",self.SelectId);\n                app.Client.OnEvent(\"ShowGameListByLocation\", argDict);\n                self.CloseForm();\n            }, function(event){\n                console.log(\"获取游戏id失败\");\n            });\n        }\n        else{\n            this.ErrLog(\"OnClick(%s) not find\",btnName);\n        }\n        \n    },\n\n    Click_btn_searchName:function(){\n        let name = this.searchName.string;\n        let searchData = null;\n        for(let key in this.selectCityConfig){\n            if (this.selectCityConfig[key][\"Name\"] == name) {\n                searchData = this.selectCityConfig[key];\n                break;\n            }\n        }\n        if (searchData == null) {\n            this.ShowSysMsg(\"找不到该省/市/县，请输入完整的省/市/县\");\n            return;\n        }\n        if (searchData[\"Type\"] == 1) {\n            for(let key in this.provinceContent.children){\n                if (this.provinceContent.children[key][\"name\"] == searchData[\"Id\"]) {\n                    this.OnSelectProvince({\"node\":this.provinceContent.children[key]});\n                    break;\n                }\n            }\n        }else if (searchData[\"Type\"] == 2) {\n            for(let key in this.provinceContent.children){\n                if (this.provinceContent.children[key][\"name\"] == searchData[\"Ascription\"]) {\n                    this.OnSelectProvince({\"node\":this.provinceContent.children[key]});\n                    break;\n                }\n            }\n            for(let key in this.cityContent.children){\n                if (this.cityContent.children[key][\"name\"] == searchData[\"Id\"]) {\n                    this.OnSelectCity({\"node\":this.cityContent.children[key]});\n                    break;\n                }\n            }\n        }else if (searchData[\"Type\"] == 3) {\n            //先找到对应的省id\n            let cityId = searchData[\"Ascription\"];\n            let provinceId = this.selectCityConfig[searchData[\"Ascription\"]][\"Ascription\"];\n            for(let key in this.provinceContent.children){\n                if (this.provinceContent.children[key][\"name\"] == provinceId) {\n                    this.OnSelectProvince({\"node\":this.provinceContent.children[key]});\n                    break;\n                }\n            }\n            for(let key in this.cityContent.children){\n                if (this.cityContent.children[key][\"name\"] == cityId) {\n                    this.OnSelectCity({\"node\":this.cityContent.children[key]});\n                    break;\n                }\n            }\n            for(let key in this.countyContent.children){\n                if (this.countyContent.children[key][\"name\"] == searchData[\"Id\"]) {\n                    this.OnSelectCounty({\"node\":this.countyContent.children[key]});\n                    break;\n                }\n            }\n        }\n    },\n\n    Click_Btn_QieHuan:function () {\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), \"UIMoreQieHuanZhangHao\", []);\n        ConfirmManager.ShowConfirm(this.ShareDefine.Confirm, \"UIMoreQieHuanZhangHao\", []);\n    },\n\n    /**\n     * 2次确认点击回调\n     * @param curEventType\n     * @param curArgList\n     */\n    OnConFirm:function(clickType, msgID, backArgList){\n\n        if(clickType != \"Sure\"){\n            return\n        }\n        if(msgID == \"UIMoreQieHuanZhangHao\"){\n            this.LocalDataManager.SetConfigProperty(\"Account\", \"AccessTokenInfo\", {});\n            console.log(\"切换账号\");\n            app.Client.LogOutGame(1);\n        }\n        else if(\"MSG_EXIT_GAME\"){\n            cc.game.end();\n        }\n    },\n});"]}