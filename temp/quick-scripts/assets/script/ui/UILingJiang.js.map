{"version":3,"sources":["UILingJiang.js"],"names":["app","require","cc","Class","extends","properties","toggle1","Toggle","toggle2","demo_club_name","Node","btn_qinyouquan","layout","mark","OnCreateInit","ShareDefine","NetManager","OnShow","isChecked","getChildByName","getComponent","Label","string","clubId","active","OnClick","btnName","btnNode","that","SendPack","success","SysNotifyManager","ShowSysMsg","error","CloseForm","clublist","ClubManager","GetClubData","length","DestroyAllChildren","i","club","instantiate","name","id","clubName","addChild","startsWith","ErrLog"],"mappings":"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","file":"UILingJiang.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        toggle1:cc.Toggle,\n        toggle2:cc.Toggle,\n        demo_club_name:cc.Node,\n        btn_qinyouquan:cc.Node,\n        layout:cc.Node,\n        mark:cc.Node,\n    },\n\n    //初始化\n    OnCreateInit:function(){\n        this.ShareDefine = app.ShareDefine();\n        this.NetManager = app.NetManager();\n    },\n\n    //---------显示函数--------------------\n\n    OnShow:function(){\n        this.toggle1.isChecked=true;\n        this.btn_qinyouquan.getChildByName('lb_name').getComponent(cc.Label).string='请选择哪个亲友圈';\n        this.btn_qinyouquan.getChildByName('lb_name').clubId=0;\n        this.mark.active=false;\n        \n    },\n\n\n    //---------点击函数---------------------\n\n    OnClick:function(btnName, btnNode){\n        let clubId=0;\n        if(btnName == \"btnSure\"){\n            if(this.toggle1.isChecked==true){\n                clubId=0;\n            }else{\n                clubId=this.btn_qinyouquan.getChildByName('lb_name').clubId;\n            }\n            let that = this;\n            this.NetManager.SendPack(\"game.CPlayerReceiveShare\", {clubId:clubId}, function (success) {\n                if(clubId>0){\n                    app.SysNotifyManager().ShowSysMsg(\"分享成功获取5张圈卡\");\n                }else{\n                    app.SysNotifyManager().ShowSysMsg(\"分享成功获取2个钻石\");\n                }\n            }, function (error) {\n                app.SysNotifyManager().ShowSysMsg(\"您今日已经领取过\");\n            });\n            this.CloseForm();\n        }else if((btnName == \"btn_qinyouquan\" || btnName == \"btn_xuanze\")){\n            let clublist= app.ClubManager().GetClubData();\n            if(clublist.length>0){\n                //this.layout.removeAllChildren();\n                this.DestroyAllChildren(this.layout);\n                this.mark.active=true;\n                for(let i=0;i<clublist.length;i++){\n                    let club = cc.instantiate(this.demo_club_name);\n                    club.name=\"club_select_\"+clublist[i].id;\n                    club.clubName=clublist[i].name;\n                    club.clubId=clublist[i].id;\n                    club.getComponent(cc.Label).string=clublist[i].name;\n                    club.active=true;\n                    this.layout.addChild(club);\n                }\n            }\n        }else if(btnName.startsWith(\"club_select_\")){\n            this.btn_qinyouquan.getChildByName('lb_name').getComponent(cc.Label).string=btnNode.clubName;\n            this.btn_qinyouquan.getChildByName('lb_name').clubId=btnNode.clubId;\n            this.mark.active=false;\n        }\n        else{\n            this.ErrLog(\"OnClick:%s not find\", btnName);\n        }\n    },\n\n});\n"]}