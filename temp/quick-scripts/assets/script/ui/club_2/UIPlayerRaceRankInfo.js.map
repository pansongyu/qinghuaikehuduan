{"version":3,"sources":["UIPlayerRaceRankInfo.js"],"names":["app","require","cc","Class","extends","properties","OnCreateInit","rankScrollView","node","getChildByName","getComponent","ScrollView","on","GetNextPage","OnShow","clubId","pid","type","opClubId","opPid","curPage","GetUnionDynamicItemList","GetPage","isRefresh","sendPack","getType","pageNum","self","NetManager","SendPack","serverPack","UpdateScrollView","unionDynamicItemList","ShowPlayInfo","img_xiadi","player","headImageUrl","iconUrl","WeChatManager","InitHeroHeadImage","WeChatHeadImage","OnLoad","ShowHeroHead","Label","string","name","ComTool","GetBeiZhuName","playerTotalPoint","zhongZhiTotalPoint","eliminatePoint","roomScrollView","content","scrollToTop","DestroyAllChildren","demo","active","i","length","child","instantiate","GetDateYearMonthDayHourMinuteString","execTime","GetExecTypeStr","execType","id","winLoseValue","consumeValue","pidCurValue","addChild","typeObj","OnClick","btnName","btnNode","CloseForm","ErrLog"],"mappings":"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","file":"UIPlayerRaceRankInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n\n    },\n\n    OnCreateInit: function () {\n        this.rankScrollView = this.node.getChildByName(\"rankScrollView\");\n        this.rankScrollView.getComponent(cc.ScrollView).node.on('scroll-to-bottom',this.GetNextPage,this);\n    },\n    OnShow: function (clubId,pid,type) {\n        this.opClubId = clubId;\n        this.opPid = pid;\n        this.type = type;\n        this.curPage = 1;\n        this.GetUnionDynamicItemList(true);\n    },\n    GetPage:function(){\n        this.curPage++;\n        this.GetUnionDynamicItemList(false);\n    },\n    GetUnionDynamicItemList:function(isRefresh){\n        let sendPack = {};\n        sendPack.clubId = this.opClubId;\n        sendPack.pid = this.opPid;\n        sendPack.getType = this.type;\n        sendPack.pageNum = this.curPage;\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubSportsPointChangeRecordByPid\",sendPack, function(serverPack){\n            self.UpdateScrollView(serverPack.unionDynamicItemList, isRefresh);\n            self.ShowPlayInfo(serverPack);\n        }, function(){\n\n        });\n    },\n    ShowPlayInfo:function(serverPack){\n        let img_xiadi = this.node.getChildByName(\"img_xiadi\");\n        let player = serverPack.player;\n        let headImageUrl = player.iconUrl;\n        if(headImageUrl){\n            app.WeChatManager().InitHeroHeadImage(player.pid, headImageUrl);\n            let WeChatHeadImage = img_xiadi.getChildByName('head').getComponent(\"WeChatHeadImage\");\n            WeChatHeadImage.OnLoad();\n            WeChatHeadImage.ShowHeroHead(player.pid,headImageUrl);\n        }\n        img_xiadi.getChildByName('lb_name').getComponent(cc.Label).string = \"昵称:\"+player.name;\n        img_xiadi.getChildByName('lb_beizhu').getComponent(cc.Label).string = \"群名片:\"+app.ComTool().GetBeiZhuName(player.pid,player.name);\n        img_xiadi.getChildByName('lb_id').getComponent(cc.Label).string = \"ID:\"+player.pid;\n\n        img_xiadi.getChildByName('lb_playerTotalPoint').getComponent(cc.Label).string = \"成员积分：\"+serverPack.playerTotalPoint;\n        img_xiadi.getChildByName('lb_zhongZhiTotalPoint').getComponent(cc.Label).string = \"总积分：\"+serverPack.zhongZhiTotalPoint;\n        img_xiadi.getChildByName('lb_eliminatePoint').getComponent(cc.Label).string = \"淘汰：\"+serverPack.eliminatePoint;\n    },\n    UpdateScrollView:function(serverPack, isRefresh){\n        let roomScrollView = this.node.getChildByName(\"mark\");\n        let content = this.rankScrollView.getChildByName(\"view\").getChildByName(\"content\");\n        if (isRefresh) {\n            this.rankScrollView.getComponent(cc.ScrollView).scrollToTop();\n            this.DestroyAllChildren(content);\n        }\n        let demo = this.node.getChildByName(\"demo\");\n        demo.active = false;\n        for (let i = 0; i < serverPack.length; i++) {\n            let child = cc.instantiate(demo);\n            child.getChildByName(\"lb_execTime\").getComponent(cc.Label).string = app.ComTool().GetDateYearMonthDayHourMinuteString(serverPack[i].execTime);\n            child.getChildByName(\"lb_execType\").getComponent(cc.Label).string = this.GetExecTypeStr(serverPack[i].execType);\n            child.getChildByName(\"lb_id\").getComponent(cc.Label).string = serverPack[i].id;\n            child.getChildByName(\"lb_winLoseValue\").getComponent(cc.Label).string = serverPack[i].winLoseValue;\n            child.getChildByName(\"lb_consumeValue\").getComponent(cc.Label).string = serverPack[i].consumeValue;\n            child.getChildByName(\"lb_eliminatePoint\").getComponent(cc.Label).string = serverPack[i].eliminatePoint;\n            child.getChildByName(\"lb_pidCurValue\").getComponent(cc.Label).string = serverPack[i].pidCurValue;\n            child.active = true;\n            content.addChild(child);\n        }\n    },\n    // //**\n    //  * 异常操作\n    //  */\n    // ERROR(1),\n    // /**\n    //  * 对局输赢\n    //  */\n    // WINLOSE(2),\n    // /**\n    //  * 报名费\n    //  */\n    // ENTRYFEE(3),\n    // /**\n    //  * 洗牌费用\n    //  */\n    // XiPaiCost(4),\n    GetExecTypeStr:function(execType){\n        let typeObj = {\n            1:\"异常操作\",\n            2:\"对局输赢\",\n            3:\"报名费\",\n            4:\"洗牌费用\",\n        };\n        return typeObj[execType];\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_close\" || btnName == \"img_black\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}