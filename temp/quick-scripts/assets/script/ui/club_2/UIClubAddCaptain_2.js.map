{"version":3,"sources":["UIClubAddCaptain_2.js"],"names":["app","require","cc","Class","extends","properties","chazhaoEditBox","EditBox","OnCreateInit","rankScrollView","node","getChildByName","getComponent","ScrollView","on","GetNextPage","OnShow","clubId","opClubId","curPage","GetUnionDynamicItemList","GetPage","isRefresh","sendPack","query","string","pageNum","self","NetManager","SendPack","serverPack","UpdateScrollView","roomScrollView","content","scrollToTop","DestroyAllChildren","demo","active","i","length","child","instantiate","Sprite","enabled","shortPlayer","Label","name","pid","GetMinisterStr","minister","upPlayerName","addChild","OnClick","btnName","btnNode","CloseForm","parent","Client","OnEvent","ErrLog"],"mappings":"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","file":"UIClubAddCaptain_2.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        chazhaoEditBox:cc.EditBox,\n    },\n\n    OnCreateInit: function () {\n        this.rankScrollView = this.node.getChildByName(\"rankScrollView\");\n        this.rankScrollView.getComponent(cc.ScrollView).node.on('scroll-to-bottom',this.GetNextPage,this);\n    },\n    OnShow: function (clubId) {\n        this.opClubId = clubId;\n        this.curPage = 1;\n        this.GetUnionDynamicItemList(true);\n    },\n    GetPage:function(){\n        this.curPage++;\n        this.GetUnionDynamicItemList(false);\n    },\n    GetUnionDynamicItemList:function(isRefresh){\n        let sendPack = {};\n        sendPack.clubId = this.opClubId;\n        sendPack.query = this.chazhaoEditBox.string;\n        sendPack.pageNum = this.curPage;\n        let self = this;\n        app.NetManager().SendPack(\"club.CClubAddCaptainZhongZhi\",sendPack, function(serverPack){\n            self.UpdateScrollView(serverPack, isRefresh);\n        }, function(){\n\n        });\n    },\n    UpdateScrollView:function(serverPack, isRefresh){\n        let roomScrollView = this.node.getChildByName(\"mark\");\n        let content = this.rankScrollView.getChildByName(\"view\").getChildByName(\"content\");\n        if (isRefresh) {\n            this.rankScrollView.getComponent(cc.ScrollView).scrollToTop();\n            this.DestroyAllChildren(content);\n        }\n        let demo = this.node.getChildByName(\"demo\");\n        demo.active = false;\n        for (let i = 0; i < serverPack.length; i++) {\n            let child = cc.instantiate(demo);\n            if (i%2 == 0) {\n                child.getComponent(cc.Sprite).enabled = false;\n            }else{\n                child.getComponent(cc.Sprite).enabled = true;\n            }\n            child.shortPlayer = serverPack[i].shortPlayer;\n            child.getChildByName(\"lb_name\").getComponent(cc.Label).string = serverPack[i].shortPlayer.name;\n            child.getChildByName(\"lb_id\").getComponent(cc.Label).string = serverPack[i].shortPlayer.pid;\n            child.getChildByName(\"lb_minister\").getComponent(cc.Label).string = this.GetMinisterStr(serverPack[i].minister);\n            child.getChildByName(\"lb_upPlayerName\").getComponent(cc.Label).string = serverPack[i].upPlayerName;\n            child.active = true;\n            content.addChild(child);\n        }\n    },\n    // //**是否是管理,不是为null,是为1，2为创建者\n    GetMinisterStr:function(minister){\n        if (minister == 1) {\n            return \"管理员\";\n        }else if (minister == 2) {\n            return \"创建者\";\n        }else{\n            return \"成员\";\n        }\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else if (\"btn_search\" == btnName) {\n            this.curPage = 1;\n            this.GetUnionDynamicItemList(true);\n        }else if (\"btn_addCaptain\" == btnName) {\n            this.curPage = 1;\n            let sendPack = {};\n            sendPack.clubId = this.opClubId;\n            sendPack.pid = btnNode.parent.shortPlayer.pid;\n            sendPack.pageNum = this.curPage;\n            let self = this;\n            app.NetManager().SendPack(\"Club.CClubAddCaptionOpZhongZhi\",sendPack, function(serverPack){\n                self.GetUnionDynamicItemList(true);\n                app.Client.OnEvent('UpdateZhanDuiNodeData', {});\n            }, function(){\n\n            });\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}