{"version":3,"sources":["UISetSportsPointWarning_2.js"],"names":["app","require","cc","Class","extends","properties","OnShow","data","lb_tip","node","getChildByName","getComponent","Label","isPersonal","string","name","clubSign","EditBox","alivePoint","InitShareType","alivePointStatus","isChange","OnClick","btnName","btnNode","GetShareType","percentStr","SysNotifyManager","ShowSysMsg","ComTool","StrIsNum","sendPack","ClubManager","GetUnionSendPackHead","pid","value","parseFloat","self","NetManager","SendPack","serverPack","CloseForm","clubId","opClubId","opPid","createId","ErrLog"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,yBAAR,CADJ;;AAGLI,gBAAY,EAHP;;AAQLC,YAAQ,gBAAUC,IAAV,EAAgB;AACpB,aAAKA,IAAL,GAAYA,IAAZ;AACA,YAAIC,SAAS,KAAKC,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCC,YAAnC,CAAgDT,GAAGU,KAAnD,CAAb;AACA,YAAI,OAAOL,KAAKM,UAAZ,IAA2B,WAA3B,IAA0CN,KAAKM,UAAnD,EAA+D;AAC3D;AACCL,mBAAOM,MAAP,GAAgB,gBAAcP,KAAKQ,IAAnB,GAAwB,gBAAxC;AACJ,SAHD,MAGK;AACD;AACAP,mBAAOM,MAAP,GAAgB,kBAAgBP,KAAKQ,IAArB,GAA0B,GAA1B,GAA8BR,KAAKS,QAAnC,GAA4C,GAA5C,GAAgD,0CAAhE;AACH;AACD,aAAKP,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,EAA2CC,YAA3C,CAAwDT,GAAGe,OAA3D,EAAoEH,MAApE,GAA4E,KAAKP,IAAL,CAAUW,UAAtF;AACA,aAAKC,aAAL,CAAmBZ,KAAKa,gBAAxB;AACA,aAAKC,QAAL,GAAc,KAAd;AACH,KArBI;AAsBLC,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAGD,WAAW,UAAd,EAAyB;AACrB;AACA,gBAAIH,mBAAiB,KAAKK,YAAL,EAArB;AACA,gBAAIC,aAAY,KAAKjB,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,EAA2CC,YAA3C,CAAwDT,GAAGe,OAA3D,EAAoEH,MAApF;AACA,gBAAGY,aAAW,CAAd,EAAgB;AACZ1B,oBAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,cAAlC,EAAiD,EAAjD,EAAoD,CAApD;AACA;AACH;AACD,gBAAI5B,IAAI6B,OAAJ,GAAcC,QAAd,CAAuBJ,UAAvB,CAAJ,EAAwC;AACpC,oBAAIK,WAAW/B,IAAIgC,WAAJ,GAAkBC,oBAAlB,EAAf;AACA,oBAAI,OAAO,KAAK1B,IAAL,CAAUM,UAAjB,IAAgC,WAAhC,IAA+C,KAAKN,IAAL,CAAUM,UAA7D,EAAyE;AACrE;AACAkB,6BAASG,GAAT,GAAe,KAAK3B,IAAL,CAAU2B,GAAzB;AACAH,6BAASI,KAAT,GAAiBC,WAAWV,UAAX,CAAjB;AACAK,6BAASX,gBAAT,GAA0BA,gBAA1B;AACA,wBAAIiB,OAAO,IAAX;AACArC,wBAAIsC,UAAJ,GAAiBC,QAAjB,CAA0B,4BAA1B,EAAuDR,QAAvD,EAAiE,UAASS,UAAT,EAAoB;AACjFxC,4BAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,UAAlC,EAA6C,EAA7C,EAAgD,CAAhD;AACAS,6BAAKI,SAAL;AACH,qBAHD,EAGG,YAAU;AACTzC,4BAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,UAAlC,EAA6C,EAA7C,EAAgD,CAAhD;AACH,qBALD;AAMH,iBAZD,MAYM,IAAI,OAAO,KAAKrB,IAAL,CAAUmC,MAAjB,IAA4B,WAAhC,EAA6C;AAC/CX,6BAASG,GAAT,GAAe,KAAK3B,IAAL,CAAU2B,GAAzB;AACAH,6BAASI,KAAT,GAAiBC,WAAWV,UAAX,CAAjB;AACAK,6BAASX,gBAAT,GAA0BA,gBAA1B;AACA,wBAAIiB,QAAO,IAAX;AACArC,wBAAIsC,UAAJ,GAAiBC,QAAjB,CAA0B,oCAA1B,EAA+DR,QAA/D,EAAyE,UAASS,UAAT,EAAoB;AACzFxC,4BAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,UAAlC,EAA6C,EAA7C,EAAgD,CAAhD;AACAS,8BAAKI,SAAL;AACH,qBAHD,EAGG,YAAU;AACTzC,4BAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,UAAlC,EAA6C,EAA7C,EAAgD,CAAhD;AACH,qBALD;AAMH,iBAXK,MAWD;AACDG,6BAASY,QAAT,GAAoB,KAAKpC,IAAL,CAAUmC,MAA9B;AACAX,6BAASa,KAAT,GAAiB,KAAKrC,IAAL,CAAUsC,QAA3B;AACAd,6BAASI,KAAT,GAAiBC,WAAWV,UAAX,CAAjB;AACAK,6BAASX,gBAAT,GAA0BA,gBAA1B;AACA,wBAAIiB,SAAO,IAAX;AACArC,wBAAIsC,UAAJ,GAAiBC,QAAjB,CAA0B,8BAA1B,EAAyDR,QAAzD,EAAmE,UAASS,UAAT,EAAoB;AACnFxC,4BAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,UAAlC,EAA6C,EAA7C,EAAgD,CAAhD;AACAS,+BAAKI,SAAL;AACH,qBAHD,EAGG,YAAU;AACTzC,4BAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,UAAlC,EAA6C,EAA7C,EAAgD,CAAhD;AACH,qBALD;AAMH;AACJ,aAtCD,MAsCK;AACD5B,oBAAI2B,gBAAJ,GAAuBC,UAAvB,CAAkC,QAAlC,EAA2C,EAA3C,EAA8C,CAA9C;AACH;AACJ,SAjDD,MAiDM,IAAGL,WAAW,WAAd,EAA0B;AAC5B,iBAAKkB,SAAL;AACH,SAFK,MAED;AACD,iBAAKK,MAAL,CAAY,sBAAZ,EAAoCvB,OAApC;AACH;AACJ;;AA7EI,CAAT","file":"UISetSportsPointWarning_2.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club_2","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"UISetSportsPointWarning\"),\n\n    properties: {\n\n    },\n\n   \n    OnShow: function (data) {\n        this.data = data;\n        let lb_tip = this.node.getChildByName(\"lb_tip\").getComponent(cc.Label);\n        if (typeof(data.isPersonal) != \"undefined\" && data.isPersonal) {\n            //个人的\n             lb_tip.string = \"设置预警值后，该玩家【\"+data.name+\"】比赛分低于预警值将无法游戏\";\n        }else{\n            //赛事的\n            lb_tip.string = \"设置生存积分后，该亲友圈【\"+data.name+\"(\"+data.clubSign+\")\"+\"】内所有玩家的“最终积分”总和低于生存积分要求时，该亲友圈内所有玩家将禁止游戏。\";\n        }\n        this.node.getChildByName(\"PercentEditBox\").getComponent(cc.EditBox).string =this.data.alivePoint;\n        this.InitShareType(data.alivePointStatus);\n        this.isChange=false;\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_sure\"){\n            //生存积分\n            let alivePointStatus=this.GetShareType();\n            let percentStr =this.node.getChildByName(\"PercentEditBox\").getComponent(cc.EditBox).string;\n            if(percentStr>0){\n                app.SysNotifyManager().ShowSysMsg(\"只能输入小于等于0的数字\",[],3);\n                return;\n            }\n            if (app.ComTool().StrIsNum(percentStr)) {\n                let sendPack = app.ClubManager().GetUnionSendPackHead();\n                if (typeof(this.data.isPersonal) != \"undefined\" && this.data.isPersonal) {\n                    //个人的\n                    sendPack.pid = this.data.pid;\n                    sendPack.value = parseFloat(percentStr);\n                    sendPack.alivePointStatus=alivePointStatus;\n                    let self = this;\n                    app.NetManager().SendPack(\"club.CClubAlivePointChange\",sendPack, function(serverPack){\n                        app.SysNotifyManager().ShowSysMsg(\"成功设置生存积分\",[],3);\n                        self.CloseForm();\n                    }, function(){\n                        app.SysNotifyManager().ShowSysMsg(\"设置生存积分失败\",[],3);\n                    });\n                }else if (typeof(this.data.clubId) == \"undefined\") {\n                    sendPack.pid = this.data.pid;\n                    sendPack.value = parseFloat(percentStr);\n                    sendPack.alivePointStatus=alivePointStatus;\n                    let self = this;\n                    app.NetManager().SendPack(\"club.CClubSportsPointWarningChange\",sendPack, function(serverPack){\n                        app.SysNotifyManager().ShowSysMsg(\"成功设置生存积分\",[],3);\n                        self.CloseForm();\n                    }, function(){\n                        app.SysNotifyManager().ShowSysMsg(\"设置生存积分失败\",[],3);\n                    });\n                }else{\n                    sendPack.opClubId = this.data.clubId;\n                    sendPack.opPid = this.data.createId;\n                    sendPack.value = parseFloat(percentStr);\n                    sendPack.alivePointStatus=alivePointStatus;\n                    let self = this;\n                    app.NetManager().SendPack(\"union.CUnionAlivePointChange\",sendPack, function(serverPack){\n                        app.SysNotifyManager().ShowSysMsg(\"成功设置生存积分\",[],3);\n                        self.CloseForm();\n                    }, function(){\n                        app.SysNotifyManager().ShowSysMsg(\"设置生存积分失败\",[],3);\n                    });\n                }\n            }else{\n                app.SysNotifyManager().ShowSysMsg(\"请输入纯数字\",[],3);\n            }\n        }else if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else{\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\n        }\n    },\n\n});\n"]}