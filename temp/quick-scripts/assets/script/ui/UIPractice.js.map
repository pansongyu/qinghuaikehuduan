{"version":3,"sources":["UIPractice.js"],"names":["app","require","cc","Class","extends","properties","btnNodeGroup","Node","RightNode","game_name","pafabItem","OnCreateInit","practiceConfig","SysDataManager","GetTableDict","FormManager","NetManager","curType","gameType","playerNumList","practiceId","lastGameSelect","lastSelect","curGameType","other","RegEvent","Event_GetCurRoomID","Event_CodeError","OnShow","SysNotifyManager","ShowSysMsg","CloseForm","ShowForm","DestroyAllChildren","lastTag","Client","SetGameType","curRoomID","curGameTypeStr","GameManager","SetGetRoomIDByUI","SendPack","SetAutoPlayIng","InitgameBtns","GetAllGameId","serverPack","gameList","undefined","key","gameIDList","i","length","gamePinYin","ShareDefine","GametTypeID2PinYin","gameName","GametTypeID2Name","node","instantiate","active","name","getChildByName","getComponent","Label","string","addChild","sendGameType","substring","sendPack","GametTypeNameDict","toUpperCase","tag","OnSuccessInitData","bind","list","gameLists","splice","idx","push","UpdatePractice","gameId","refreshList","childNode","children","baseNum","baseMark","toFixed","toString","playerNum","min","max","needStr","parseInt","event","roomID","toLowerCase","codeInfo","code","NotFind_Room","NotEnoughCoin","WaitForConfirm","Confirm","MuchCoin","ConfirmOK","OnClose","SetWaitForConfirm","msgID","type","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","ShowConfirm","clickType","backArgList","Click_btn_goRoom","clubId","clubCardNtfs","data","setTimeout","clubName","roomcardattention","GetCfgByGameName","cfgList","sendPracticeId","argList","Array","prototype","slice","call","arguments","Math","floor","PracticeRoomCheckSubGame","OnClick","btnName","btnNode","needCfgList","isShow","IsFormShow","id","gold","HeroManager","GetHeroProperty","ErrLog","needId","startsWith","replace","OnSuccess","OnEnterRoomFailed","console","log"],"mappings":"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","file":"UIPractice.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        btnNodeGroup:cc.Node,\n        RightNode:cc.Node,\n        game_name:cc.Node,\n\n        pafabItem:cc.Node,\n    },\n    OnCreateInit: function () {\n        this.practiceConfig = app.SysDataManager().GetTableDict(\"practice\");\n        this.FormManager = app.FormManager();\n        this.NetManager=app.NetManager();\n        this.curType = {\n            'mahjong':0,\n            'poker':1,\n            'other':2\n        };\n        this.gameType = '';\n        this.playerNumList = [];\n        this.practiceId = 0;\n        this.lastGameSelect = null;\n        this.lastSelect = null;\n        this.curGameType = this.curType.other;\n        this.RegEvent(\"GetCurRoomID\", this.Event_GetCurRoomID, this);\n        this.RegEvent(\"CodeError\", this.Event_CodeError, this);\n    },\n    //-----------------显示函数------------------\n    OnShow: function (gameType='') {\n        //非常规切换可能导致配表丢失\n        if (!this.practiceConfig) {\n            this.practiceConfig = app.SysDataManager().GetTableDict(\"practice\");\n        }\n        if (!this.practiceConfig) {\n            app.SysNotifyManager().ShowSysMsg('游戏配置丢失，请重启游戏');\n            this.CloseForm();\n        }\n        this.FormManager.ShowForm('UITop', \"UIPractice\");\n        //this.btnNodeGroup.removeAllChildren();\n        this.DestroyAllChildren(this.btnNodeGroup);\n        this.lastTag = null;\n        this.gameType=gameType;\n        app.Client.SetGameType('');\n        this.curRoomID = 0;\n        this.curGameTypeStr = '';\n        app.GameManager().SetGetRoomIDByUI(true);\n        app.NetManager().SendPack(\"game.C1101GetRoomID\", {});\n        app.GameManager().SetAutoPlayIng(false);\n        this.FormManager.CloseForm(\"UIAutoPlay\");\n        this.InitgameBtns({\"gameList\":app.Client.GetAllGameId()})\n    },\n    InitgameBtns:function(serverPack){\n        this.gameList = {};\n        if(undefined == serverPack.gameList ||\n            '' == serverPack.gameList ||\n            'null' == serverPack.gameList){\n            this.gameList = {\n\n            };\n            if('' == this.gameType){\n                for(let key in this.gameList){\n                    this.gameType = key;\n                    break;\n                }\n            }\n       }else{\n           let gameIDList=serverPack.gameList;\n            for(let i=0;i<gameIDList.length;i++){\n                let gamePinYin=this.ShareDefine.GametTypeID2PinYin[gameIDList[i]];\n                let gameName=this.ShareDefine.GametTypeID2Name[gameIDList[i]];\n                \n                this.gameList[gamePinYin]=gameName;\n                if(i==0){\n                    if('' == this.gameType){\n                        this.gameType=gamePinYin;\n                    }\n                }\n            }\n       }\n        for(let key in this.gameList){\n            if (key == \"sss\" || key == \"hbmj\") {\n                continue;\n            }\n            let node = cc.instantiate(this.pafabItem);\n            node.active = true;\n            node.name = 'btn_' + key;\n            node.getChildByName('icon_off').getComponent(cc.Label).string = this.gameList[key];\n            node.getChildByName('icon').getChildByName('icon_on').getComponent(cc.Label).string = this.gameList[key];\n            this.btnNodeGroup.addChild(node);\n        }\n        this.sendGameType();\n    },\n    sendGameType:function(){\n        if(this.gameType == 'pdk_lyfj'){\n            this.gameType = this.gameType.substring(0,3);\n        }\n        let sendPack = {\n            'gameType':app.ShareDefine().GametTypeNameDict[this.gameType.toUpperCase()]\n        }\n        if(this.lastTag!=null){\n            this.lastTag.active=false;\n        }\n        let tag=this.btnNodeGroup.getChildByName('btn_'+this.gameType).getChildByName('icon');\n        tag.active=true;\n        this.lastTag=tag;\n        app.NetManager().SendPack('room.CBaseGoldList', sendPack, this.OnSuccessInitData.bind(this));\n    },\n    OnSuccessInitData:function(serverPack){\n        //获取服务端传过来的数据\n        let list = serverPack.gameLists;\n        if(this.playerNumList && this.playerNumList.length){\n            this.playerNumList.splice(0, this.playerNumList.length);\n        }\n        for(let idx = 0; idx < list.length; idx++){\n            this.playerNumList.push(list[idx]);\n        }\n        this.UpdatePractice();\n    },\n    UpdatePractice:function(){\n        let gameId = app.ShareDefine().GametTypeNameDict[this.gameType.toUpperCase()];\n        this.game_name.getComponent(cc.Label).string=app.ShareDefine().GametTypeID2Name[gameId];\n        \n        let refreshList = []; \n        for(let key in this.practiceConfig){\n            if(this.gameType == this.practiceConfig[key]['gameType'])\n                refreshList.push(this.practiceConfig[key]);\n        }\n        for(let i=0;i<refreshList.length;i++){\n            if(i>3){\n                break;\n            }\n            let childNode=this.RightNode.children[i];\n            let baseNum = refreshList[i]['baseMark'];\n            let baseMark = '';\n            if(baseMark >= 10000)\n                baseMark = (baseNum / 10000).toFixed(1) + '万';\n            else if(baseMark > 1000)\n                baseMark = (baseNum / 1000).toFixed(1) + '千';\n            else\n                baseMark = baseNum.toString();\n            childNode.getChildByName('lb_difen').getComponent(cc.Label).string = \"底分:\"+baseMark;\n            if(this.playerNumList.length){\n                childNode.getChildByName('lb_renshu').getComponent(cc.Label).string = (this.playerNumList[i].playerNum).toString() + '人';\n            }\n            let min = refreshList[i]['min'];\n            let max = refreshList[i]['max'];\n            let needStr = '';\n            if(0 == max){\n                if(min < 1000)\n                    needStr = min.toString();\n                else if(min >= 10000)\n                    needStr = parseInt(min / 10000).toString() + '万以上';\n                else\n                    needStr = parseInt(min / 1000).toString() + '千以上';\n            }\n            else{\n                if(min < 1000)\n                    needStr = min.toString() + '-';\n                else if(min >= 10000)\n                    needStr = parseInt(min / 10000).toString() + '万-';\n                else\n                    needStr = parseInt(min / 1000).toString() + '千-';\n\n                if(max < 1000)\n                    needStr += max.toString();\n                else if(max >= 10000)\n                    needStr += parseInt(max / 10000).toString() + '万';\n                else\n                    needStr += parseInt(max / 1000).toString() + '千';\n            }\n            childNode.getChildByName('lb_zhunru').getComponent(cc.Label).string = \"准入:\"+needStr;\n        }\n    },\n    Event_GetCurRoomID:function(event){\n        let serverPack = event;\n        this.curRoomID = serverPack.roomID;\n        if(0 != this.curRoomID){\n            this.curGameTypeStr = serverPack.gameType.toLowerCase();\n        }\n    },\n    Event_CodeError:function(event){\n        let codeInfo = event;\n        let code = codeInfo[\"Code\"];\n        if(code == this.ShareDefine.NotFind_Room){\n            app.SysNotifyManager().ShowSysMsg('DissolveRoom');\n            this.curRoomID = 0;\n            this.curGameTypeStr = '';\n        }else if(code == this.ShareDefine.NotEnoughCoin){\n            this.WaitForConfirm(\"MSG_NOTROOMCOIN\", [], [], this.ShareDefine.Confirm);\n        }\n        else if(code == this.ShareDefine.MuchCoin){\n            this.WaitForConfirm(\"MSG_TOOMUCHCOIN\", [], [], this.ShareDefine.ConfirmOK);\n        }\n    },\n    OnClose:function(){\n    },\n    //---------点击函数---------------------\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[]){\n        let ConfirmManager = app.ConfirmManager();\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\n        ConfirmManager.ShowConfirm(type, msgID, msgArg);\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n        if('MSG_GO_ROOM' == msgID){\n            this.Click_btn_goRoom();\n        }\n        else if('MSG_NOTROOMCOIN'== msgID){\n            this.FormManager.ShowForm(\"UIStore\",'btn_table0');\n        }\n        else if('MSG_CLUB_RoomCard_Not_Enough' == msgID){\n            let clubId = backArgList[0];\n            for(let i=0;i<this.clubCardNtfs.length;i++){\n                if(this.clubCardNtfs[i].clubId == clubId){\n                    this.clubCardNtfs.splice(i,1);\n                    break;\n                }\n            }\n            if(0 != this.clubCardNtfs.length){\n                let data = this.clubCardNtfs[0];\n                setTimeout(function(){\n                    app.SysNotifyManager().ShowSysMsg('MSG_CLUB_RoomCard_Not_Enough',[data.clubName,data.roomcardattention]);\n                },200);\n            }\n        }\n    },\n    GetCfgByGameName:function(gameName){\n        let cfgList = [];\n        for(let key in this.practiceConfig){\n            if(gameName == this.practiceConfig[key].gameType)\n                cfgList.push(this.practiceConfig[key]);\n        }\n        return cfgList;\n    },\n    sendPracticeId:function(){\n        var argList = Array.prototype.slice.call(arguments);\n        let idx = 0;\n        if(typeof argList[0] == 'string'){\n             idx = Math.floor(argList[0].substring(('item').length));\n        }\n        else if(typeof argList[0] == 'number'){\n            idx = argList[0];\n        }\n        this.practiceId = idx;\n        app.Client.PracticeRoomCheckSubGame(this.gameType, this.practiceId);\n        // let sendPack = {\n        //     practiceId:idx\n        // }\n        // app.NetManager().SendPack('room.CBaseGoldRoom', sendPack, this.OnSuccess.bind(this), this.OnEnterRoomFailed.bind(this));\n    },\n    OnClick:function(btnName, btnNode){\n        let needCfgList=[];\n        if('btn_close' == btnName){\n            let isShow=this.FormManager.IsFormShow('UINewMain');\n            if(isShow==false){\n                this.FormManager.ShowForm('UINewMain');\n            }\n            this.CloseForm();\n        }else if('btn_gdyx' == btnName){\n            this.FormManager.ShowForm('UIMoreGame');\n        }\n        else if('btn_xsc' == btnName){\n            needCfgList = this.GetCfgByGameName(this.gameType);\n            this.sendPracticeId(needCfgList[0].id);\n        }else if('btn_cjc' == btnName){\n            needCfgList = this.GetCfgByGameName(this.gameType);\n            this.sendPracticeId(needCfgList[1].id);\n        }else if('btn_zjc' == btnName){\n            needCfgList = this.GetCfgByGameName(this.gameType);\n            this.sendPracticeId(needCfgList[2].id);\n        }else if('btn_gjc' == btnName){\n            needCfgList = this.GetCfgByGameName(this.gameType);\n            this.sendPracticeId(needCfgList[3].id);\n        }else if('btn_go' == btnName){\n            let gold = app.HeroManager().GetHeroProperty('gold');\n            needCfgList = this.GetCfgByGameName(this.gameType);\n            if(0 == needCfgList.length){\n                this.ErrLog('needCfgList Error curGameName :' + this.gameType);\n                return;\n            }\n            if(gold < needCfgList[0].min){\n                this.WaitForConfirm(\"MSG_NOTROOMCOIN\", [], [], this.ShareDefine.Confirm);\n                return;\n            }\n            let needId = -1;\n            for(let i=0;i<needCfgList.length;i++){\n                if(gold >= needCfgList[i].min && \n                    (gold <= needCfgList[i].max || 0 == needCfgList[i].max)){\n                    needId = needCfgList[i].id;\n                    break;\n                }\n            }\n            if(-1 == needId){\n                this.ErrLog('CfgError needId = -1');\n                return;\n            }\n            this.sendPracticeId(needId);\n        }else if(btnName.startsWith(\"btn_\")){\n            this.gameType = btnName.replace('btn_','');\n            this.sendGameType();\n        }\n        else{\n            this.ErrLog(\"OnClick(%s) not find\",btnName);\n        }\n        \n    },\n\n    OnSuccess:function(serverPack){\n        app.ShareDefine().practiceId = this.practiceId;\n    },\n\n    OnEnterRoomFailed:function(serverPack){\n        console.log('OnEnterRoomFailed serverPack', serverPack);\n    },\n});"]}