{"version":3,"sources":["UITop.js"],"names":["app","require","cc","Class","extends","properties","lb_heroName","Label","lb_heroID","node_head","Node","rightTop","OnCreateInit","closeformArr","RegEvent","Event_HeroProperty","WeChatHeadImage1","getComponent","OnShow","formPath","isShowQuanKa","length","push","indexOf","getChildByName","active","ShowFastCount","ShowRoomCard","ShowClubCard","ShowHero_NameOrID","RemoveCloseFormArr","InArray","Remove","event","argDict","gold","HeroManager","GetHeroProperty","string","heroRoomCard","heroClubCard","heroID","heroName","ComTool","GetBeiZhuName","i18n","t","GetPid","ShowHeroHead","OnClick","btnName","btnNode","closeformPath","pop","FormManager","CloseForm","ShowForm"],"mappings":"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","file":"UITop.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        lb_heroName:cc.Label,\n        lb_heroID:cc.Label,\n        node_head:cc.Node,\n        rightTop:cc.Node,\n    },\n    OnCreateInit: function () {\n        this.closeformArr = [];\n        this.RegEvent(\"HeroProperty\", this.Event_HeroProperty);\n        this.WeChatHeadImage1 = this.node_head.getComponent(\"WeChatHeadImage\");\n    },\n    OnShow: function (formPath, isShowQuanKa = false) {\n        isShowQuanKa = false;//暂时全部隐藏圈卡\n        if(this.closeformArr.length == 0){\n            this.closeformArr.push(formPath);\n        }\n        else{\n            if(this.closeformArr.indexOf(formPath) == -1){\n                this.closeformArr.push(formPath);\n            }\n           \n        }\n        if (isShowQuanKa) {\n            this.rightTop.getChildByName(\"ledou\").active = false;\n            this.rightTop.getChildByName(\"quanka\").active = true;\n            this.rightTop.getChildByName(\"fangka\").active = true;\n        }else{\n            this.rightTop.getChildByName(\"ledou\").active = false;\n            this.rightTop.getChildByName(\"quanka\").active = false;\n            this.rightTop.getChildByName(\"fangka\").active = true;\n        }\n        this.ShowFastCount();\n        this.ShowRoomCard();\n        this.ShowClubCard();\n        this.ShowHero_NameOrID();\n    },\n    RemoveCloseFormArr:function(formPath){\n        if(this.closeformArr.InArray(formPath)){\n            this.closeformArr.Remove(formPath);\n        }\n    },\n    Event_HeroProperty:function (event) {\n        let argDict = event;\n        if(argDict[\"Property\"] == \"gold\"){\n            this.ShowFastCount();\n        }\n        else if(argDict[\"Property\"] == \"roomCard\"){\n            this.ShowRoomCard();\n        }else if(argDict[\"Property\"] == \"clubCard\"){\n            this.ShowClubCard();\n        }\n    },\n    ShowFastCount:function () {\n        let gold = app.HeroManager().GetHeroProperty('gold');\n        this.rightTop.getChildByName('ledou').getChildByName('label').getComponent(cc.Label).string=gold;\n    },\n    ShowRoomCard:function () {\n        let heroRoomCard = app.HeroManager().GetHeroProperty(\"roomCard\");\n        this.rightTop.getChildByName('fangka').getChildByName('label').getComponent(cc.Label).string=heroRoomCard;\n    },\n    ShowClubCard:function () {\n        let heroClubCard = app.HeroManager().GetHeroProperty(\"clubCard\");\n        this.rightTop.getChildByName('quanka').getChildByName('label').getComponent(cc.Label).string=heroClubCard;\n    },\n\n    ShowHero_NameOrID:function () {\n        let heroID = app.HeroManager().GetHeroProperty(\"pid\");\n        let heroName = app.HeroManager().GetHeroProperty(\"name\");\n        this.lb_heroName.string = this.ComTool.GetBeiZhuName(heroID,heroName,9);\n        \n        this.lb_heroID.string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n        this.WeChatHeadImage1.ShowHeroHead(heroID);\n\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n            if(this.closeformArr.length >= 0){\n                var closeformPath = this.closeformArr.pop();\n                if(this.closeformArr.length == 0){\n                    app.FormManager().CloseForm(closeformPath);\n                    this.CloseForm();\n                }else{\n                    app.FormManager().CloseForm(closeformPath);\n                }\n            }\n        }else if('btn_head' == btnName){\n            this.FormManager.ShowForm(\"UIUserInfo\");\n        }else if('btn_addGold' == btnName){\n            this.FormManager.ShowForm(\"UIStore\",'btn_table0');\n        }else if('btn_addRoomCard' == btnName){\n            this.FormManager.ShowForm(\"UIStore\",'btn_table1');\n        }else if('btn_addQuanCard' == btnName){\n            // this.FormManager.ShowForm('ui/club/UIClubStore');\n        }\n        \n    }\n});\n"]}