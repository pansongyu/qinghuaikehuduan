{"version":3,"sources":["UIPlayerInfo.js"],"names":["app","require","cc","Class","extends","properties","sp_paipindiLabel","Label","sp_haopingdiLabel","sp_chapingdiLabel","sp_chupaidiLabel","sp_zhongtulikaiLabel","heroName","heroID","heroFastCount","heroRoomCard","OnCreateInit","PlayerRoomManager","ComTool","RegEvent","Event_InitPlayerRoom","Event_HeroProperty","event","argDict","detail","ShowFastCount","ShowRoomCard","Show_PaiYouKouBei","chuPai","Show_KuaiSuChuPai","liKai","Show_ZhongTuLiKai","haoPingNumber","Show_HaoPing","chaPingNumber","Show_ChaPing","Show_PaiPin","OnShow","ShowHero_NameOrID","HeroManager","GetHeroProperty","string","GetBeiZhuName","i18n","t","GetPid","fastCard","kouBei","GetPlayerRoomProperty","i","length","kouBeiPath","StringAddNumSuffix","kouBeiStringPath","join","kouBeiString","GetWndComponent","Log","OnClick","btnName","btnNode","clientConfig","Client","GetClientConfig","FormManager","ShowForm","that","then","CloseForm","catch","error","ErrLog","stack"],"mappings":"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","file":"UIPlayerInfo.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        sp_paipindiLabel:cc.Label,\n        sp_haopingdiLabel:cc.Label,\n        sp_chapingdiLabel:cc.Label,\n        sp_chupaidiLabel:cc.Label,\n        sp_zhongtulikaiLabel:cc.Label,\n        heroName:cc.Label,\n        heroID:cc.Label,\n        heroFastCount:cc.Label,\n        heroRoomCard:cc.Label,\n    },\n\n    OnCreateInit: function () {\n        this.PlayerRoomManager = app.PlayerRoomManager();\n        this.ComTool = app.ComTool();\n        this.RegEvent(\"InitPlayerRoom\", this.Event_InitPlayerRoom);\n        this.RegEvent(\"HeroProperty\", this.Event_HeroProperty);\n    },\n    Event_HeroProperty:function (event) {\n        let argDict = event.detail;\n\n        if(argDict[\"Property\"] == \"fastCard\"){\n            this.ShowFastCount();\n        }\n        else if(argDict[\"Property\"] == \"roomCard\"){\n            this.ShowRoomCard();\n        }\n    },\n    Event_InitPlayerRoom:function () {\n        this.Show_PaiYouKouBei();\n        let chuPai = this.Show_KuaiSuChuPai();\n        let liKai = this.Show_ZhongTuLiKai();\n        let haoPingNumber = this.Show_HaoPing();\n        let chaPingNumber = this.Show_ChaPing();\n        this.Show_PaiPin(haoPingNumber, chaPingNumber, chuPai, liKai);\n    },\n\n    OnShow: function () {\n        this.ShowHero_NameOrID();\n        this.ShowFastCount();\n        this.ShowRoomCard();\n\n        this.Show_PaiYouKouBei();\n\n        let chuPai = this.Show_KuaiSuChuPai();\n        let liKai = this.Show_ZhongTuLiKai();\n        let haoPingNumber = this.Show_HaoPing();\n        let chaPingNumber = this.Show_ChaPing();\n\n        this.Show_PaiPin(haoPingNumber, chaPingNumber, chuPai, liKai);\n    },\n    ShowHero_NameOrID:function () {\n\n        let heroID = app.HeroManager().GetHeroProperty(\"pid\");\n        let heroName = app.HeroManager().GetHeroProperty(\"name\");\n        this.heroName.string =this.ComTool.GetBeiZhuName(heroID,heroName,9);\n        this.heroID.string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\n\n    },\n    ShowFastCount:function () {\n        let fastCard = app.HeroManager().GetHeroProperty(\"fastCard\");\n        this.heroFastCount.string = fastCard;\n    },\n    ShowRoomCard:function () {\n\n        let heroRoomCard = app.HeroManager().GetHeroProperty(\"roomCard\");\n        this.heroRoomCard.string = heroRoomCard;\n\n    },\n    Show_PaiYouKouBei:function () {\n        let kouBei = this.PlayerRoomManager.GetPlayerRoomProperty(\"koubeiList\");\n        for(let i = kouBei.length; i > 0; i--){\n            let kouBeiPath = this.ComTool.StringAddNumSuffix(\"UIInfo/sp_koubei/nd_koubei/sp_koubei\",i,2);\n            let kouBeiStringPath = [kouBeiPath,\"lb_num\"].join(\"/\");\n            let kouBeiString = this.GetWndComponent(kouBeiStringPath,cc.Label);\n            kouBeiString.string = kouBei[i-1];\n        }\n    },\n    Show_PaiPin:function (haoPingNumber ,chaPingNumber, chuPai, liKai) {\n        this.Log(haoPingNumber, chaPingNumber, chuPai, liKai);\n        this.sp_paipindiLabel.string = haoPingNumber*100 - chaPingNumber*100 + chuPai - liKai*50;\n    },\n    Show_HaoPing:function () {\n        let kouBei = this.PlayerRoomManager.GetPlayerRoomProperty(\"koubeiList\");\n        let haoPingNumber = 0;\n        for(let i = 0; i < kouBei.length; i++){\n            if(i < 4){\n                haoPingNumber += kouBei[i]\n            }\n        }\n        this.sp_haopingdiLabel.string = haoPingNumber;\n\n        return haoPingNumber;\n    },\n\n    Show_ChaPing:function () {\n        let kouBei = this.PlayerRoomManager.GetPlayerRoomProperty(\"koubeiList\");\n        let chaPingNumber = 0;\n        for(let i = 4; i < kouBei.length; i++){\n            chaPingNumber += kouBei[i]\n        }\n        // this.chaPing = this.PlayerRoomManager.GetPlayerRoomProperty(\"evaBad\");\n        this.sp_chapingdiLabel.string = chaPingNumber;\n\n        return chaPingNumber;\n    },\n    Show_KuaiSuChuPai:function () {\n        let chuPai = this.PlayerRoomManager.GetPlayerRoomProperty(\"fastOut\");\n        this.sp_chupaidiLabel.string = chuPai;\n\n        return chuPai;\n    },\n    Show_ZhongTuLiKai:function () {\n        let liKai = this.PlayerRoomManager.GetPlayerRoomProperty(\"midLeave\");\n        this.sp_zhongtulikaiLabel.string = liKai;\n\n        return liKai;\n    },\n    //---------点击函数---------------------\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_buy\"){\n            let clientConfig = app.Client.GetClientConfig();\n            this.FormManager.ShowForm(\"UIStore\");\n        }\n        else if(btnName == \"btn_back\"){\n\t        let that = this;\n            this.FormManager.ShowForm(\"UINewMain\")\n\t            .then(function () {\n\t                that.CloseForm();\n\t            })\n\t            .catch(function(error){\n\t\t            that.ErrLog(\"error:%s\", error.stack);\n\t            })\n        }\n    },\n\n\n});"]}