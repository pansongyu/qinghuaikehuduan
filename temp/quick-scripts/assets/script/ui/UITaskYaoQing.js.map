{"version":3,"sources":["UITaskYaoQing.js"],"names":["app","require","cc","Class","extends","properties","layout","Node","demo","renshu","Label","chongzhi","OnCreateInit","ComTool","OnShow","FormManager","ShowForm","active","pageNum","maxPage","ShowPagePlayer","that","NetManager","SendPack","serverPack","DestroyAllChildren","InitPlayer","ShowSysMsg","refererReceiveItems","totalPrice","totalNumber","string","Math","ceil","i","length","nodePrefab","instantiate","getChildByName","getComponent","name","substr","GetDateYearMonthDayHourMinuteString","inviteTime","state","color","Color","price","addChild","OnClick","btnName","btnNode","title","Client","GetClientConfigProperty","desc","weChatAppShareUrl","heroID","HeroManager","GetHeroProperty","cityId","console","log","ShareType","SDKManager","Share","OnConFirm","clickType","msgID","backArgList"],"mappings":"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","file":"UITaskYaoQing.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n    properties: {\n        layout:cc.Node,\n        demo:cc.Node,\n        renshu:cc.Label,\n        chongzhi:cc.Label,\n    },\n    OnCreateInit:function(){\n        this.ComTool=app.ComTool();\n    },\n    OnShow: function () {\n        app.FormManager().ShowForm('UITop', \"UITaskYaoQing\");\n        this.demo.active=false;\n        this.pageNum=1;\n        this.maxPage=1;\n        this.ShowPagePlayer();\n    },\n    ShowPagePlayer:function(){\n        let that=this;\n        app.NetManager().SendPack('game.CPlayerReceiveList',{'pageNum':this.pageNum},function(serverPack){\n            //that.layout.removeAllChildren();\n            that.DestroyAllChildren(that.layout);\n            that.InitPlayer(serverPack);\n        },function(serverPack){\n            that.ShowSysMsg(\"推广数据获取失败，请稍后重试\");\n        });\n    },\n    InitPlayer:function(serverPack){\n        let refererReceiveItems=serverPack.refererReceiveItems;\n        let totalPrice=serverPack.totalPrice;\n        let totalNumber=serverPack.totalNumber;\n        this.renshu.string=totalNumber;\n        this.maxPage=Math.ceil(totalNumber/10);\n        if(this.maxPage==0){\n            this.maxPage=1;\n        }\n        this.chongzhi.string=totalPrice;\n        //显示玩家\n        for(let i=0;i<refererReceiveItems.length;i++){\n            let nodePrefab = cc.instantiate(this.demo);\n            nodePrefab.getChildByName('name').getComponent(cc.Label).string=refererReceiveItems[i].name.substr(0,7);\n            nodePrefab.getChildByName('date').getComponent(cc.Label).string=this.ComTool.GetDateYearMonthDayHourMinuteString(refererReceiveItems[i].inviteTime);;\n            if(refererReceiveItems[i].state==0){\n                nodePrefab.getChildByName('state').getComponent(cc.Label).string='局数不够';\n            }else{\n                nodePrefab.getChildByName('state').color=new cc.Color(0, 134, 13);\n                nodePrefab.getChildByName('state').getComponent(cc.Label).string='邀请成功';\n            }\n            nodePrefab.getChildByName('num').getComponent(cc.Label).string=refererReceiveItems[i].price;\n            nodePrefab.active=true;\n            this.layout.addChild(nodePrefab);\n        }\n        \n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_yaoqing'==btnName){\n            // this.FormManager.ShowForm('UIShare');\n            //直接链接分享\n            let title = app.Client.GetClientConfigProperty(\"WeChatShareTitle\");\n            let desc = app.Client.GetClientConfigProperty(\"WeChatShareDesc\");\n            let weChatAppShareUrl = app.Client.GetClientConfigProperty(\"WeChatAppShareUrl\");\n            let heroID = app.HeroManager().GetHeroProperty(\"pid\");\n            let cityId=app.HeroManager().GetHeroProperty(\"cityId\");\n            weChatAppShareUrl = weChatAppShareUrl+heroID+\"&cityid=\"+cityId;\n            console.log(\"Click_btn_weixin:\",title);\n            console.log(\"Click_btn_weixin:\",desc);\n            console.log(\"Click_btn_weixin:\",weChatAppShareUrl);\n            this.ShareType=0;\n            this.SDKManager.Share(title, desc, weChatAppShareUrl, \"0\");\n        }\n    },\n    OnConFirm:function(clickType, msgID, backArgList){\n        if(clickType != \"Sure\"){\n            return\n        }\n    }\n});\n"]}