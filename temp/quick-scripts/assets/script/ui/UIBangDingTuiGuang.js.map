{"version":3,"sources":["UIBangDingTuiGuang.js"],"names":["app","require","cc","Class","extends","properties","editbox_ID","EditBox","tip","Label","btn_bangding","Node","OnCreateInit","ComTool","FormManager","NetManager","HeroManager","heroID","GetHeroProperty","OnShow","SendPack","pidStr","familyEnum","OnPack_ShowBangDing","bind","OnPack_ShowBangDingFail","serverPack","node","active","getChildByName","string","getComponent","playerBindingFamily","familyId","familyName","PlayerFamilyManager","SetPlayerFamilyProperty","CheckBangDing","bangdingID","OnPack_PlayerBindingFamily","OnPack_PlayerBindingFamilyFail","SysNotifyManager","ShowSysMsg","OnClick","btnName","btnNode","CloseForm"],"mappings":"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","file":"UIBangDingTuiGuang.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        editbox_ID:cc.EditBox,\n        tip:cc.Label,\n        btn_bangding:cc.Node,\n    },\n\n    OnCreateInit: function () {\n        this.ComTool = app.ComTool();\n        this.FormManager=app.FormManager();\n        this.NetManager = app.NetManager();\n //       this.NetManager.RegNetPack(\"game.CPlayerReceiveShare\", this.OnPack_ReceiveShare, this);\n        this.HeroManager = app.HeroManager(); \n        this.heroID = app.HeroManager().GetHeroProperty(\"pid\"); \n    },\n\n    OnShow: function () {\n        this.NetManager.SendPack('family.PlayerBindingFamily',{pidStr:'',familyEnum:1},this.OnPack_ShowBangDing.bind(this),this.OnPack_ShowBangDingFail.bind(this));\n    },\n    OnPack_ShowBangDing:function(serverPack){\n        this.tip.node.active = true;\n        this.node.getChildByName('bg').getChildByName('label').active = false;\n        this.node.getChildByName('bg').getChildByName('zuanshi').active = false;\n        this.tip.string='您已经成功绑定';\n        this.tip.node.getChildByName(\"tip1\").getComponent(cc.Label).string = \"代理号是：\" + serverPack.playerBindingFamily.familyId;\n        this.tip.node.getChildByName(\"tip2\").getComponent(cc.Label).string = \"代理昵称是：\" + serverPack.playerBindingFamily.familyName;\n        this.editbox_ID.node.active=false;\n        this.btn_bangding.active=false;\n\n        let familyId=serverPack.playerBindingFamily.familyId;\n        if(familyId){\n            app.PlayerFamilyManager().SetPlayerFamilyProperty('familyID',familyId);\n        }\n    },\n    OnPack_ShowBangDingFail:function(serverPack){\n        this.tip.node.active = false;\n        this.editbox_ID.node.active=true;\n        this.btn_bangding.active=true;\n    },\n    CheckBangDing:function(){\n        let bangdingID=this.editbox_ID.string;\n        if(bangdingID<10000){\n            return;\n        }\n        //请求服务器查看绑定信息\n        this.NetManager.SendPack('family.PlayerBindingFamily',{pidStr:bangdingID,familyEnum:3},this.OnPack_PlayerBindingFamily.bind(this),this.OnPack_PlayerBindingFamilyFail.bind(this));\n    },\n\n    OnPack_PlayerBindingFamily:function(serverPack){\n        app.SysNotifyManager().ShowSysMsg('MSG_BangDing_Success');\n        this.OnPack_ShowBangDing(serverPack);\n    },\n\n    OnPack_PlayerBindingFamilyFail:function(serverPack){\n        let bangdingID=this.editbox_ID.string;\n        app.SysNotifyManager().ShowSysMsg('MSG_BangDing_Error1',[bangdingID]);\n    },\n    OnClick:function(btnName, btnNode){\n        if(btnName == \"btn_close\"){\n            this.CloseForm();\n        }else if(btnName=='btn_bangding'){\n            this.CheckBangDing();\n        }\n    }\n});\n"]}