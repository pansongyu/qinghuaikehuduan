{"version":3,"sources":["BackgroundLayer.js"],"names":["app","require","cc","Class","extends","properties","OnCreate","sceneType","JS_Name","join","SysDataManager","IntegrateImage","GetTableDict","ShowMap","mapID","imageName","hasOwnProperty","ErrLog","imagePath","bgNode","node","getChildByName","sprite","getComponent","Sprite","that","loader","loadRes","SpriteFrame","error","spriteFrame"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,UAASH,QAAQ,eAAR,CADJ;;AAGLI,aAAY,EAHP;;AAMRC,WAAU,kBAAUC,SAAV,EAAqB;AAC9B,OAAKC,OAAL,GAAe,CAACD,SAAD,EAAY,iBAAZ,EAA+BE,IAA/B,CAAoC,GAApC,CAAf;AACA,OAAKC,cAAL,GAAsBV,IAAIU,cAAJ,EAAtB;AACA,OAAKC,cAAL,GAAsB,KAAKD,cAAL,CAAoBE,YAApB,CAAiC,gBAAjC,CAAtB;AACG,EAVI;;AAYR;AACAC,UAAQ,iBAASC,KAAT,EAAe;AACtB;AACA,MAAG,CAACA,KAAJ,EAAU;AACT;AACA;AACD,MAAIC,YAAY,EAAhB;;AAEA,MAAG,CAAC,KAAKJ,cAAL,CAAoBK,cAApB,CAAmCD,SAAnC,CAAJ,EAAkD;AACjD,QAAKE,MAAL,CAAY,wCAAZ,EAAsDF,SAAtD;AACA;AACA;AACD,MAAIG,YAAY,KAAKP,cAAL,CAAoBI,SAApB,EAA+B,UAA/B,CAAhB;;AAEA;AACA,MAAII,SAAS,KAAKC,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAb;AACA,MAAG,CAACF,MAAJ,EAAW;AACV,QAAKF,MAAL,CAAY,0BAAZ;AACA;AACA;AACD,MAAIK,SAASH,OAAOI,YAAP,CAAoBrB,GAAGsB,MAAvB,CAAb;AACA,MAAG,CAACF,MAAJ,EAAW;AACV,QAAKL,MAAL,CAAY,oCAAZ;AACA;AACA;;AAED,MAAIQ,OAAO,IAAX;AACA;AACAvB,KAAGwB,MAAH,CAAUC,OAAV,CAAkBT,SAAlB,EAA6BhB,GAAG0B,WAAhC,EAA6C,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B;AAC1E,OAAGD,KAAH,EAAS;AACRJ,SAAKR,MAAL,CAAY,uCAAZ,EAAqDC,SAArD,EAAgEW,KAAhE;AACA;AACA;AACDP,UAAOQ,WAAP,GAAqBA,WAArB;AACA,GAND;AAOA;;AA/CO,CAAT","file":"BackgroundLayer.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\scene\\Layer","sourcesContent":["/*\n    场景背景层\n*/\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseComponent\"),\n\n    properties: {\n    },\n\n\tOnCreate: function (sceneType) {\n\t\tthis.JS_Name = [sceneType, \"BackgroundLayer\"].join(\"_\");\n\t\tthis.SysDataManager = app.SysDataManager();\n\t\tthis.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\n    },\n    \n\t//显示地图背景图\n\tShowMap:function(mapID){\n\t\t//如果没有地图，则使用编辑器默认编辑的图片\n\t\tif(!mapID){\n\t\t\treturn\n\t\t}\n\t\tlet imageName = '';\n\n\t\tif(!this.IntegrateImage.hasOwnProperty(imageName)){\n\t\t\tthis.ErrLog(\"ShowMap IntegrateImage.txt not find:%s\", imageName);\n\t\t\treturn\n\t\t}\n\t\tlet imagePath = this.IntegrateImage[imageName][\"FilePath\"];\n\n\t\t//获取到背景node对象\n\t\tvar bgNode = this.node.getChildByName(\"bgImage\")\n\t\tif(!bgNode){\n\t\t\tthis.ErrLog(\"ShowMap bgImage not find\");\n\t\t\treturn\n\t\t}\n\t\tlet sprite = bgNode.getComponent(cc.Sprite);\n\t\tif(!sprite){\n\t\t\tthis.ErrLog(\"ShowMap bgImage not find cc.Sprite\");\n\t\t\treturn\n\t\t}\n\n\t\tvar that = this;\n\t\t//加载图片精灵\n\t\tcc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\n\t\t\tif(error){\n\t\t\t\tthat.ErrLog(\"ShowMap imagePath(%s) loader error:%s\", imagePath, error);\n\t\t\t\treturn\n\t\t\t}\n\t\t\tsprite.spriteFrame = spriteFrame;\n\t\t});\n\t},\n\n});\n"]}