{"version":3,"sources":["ResManager.js"],"names":["app","require","zass_ResManager","BaseClass","extend","Init","JS_Name","PreSetMJSpriteFrame","filePath","cardId","fileName","that","ControlManager","CreateLoadPromise","cc","SpriteFrame","then","spriteFrame","catch","error","ErrLog","stack","SetMJSpriteFrameToNode","node","callback","argList","getComponent","Sprite","g_zass_ResManager","exports","GetModel"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;AAaA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEA;;;AAGA,IAAIC,kBAAkBF,IAAIG,SAAJ,CAAcC,MAAd,CAAqB;;AAEvC;;;AAGAC,UAAK,gBAAU;AACX,aAAKC,OAAL,GAAe,YAAf;AACH,KAPsC;AAQvC;AACA;AACAC,yBAAoB,6BAASC,QAAT,EAAkBC,MAAlB,EAAyB;AACzC,YAAIT,IAAI,aAAaS,MAAjB,CAAJ,EAA8B;AAC1B;AACH;AACD,YAAIC,WAAWF,WAAWC,MAA1B;AACA,YAAIE,OAAO,IAAX;AACAX,YAAIY,cAAJ,GAAqBC,iBAArB,CAAuCH,QAAvC,EAAiDI,GAAGC,WAApD,EAAiEC,IAAjE,CAAsE,UAAUC,WAAV,EAAuB;AACzFjB,gBAAI,aAAaS,MAAjB,IAA2BQ,WAA3B;AACH,SAFD,EAEGC,KAFH,CAES,UAAUC,KAAV,EAAiB;AACtBR,iBAAKS,MAAL,CAAY,wBAAZ,EAAsCX,MAAtC,EAA8CU,MAAME,KAApD;AACH,SAJD;AAKH,KArBsC;AAsBvC;AACAC,4BAAuB,gCAASd,QAAT,EAAkBC,MAAlB,EAA0Bc,IAA1B,EAA+D;AAAA,YAA/BC,QAA+B,uEAApB,UAASC,OAAT,EAAiB,CAAE,CAAC;;AAClF,YAAIzB,IAAI,aAAaS,MAAjB,CAAJ,EAA8B;AAC1B,gBAAGc,QAAQ,IAAX,EAAgB;AACZA,qBAAKG,YAAL,CAAkBZ,GAAGa,MAArB,EAA6BV,WAA7B,GAA2CjB,IAAI,aAAaS,MAAjB,CAA3C;AACH;AACDe,qBAASxB,IAAI,aAAaS,MAAjB,CAAT;AACA;AACH;AACD,YAAIC,WAAWF,WAAWC,MAA1B;AACA,YAAIE,OAAO,IAAX;AACAX,YAAIY,cAAJ,GAAqBC,iBAArB,CAAuCH,QAAvC,EAAiDI,GAAGC,WAApD,EAAiEC,IAAjE,CAAsE,UAAUC,WAAV,EAAuB;AACzFjB,gBAAI,aAAaS,MAAjB,IAA2BQ,WAA3B;AACA,gBAAGM,QAAQ,IAAX,EAAgB;AACZA,qBAAKG,YAAL,CAAkBZ,GAAGa,MAArB,EAA6BV,WAA7B,GAA2CA,WAA3C;AACH;AACDO,qBAASP,WAAT;AACH,SAND,EAMGC,KANH,CAMS,UAAUC,KAAV,EAAiB;AACtBR,iBAAKS,MAAL,CAAY,wBAAZ,EAAsCX,MAAtC,EAA8CU,MAAME,KAApD;AACH,SARD;AASH;AA1CsC,CAArB,CAAtB;;AA8CA,IAAIO,oBAAoB,IAAxB;;AAEA;;;AAGAC,QAAQC,QAAR,GAAmB,YAAU;AACzB,QAAG,CAACF,iBAAJ,EACIA,oBAAoB,IAAI1B,eAAJ,EAApB;AACJ,WAAO0B,iBAAP;AAEH,CALD","file":"ResManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\common","sourcesContent":["/*\n *  ----------------------------------------------------------------------------------------------------\n *  @copyright: Copyright (c) 2004, 2010 Xiamen DDM Network Technology Co.,Ltd., All rights reserved.\n *  ----------------------------------------------------------------------------------------------------\n *  @package SSSRoom.js\n *  @todo: 十三支房间\n *\n *  @version 1.0\n *\n *  修改时间 修改人 修改内容\n *  -------------------------------------------------------------------------------\n *\n */\nvar app = require(\"app\");\n\n/**\n * 类构造\n */\nvar zass_ResManager = app.BaseClass.extend({\n\n    /**\n     * 初始化\n     */\n    Init:function(){\n        this.JS_Name = \"ResManager\";\n    },\n    //-----------------------回调函数-----------------------------\n    //预加载\n    PreSetMJSpriteFrame:function(filePath,cardId){\n        if (app['sspCard_' + cardId]) {\n            return;\n        }\n        let fileName = filePath + cardId;\n        let that = this;\n        app.ControlManager().CreateLoadPromise(fileName, cc.SpriteFrame).then(function (spriteFrame) {\n            app['sspCard_' + cardId] = spriteFrame;\n        }).catch(function (error) {\n            that.ErrLog(\"OpenPoker(%s) error:%s\", cardId, error.stack);\n        })\n    },\n    //设置精灵贴图\n    SetMJSpriteFrameToNode:function(filePath,cardId, node, callback = function(argList){}){\n        if (app['sspCard_' + cardId]) {\n            if(node != null){\n                node.getComponent(cc.Sprite).spriteFrame = app['sspCard_' + cardId];\n            }\n            callback(app['sspCard_' + cardId]);\n            return\n        }\n        let fileName = filePath + cardId;\n        let that = this;\n        app.ControlManager().CreateLoadPromise(fileName, cc.SpriteFrame).then(function (spriteFrame) {\n            app['sspCard_' + cardId] = spriteFrame;\n            if(node != null){\n                node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            }\n            callback(spriteFrame);\n        }).catch(function (error) {\n            that.ErrLog(\"OpenPoker(%s) error:%s\", cardId, error.stack);\n        })\n    },\n})\n\n\nvar g_zass_ResManager = null;\n\n/**\n * 绑定模块外部方法\n */\nexports.GetModel = function(){\n    if(!g_zass_ResManager)\n        g_zass_ResManager = new zass_ResManager();\n    return g_zass_ResManager;\n\n}\n\n"]}