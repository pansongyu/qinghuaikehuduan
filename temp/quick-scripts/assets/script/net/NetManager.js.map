{"version":3,"sources":["NetManager.js"],"names":["app","require","emitter","NetManager","BaseClass","extend","Init","JS_Name","ShareDefine","SysDataManager","NetWork","httpRequest","NetRequest","ComTool","NewSysMsg","GetTableDict","H5ClientStartUrl","InitServerAddress","InitHttpPack","RegNetPack","OnPack_GMPack","RetryTime","Log","OnReload","InitConnectAccountID","accountID","InitConnectInfo","clientConfig","Client","GetClientConfig","AccountServerUrl","join","OrderServerUrl","ResServerUrl","gateServerInfo","SysLog","SetGateServerAddress","gateServerIP","gateServerPort","ErrLog","LocalDataManager","GetConfigProperty","OnEvent","SetServerAddress","gameServerIP","gameServerPort","dbGameServerInfo","SetConfigProperty","RefreshClientConfig","SetAccountAddress","accountServerIP","serverServerPort","dbAccountServerInfo","SetResAddress","resServerIP","dbResServerInfo","SetOrderAddress","orderServerIP","dbOrderServerInfo","SetH5ClientStartUrl","h5ClientStartUrl","sendHttpPackDict","packReceiveServerTypeDict","ClientHttpPackDict","HttpPack","packHeadName","headNameList","split","length","headInt","Math","floor","hasOwnProperty","InitConnectServer","console","log","InitWebSocket","OnWebSocketEvent","bind","OnConnectSuccess","GetUrlStr","dataDict","urlSendStr","key","substring","GetHttpSendPack","head","GetHttpSendPackUrl","serverType","url","GetH5ClientStartUrl","GetResServerHttpAddress","SendReConnect","eventName","sendPack","RequestReConnect","SendPack","callback","data","errorCallback","ControlManager","IsOpenVpn","JSON","stringify","Request","SendPackOnly","NotifyPack","Notify","func","target","toLocaleLowerCase","valueType","Object","prototype","toString","call","slice","on","UnRegNetPack","off","UnRegAllNetPack","removeAllListeners","isReconnecting","arg","ReConnect","SysNotifyManager","ShowSysMsg","OnReceive","OnCodeError","OnGMReceive","OnConFirm","clickType","msgID","backArgList","PackDefine","APPLE_CHECK","FormManager","ShowForm","CloseForm","cc","sys","isNative","NativeManager","CallToNative","routeName","receivePack","emit","error","stack","code","resultInfo","codeMsg","ErrorSysMsg","InOtherRoomPlay","CLUB_NOT_CREATE","CLUB_NOT_PROMOTION","CLUB_NOT_EXIST_MEMBER_INFO","CLUB_MEMBER_PROMOTION_BELONG","CLUB_MEMBER_PROMOTION_LEVEL_SHARE_LOWER","CLUB_MEMBER_PROMOTION_LEVEL_SHARE_UP","Maintain","finishttime","GetDateYearMonthDayHourMinuteString","ErrorNotRoomCard","desc","GetSysMsgContentByMsgID","ConfirmManager","SetWaitForConfirmForm","ConfirmBuyGoTo","cityId","selectCityConfig","cityName","ErrorMaxRoom","NoPower_RoomJoinner","CLUB_PLAYER_EXIT_IN_OTHER_UNION","EXIST_SAME_IP","POSITIONING_NOT_ON","APART_LOCATION","ErrorNotQuanCard","ClubManager","GetClubFormComponent","OnClick","errorMsg","IsDevelopment","NoShowSysMsgCodeList","InArray","argDict","RegHttpNetPack","UnRegHttpNetPack","SendHttpPack","serverUrl","Head","argString","NetLog","SendHttpRequest","OnReceiveHttpPack","httpResText","parse","OnConnectHttpFail","readyState","status","HeroAccountManager","UpdateAccessPoint","AccountServerUrlHttps","Disconnect","byLogout","SendGMPack","cmdString","serverPack","g_NetManager","exports","GetModel"],"mappings":"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","file":"NetManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\net","sourcesContent":["/*\n\t网络通信管理器\n*/\nvar app = require('app');\nvar emitter = require('emitter');\n\nvar NetManager = app.BaseClass.extend({\n\n\tInit: function () {\n\t\tthis.JS_Name = \"NetManager\";\n\n\t\tthis.emitter = new emitter();\n\t\tthis.ShareDefine = app.ShareDefine();\n\t\tthis.SysDataManager = app.SysDataManager();\n\t\tthis.NetWork = app.NetWork();\n\t\tthis.httpRequest = app.NetRequest();\n\t\tthis.ComTool = app.ComTool();\n\n\n\t\tthis.NewSysMsg = this.SysDataManager.GetTableDict(\"NewSysMsg\");\n\n\t\t//h5客户端启动url\n\t\tthis.H5ClientStartUrl = \"\";\n\n\t\tthis.InitServerAddress();\n\n\t\tthis.InitHttpPack();\n\n\t\tthis.RegNetPack(\"game.C1105GMPack\", this.OnPack_GMPack, this);\n\n\t\tthis.RetryTime = 0;\n\t\tthis.Log(\"Init\");\n\t},\n\n\t//切换账号\n\tOnReload: function () {\n\t\tthis.NetWork.OnReload();\n\t},\n\n\t//初始化连接\n\tInitConnectAccountID: function (accountID) {\n\t\tthis.NetWork.InitConnectInfo(accountID);\n\t},\n\n\t//初始化连接的服务器地址\n\tInitServerAddress: function () {\n\n\t\tlet clientConfig = app.Client.GetClientConfig();\n\n\t\tthis.AccountServerUrl = ['http://', clientConfig[\"AccountServerIP\"], \":\", clientConfig[\"AccountServerPort\"], \"/ClientPack\"].join(\"\");\n\n\t\t//this.AccountServerUrlHttps = ['https://', clientConfig[\"AccountServerIP\"], \":\", clientConfig[\"AccountServerPort\"].toString()+'0', \"/ClientPack\"].join(\"\");\n\n\n\t\tthis.OrderServerUrl = ['http://', clientConfig[\"OrderServerIP\"], \":\", clientConfig[\"OrderServerPort\"], \"/ClientPack\"].join(\"\");\n\n\t\tthis.ResServerUrl = ['http://', clientConfig[\"ResServerIP\"], \":\", clientConfig[\"ResServerPort\"], \"/ClientPack\"].join(\"\");\n\n\t\tlet gateServerInfo = app[\"GateServerInfo\"];\n\n\t\tthis.SysLog(\"GateServer(%s:%s)\", gateServerInfo[\"GateServerIP\"], gateServerInfo[\"GateServerPort\"], \"b-g\");\n\t\tthis.SysLog(\"AccountServer(%s)\", this.AccountServerUrl, \"b-g\");\n\t\tthis.SysLog(\"OrderServer(%s)\", this.OrderServerUrl, \"b-g\");\n\t\tthis.SysLog(\"ResServerUrl(%s)\", this.ResServerUrl, \"b-g\");\n\t\tthis.SysLog(\"Server(%s:%s)\", clientConfig[\"GameServerIP\"], clientConfig[\"GameServerPort\"], \"b-g\");\n\t},\n\n\t//设置首次连接服务器IP\n\tSetGateServerAddress: function (gateServerIP, gateServerPort) {\n\t\tif (!gateServerIP || !gateServerPort) {\n\t\t\tthis.ErrLog(\"SetGateServerAddress(%s,%s) error\", gateServerIP, gateServerPort);\n\t\t\treturn\n\t\t}\n\t\t//更新内存\n\t\tlet gateServerInfo = app[\"GateServerInfo\"];\n\t\tgateServerInfo[\"GateServerIP\"] = gateServerIP;\n\t\tgateServerInfo[\"GateServerPort\"] = gateServerPort;\n\n\t\tthis.SysLog(\"SetGateServerAddress(%s:%s)\", gateServerIP, gateServerPort);\n\n\t\t//修改本地数据库\n\t\tapp.LocalDataManager().GetConfigProperty(\"DebugInfo\", \"GateServerInfo\", gateServerInfo);\n\n\t\tapp.Client.OnEvent(\"OnGateServerChangeIP\", null);\n\t},\n\n\t//设置服务器连接IP地址\n\tSetServerAddress: function (gameServerIP, gameServerPort) {\n\n\t\tif (!gameServerIP || !gameServerPort) {\n\t\t\tthis.ErrLog(\"SetServerAddress(%s,%s) error\", gameServerIP, gameServerPort);\n\t\t\treturn\n\t\t}\n\t\tthis.SysLog(\"SetServerAddress:%s:%s\", gameServerIP, gameServerPort);\n\n\t\t//保存到本地数据库\n\t\tlet LocalDataManager = app.LocalDataManager();\n\t\tlet dbGameServerInfo = {\n\t\t\t\"GameServerIP\": gameServerIP,\n\t\t\t\"GameServerPort\": gameServerPort,\n\t\t}\n\t\tLocalDataManager.SetConfigProperty(\"DebugInfo\", \"GameServerInfo\", dbGameServerInfo);\n\n\t\t//修改内存中缓存的字典\n\t\tapp.Client.RefreshClientConfig()\n\n\t\tapp.Client.OnEvent(\"OnChangeIP\", null);\n\t},\n\tSetAccountAddress: function (accountServerIP, serverServerPort) {\n\t\tif (!accountServerIP || !serverServerPort) {\n\t\t\tthis.ErrLog(\"SetAccountAddress(%s,%s) error\", accountServerIP, serverServerPort);\n\t\t\treturn\n\t\t}\n\t\tthis.AccountServerUrl = ['http://', accountServerIP, \":\", serverServerPort, \"/ClientPack\"].join(\"\");\n\t\t//this.AccountServerUrlHttps = ['https://', accountServerIP, \":\", serverServerPort.toString()+'0', \"/ClientPack\"].join(\"\");\n\t\tthis.SysLog(\"SetAccountAddress:%s\", this.AccountServerUrl);\n\n\t\t//保存到本地数据库\n\t\tlet LocalDataManager = app.LocalDataManager();\n\t\tlet dbAccountServerInfo = {\n\t\t\t\"AccountServerIP\": accountServerIP,\n\t\t\t\"AccountServerPort\": serverServerPort,\n\t\t}\n\t\tLocalDataManager.SetConfigProperty(\"DebugInfo\", \"AccountServerInfo\", dbAccountServerInfo);\n\n\t\t//修改内存中缓存的字典\n\t\tapp.Client.RefreshClientConfig()\n\n\t\tapp.Client.OnEvent(\"OnChangeIP\", null);\n\t},\n\tSetResAddress: function (resServerIP, serverServerPort) {\n\t\tif (!resServerIP || !serverServerPort) {\n\t\t\tthis.ErrLog(\"SetResAddress(%s,%s) error\", resServerIP, serverServerPort);\n\t\t\treturn\n\t\t}\n\t\tthis.ResServerUrl = ['http://', resServerIP, \":\", serverServerPort, \"/ClientPack\"].join(\"\");\n\t\tthis.SysLog(\"SetResAddress:%s\", this.ResServerUrl);\n\n\t\t//保存到本地数据库\n\t\tlet LocalDataManager = app.LocalDataManager();\n\t\tlet dbResServerInfo = {\n\t\t\t\"ResServerIP\": resServerIP,\n\t\t\t\"ResServerPort\": serverServerPort,\n\t\t}\n\t\tLocalDataManager.SetConfigProperty(\"DebugInfo\", \"ResServerInfo\", dbResServerInfo);\n\n\t\t//修改内存中缓存的字典\n\t\tapp.Client.RefreshClientConfig()\n\n\t\tapp.Client.OnEvent(\"OnChangeIP\", null);\n\t},\n\tSetOrderAddress: function (orderServerIP, serverServerPort) {\n\t\tif (!orderServerIP || !serverServerPort) {\n\t\t\tthis.ErrLog(\"SetOrderAddress(%s,%s) error\", orderServerIP, serverServerPort);\n\t\t\treturn\n\t\t}\n\t\tthis.OrderServerUrl = ['http://', orderServerIP, \":\", serverServerPort, \"/ClientPack\"].join(\"\");\n\t\tthis.SysLog(\"SetOrderAddress:%s\", this.OrderServerUrl);\n\n\t\t//保存到本地数据库\n\t\tlet LocalDataManager = app.LocalDataManager();\n\t\tlet dbOrderServerInfo = {\n\t\t\t\"OrderServerIP\": orderServerIP,\n\t\t\t\"OrderServerPort\": serverServerPort,\n\t\t}\n\t\tLocalDataManager.SetConfigProperty(\"DebugInfo\", \"OrderServerInfo\", dbOrderServerInfo);\n\n\t\t//修改内存中缓存的字典\n\t\tapp.Client.RefreshClientConfig()\n\n\t\tapp.Client.OnEvent(\"OnChangeIP\", null);\n\t},\n\n\n\t//设置资源服务器地址\n\tSetH5ClientStartUrl: function (h5ClientStartUrl) {\n\t\tthis.H5ClientStartUrl = h5ClientStartUrl;\n\t\tthis.SysLog(\"SetH5ClientStartUrl:%s\", this.H5ClientStartUrl)\n\t},\n\n\n\t//初始化http封包\n\tInitHttpPack: function () {\n\t\t//输出发送封包字典\n\t\t// {\n\t\t//     0xFF00:packName\n\t\t// }\n\t\tthis.sendHttpPackDict = {};\n\n\t\t//封包发送到那个服务器\n\t\t// {\n\t\t//     0xFF00:account,\n\t\t// }\n\t\tthis.packReceiveServerTypeDict = {};\n\n\t\tlet ClientHttpPackDict = app.HttpPack().ClientHttpPackDict;\n\n\t\tfor (let packHeadName in ClientHttpPackDict) {\n\t\t\tlet headNameList = packHeadName.split(\".\");\n\t\t\tif (headNameList.length != 3) {\n\t\t\t\tthis.ErrLog(\"InitHttpPack ClientHttpPackDict packHeadName:%s error\", packHeadName);\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tlet headInt = Math.floor(headNameList[1]);\n\n\t\t\tif (this.sendHttpPackDict.hasOwnProperty(headInt)) {\n\t\t\t\tthis.ErrLog(\"InitHttpPack sendHttpPackDict have find(%s) headInt\", packHeadName);\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tthis.sendHttpPackDict[headInt] = ClientHttpPackDict[packHeadName];\n\n\t\t\tthis.packReceiveServerTypeDict[headInt] = headNameList[2];\n\t\t}\n\t},\n\n\t//初始化连接\n\tInitConnectServer: function () {\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"OpenNet\");\n\n\t\tlet clientConfig = app.Client.GetClientConfig();\n\n\t\tlet gameServerIP = clientConfig[\"GameServerIP\"];\n\t\tlet gameServerPort = clientConfig[\"GameServerPort\"];\n\t\tconsole.log(\"大厅开始连接服务器\");\n\t\t//初始化连接服务器\n\t\tthis.NetWork.InitWebSocket(gameServerIP, gameServerPort, this.OnWebSocketEvent.bind(this), this.OnConnectSuccess.bind(this));\n\n\t},\n\n\n\t/**\n\t * 获取url字符串格式\n\t * @param dataDict\n\t * @returns {String}\n\t */\n\tGetUrlStr: function (dataDict) {\n\n\t\tif (!dataDict) {\n\t\t\treturn \"\"\n\t\t}\n\t\tvar urlSendStr = '?';\n\t\tfor (var key in dataDict) {\n\t\t\turlSendStr += key + '=' + dataDict[key] + '&';\n\t\t}\n\t\t//去掉最后一个&\n\t\turlSendStr = urlSendStr.substring(0, urlSendStr.length - 1);\n\n\t\treturn urlSendStr;\n\t},\n\n\t//获取http请求发送的封包\n\tGetHttpSendPack: function (head) {\n\t\tif (!this.sendHttpPackDict.hasOwnProperty(head)) {\n\t\t\tthis.ErrLog(\"GetHttpSendPack sendHttpPackDict not find:%s\", head);\n\t\t\treturn\n\t\t}\n\t\treturn { \"Head\": head }\n\t},\n\n\t//获取http封包发送的目的地地址\n\tGetHttpSendPackUrl: function (head) {\n\t\tlet serverType = this.packReceiveServerTypeDict[head];\n\t\tif (!serverType) {\n\t\t\tthis.ErrLog(\"GetHttpSendPackUrl(%s) not find\", head);\n\t\t\treturn\n\t\t}\n\n\t\tlet url = \"\";\n\t\tswitch (serverType) {\n\t\t\tcase \"account\":\n\t\t\t\turl = this.AccountServerUrl;\n\t\t\t\tbreak\n\t\t\tcase \"order\":\n\t\t\t\turl = this.OrderServerUrl;\n\t\t\t\tbreak\n\t\t\tcase \"res\":\n\t\t\t\turl = this.ResServerUrl;\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tthis.ErrLog(\"GetHttpSendPackUrl serverType:%s error\", serverType);\n\t\t\t\tbreak\n\t\t}\n\n\t\treturn url\n\t},\n\n\t//获取客户端启动后的html地址串\n\tGetH5ClientStartUrl: function () {\n\t\treturn this.H5ClientStartUrl\n\t},\n\n\t//获取客户端资源服务器HTTP地址\n\tGetResServerHttpAddress: function () {\n\t\tlet clientConfig = app.Client.GetClientConfig();\n\t\treturn ['http://', clientConfig[\"ResServerIP\"], \":\", clientConfig[\"ResServerPort\"]].join(\"\");\n\t},\n\n\t//-------------websocket请求------------------\n\t//系统自主发送重连请求\n\tSendReConnect: function (eventName, sendPack) {\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"OpenNet\");\n\t\tthis.NetWork.RequestReConnect(eventName, sendPack)\n\t},\n\t//向服务器发起请求\n\tSendPack: function (eventName, sendPack, callback = (data) => {\n\t\tconsole.log(\"服务端返回成功\", data)\n\t}, errorCallback = (data) => {\n\t\tconsole.log(\"服务端返回失败\", data)\n\t}) {\n\t\tif (app.ControlManager().IsOpenVpn()) {\n            return;\n        }\n\t\tif (eventName != \"heartBeat.CHeartBeatHandler\") {\n\t\t\tconsole.log(\"向服务器发起请求\", eventName, JSON.stringify(sendPack));\n\t\t}\n\t\t//开启模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"OpenNet\");\n\t\tthis.NetWork.Request(eventName, sendPack, callback, errorCallback);\n\t},\n\t//向服务器发起请求,不触发网络\n\tSendPackOnly: function (eventName, sendPack, callback = null, errorCallback = null) {\n\t\tthis.NetWork.Request(eventName, sendPack, callback, errorCallback);\n\t},\n\t//通知服务器得封包数据\n\tNotifyPack: function (eventName, sendPack) {\n\t\tthis.NetWork.Notify(eventName, sendPack);\n\t},\n\n\t//注册封包事件(需要字符串封包头,才可以避免RegHttpNetPack相同封包头注册事件区分)\n\tRegNetPack: function (head, func, target) {\n\t\thead = head.toLocaleLowerCase();\n\t\tlet valueType = Object.prototype.toString.call(head).slice(\"[object \".length, -1);\n\t\tif (valueType != \"String\") {\n\t\t\tthis.ErrLog(\"RegNetPack need String head\");\n\t\t\treturn\n\t\t}\n\n\t\tif (!func || !target) {\n\t\t\tthis.ErrLog(\"RegNetPack head:%s error\", head);\n\t\t\treturn\n\t\t}\n\n\t\tthis.emitter.on(head, func, target);\n\t},\n\n\t//取消封包注册\n\tUnRegNetPack: function (eventName, func) {\n\t\tthis.emitter.off(eventName, func);\n\t},\n\n\t//取消所有封包注册\n\tUnRegAllNetPack: function () {\n\t\tthis.emitter.removeAllListeners();\n\t},\n\n\t//服务器连接成功\n\tOnConnectSuccess: function (isReconnecting) {\n\t\t//关闭模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"ReceiveNet\");\n\t\tapp.Client.OnEvent(\"ConnectSuccess\", { \"ServerName\": \"GameServer\", \"IsReconnecting\": isReconnecting });\n\t},\n\t//websocket事件回掉\n\tOnWebSocketEvent: function (eventName, arg) {\n\t\t// console.log(\"大厅 OnWebSocketEvent 回调\");\n\t\t//关闭模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"ReceiveNet\");\n\n\t\tswitch (eventName) {\n\t\t\tcase \"OnError\":\n\t\t\t\tthis.SysLog(\"连接超时\");\n\t\t\t\tapp.Client.OnEvent(\"ConnectFail\", { \"ServerName\": \"GameServer\", \"EventType\": \"OnError\" });\n\t\t\t\tbreak\n\n\t\t\tcase \"Reconnectd\":\n\t\t\t\tthis.SysLog(\"重连失败\");\n\t\t\t\tapp.Client.OnEvent(\"ModalLayer\", \"StartReConnect\");\n\t\t\t\tthis.NetWork.ReConnect();\n\t\t\t\tbreak\n\n\t\t\tcase \"OnClose\":\n\t\t\t\tthis.SysLog(\"断开连接\");\n\t\t\t\tapp.Client.OnEvent(\"ConnectFail\", {\n\t\t\t\t\t\"bCloseByLogout\": arg[0],\n\t\t\t\t\t\"ServerName\": \"GameServer\",\n\t\t\t\t\t\"EventType\": \"OnClose\"\n\t\t\t\t});\n\t\t\t\tbreak\n\n\t\t\tcase \"OnKick\":\n\t\t\t\tthis.ErrLog(\"被T(%s)\", arg[\"reason\"]);\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"Kick_ByServer\");\n\t\t\t\tbreak\n\n\t\t\tcase \"OnReceive\":\n\t\t\t\tthis.OnReceive(arg[0], arg[1]);\n\t\t\t\tbreak\n\n\t\t\tcase \"OnCodeError\":\n\t\t\t\tthis.OnCodeError(arg[0], arg[1], arg[2]);\n\t\t\t\tbreak\n\n\t\t\tcase \"OnGMReceive\":\n\t\t\t\tthis.OnGMReceive(arg[0], arg[1]);\n\t\t\t\tbreak\n\n\t\t\tdefault:\n\t\t\t\tthis.ErrLog(\"OnWebSocketEvent(%s):\", eventName, arg);\n\t\t\t\tbreak\n\t\t}\n\t},\n\n\tOnConFirm: function (clickType, msgID, backArgList) {\n\t\tif (clickType != \"Sure\") {\n\t\t\treturn\n\t\t}\n\t\tif (\"goBuyCard\" == msgID) {\n\t\t\tlet clientConfig = app.Client.GetClientConfig();\n\t\t\tif (app.PackDefine.APPLE_CHECK == clientConfig[\"appPackType\"]) return\n\t\t\tapp.FormManager().ShowForm(\"UIStore\");\n\t\t\tapp.FormManager().CloseForm(\"UIJoin\");\n\t\t\tapp.FormManager().CloseForm(\"UIChouJiang\");\n\t\t\treturn;\n\t\t} else if (\"MSG_OPEN_GPS\" == msgID) {\n\t\t\tif (cc.sys.isNative) {\n\t\t\t\tapp.NativeManager().CallToNative(\"gpsSetting\", []);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t},\n\n\t//封包事件回掉\n\tOnReceive: function (routeName, receivePack) {\n\t\tif (routeName != \"splayerheartbeat\" && routeName != \"heartbeat.cheartbeathandler\") {\n\t\t\tconsole.log(\"封包事件回掉\", routeName, JSON.stringify(receivePack));\n\t\t}\n\t\ttry {\n\t\t\tthis.emitter.emit(routeName, receivePack);\n\t\t}\n\t\tcatch (error) {\n\t\t\tthis.ErrLog(\"OnReceive:%s\", error.stack);\n\t\t\tthis.ErrLog(\"OnReceive routeName :%s, receivePack:%s\", routeName, JSON.stringify(receivePack));\n\t\t}\n\t},\n\n\t//封包事件失败回掉\n\tOnCodeError: function (eventName, code, resultInfo) {\n\t\tconsole.log(\"OnCodeError(%s) (%s) (%s):\", eventName, code, JSON.stringify(resultInfo));\n\n\t\tlet codeMsg = [\"Code\", code].join(\"_\");\n\t\t//如果是错误提示类型,根据提示码提示,直接提示\n\t\tif (code == this.ShareDefine.ErrorSysMsg) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(resultInfo[\"Msg\"]);\n\t\t}\n\t\t// else if(code == this.ShareDefine.NotAllow){\n\t\t// \tapp.SysNotifyManager().ShowSysMsg('MSG_SERVICE_NOTALLOW');\n\t\t// }\n\t\telse if (code == 5024) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(resultInfo[\"Msg\"]);\n\t\t}\n\t\telse if (code == 105) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(\"城市未开放\");\n\t\t}\n\t\telse if (code == 304) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(\"房间已经开始了\");\n\t\t}\n\t\telse if (code == 12) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(resultInfo[\"Msg\"]);\n\t\t}\n\t\telse if (code == 5118) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(\"错误验证码\");\n\t\t}\n\t\telse if (code == 5116) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(\"错误手机号\");\n\t\t}\n\t\telse if (code == 5119) {\n\t\t\tapp.Client.OnEvent(\"DoLogin\", {});\n\t\t}\n\t\telse if (code == 6051) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg(\"修改后新上级推广员分成比例低于当前玩家比例，无法修改，请先修改玩家或新上级推广员的比例，使新上级推广员分成大于玩家分成\");\n\t\t}\n\t\telse if (code == this.ShareDefine.InOtherRoomPlay) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('MSG_IN_OTHER_ROOM_PLAY');\n\t\t}\n\t\telse if (code == 11) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('网络连接失败，请联系客服');\n\t\t}\n\t\telse if (code == 6006) {\n\t\t\t//resultInfo\n\t\t\tapp.SysNotifyManager().ShowSysMsg(resultInfo[\"Msg\"]);\n\t\t} else if (code == 6017) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('您被禁止该亲友圈游戏');\n\t\t}\n\n\t\telse if (code == 6052) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('当前有人正在修改归属，请稍后再试');\n\t\t}\n\n\t\telse if (code == this.ShareDefine.CLUB_NOT_CREATE) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('不是亲友圈创造者');\n\t\t}\n\t\telse if (code == this.ShareDefine.CLUB_NOT_PROMOTION) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('不是推广员');\n\t\t}\n\t\telse if (code == this.ShareDefine.CLUB_NOT_EXIST_MEMBER_INFO) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('亲友圈不存在成员信息');\n\t\t}\n\t\telse if (code == this.ShareDefine.CLUB_MEMBER_PROMOTION_BELONG) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('修改归属的时候不能切换到原来的归属或者下线');\n\t\t}\n\t\telse if (code == this.ShareDefine.CLUB_MEMBER_PROMOTION_LEVEL_SHARE_LOWER) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('当前分支下的下级推广员分成存在百分比形式，无法设置分成为固定值，请先修改');\n\t\t}\n\t\telse if (code == this.ShareDefine.CLUB_MEMBER_PROMOTION_LEVEL_SHARE_UP) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('上级推广员分成为固定值，无法设置为百分比');\n\t\t}\n\n\t\telse if (code == this.ShareDefine.Maintain) {\n\t\t\tlet finishttime = resultInfo[\"Msg\"];\n\t\t\tapp.SysNotifyManager().ShowSysMsg('服务器维护中,预计结束时间：' + app.ComTool().GetDateYearMonthDayHourMinuteString(finishttime));\n\t\t}\n\t\telse if (code == this.ShareDefine.ErrorNotRoomCard) {//房卡不足\n\t\t\tlet desc = app.SysNotifyManager().GetSysMsgContentByMsgID(\"MSG_NotRoomCard\");\n\t\t\tapp.ConfirmManager().SetWaitForConfirmForm(this.OnConFirm.bind(this), \"goBuyCard\", []);\n\t\t\tapp.FormManager().ShowForm(\"UIMessage\", null, this.ShareDefine.ConfirmBuyGoTo, 0, 0, desc)\n\t\t}\n\t\telse if (code == 911) {//房卡不足\n\t\t\tlet cityId = resultInfo[\"Msg\"];\n\t\t\tlet selectCityConfig = app.SysDataManager().GetTableDict(\"selectCity\");\n\t\t\tlet cityName = selectCityConfig[cityId][\"Name\"];\n\t\t\tapp.SysNotifyManager().ShowSysMsg('圈主或者主办方[' + cityName + \"]钻石不足\");\n\t\t\t//   \tlet desc = \"当前[\"+cityName+\"]钻石不足，请前往购买\";\n\t\t\t// app.ConfirmManager().SetWaitForConfirmForm(this.OnConFirm.bind(this), \"goBuyCard\", []);\n\t\t\t//   \tapp.FormManager().ShowForm(\"UIMessage\", null, this.ShareDefine.ConfirmBuyGoTo, 0, 0,desc)\n\t\t}\n\t\telse if (code == this.ShareDefine.ErrorMaxRoom) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('可以创建的房间数量不足');\n\t\t}\n\n\t\telse if (code == this.ShareDefine.NoPower_RoomJoinner) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('您当前处于退出申请中，不能加入该游戏');\n\t\t}\n\n\t\telse if (code == this.ShareDefine.CLUB_PLAYER_EXIT_IN_OTHER_UNION) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('已邀请或未找到该玩家或同赛事不同亲友圈不能重复拉人或距离退出该亲友圈不到10分钟');\n\t\t}\n\n\n\t\telse if (code == this.ShareDefine.EXIST_SAME_IP) {\n\t\t\t//app.SysNotifyManager().ShowSysMsg('MSG_SERVICE_NOTALLOW');\n\t\t\tapp.SysNotifyManager().ShowSysMsg('拥有相同IP');\n\t\t} else if (code == this.ShareDefine.POSITIONING_NOT_ON) {\n\t\t\tapp.FormManager().ShowForm(\"UIMessageGps\");\n\t\t} else if (code == this.ShareDefine.APART_LOCATION) {\n\t\t\tapp.SysNotifyManager().ShowSysMsg('您和房间内的玩家距离过近，禁止进入本房间');\n\t\t}\n\n\t\telse if (code == this.ShareDefine.ErrorNotQuanCard) {//圈币不足\n\t\t\tapp.SysNotifyManager().ShowSysMsg('圈卡不足，请前往亲友圈商城购买圈卡');\n\t\t\tapp.ClubManager().GetClubFormComponent().OnClick('btn_addRoomCard', null);\n\t\t}\n\t\telse if (code == 11034) {//登陆过期,请重新登录\n\t\t\tapp.LocalDataManager().SetConfigProperty(\"Account\", \"AccessTokenInfo\", {});//清除本地账号缓存\n\t\t\tapp.SysNotifyManager().ShowSysMsg(\"登陆过期,请重新登录\");\n\t\t}\n\t\t//如果有配置系统提示码,则提示错误提示码对应的文本\n\t\telse if (this.NewSysMsg.hasOwnProperty(codeMsg)) {\n\n\t\t\tlet errorMsg = resultInfo[\"Msg\"];\n\t\t\t//开发模式有 提示文本的话 显示错误文本\n\t\t\tif (this.ShareDefine.IsDevelopment && errorMsg) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"CodeErrorMsg\", [errorMsg]);\n\t\t\t}\n\t\t\t//如果不是开发模式,弹通用的系统提示\n\t\t\telse {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(codeMsg);\n\t\t\t}\n\t\t}\n\t\t//如果配置表没有配置的错误码\n\t\telse {\n\t\t\t//如果是不需要提示的,不配置也不需要显示的系统提示码\n\t\t\tif (this.ShareDefine.NoShowSysMsgCodeList.InArray(code)) {\n\n\t\t\t}\n\t\t\t//没有配置,是开发模式弹框\n\t\t\telse if (this.ShareDefine.IsDevelopment) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"CodeErrorMsg\", [resultInfo[\"Msg\"]]);\n\t\t\t}\n\t\t}\n\t\tapp.Client.OnEvent(\"CodeError\", { \"Code\": code, \"EventName\": eventName, \"Result\": resultInfo });\n\t},\n\n\t//接受到GM命令汇报\n\tOnGMReceive: function (eventName, argDict) {\n\t\tapp.Client.OnEvent(\"ReceiveGM\", argDict);\n\t},\n\n\t//------------------http请求--------------------------------\n\n\t//注册http封包事件(需要整形封包头,才可以避免RegNetPack相同封包头注册事件区分)\n\tRegHttpNetPack: function (head, func, target) {\n\t\tlet valueType = Object.prototype.toString.call(head).slice(\"[object \".length, -1);\n\t\tif (valueType != \"Number\") {\n\t\t\tthis.ErrLog(\"RegNetPack need Int head\");\n\t\t\treturn\n\t\t}\n\t\thead = head.toString();\n\t\tthis.emitter.on(head, func, target);\n\t},\n\n\tUnRegHttpNetPack: function (head, func) {\n\t\tlet valueType = Object.prototype.toString.call(head).slice(\"[object \".length, -1);\n\t\tif (valueType != \"Number\") {\n\t\t\tthis.ErrLog(\"UnRegHttpNetPack need Int head\");\n\t\t\treturn\n\t\t}\n\t\thead = head.toString();\n\t\tthis.emitter.off(head, func);\n\t},\n\n\t//发送HTTP请求\n\tSendHttpPack: function (sendPack) {\n\t\t//    \tconsole.log(\"sendPack Head:\"+sendPack.Head);\n\t\tlet serverUrl = this.GetHttpSendPackUrl(sendPack.Head);\n\t\tif (!serverUrl) {\n\t\t\tthis.ErrLog(\"SendHttpPack(%s) not find serverUrl\", sendPack);\n\t\t\treturn\n\t\t}\n\t\t//开启模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"OpenNet\");\n\t\tlet argDict = { \"Sign\": \"ddcat\" };\n\t\tlet argString = this.GetUrlStr(argDict);\n\n\t\tif (this.IsDevelopment()) {\n\t\t\tthis.NetLog(\"[SendHttp](%s):\", serverUrl, sendPack, \"b-g\");\n\t\t}\n\t\tthis.sendPack = sendPack;\n\t\tthis.httpRequest.SendHttpRequest(serverUrl, argString, \"POST\", sendPack);\n\t},\n\n\t//发送HTTPS请求\n\t/*SendHttpsPack:function(){\n\t\tlet sendPack=this.sendPack;\n\t\tlet serverUrl=this.AccountServerUrlHttps;\n\t\tif(!serverUrl){\n\t\t\tthis.ErrLog(\"SendHttpPacks(%s) not find serverUrl\", sendPack);\n\t\t\treturn\n\t\t}\n\t\t//开启模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"OpenNet\");\n\t\tlet argDict = {\"Sign\":\"ddcat\"};\n\t\tlet argString = this.GetUrlStr(argDict);\n\n\t\tif(this.IsDevelopment()){\n\t\t\tthis.NetLog(\"[SendHttps](%s):\", serverUrl, sendPack, \"b-g\");\n\t\t}\n\n\t\tthis.httpRequest.SendHttpRequest(serverUrl, argString, \"POST\", sendPack);\n\t},\n*/\n\t//接受到http请求回复\n\tOnReceiveHttpPack: function (serverUrl, httpResText) {\n\t\t//关闭模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"ReceiveNet\");\n\n\t\tvar receivePack = JSON.parse(httpResText);\n\t\tif (this.IsDevelopment()) {\n\t\t\tthis.NetLog(\"[RecvHttp]:\", receivePack, \"b-gb\");\n\t\t}\n\n\t\tif (receivePack.hasOwnProperty(\"code\")) {\n\t\t\tthis.ErrLog(\"OnReceiveHttpPack HttpCode:\", receivePack);\n\n\t\t\tlet eventName = \"HttpRequestCode\";\n\t\t\tif (serverUrl == this.AccountServerUrl) {\n\t\t\t\teventName = \"AccountServerCode\";\n\t\t\t\tthis.OnCodeError(eventName, receivePack[\"code\"], receivePack);\n\t\t\t}\n\t\t\telse if (serverUrl == this.ResServerUrl) {\n\t\t\t\teventName = \"ResServerCode\";\n\t\t\t\tthis.OnCodeError(eventName, receivePack[\"code\"], receivePack);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.ErrLog(\"OnReceiveHttpPack serverUrl(%s) error\", serverUrl);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\ttry {\n\t\t\t\t//转化封包头为字符串 分发事件\n\t\t\t\tlet head = receivePack.Head.toString();\n\t\t\t\tthis.emitter.emit(head, receivePack);\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tthis.ErrLog(\"OnReceiveHttpPack(%s) error\", httpResText);\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * 请求连接失败\n\t */\n\tOnConnectHttpFail: function (serverUrl, readyState, status) {\n\t\tthis.ErrLog(\"HttpConnectFail(%s, %s,%s)\", serverUrl, readyState, status);\n\n\t\t//关闭模态层\n\t\tapp.Client.OnEvent(\"ModalLayer\", \"ReceiveNet\");\n\n\t\tif (serverUrl == this.AccountServerUrl) {\n\t\t\t//app.SysNotifyManager().ShowSysMsg(\"Code_10010\");\n\t\t\t//app.Client.OnEvent(\"ConnectHttpFail\", {\"ServerName\":\"AccountServer\"});\n\t\t\t//http请求失败，尝试用https请求\n\t\t\t//this.SendHttpsPack();\n\t\t\tif (this.RetryTime == 9) {\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"Code_10010\");\n\t\t\t\tapp.Client.OnEvent(\"ConnectHttpFail\", { \"ServerName\": \"AccountServer\" });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//换节点\n\t\t\tapp.HeroAccountManager().UpdateAccessPoint();\n\t\t\tthis.InitServerAddress();\n\t\t\tthis.SendHttpPack(this.sendPack);\n\t\t\tthis.RetryTime = this.RetryTime + 1;\n\t\t} else if (serverUrl == this.AccountServerUrlHttps) {\n\t\t\t/*if(this.RetryTime==5){\n\t\t\t\tapp.SysNotifyManager().ShowSysMsg(\"Code_10010\");\n\t\t\t\tapp.Client.OnEvent(\"ConnectHttpFail\", {\"ServerName\":\"AccountServer\"});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//换节点\n\t\t\tapp.HeroAccountManager().UpdateAccessPoint();\n\t\t\tthis.InitServerAddress();\n\t\t\tthis.SendHttpPack(this.sendPack);\n\t\t\tthis.RetryTime=this.RetryTime+1;*/\n\t\t}\n\t\telse {\n\t\t\tthis.ErrLog(\"OnConnectHttpFail serverUrl:%s error\", serverUrl);\n\t\t}\n\t},\n\n\t//------------操作函数-----------------------------\n\n\t//下线\n\tDisconnect: function (byLogout = false) {\n\t\tthis.NetWork.Disconnect(byLogout);\n\t},\n\n\tSendGMPack: function (cmdString) {\n\t\tlet sendPack = { \"cmdString\": cmdString };\n\t\tthis.SendPack(\"game.C1105GMPack\", sendPack)\n\t},\n\n\tOnPack_GMPack: function (serverPack) {\n\t\tapp.Client.OnEvent(\"GMPack\", serverPack);\n\t},\n\n});\n\nvar g_NetManager = null;\n\n/**\n * 绑定模块外部方法\n */\nexports.GetModel = function () {\n\tif (!g_NetManager) {\n\t\tg_NetManager = new NetManager();\n\t}\n\treturn g_NetManager;\n}"]}