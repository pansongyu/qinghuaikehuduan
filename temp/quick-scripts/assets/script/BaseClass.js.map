{"version":3,"sources":["BaseClass.js"],"names":["ShareDefine","require","GetModel","BaseClass","cc","Class","ctor","argList","Array","prototype","slice","call","arguments","JS_Name","Init","apply","IsDevelopment","GetLogFormatList","len","length","logText","sys","browserType","colorType","color","ChromeLogColorDict","pop","splice","Log","log","NetLog","SysLog","WarnLog","warn","ErrLog","error","DBBaseClass","extend","OnReload","isLoadDB","isSendLoadDB","InitReload","LoadInitDB","headName","sendPack","app","NetManager","SendPack","OnSuccessInitDBData","bind","OnFailInitDBData","serverPack","OnInitData","failInfo","OnFailInitData","module","exports"],"mappings":"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","file":"BaseClass.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["/*\n    客户端自定义基类\n*/\n\nlet ShareDefine = require('ShareDefine').GetModel();\n\n\n\nvar BaseClass = cc.Class({\n\n\tctor:function(){\n\t\tvar argList = Array.prototype.slice.call(arguments);\n\n\t\tthis.JS_Name = \"BaseClass\";\n\t\tthis.Init.apply(this, argList);\n\t},\n\n\tInit:function(){\n\t},\n\n    //是否开发者模式\n    IsDevelopment:function(){\n        return ShareDefine.IsDevelopment\n    },\n\n\t//获取包装后的log文本\n\tGetLogFormatList:function(argList){\n\t\tvar len = argList.length;\n\t\tvar logText = argList[0];\n\t\t//第一个不是文本格式\n\t\tif(typeof(logText) != \"string\"){\n\t\t\treturn argList\n\t\t}\n\n\t\t//如果是谷歌浏览器,包装颜色\n\t\tif(cc.sys.browserType == \"chrome\"){\n\t\t\t//如果末尾有携带颜色配置\n\t\t\tvar colorType = argList[len - 1];\n\t\t\tvar color = ShareDefine.ChromeLogColorDict[colorType];\n\t\t\t//如果存在颜色,替换最后一个参数为颜色值\n\t\t\tif(color){\n\t\t\t\t//删除末尾的颜色标示\n\t\t\t\targList.pop();\n\n\t\t\t\t//文本开头添加颜色标示%c\n\t\t\t\tlogText = \"%c\" + logText;\n\n\t\t\t\t//在文本后面插入一个颜色值\n\t\t\t\targList.splice(1, 0, color);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tvar colorType = argList[len - 1];\n\t\t\tvar color = ShareDefine.ChromeLogColorDict[colorType];\n\t\t\tif(color){\n\t\t\t\t//删除末尾的颜色标示\n\t\t\t\targList.pop();\n\t\t\t}\n\t\t}\n\n\t\t//第一个默认是字符串加上文件标示\n\t\targList[0] = this.JS_Name + \"\\t\" + logText;\n\t\treturn argList\n\t},\n\n\t//接收不定参\n\tLog:function(){\n\t\tif(this.IsDevelopment()){\n\t\t\tvar argList = Array.prototype.slice.call(arguments);\n\t\t\targList = this.GetLogFormatList(argList);\n\t\t\tcc.log.apply(null, argList)\n\t\t}\n\t},\n\n\t//网络通信log\n\tNetLog:function(){\n\t\tif(this.IsDevelopment()){\n\t\t\tvar argList = Array.prototype.slice.call(arguments);\n\t\t\targList = this.GetLogFormatList(argList);\n\t\t\tcc.log.apply(null, argList)\n\t\t}\n\t},\n\n\t//接收不定参\n\tSysLog:function(){\n\t\tvar argList = Array.prototype.slice.call(arguments);\n\t\targList = this.GetLogFormatList(argList);\n\t\tcc.log.apply(null, argList)\n\t},\n\n\t//接收不定参\n\tWarnLog:function(){\n\t\tif(this.IsDevelopment()){\n\t\t\tvar argList = Array.prototype.slice.call(arguments);\n\t\t\targList = this.GetLogFormatList(argList);\n\t\t\tcc.warn.apply(null, argList)\n\t\t}\n\t},\n\t\n\t//接收不定参\n\tErrLog:function(){\n\t\tvar argList = Array.prototype.slice.call(arguments);\n\t\targList = this.GetLogFormatList(argList);\n\t\tcc.error.apply(null, argList)\n\t},\n});\n\nvar DBBaseClass = BaseClass.extend({\n\tctor:function(){\n\t\tvar argList = Array.prototype.slice.call(arguments);\n\n\t\tthis.JS_Name = \"DBBaseClass\";\n\t\tthis.Init.apply(this, argList);\n\n\t\tthis.OnReload();\n\t},\n\n\t//下线初始化\n\tOnReload:function(){\n\t\tthis.isLoadDB = false;\n\t\tthis.isSendLoadDB = false;\n\n\t\tthis.InitReload();\n\t},\n\n\t//加载数据\n\tLoadInitDB:function(headName, sendPack){\n\t\tif(this.isLoadDB){\n\t\t\treturn\n\t\t}\n\t\tif(this.isSendLoadDB){\n\t\t\treturn\n\t\t}\n\t\tthis.isSendLoadDB = true;\n\n\t\t//发送请求初始化管理器数据\n\t\tapp.NetManager().SendPack(headName, sendPack, this.OnSuccessInitDBData.bind(this), this.OnFailInitDBData.bind(this));\n\t},\n\n\t//初始化请求回调\n\tOnSuccessInitDBData:function(serverPack){\n\t\tthis.isLoadDB = true;\n\t\tthis.OnInitData(serverPack);\n\t},\n\n\t//初始化请求失败回调\n\tOnFailInitDBData:function(failInfo){\n\t\tthis.isLoadDB = false;\n\t\tthis.isSendLoadDB = false;\n\n\t\tthis.OnFailInitData(failInfo);\n\t},\n\n\t//-------------子类需要实现的函数-------------\n\tInitReload:function(){\n\t\tthis.ErrLog(\"InitReload 必须实现\");\n\t},\n\n\tOnInitData:function(serverPack){\n\t\tthis.ErrLog(\"OnInitData 必须实现\");\n\t},\n\n\tOnFailInitData:function(failInfo){\n\t\tthis.ErrLog(\"OnFailInitData 必须实现\");\n\t},\n\n\n\n})\n\n\nmodule.exports = {\"BaseClass\":BaseClass, \"DBBaseClass\":DBBaseClass};\n\n"]}