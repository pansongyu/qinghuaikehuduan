{"version":3,"sources":["LocalDataManager.js"],"names":["app","require","LocalDataManager","BaseClass","extend","Init","JS_Name","linkServer","InitDataDict","PlayerInitData","InitConfig","Log","OnReload","configName","optionData","option","HaveConfigProperty","console","log","SetConfigProperty","PlayerLogin","heroID","toString","playerDataDict","GetConfigProperty","ErrLog","property","hasOwnProperty","value","canUse","cc","sys","localStorage","CanUse","configInfo","getItem","JSON","parse","setItem","stringify","SetPlayerConfigProperty","serverDataDict","GetPlayerConfigProperty","HavePlayerConfigProperty","Remove","removeItem","g_LocalDataManager","exports","GetModel"],"mappings":"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","file":"LocalDataManager.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\dbmanager\\LocalData","sourcesContent":["/*\n    本地数据库管理器\n*/\nvar app = require('app');\n\nvar LocalDataManager = app.BaseClass.extend({\n\n    Init:function(){\n        this.JS_Name = \"LocalDataManager\";\n\n        //暂时只有一个区\n        this.linkServer = \"Server01\";\n\n\t    //通用属性初始化字典\n\t    this.InitDataDict = {\n\t\t\t\t\t\t\t    \"SysSetting\":{\n\t\t\t\t\t\t\t    \t\t\t\t\"MainBackMusic\":'MainScene',\n\t\t\t\t\t\t\t    \t\t\t\t\"GameBackMusic\":'sssBackGround',\n\t\t\t\t\t\t\t\t\t\t\t    \"BackMusic\":1,\n\t\t\t\t\t\t\t\t\t\t\t    \"SpSound\":1,\n\t\t\t\t\t\t\t\t\t\t\t    \"BackVolume\":1,\n\t\t\t\t\t\t\t\t\t\t\t    \"SpVolume\":1,\n\t\t\t\t\t\t\t\t\t\t\t    \"IsShowChat\":1,\n\t\t\t\t\t\t\t\t\t\t\t    \"IsPlayVideo\":1,\n\t\t\t\t\t\t\t\t\t\t\t    \"TuiGuangUrl\":'',\n\t\t\t\t\t\t\t\t\t\t\t\t\"Language\":1,\n\t\t\t\t\t\t\t\t\t\t\t\t\"IsAudio\":1,\n\t\t\t\t\t\t\t\t\t\t\t\t\"QianDao\":0,\n\t\t\t\t\t\t\t\t\t\t\t\t\"is3DShow\":0,\n\t\t\t\t\t\t\t\t\t\t\t\t\"Date\":-1,\n\t\t\t\t\t\t\t\t\t\t\t\t\"LastGameType\":'',\n\t\t\t\t\t\t\t\t\t\t\t\t\"SelectCityData\":[],\n\t\t\t\t\t\t\t\t\t\t\t\t\"ClubBg\":4,\n\t\t\t\t\t\t\t\t\t\t\t\t\"ClubTb\":4,\n\t\t\t\t\t\t\t\t\t\t\t\t\"ClubCustom\":0,\n\t\t\t\t\t\t\t\t\t\t\t\t\"HeadSpriteFrame\":[],\n\t\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t    \"Account\":{\n\t\t\t\t\t\t\t\t\t\t    \"AccountDict\":{},\n\t\t\t\t\t\t\t\t\t\t    \"AccountMobile\":{},\n\t\t\t\t\t\t\t\t\t\t    \"AccountList\":[],\n\t\t\t\t\t\t\t\t\t\t    \"AccountActive\":0,\n\t\t\t\t\t\t\t\t\t\t    \"AccessPoint\":0,\n\t\t\t\t\t\t\t\t\t\t    \"AccessTokenInfo\":{},\n\t\t\t\t\t\t\t\t\t\t    \"AccountID\":0,\n\t\t\t\t\t\t\t\t\t\t    \"XlOpenID\":\"\",\n\t\t\t\t\t\t\t\t\t\t    \"uuid\":0,\n\t\t\t\t\t\t\t\t\t    },\n\t\t                        \"DebugInfo\":{\n\t\t\t                        \"GateServerInfo\":{},\n\t\t\t                        \"AccountServerInfo\":{},\n\t\t\t                        \"OrderServerInfo\":{},\n\t\t\t                        \"GameServerInfo\":{},\n\t\t\t                        \"ResServerInfo\":{},\n\t\t                        },\n\t\t\t\t\t\t    };\n\n\t    //玩家个人属性初始化字典\n\t    this.PlayerInitData = {\n\t\t\t\t\t\t\t    \"EventIDList\":[],\n\t\t\t\t\t\t\t    \"OrderDict\":{},\n\t\t\t\t\t\t    };\n\t\t//创建房间字典\t\t\t\t    \n\n        this.InitConfig();\n\n        this.Log(\"Init\");\n    },\n\n    //切换账号\n    OnReload:function(){\n    },\n\n    /**\n     * 初始化配置\n     */\n    InitConfig:function(){\n\t    for(var configName in this.InitDataDict){\n\t\t    var optionData = this.InitDataDict[configName];\n\t\t    for(var option in optionData){\n\t\t\t    if (this.HaveConfigProperty(configName, option)){\n\t\t\t\t    continue\n\t\t\t    }\n\t\t\t    console.log(\"初始化配置：\"+option+\",value: \"+optionData[option]);\n\t\t\t    this.SetConfigProperty(configName, option, optionData[option]);\n\t\t    }\n\t    }\n    },\n\n    /**\n     * 初始化配置\n     */\n    PlayerLogin:function(heroID){\n\n    \theroID = heroID.toString();\n\n    \t//初始化\n        if (!this.HaveConfigProperty(heroID, this.linkServer)){\n            this.SetConfigProperty(heroID, this.linkServer, {});\n        }\n\n        let playerDataDict = this.GetConfigProperty(heroID, this.linkServer);\n        //初始化失败\n        if(!playerDataDict){\n        \tthis.ErrLog(\"PlayerLogin(%s) fail\", heroID);\n            return\n        }\n\n\t    for(var property in this.PlayerInitData){\n\t\t    if(!playerDataDict.hasOwnProperty(property)){\n\t\t\t    playerDataDict[property] = this.PlayerInitData[property];\n\t\t    }\n\t    }\n        this.SetConfigProperty(heroID, this.linkServer, playerDataDict);\n\n    },\n\n\n    //--------------------------获取接口----------------------------------\n    /**\n     * 获取配置值\n     * @param configName\n     * @param option\n     * @param value\n     */\n    SetConfigProperty:function(configName, option, value){\n\n\t    let canUse = cc.sys.localStorage.CanUse;\n\n\t    let configInfo = {};\n\t    if(canUse){\n\t\t    configInfo = cc.sys.localStorage.getItem(configName)\n\t\t    if (configInfo){\n\t\t\t    configInfo = JSON.parse(configInfo);\n\t\t    }\n\t\t    //如果没有初始化\n\t\t    else{\n\t\t\t    configInfo = {};\n\t\t    }\n\n\t\t    configInfo[option] = value;\n\n\t\t    //如果多开客户端，会出现数据不能被保存，因为底层只接受一个数据连接请求\n\t\t    cc.sys.localStorage.setItem(configName, JSON.stringify(configInfo));\n\t    }\n\t    else{\n\t\t    configInfo = this.InitDataDict[configName];\n\t\t    if(!configInfo){\n\t\t\t    this.ErrLog(\"SetConfigProperty not find(%s)\", configName);\n\t\t\t    return false\n\t\t    }\n\t\t    configInfo[option] = value;\n\t    }\n\n\n        return true;\n    },\n\n    /**\n     * 获取玩家登录服务器本地数据\n     * @param configName\n     * @param option\n     */\n    SetPlayerConfigProperty:function(heroID, option, value){\n\t    heroID = heroID.toString();\n\n\t    let canUse = cc.sys.localStorage.CanUse;\n\t    if(canUse){\n\n\t\t    let configInfo = cc.sys.localStorage.getItem(heroID)\n\t\t    if (configInfo){\n\t\t\t    configInfo = JSON.parse(configInfo);\n\t\t    }\n\t\t    else{\n\t\t\t    configInfo = {};\n\t\t    }\n\n\t\t    //如果没有服务器数据,则初始化\n\t\t    if(!configInfo.hasOwnProperty(this.linkServer)){\n\t\t\t    configInfo[this.linkServer] = {};\n\t\t    }\n\n\t\t    let serverDataDict = configInfo[this.linkServer];\n\t\t    serverDataDict[option] = value;\n\n\t\t    //如果多开客户端，会出现数据不能被保存，因为底层只接受一个数据连接请求\n\t\t    cc.sys.localStorage.setItem(heroID, JSON.stringify(configInfo));\n\t    }\n\t    else{\n\t\t    this.PlayerInitData[option] = value;\n\t    }\n\n        return true;\n\n    },\n\n    //--------------------------设置接口----------------------------------\n    /**\n     * 设置配置值\n     * @param configName\n     * @param option\n     */\n    GetConfigProperty:function(configName, option){\n\t    configName = configName.toString();\n\n\t    let canUse = cc.sys.localStorage.CanUse;\n\n        let configInfo = {};\n\t\tif(canUse){\n\t\t\tconfigInfo = cc.sys.localStorage.getItem(configName);\n\t\t\tif (configInfo){\n\t\t\t\tconfigInfo = JSON.parse(configInfo);\n\t\t\t}\n\t\t}\n\t\t//可能运行环境没有支持localStorage,则取默认字典数据\n\t    else{\n\t\t\tconfigInfo = this.InitDataDict[configName];\n\t\t\tthis.ErrLog(\"GetConfigProperty fail, configName:%s option:%s is not find\", configName, option);\n\t\t}\n\n\t    if(!configInfo){\n\t\t    this.ErrLog(\"GetConfigProperty(%s,%s)\", configName, option);\n\t\t    return\n\t    }\n\n        if (!configInfo.hasOwnProperty(option)){\n            this.ErrLog(\"GetConfigProperty fail, not find the option:%s\", option);\n            return;\n        }\n\n        return configInfo[option]\n    },\n\n    /**\n     * 获取玩家登录服务器本地数据\n     * @param configName\n     * @param option\n     */\n    GetPlayerConfigProperty:function(heroID, option){\n\n        heroID = heroID.toString();\n\t    let canUse = cc.sys.localStorage.CanUse;\n\t    let serverDataDict = {};\n\n\t    if(canUse){\n\t\t    let configInfo = cc.sys.localStorage.getItem(heroID)\n\t\t    if (configInfo){\n\t\t\t    configInfo = JSON.parse(configInfo);\n\t\t\t    if (!configInfo.hasOwnProperty(this.linkServer)){\n\t\t\t\t    this.ErrLog(\"GetPlayerConfigProperty(%s) fail, not find the linkServer:%s\", heroID, this.linkServer);\n\t\t\t\t    return;\n\t\t\t    }\n\t\t\t    serverDataDict = configInfo[this.linkServer]\n\t\t    }\n\t    }\n\t    else{\n\t\t    serverDataDict = this.PlayerInitData;\n\t\t    this.ErrLog(\"GetPlayerConfigProperty fail, heroID:%s option:%s is not find\", heroID, option);\n\t    }\n\n        if(!serverDataDict.hasOwnProperty(option)){\n            this.ErrLog(\"GetPlayerConfigProperty(%s,%s) not find %s\", heroID, this.linkServer, option);\n            return\n        }\n\n        return serverDataDict[option];\n    },\n\n    //--------------------------判断接口----------------------------------\n    /**\n     * 判断是否存在配置值\n     * @param configName\n     * @param option\n     */\n    HaveConfigProperty:function(configName, option){\n\n        let configInfo = cc.sys.localStorage.getItem(configName)\n        if (!configInfo){\n            return false;\n        }\n        configInfo = JSON.parse(configInfo);\n        if (!configInfo.hasOwnProperty(option)){\n            return false;\n        }\n        return true;\n    },\n\n    HavePlayerConfigProperty:function(heroID, option){\n\n        heroID = heroID.toString();\n        let configInfo = cc.sys.localStorage.getItem(heroID)\n        if (!configInfo){\n            return false;\n        }\n        configInfo = JSON.parse(configInfo);\n        if (!configInfo.hasOwnProperty(this.linkServer)){\n            return false;\n        }\n        let serverDataDict = configInfo[this.linkServer];\n\n        return serverDataDict.hasOwnProperty(option);\n    },\n\n    //--------------------------操作接口----------------------------------\n    /**\n     * 删除配置值\n     * @param configName\n     * @param option\n     */\n    Remove:function(configName){\n        cc.sys.localStorage.removeItem(configName);\n    },\n\n});\n\n\nvar g_LocalDataManager = null;\n\n/**\n * 绑定模块外部方法\n */\nexports.GetModel = function(){\n    if(!g_LocalDataManager){\n        g_LocalDataManager = new LocalDataManager();\n    }\n    return g_LocalDataManager;\n}"]}